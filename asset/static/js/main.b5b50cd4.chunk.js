(this.webpackJsonpriac=this.webpackJsonpriac||[]).push([[0],{326:function(e,t,a){e.exports=a(350)},332:function(e,t,a){},350:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(22),c=a.n(l),i=a(182),o=a(260);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var u=a(183),s=a(91),d=new u.a({typePolicies:{Query:{fields:{activeUser:{read:function(){return m()}}}}}}),m=Object(s.b)(),b=(a(332),a(35)),p=a(40),f=a(10),E=a(31),v=a(396),O=a(406),j=a(407),g=a(404),h=a(89),x=a(405),w=a(403),y=a(291),C=a(272),k=a.n(C),S=a(173),N=a.n(S),q=a(233),A=a.n(q),$=a(232),F=a.n($),T=a(200),I=a.n(T),B=a(231),M=a.n(B),D=a(273),P=a.n(D),L=a(408),W=a(5),z=a(440),R=a(398),H=a(402),Q=a(351),U=a(400),_=a(401),V=a(196),G=a.n(V),K=a(270),X=a.n(K),J=Object(v.a)({list:{width:250},fullList:{width:"auto"}});function Z(e){var t=e.open,a=e.close,n=J();return r.a.createElement(z.a,{anchor:"left",open:t,onClose:a},r.a.createElement("div",{className:Object(W.a)(n.list),role:"presentation",onClick:a,onKeyDown:a},r.a.createElement(R.a,null,r.a.createElement(Q.a,{button:!0,key:1},r.a.createElement(U.a,null,r.a.createElement(X.a,null)),r.a.createElement(_.a,{primary:"\u0413\u0435\u043d\u0435\u0440\u0430\u0442\u043e\u0440 \u043d\u043e\u043c\u0435\u0440\u043e\u0432"}))),r.a.createElement(H.a,null),r.a.createElement(R.a,null,r.a.createElement(b.b,{to:"pollappsetting"},r.a.createElement(Q.a,{button:!0,key:1},r.a.createElement(U.a,null,r.a.createElement(G.a,null)),r.a.createElement(_.a,{primary:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"}))))))}var Y=a(56),ee=a(21),te=a(14);function ae(){var e=Object(ee.a)(["\n  query GetActiveUser {\n    activeUser @client {\n      username\n    }\n  }\n"]);return ae=function(){return e},e}function ne(){var e=Object(ee.a)(["\n  query CurrentUserQuery {\n    currentUser {\n      id\n      username\n    }\n  }\n"]);return ne=function(){return e},e}var re=Object(te.a)(ne());Object(te.a)(ae());function le(){var e=Object(ee.a)(["\n  query GetActiveUser {\n    activeUser @client {\n      username\n    }\n  }\n"]);return le=function(){return e},e}var ce=Object(te.a)(le());function ie(){var e=Object(ee.a)(["\n  mutation Logout {\n    logout\n  }\n"]);return ie=function(){return e},e}var oe=Object(te.a)(ie()),ue=Object(v.a)((function(e){return{grow:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:Object(E.a)({display:"none"},e.breakpoints.up("xs"),{display:"block"}),inputRoot:{color:"inherit"},sectionDesktop:Object(E.a)({display:"none"},e.breakpoints.up("sm"),{display:"flex"}),sectionMobile:Object(E.a)({display:"flex"},e.breakpoints.up("sm"),{display:"none"}),link:{color:"white",textDecoration:"none"}}})),se=function(e){var t=e.title,a=ue(),n=r.a.useState(null),l=Object(f.a)(n,2),c=l[0],i=l[1],o=r.a.useState(null),u=Object(f.a)(o,2),s=u[0],d=u[1],m=r.a.useState(null),p=Object(f.a)(m,2),E=p[0],v=p[1],C=r.a.useState(!1),S=Object(f.a)(C,2),q=S[0],$=S[1],T=Object(Y.useMutation)(oe,{update:function(e){return e.writeQuery({query:re,data:{currentUser:null}})}}),B=Object(f.a)(T,1)[0],D=Object(Y.useQuery)(ce,{onCompleted:function(e){return console.log(e)}}),W=(D.loading,D.error,D.user),z=Boolean(c),R=Boolean(E),H=Boolean(s),Q=function(e){i(e.currentTarget)},U=function(e){d(e.currentTarget)},_=function(){v(null)},V=function(){i(null),_()},G=function(){d(null),_()},K="primary-account-menu",X=r.a.createElement(y.a,{anchorEl:c,anchorOrigin:{vertical:"top",horizontal:"right"},id:K,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:z,onClose:V},r.a.createElement(w.a,{onClick:function(){B(),V()}},"\u0412\u044b\u0445\u043e\u0434")),J=r.a.createElement(y.a,{anchorEl:s,anchorOrigin:{vertical:"top",horizontal:"right"},id:"primary-apps-menu",keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:H,onClose:G},r.a.createElement(w.a,{onClick:G},"\u041f\u0423\u0421\u0422\u041e_1"),r.a.createElement(w.a,{onClick:G},"\u041f\u0423\u0421\u0422\u041e_2")),ee=r.a.createElement(y.a,{anchorEl:E,anchorOrigin:{vertical:"top",horizontal:"right"},id:"primary-account-menu-mobile",keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:R,onClose:_},r.a.createElement(b.b,{to:"analyze"},r.a.createElement(w.a,null,r.a.createElement(g.a,{color:"inherit"},r.a.createElement(x.a,{badgeContent:0,color:"secondary"},r.a.createElement(M.a,null))),r.a.createElement("p",null,"XML"))),r.a.createElement(w.a,null,r.a.createElement(g.a,{color:"inherit"},r.a.createElement(x.a,{badgeContent:0,color:"secondary"},r.a.createElement(F.a,null))),r.a.createElement("p",null,"\u0423\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f")),r.a.createElement(w.a,{onClick:U},r.a.createElement(g.a,{"aria-label":"more apps","aria-controls":"primary-apps-menu","aria-haspopup":"true",color:"inherit"},r.a.createElement(N.a,null)),r.a.createElement("p",null,"\u041f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f")),r.a.createElement(w.a,{onClick:Q},r.a.createElement(g.a,{"aria-label":"account of current user","aria-controls":"primary-search-account-menu","aria-haspopup":"true",color:"inherit"},r.a.createElement(A.a,null)),r.a.createElement("p",null,"Profile")));return r.a.createElement("div",{className:a.grow},r.a.createElement(O.a,{position:"static"},r.a.createElement(j.a,null,r.a.createElement(g.a,{edge:"start",className:a.menuButton,color:"inherit",onClick:function(e){$(!0)},"aria-label":"open drawer"},r.a.createElement(k.a,null)),r.a.createElement(h.a,{className:a.title,variant:"h6",noWrap:!0},t),r.a.createElement("div",{className:a.grow}),r.a.createElement("div",{className:a.sectionDesktop},r.a.createElement(b.b,{to:"tester"},r.a.createElement(g.a,{color:"inherit"},r.a.createElement(x.a,{badgeContent:0,color:"secondary"},r.a.createElement(P.a,{className:a.link})))),r.a.createElement(b.b,{to:"analyze"},r.a.createElement(g.a,{color:"inherit"},r.a.createElement(x.a,{badgeContent:0,color:"secondary"},r.a.createElement(M.a,{className:a.link})))),r.a.createElement(g.a,{color:"inherit"},r.a.createElement(x.a,{badgeContent:0,color:"secondary"},r.a.createElement(F.a,null))),r.a.createElement(g.a,{"aria-label":"apps","aria-controls":"primary-apps-menu","aria-haspopup":"true",onClick:U,color:"inherit"},r.a.createElement(x.a,{badgeContent:0,color:"secondary"},r.a.createElement(N.a,null))),r.a.createElement(g.a,{edge:"end","aria-label":"account of current user","aria-controls":K,"aria-haspopup":"true",onClick:Q,color:"inherit"},r.a.createElement(x.a,{badgeContent:0,color:"secondary"},r.a.createElement(L.a,{title:W?W.currentUser.userName:""},r.a.createElement(A.a,null))))),r.a.createElement("div",{className:a.sectionMobile},r.a.createElement(g.a,{"aria-label":"show more","aria-controls":"primary-account-menu-mobile","aria-haspopup":"true",onClick:function(e){v(e.currentTarget)},color:"inherit"},r.a.createElement(I.a,null))))),r.a.createElement(Z,{open:q,close:function(e){$(!1)}}),ee,X,J)},de=a(423),me=a(415),be=a(410),pe=a(411),fe=a(412),Ee=a(414),ve=a(276),Oe=a.n(ve),je=a(277),ge=a.n(je),he=a(413),xe=a(437),we=a(9),ye=Object(we.a)((function(e){return{badge:{backgroundColor:"#44b700",color:"#44b700",boxShadow:"0 0 0 2px ".concat(e.palette.background.paper),"&::after":{position:"absolute",top:"-1px",left:"-1px",width:"100%",height:"100%",borderRadius:"50%",animation:"$ripple 1.2s infinite ease-in-out",border:"1px solid currentColor",content:'""'}},"@keyframes ripple":{"0%":{transform:"scale(.8)",opacity:1},"100%":{transform:"scale(2.4)",opacity:0}}}}))(x.a),Ce=Object(v.a)({root:{display:"flex"},avatar:{backgroundColor:function(e){return e.color}}}),ke=function(e){var t=Ce(e);return r.a.createElement("div",{className:t.root},r.a.createElement(ye,{overlap:"circle",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot"},r.a.createElement(xe.a,{className:t.avatar},e.liter)))},Se=Object(v.a)({root:{display:"flex"},avatar:{backgroundColor:function(e){return e.color}}}),Ne=function(e){var t=Se(e);return r.a.createElement("div",{className:t.root},r.a.createElement(xe.a,{className:t.avatar},e.liter))},qe=a(409);a(436),a(227);var Ae=a(278),$e=a.n(Ae),Fe=a(279),Te=a.n(Fe),Ie=["\u042d\u043a\u0441\u043f\u0435\u0440\u0442\u043d\u044b\u0439","\u0412\u0441\u0435\u0440\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0439"],Be=["\u0418\u043d\u0442\u0435\u0440\u0432\u044c\u044e\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435","\u0410\u043d\u043a\u0435\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435","\u0422\u0435\u043b\u0435\u0444\u043e\u043d\u043d\u044b\u0439","Web-\u043e\u043f\u0440\u043e\u0441"],Me=Object(v.a)((function(e){return{root:{maxWidth:"100%",margin:"10px 0"},header:{padding:"16px 16px 0 16px"},content:{flex:1,padding:"10px 16px 0 16px"},media:{height:0},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"}}})),De=function(e){var t=e.data,a=Me(),l=Object(n.useState)(t.id),c=(Object(f.a)(l,1)[0],Object(n.useState)(!1)),i=Object(f.a)(c,2),o=i[0],u=(i[1],Boolean(o),function(){return t.active?r.a.createElement(ke,{type:t.type,color:t.color},t.type):r.a.createElement(Ne,{type:t.type,color:t.color},t.type)}),s=function(){return r.a.createElement(L.a,{title:"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b"},r.a.createElement(b.b,{to:"/results/".concat(t.id,"/").concat(t.code)},r.a.createElement(g.a,null,r.a.createElement(Oe.a,null))))},d=function(){return r.a.createElement(L.a,{title:"\u0412\u0432\u043e\u0434 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432"},r.a.createElement(b.b,{to:"/drive/".concat(t.id,"/").concat(t.code)},r.a.createElement(g.a,null,r.a.createElement(ge.a,null))))},m=function(){return r.a.createElement(L.a,{title:"\u0424\u0430\u0439\u043b\u044b"},r.a.createElement(b.b,{to:"/attachment/".concat(t.id,"/").concat(t.code)},r.a.createElement(g.a,null,r.a.createElement($e.a,null))))},p=function(){return r.a.createElement(L.a,{title:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"},r.a.createElement(b.b,{to:"/poll-settings/".concat(t.id,"/").concat(t.code)},r.a.createElement(g.a,null,r.a.createElement(G.a,null))))},E=function(){return r.a.createElement(L.a,{title:"\u0417\u0430\u043c\u0435\u0442\u043a\u0438"},r.a.createElement(b.b,{to:"/poll-wiki/".concat(t.id,"/").concat(t.code)},r.a.createElement(g.a,null,r.a.createElement(Te.a,null))))};return r.a.createElement(n.Fragment,null,r.a.createElement(be.a,{className:a.root},r.a.createElement(pe.a,{className:a.header,avatar:r.a.createElement(u,null),action:r.a.createElement(p,null),title:t.code+": "+t.title,subheader:t.startDate+" - "+t.endDate}),r.a.createElement(fe.a,{className:a.content},r.a.createElement(he.a,{container:!0,spacing:1},r.a.createElement(he.a,{item:!0,xs:12,sm:6},r.a.createElement(h.a,{variant:"button",display:"block",gutterBottom:!0},"\u041c\u0435\u0442\u043e\u0434 \u043f\u0440\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u044f: ",Be[t.way])),r.a.createElement(he.a,{item:!0,xs:12,sm:6},r.a.createElement(h.a,{variant:"button",display:"block",gutterBottom:!0},"\u0420\u0435\u0441\u043f\u043e\u043d\u0434\u0435\u043d\u0442\u043e\u0432: ",t.sample)))),r.a.createElement(Ee.a,{disableSpacing:!0},r.a.createElement(he.a,{container:!0,item:!0,xs:12},r.a.createElement(s,null),r.a.createElement(d,null)),r.a.createElement(he.a,{container:!0,item:!0,xs:12,justify:"flex-end"},r.a.createElement(m,null),r.a.createElement(E,null)))))},Pe=function(e){return e.data.polls.map((function(e,t){return r.a.createElement(De,{key:t,data:e})}))},Le=a(19),We=a(3),ze=a(60),Re=a(88),He=a(418),Qe=a(421),Ue=a(420),_e=a(419),Ve=a(430),Ge=a(282),Ke=a.n(Ge),Xe=a(353);var Je=function(e){var t=function(e){var t=new DOMParser,a=t.parseFromString("INVALID","text/xml").getElementsByTagName("parsererror")[0].namespaceURI,n=t.parseFromString(e,"text/xml");return!(n.getElementsByTagNameNS(a,"parsererror").length>0)&&n}(e);if(t){var a={},n=t.getElementsByTagName("opros")[0];return a.title=n.getAttribute("name"),a.code=n.getAttribute("cod"),a.start=n.getAttribute("start_date"),a.end=n.getAttribute("end_date"),a.structure={data:""},a}return!1},Ze=Object(v.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}})),Ye=function(e){var t,a=e.field,l=Object(ze.a)(e,["field"]),c=l.errorMessage,i=(l.touched,l.setFieldValue),o=a.name,u=(a.value,a.onChange,a.onBlur),s=Object(n.useState)(!1),d=Object(f.a)(s,2),m=d[0],b=d[1],p=Object(n.useState)(void 0),v=Object(f.a)(p,2),O=(v[0],v[1],Object(n.useState)(0)),j=Object(f.a)(O,2),g=j[0],w=(j[1],Ze()),y=Object(n.useRef)();return r.a.createElement(r.a.Fragment,null,r.a.createElement(Xe.a,{className:w.backdrop,open:m},r.a.createElement(me.a,{color:"inherit"})),r.a.createElement("input",(t={style:{display:"none"},id:o,name:o,type:"file"},Object(E.a)(t,"id",o),Object(E.a)(t,"ref",y),Object(E.a)(t,"onBlur",u),Object(E.a)(t,"onInput",(function(e){e.preventDefault(),b(!0);var t=new FileReader,a=e.target.files[0];a&&(t.onloadend=function(){var e=t.result,n=Je(e);if(!n)return console.log("\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 XML"),void i("mainconfig","");b(!1);var r=/^(\d{2}).(\d{2}).(\d{4})$/;i("title",n.title),i("startdate",n.start.replace(r,"$3-$2-$1")),i("enddate",n.end.replace(r,"$3-$2-$1")),i("code",n.code),i("xmlfile",a)},t.readAsText(a))})),t)),r.a.createElement(x.a,{color:"secondary",badgeContent:g,style:{top:"5px"}},r.a.createElement(qe.a,{variant:"contained",color:"default",startIcon:r.a.createElement(Ke.a,null),onClick:function(){y&&y.current.click()}},"XML")),c?r.a.createElement(h.a,{variant:"caption",color:"error"},c):null)},et=a(98),tt=function(e){var t=e.field,a=Object(ze.a)(e,["field"]),n=a.errorMessage,l=a.label,c=a.type,i=a.touched,o=t.name,u=t.value,s=t.onChange,d=t.onBlur;return r.a.createElement("div",null,r.a.createElement(Ve.a,{fullWidth:!0,type:c,name:o,label:l,value:u,error:!(!i||!n),helperText:i&&n?n:void 0,onChange:s,onBlur:d,InputLabelProps:{shrink:!0}}))},at=function(e){var t=e.field,a=Object(ze.a)(e,["field"]),n=a.errorMessage,l=a.label,c=a.touched,i=a.array,o=t.name,u=t.value,s=t.onChange,d=t.onBlur;return r.a.createElement("div",null,r.a.createElement(Ve.a,{select:!0,fullWidth:!0,name:o,label:l,value:u,error:!(!c||!n),helperText:c&&n?n:void 0,onChange:s,onBlur:d,InputLabelProps:{shrink:!0}},i.map((function(e,t){return r.a.createElement(w.a,{key:t,value:t},e)}))))},nt=function(e){var t=e.open,a=e.closeHndl,n=e.saveHndl,l=["text/xml"],c=et.d().shape({title:et.e().required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),startdate:et.a().required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),enddate:et.a().required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),code:et.e().matches(/^[A-Za-z]{3}[0-9]{2}-[0-9]{2}?$/,"\u0424\u043e\u0440\u043c\u0430\u0442 \u043d\u0435 \u0432\u0430\u043b\u0438\u0434\u043d\u044b\u0439").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),sample:et.c().min(1,"\u041d\u0435 \u043c\u0435\u043d\u044c\u0448\u0435 \u043e\u0434\u043d\u043e\u0433\u043e").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),type:et.e().ensure().required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),way:et.e().ensure().required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),xmlfile:et.b().required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435 \u0444\u043e\u0440\u043c\u044b").test("fileSize","\u0421\u043b\u0438\u0448\u043a\u043e\u043c \u0431\u043e\u043b\u044c\u0448\u043e\u0439 \u0444\u0430\u0439\u043b",(function(e){return e&&e.size<=1048576})).test("fileFormat","\u041d\u0435\u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u043c\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442",(function(e){return e&&l.includes(e.type)}))});return r.a.createElement(He.a,{className:"add-poll-dialog",disableBackdropClick:!0,disableEscapeKeyDown:!0,open:t,maxWidth:"sm","aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(_e.a,{id:"alert-dialog-title"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043e\u043f\u0440\u043e\u0441"),r.a.createElement(Ue.a,null,r.a.createElement(Re.b,{initialValues:{xmlfile:void 0,title:void 0,startdate:void 0,enddate:void 0,code:void 0,sample:10,type:1,way:1,comment:void 0},validationSchema:c,validateOnBlur:!0,onSubmit:function(e,t){var r=t.setSubmitting;n(e),a(),r(!0)}},(function(e){e.saveHndl,e.values;var t=e.errors,n=e.touched,l=(e.dirty,e.isSubmitting),c=(e.handleReset,e.handleSubmit),i=e.handleChange,o=e.handleBlur,u=e.setFieldValue;return r.a.createElement("form",{onSubmit:c},r.a.createElement(he.a,{container:!0,spacing:2},r.a.createElement(he.a,{item:!0,xs:6,sm:6},r.a.createElement(Re.a,{name:"xmlfile",component:Ye,setFieldValue:u,errorMessage:t.xmlfile?t.xmlfile:void 0,touched:n.xmlfile,onBlur:o})),r.a.createElement(he.a,{item:!0,xs:12,sm:12},r.a.createElement(Re.a,{name:"title",type:"text",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435",setFieldValue:u,component:tt,errorMessage:t.title,touched:n.title,onBlur:o})),r.a.createElement(he.a,{item:!0,xs:12,sm:6},r.a.createElement(Re.a,{name:"startdate",type:"date",label:"\u0414\u0430\u0442\u0430 \u043d\u0430\u0447\u0430\u043b\u0430",setFieldValue:u,component:tt,errorMessage:t.startdate,touched:n.startdate,onBlur:o})),r.a.createElement(he.a,{item:!0,xs:12,sm:6},r.a.createElement(Re.a,{name:"enddate",type:"date",label:"\u0414\u0430\u0442\u0430 \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f",setFieldValue:u,component:tt,errorMessage:t.enddate,touched:n.enddate,onBlur:o})),r.a.createElement(he.a,{item:!0,xs:12,sm:6},r.a.createElement(Re.a,{name:"code",label:"\u041a\u043e\u0434 \u043e\u043f\u0440\u043e\u0441\u0430",type:"text",setFieldValue:u,component:tt,errorMessage:t.code,touched:n.code,onChange:i,onBlur:o})),r.a.createElement(he.a,{item:!0,xs:12,sm:6},r.a.createElement(Re.a,{name:"sample",type:"number",label:"\u0412\u044b\u0431\u043e\u0440\u043a\u0430",setFieldValue:u,component:tt,errorMessage:t.sample,touched:n.sample,onChange:i,onBlur:o})),r.a.createElement(he.a,{item:!0,xs:12,sm:6},r.a.createElement(Re.a,{name:"type",label:"\u0422\u0438\u043f \u043e\u043f\u0440\u043e\u0441\u0430",array:Ie,setFieldValue:u,component:at,errorMessage:t.type,touched:n.type,onChange:i,onBlur:o})),r.a.createElement(he.a,{item:!0,xs:12,sm:6},r.a.createElement(Re.a,{name:"way",label:"\u0421\u043f\u043e\u0441\u043e\u0431 \u043f\u0440\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u044f",array:Be,component:at,errorMessage:t.way,touched:n.way,onChange:i,onBlur:o})),r.a.createElement(he.a,{item:!0,xs:12},r.a.createElement(Re.a,{name:"comment",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",component:tt,errorMessage:t.comment,touched:n.comment,onChange:i,onBlur:o}))),r.a.createElement(Qe.a,null,r.a.createElement(qe.a,{onClick:a,color:"primary"},"\u041e\u0442\u043c\u0435\u043d\u0430"),r.a.createElement(qe.a,{type:"submit",disabled:l},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")))}))))};function rt(){var e=Object(ee.a)(["\n  mutation addNewPoll($newPoll: PollWithConfig!, $poolOfQuestions: [QuestionInput], $logic: LogicInput, $topic: [TopicInput]) {\n    addPoll(poll: $newPoll, questions: $poolOfQuestions, logic: $logic, topic: $topic) {\n      title\n    }\n  }\n"]);return rt=function(){return e},e}var lt=Object(te.a)(rt()),ct=a(422),it=a(284),ot=a.n(it),ut=Object(v.a)((function(e){return{root:{position:"absolute",top:"10px",left:"-55px"},small:{position:"fixed",bottom:"30px",right:"30px"}}})),st=function(e){var t=e.onClick,a=ut();return r.a.createElement("div",{className:a.small},r.a.createElement(ct.a,{color:"secondary","aria-label":"add",onClick:t},r.a.createElement(ot.a,null)))},dt=function(e){var t=e.refetch,a=Object(n.useState)(!1),l=Object(f.a)(a,2),c=l[0],i=l[1],o=Object(Y.useMutation)(lt,{onCompleted:function(){return t()}}),u=Object(f.a)(o,2),s=u[0],d=(u[1].newPoll,function(e){var t={questions:[],logic:[],topic:[]},a=new FileReader;return new Promise((function(n,r){a.onloadend=function(){for(var e=a.result,r=(new DOMParser).parseFromString(e,"text/xml"),l=r.getElementsByTagName("vopros"),c=l.length,i=0;i<c;i++){for(var o={title:l[i].getAttribute("text"),topic:+l[i].getAttribute("tema_id"),limit:+l[i].getAttribute("limit"),type:+l[i].getAttribute("type_id"),order:+l[i].getAttribute("sort"),answers:[]},u=l[i].getElementsByTagName("otvet"),s=u.length,d=0;d<s;d++){var m={title:u[d].getAttribute("otvet_text"),code:u[d].getAttribute("otvet_cod").padStart(3,"0"),type:+u[d].getAttribute("otvet_type"),order:+u[d].getAttribute("otvet_sort")};o.answers[d]=m}t.questions[i]=o}var b=r.getElementsByTagName("restrict"),p=b.length;if(p){for(var f=[],E=0;E<p;E++){var v={code:b[E].getAttribute("otvet_cod").padStart(3,"0"),restrict:b[E].getAttribute("restrict_cod").padStart(3,"0"),type:b[E].getAttribute("restrict_type")};f[E]=v}t.logic=f}var O=r.getElementsByTagName("tema"),j=O.length;if(j)for(var g=0;g<j;g++){var h={id:O[g].getAttribute("id"),title:O[g].getAttribute("name")};t.topic[g]=h}n(t)},a.readAsText(e)}))}),m=function(e){var t=e.logic.reduce((function(e,t,a){return"3"===t.type?e.exclude[t.code]?e.exclude[t.code]={restrict:[].concat(Object(Le.a)(e.exclude[t.code].restrict),[t.restrict])}:e.exclude[t.code]={restrict:[t.restrict]}:"5"===t.type&&(e.unique=[].concat(Object(Le.a)(e.unique),[t.code])),e}),{unique:[],exclude:{}}),a=e.questions.reduce((function(e,a){return a.limit>1&&(t.unique=[].concat(Object(Le.a)(t.unique),Object(Le.a)(a.answers.filter((function(e){return 3===e.type})).map((function(e){return e.code}))))),e.difficult=[].concat(Object(Le.a)(e.difficult),Object(Le.a)(a.answers.filter((function(e){return 3===e.type})).map((function(e){return e.code})))),e.freeAnswers=[].concat(Object(Le.a)(e.freeAnswers),Object(Le.a)(a.answers.filter((function(e){return 2===e.type})).map((function(e){return e.code})))),e}),{difficult:[],freeAnswers:[]});return e.logic=Object(We.a)(Object(We.a)({},t),a),console.log(e.logic),e};return r.a.createElement(n.Fragment,null,r.a.createElement(st,{onClick:function(){i(!0)}}),r.a.createElement(nt,{open:c,saveHndl:function(e){var t=e.xmlfile;t.size&&new Promise((function(e,a){e(d(t))})).then((function(t){var a=m(t),n={title:e.title,startDate:e.startdate,endDate:e.enddate,code:e.code,sample:e.sample,type:e.type,way:e.way,comment:e.comment};e.xmlfile;s({variables:{newPoll:Object(We.a)(Object(We.a)({},n),{},{comment:n.comment?n.comment:"",shortTitle:"",active:!0}),poolOfQuestions:a.questions,logic:Object(We.a)({},a.logic),topic:a.topic}})}))},closeHndl:function(){i(!1)}}))},mt=a(264);function bt(){var e=Object(ee.a)(["\n  mutation deletePoll($id: ID!) {\n    deletePoll(id: $id) {\n      title\n    }\n  }\n"]);return bt=function(){return e},e}function pt(){var e=Object(ee.a)(["\n  mutation addNewPoll($newPoll: PollWithConfig!, $poolOfQuestions: [QuestionInput], $logic: LogicInput, $topic: [TopicInput]) {\n    addPoll(poll: $newPoll, questions: $poolOfQuestions, logic: $logic, topic: $topic) {\n      title\n    }\n  }\n"]);return pt=function(){return e},e}function ft(){var e=Object(ee.a)(["\n  query pollsQuery {\n    polls {\n      id\n      title\n      code\n      liter\n      color\n      startDate\n      endDate\n      sample\n      way\n      type\n      complete\n      questionsCount\n      answersCount\n      active\n    }\n  }\n"]);return ft=function(){return e},e}var Et=Object(te.a)(ft()),vt=(Object(te.a)(pt()),Object(te.a)(bt()),function(e,t){var a=Object(mt.a)(Et),l=a.loading,c=a.error,i=a.data,o=a.refetch;return l?r.a.createElement(n.Fragment,null,r.a.createElement(me.a,null),r.a.createElement("p",null,"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430. \u041f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435 \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430")):c?r.a.createElement("p",null,"Error :("):r.a.createElement(n.Fragment,null,r.a.createElement(de.a,{maxWidth:"md"},r.a.createElement(Pe,{data:i})),r.a.createElement(dt,{refetch:o}))}),Ot=function(){return r.a.createElement(n.Fragment,null,r.a.createElement(se,{title:"\u041e\u043f\u0440\u043e\u0441\u044b"}),r.a.createElement(vt,null))},jt=a(285),gt=a.n(jt),ht=Object(v.a)((function(e){return{grow:{flexGrow:1},menuButton:{marginRight:e.spacing(2),textDecoration:"none"},title:Object(E.a)({display:"none"},e.breakpoints.up("xs"),{display:"block"}),inputRoot:{color:"inherit"},sectionDesktop:{display:"flex"},sectionMobile:Object(E.a)({display:"flex"},e.breakpoints.up("sm"),{display:"none"}),arrow:{color:"white",textDecoration:"none"}}})),xt=function(e){var t=e.title,a=ht(),n=r.a.useState(null),l=Object(f.a)(n,2),c=l[0],i=l[1],o=Boolean(c),u=function(){i(null)},s=r.a.createElement(y.a,{anchorEl:c,anchorOrigin:{vertical:"top",horizontal:"right"},id:"primary-apps-menu",keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:o,onClose:u},r.a.createElement(w.a,{onClick:u},"\u041f\u0423\u0421\u0422\u041e_1"),r.a.createElement(w.a,{onClick:u},"\u041f\u0423\u0421\u0422\u041e_2"));return r.a.createElement("div",{className:a.grow},r.a.createElement(O.a,{position:"static"},r.a.createElement(j.a,null,r.a.createElement(b.b,{to:"/"},r.a.createElement(g.a,{edge:"start",className:a.menuButton,color:"inherit","aria-label":"open drawer"},r.a.createElement(gt.a,{className:a.arrow}))),r.a.createElement(h.a,{className:a.title,variant:"h6",noWrap:!0},t),r.a.createElement("div",{className:a.grow}),r.a.createElement("div",{className:a.sectionDesktop},r.a.createElement(g.a,{edge:"end","aria-label":"apps","aria-controls":"primary-apps-menu","aria-haspopup":"true",onClick:function(e){i(e.currentTarget)},color:"inherit"},r.a.createElement(N.a,null))))),s)},wt="http://192.168.31.83:4000",yt=function(e){var t=e.answer,a=e.focusHandler,l=e.blurHandler,c=Object(n.useRef)(null);Object(n.useEffect)((function(){t.focus&&c.current.focus(),""!==t.freeAnswerText&&(c.current.value=t.freeAnswerText)}),[]);return t.showFreeAnswer?r.a.createElement("span",null,r.a.createElement("input",{className:"free-answer",type:"text",ref:c,"data-code":t.code,"data-keycode":t.keyCode,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0432\u043e\u0431\u043e\u0434\u043d\u044b\u0439 \u043e\u0442\u0432\u0435\u0442",onKeyUp:function(e){var t=e.keyCode;if(13===t){var a=c.current.value.replaceAll(/,/gi,";");return c.current.value=a,void e.currentTarget.blur()}if(27===t)return""!==c.current.value?void(c.current.value=""):void e.currentTarget.blur()},onFocus:a,onBlur:l})):null},Ct=a(209),kt=a.n(Ct),St=function(e){var t=e.answer,a=e.clickHandler,l=e.focusHandler,c=e.blurHandler,i=e.settings,o=Object(n.useRef)(null),u=["answer-wrap"],s=["answer-title"];t.selected&&u.push("selected"),t.disabled&&s.push("disabled");return r.a.createElement(n.Fragment,null,r.a.createElement("div",{onClick:function(e){a(o.current)},className:u.join(" "),ref:o,"data-code":t.keyCode},r.a.createElement("div",{className:"answer-title"},r.a.createElement("span",{className:"answer-key"},t.showIndex),r.a.createElement("span",null," "),i.codesShow&&r.a.createElement("span",{className:"answer-code"},t.code),r.a.createElement("span",null," - "),r.a.createElement("span",{className:s.join(" ")},t.title),r.a.createElement("span",{className:"free-answer-icon"},t.freeAnswer?r.a.createElement(kt.a,{fontSize:"small"}):null),r.a.createElement("span",{className:"answer-exclude-message"},t.excludeM)),r.a.createElement("div",null,t.showFreeAnswer&&r.a.createElement(yt,{answer:t,focus:t.focus,focusHandler:l,blurHandler:c}))))},Nt=a(441),qt=a(435),At=Object(v.a)((function(e){return{root:{width:500,"& > * + *":{marginTop:e.spacing(3)}},errorText:{color:"red"}}}));function $t(e){var t=e.data,a=e.limit,l=e.settings,c=e.multipleHandler,i=At(),o=Object(n.useState)([]),u=Object(f.a)(o,2),s=u[0],d=u[1],m=Object(n.useState)([]),b=Object(f.a)(m,2),p=b[0],E=b[1],v=Object(n.useState)({state:!1,text:""}),O=Object(f.a)(v,2),j=O[0],g=O[1];Object(n.useEffect)((function(){var e=t.filter((function(e){if(e.selected)return e})),a=t.map((function(e){return e.code}));E(a),d(e)}),[]);return r.a.createElement("div",{className:i.root},r.a.createElement(qt.a,{multiple:a>1,id:"tags-standard",options:t,onChange:function(e,t,n){switch(n){case"select-option":if(t.length>a)return void g({state:!0,text:"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043e\u0442\u0432\u0435\u0442\u043e\u0432"});d(t),g(Object(We.a)(Object(We.a)({},j),{},{state:!1}));break;case"remove-option":d(t),g(Object(We.a)(Object(We.a)({},j),{},{state:!1}));break;case"clear":d([]),g(Object(We.a)(Object(We.a)({},j),{},{state:!1}))}},value:s,getOptionLabel:function(e){return e.title},getOptionDisabled:function(e){return e.disabled},renderOption:function(e){return l.codesShow?r.a.createElement("span",null,r.a.createElement("span",{style:{fontSize:"10px"}},e.code)," - ",e.title):e.title},onBlur:function(e){g(Object(We.a)(Object(We.a)({},j),{},{state:!1})),c(s,p)},renderTags:function(e,t){return e.map((function(e,a){return r.a.createElement(Nt.a,Object.assign({},t({index:a}),{variant:"outlined",key:a,label:l.codesShow?r.a.createElement("span",null,r.a.createElement("span",{style:{fontSize:"10px"}},e.code)," - ",e.title):r.a.createElement("span",null,e.title)}))}))},renderInput:function(e){return r.a.createElement(Ve.a,Object.assign({},e,{error:j.state,variant:"standard",label:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043e\u0442\u0432\u0435\u0442\u044b",helperText:j.state?j.text:""}))}}))}var Ft=function(e){var t=e.count,a=e.question,l=e.clickHandler,c=e.focusHandler,i=e.blurHandler,o=e.multipleHandler,u=e.settings;return r.a.createElement(n.Fragment,null,r.a.createElement("h3",{className:"question-title"},r.a.createElement("span",{className:"question-number"},t+1),r.a.createElement("span",null," - "),a.title),r.a.createElement("div",null,a.mega?r.a.createElement($t,{data:a.answers,limit:a.limit,settings:u,multipleHandler:o}):a.answers.map((function(e,t){return r.a.createElement(St,{key:t,answer:e,clickHandler:l,focusHandler:c,blurHandler:i,settings:u})}))))},Tt=a(425),It=a(431),Bt=a(433),Mt=[8,9,16,17,18,19,20,32,33,34,35,36,38,40,91,106,107,109,110,112,113,114,115,116,117,118,119,120,121,122,123,144],Dt=[27],Pt=[48,96,13],Lt={97:49,98:50,99:51,100:52,101:53,102:54,103:55,104:56,105:57},Wt=[37,39,49,50,51,52,53,54,55,56,57,81,87,69,82,84,89,85,73,79,80,65,83,68,70,71,72,74,75,76,90,88,67,97,98,99,100,101,102,103,104,105],zt=[["1",49],["2",50],["3",51],["4",52],["5",53],["6",54],["7",55],["8",56],["9",57],["Q",81],["W",87],["E",69],["R",82],["T",84],["Y",89],["U",85],["I",73],["O",79],["P",80],["A",65],["S",83],["D",68],["F",70],["G",71],["H",72],["J",74],["K",75],["L",76],["Z",90],["X",88],["C",67],["V",86],["B",66],["N",78],["M",77]];function Rt(e){return void 0!==Lt[e]?Lt[e]:e}var Ht=function(e){return function(e){return Wt.includes(e)}(e)?{do:1,trueCode:Rt(e)}:function(e){return Mt.includes(e)}(e)?{do:4}:function(e){return Dt.includes(e)}(e)?{do:2}:function(e){return Pt.includes(e)}(e)?{do:3}:{do:4}},Qt=function(e,t,a,n,r){var l=e.questions[t],c=[],i=[],o=n.invisible?l.answers.filter((function(e){return!n.invisible.includes(e.code)})):l.answers,u=!!n.criticalExclude&&n.criticalExclude,s=!1,d=!1,m=!1,b=o.map((function(e,t){var r={freeAnswer:!1,showFreeAnswer:!1,freeAnswerText:"",focus:!1,selected:!1,disabled:!1,exclude:[],excludeM:""};if(i.push(e.code),u){for(var b in u)b===e.code&&(r=Object(We.a)(Object(We.a)({},r),{},{exclude:[].concat(Object(Le.a)(r.exclude),Object(Le.a)(u[b]))})),u[b].includes(e.code)&&(r=Object(We.a)(Object(We.a)({},r),{},{exclude:[].concat(Object(Le.a)(r.exclude),[b])}));r.exclude.map((function(e){a.pool.includes(e)&&(r=Object(We.a)(Object(We.a)({},r),{},{disabled:!0,excludeM:"\u043f\u0440\u043e\u0442\u0438\u0432\u043e\u0440\u0435\u0447\u0438\u0442 \u043a\u043e\u0434\u0443 ".concat(e)}))}))}if(o.length>zt.length?c[t]=[t,t+1]:(c[t]=zt[t][1],r=Object(We.a)(Object(We.a)({},r),{},{showIndex:zt[t][0],keyCode:zt[t][1]})),a.pool.includes(e.code)&&(d=!0,r=Object(We.a)(Object(We.a)({},r),{},{selected:!0})),n.unique.includes(e.code)&&(s=!0,r=Object(We.a)(Object(We.a)({},r),{},{unique:!0})),n.unique.includes(e.code)&a.pool.includes(e.code)&&(m=!0),n.freeAnswers.includes(e.code)&&(r=Object(We.a)(Object(We.a)({},r),{},{freeAnswer:!0,focus:!0})),a[l.id])for(var p=a[l.id].data,f=0;f<p.length;f++)e.code===p[f].answerCode&&""!==p[f].freeAnswerText&&(r=Object(We.a)(Object(We.a)({},r),{},{freeAnswer:!0,showFreeAnswer:!0,freeAnswerText:p[f].freeAnswerText,focus:!1}));return Object(We.a)(Object(We.a)({},e),r)})),p={mega:!1,megaMltp:!1,multiple:!1};if(l.limit>1&&(p=Object(We.a)(Object(We.a)({},p),{},{multiple:!0})),p=o.length>zt.length?Object(We.a)(Object(We.a)({},p),{},{mega:!0,megaMltp:l.limit}):Object(We.a)(Object(We.a)({},p),{},{keyCodesPool:c}),b.reduce((function(e,t){return e+t.disabled}),0)===b.length)return r((function(e){return Object(We.a)(Object(We.a)({},e),{},Object(E.a)({},l.id,{data:[],codesPool:i,count:t}))})),{next:!0};void 0===a[l.id]&&r((function(e){return Object(We.a)(Object(We.a)({},e),{},Object(E.a)({},l.id,{data:[],codesPool:i,count:t}))}));var f=b.map((function(e,t){return d&&s?m?e.unique&e.selected?e:Object(We.a)(Object(We.a)({},e),{},{disabled:!0}):e.unique?Object(We.a)(Object(We.a)({},e),{},{disabled:!0}):e:e})).map((function(e){if(u)for(var t in u)if(a.pool.includes(t))return u[t].includes(e.code)?Object(We.a)(Object(We.a)({},e),{},{disabled:!0}):e;return e}));return{next:!1,data:Object(We.a)(Object(We.a)(Object(We.a)({},l),p),{},{answers:f})}},Ut=function(e){var t=new(window.AudioContext||window.webkitAudioContext);e=Object.assign({volume:.25,frequency:3020,duration:150,type:"sine"},e);var a=t.createOscillator(),n=t.createGain();a.connect(n),n.connect(t.destination),n.gain.value=e.volume,a.frequency.value=e.frequency,a.type=e.type,a.start(),setTimeout((function(){a.stop()}),e.duration)},_t=a(424),Vt=function(e){var t=e.open,a=e.handleClose,n=e.finishAll,l=e.confirm;return r.a.createElement("div",null,r.a.createElement(He.a,{open:t,onClose:a,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(_e.a,{id:"alert-dialog-title"},"\u0414\u0430\u043d\u043d\u0430\u044f \u0430\u043d\u043a\u0435\u0442\u0430 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0430."),r.a.createElement(Ue.a,null,r.a.createElement(_t.a,{id:"alert-dialog-description"},"\u041a\u0430\u0436\u0435\u0442\u0441\u044f \u0434\u0430\u043d\u043d\u0430\u044f \u0430\u043d\u043a\u0435\u0442\u0430 \u0437\u0430\u043a\u043e\u043d\u0447\u0435\u043d\u0430. \u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043a \u0434\u0440\u0443\u0433\u043e\u0439 \u0430\u043d\u043a\u0435\u0442\u0435?")),r.a.createElement(Qe.a,null,r.a.createElement(qe.a,{onClick:a,color:"primary"},"\u041e\u0442\u043c\u0435\u043d\u0430"),r.a.createElement(qe.a,{onClick:n,color:"primary"},"\u0417\u0430\u043a\u043e\u043d\u0447\u0438\u0442\u044c"),r.a.createElement(qe.a,{onClick:l,color:"primary",autoFocus:!0},"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0430\u044f"))))},Gt=function(e){var t=e.poll,a=e.logics,l=e.setCurrentQuestion,c=e.saveAndGoBack,i=e.saveWorksheet,o=t.questions.length,u=Object(n.useState)(null),s=Object(f.a)(u,2),d=s[0],m=s[1],b=Object(n.useState)({codesShow:!0}),p=Object(f.a)(b,2),v=p[0],O=p[1],j=Object(n.useState)(1),g=Object(f.a)(j,2),x=g[0],w=g[1],y=Object(n.useState)(a),C=Object(f.a)(y,1)[0],k=Object(n.useState)(0),S=Object(f.a)(k,2),N=S[0],q=S[1],A=Object(n.useState)({pool:[]}),$=Object(f.a)(A,2),F=$[0],T=$[1],I=Object(n.useState)(!1),B=Object(f.a)(I,2),M=B[0],D=B[1],P=Object(n.useState)(!1),L=Object(f.a)(P,2),W=L[0],z=L[1],R=Object(n.useState)(""),H=Object(f.a)(R,2),Q=H[0],U=H[1],_=function(e){var t=e.target,a=e.keyCode;if("BODY"==t.nodeName){var n=Ht(a);switch(n.do){case 1:return void Y(n.trueCode);case 3:return void V();case 2:return void Z();case 4:return}}},V=function(){if(M)J();else{if(F[d.id].data.length)return void G();Ut()}},G=function(){w(1),q(N<o-1?N+1:0)},K=function(){w(0),q(0===N?o-1:N-1)};Object(n.useEffect)((function(){return document.addEventListener("keyup",_),function(){document.removeEventListener("keyup",_)}})),Object(n.useEffect)((function(){var e=Qt(t,N,F,C,T);e&&(e.next?q(x?N+1:N-1):(m(e.data),l(e.data)))}),[N]);var X=function(e){var a=0;for(var n in e)"pool"!==n&&a++;if(a<t.questions.length)return!1;for(var r in e)if("pool"!==r){var l=e[r];if(!l.data.length){if(!C.criticalExclude)return U("\u041f\u0440\u043e\u043f\u0443\u0449\u0435\u043d ".concat(l.count+1,"\u0439 \u0432\u043e\u043f\u0440\u043e\u0441")),D(!1),!1;var c=function(){var t=e.pool,a=l.codesPool,n=C.criticalExclude;if(a.filter((function(e,a){for(var r in n)if(t.includes(r)&&n[r].includes(e))return!1;return!0})).length)return U("\u041f\u0440\u043e\u043f\u0443\u0449\u0435\u043d ".concat(l.count+1,"\u0439 \u0432\u043e\u043f\u0440\u043e\u0441")),D(!1),{v:!1}}();if("object"===typeof c)return c.v}}return U(""),D(!0),!0},J=function(){z(!0)},Z=function(){var e=F[d.id].data.reduce((function(e,t){return[].concat(Object(Le.a)(e),[t.answerCode])}),[]),t={};for(var a in F)a===d.id?t[d.id]=Object(We.a)(Object(We.a)({},t[d.id]),{},{data:[]}):t="pool"!==a?Object(We.a)(Object(We.a)({},t),{},Object(E.a)({},a,F[a])):Object(We.a)(Object(We.a)({},t),{},{pool:F.pool.filter((function(t){return!e.includes(t)}))});T(t),m((function(e){return Object(We.a)(Object(We.a)({},e),{},{answers:e.answers.map((function(e){return Object(We.a)(Object(We.a)({},e),{},{selected:!1,showFreeAnswer:!1,disabled:!1})})).map((function(e){var a=[];for(var n in C.criticalExclude)n===e.code&&(a=[].concat(Object(Le.a)(a),Object(Le.a)(C.criticalExclude[n]))),C.criticalExclude[n].includes(e.code)&&(a=[].concat(Object(Le.a)(a),[n]));for(var r=0;r<a.length;r++)if(t.pool.includes(a[r]))return Object(We.a)(Object(We.a)({},e),{},{disabled:!0,excludeM:"\u043f\u0440\u043e\u0442\u0438\u0432\u043e\u0440\u0435\u0447\u0438\u0442 \u043a\u043e\u0434\u0443 ".concat(a[r])});return Object(We.a)(Object(We.a)({},e),{},{disabled:!1,excludeM:""})}))})}));d.answers.reduce((function(e,t){return[].concat(Object(Le.a)(e),[t.code])}),[]);D(!1)},Y=function(e){var t=+e,a=d.keyCodesPool,n=d.answers.filter((function(e){return e.keyCode===t}))[0];if(39!==t)if(37!==t)if(a.includes(t)){if(F.pool.includes(n.code)){var r={};for(var l in F)r=l===d.id?Object(We.a)(Object(We.a)({},r),{},Object(E.a)({},d.id,Object(We.a)(Object(We.a)({},F[d.id]),{},{data:F[d.id].data.filter((function(e){return e.answerCode!==n.code}))}))):"pool"!==l?Object(We.a)(Object(We.a)({},r),{},Object(E.a)({},l,F[l])):Object(We.a)(Object(We.a)({},r),{},{pool:F.pool.filter((function(e){return e!==n.code}))});return T(r),m((function(e){return Object(We.a)(Object(We.a)({},e),{},{answers:e.answers.map((function(e){return e.code===n.code?Object(We.a)(Object(We.a)({},e),{},{selected:!1,showFreeAnswer:!1}):e})).map((function(e){return r[d.id].data.length?e:Object(We.a)(Object(We.a)({},e),{},{disabled:!1})})).map((function(e){var t=[];for(var a in C.criticalExclude)a===e.code&&(t=[].concat(Object(Le.a)(t),Object(Le.a)(C.criticalExclude[a]))),C.criticalExclude[a].includes(e.code)&&(t=[].concat(Object(Le.a)(t),[a]));for(var n=0;n<t.length;n++)if(r.pool.includes(t[n]))return Object(We.a)(Object(We.a)({},e),{},{disabled:!0,excludeM:"\u043f\u0440\u043e\u0442\u0438\u0432\u043e\u0440\u0435\u0447\u0438\u0442 \u043a\u043e\u0434\u0443 ".concat(t[n])});return Object(We.a)(Object(We.a)({},e),{},{disabled:!1,excludeM:""})})).map((function(e){return r[d.id].data.length&&e.unique?Object(We.a)(Object(We.a)({},e),{},{disabled:!0}):e}))})})),void X(r)}if(C.unique.includes(n.code)&&F[d.id].data.length)return void Ut();if(n.disabled||F[d.id].data.length>=d.limit)return void Ut();if(n.freeAnswer)return void m((function(e){return Object(We.a)(Object(We.a)({},e),{},{answers:e.answers.map((function(e){return e.keyCode===n.keyCode?Object(We.a)(Object(We.a)({},e),{},{selected:!0,showFreeAnswer:!0}):e}))})}));var c={answerCode:n.code,freeAnswer:!1,freeAnswerText:""};for(var i in C.criticalExclude)if(F.pool.includes(i)&&C.criticalExclude[i].includes(n.code))return void Ut();for(var o in C.nonCriticalExclude)F.pool.includes(o)&&C.nonCriticalExclude[o].includes(n.code)&&console.log("\u041e\u0442\u0432\u0435\u0442 \u043d\u0435 \u0441\u043e\u0432\u0441\u0435\u043c \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u0435\u043d");var u=Object.assign({},F);if(u[d.id].data.push(c),u.pool.push(n.code),T(u),m((function(e){return Object(We.a)(Object(We.a)({},e),{},{answers:e.answers.map((function(e){return e.keyCode===t?Object(We.a)(Object(We.a)({},e),{},{selected:!0}):e})).map((function(e){return C.unique.includes(e.code)&e.keyCode!==t?Object(We.a)(Object(We.a)({},e),{},{disabled:!0}):e})).map((function(e){return n.exclude.includes(e.code)?Object(We.a)(Object(We.a)({},e),{},{disabled:!0,excludeM:"\u043f\u0440\u043e\u0442\u0438\u0432\u043e\u0440\u0435\u0447\u0438\u0442 \u043a\u043e\u0434\u0443 ".concat(n.code)}):e}))})})),C.unique.includes(n.code)&&m((function(e){return Object(We.a)(Object(We.a)({},e),{},{answers:e.answers.map((function(e){return e.keyCode===t?e:Object(We.a)(Object(We.a)({},e),{},{disabled:!0})}))})})),X(u))return;if(F[d.id].data.length>=d.limit)return void setTimeout((function(){G()}),100)}else Ut();else setTimeout((function(){K()}),0);else setTimeout((function(){G()}),0)},ee=function(){return r.a.createElement(h.a,{variant:"overline",display:"block",gutterBottom:!0},Q)};return r.a.createElement(n.Fragment,null,r.a.createElement(Vt,{open:W,handleClose:function(){z(!1)},finishAll:function(){D(!1),z(!1),c(F)},confirm:function(){i(F),T({pool:[]}),q(0),D(!1),z(!1)}}),r.a.createElement(he.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement(he.a,{container:!0,xs:6,md:3,justify:"flex-start"},r.a.createElement(Tt.a,{value:"end",control:r.a.createElement(It.a,{color:"primary",onChange:function(e){O((function(e){return Object(We.a)(Object(We.a)({},e),{},{codesShow:!e.codesShow})}))},defaultChecked:v.codesShow}),label:"\u041a\u043e\u0434\u044b \u043e\u0442\u0432\u0435\u0442\u043e\u0432",labelPlacement:"end"})),r.a.createElement(Bt.a,{only:["sm","xs"]},r.a.createElement(he.a,{container:!0,md:6,justify:"center"},r.a.createElement(ee,null))),r.a.createElement(he.a,{container:!0,xs:6,md:3,justify:"flex-end"},r.a.createElement("p",null,"\u0412\u0441\u0435\u0433\u043e: ",r.a.createElement("span",null,r.a.createElement("strong",null,o)))),r.a.createElement(Bt.a,{mdUp:!0},r.a.createElement(he.a,{container:!0,xs:12,justify:"center"},r.a.createElement(ee,null)))),d&&r.a.createElement(Ft,{count:N,question:d,settings:v,clickHandler:function(e){var t=e.dataset.code,a=d.answers.filter((function(e){return e.keyCode===+t}))[0];a.freeAnswer&&a.selected||Y(t)},blurHandler:function(e){var t=e.currentTarget.value,a=e.currentTarget.dataset.code,n=e.currentTarget.dataset.keycode,r=d.answers.filter((function(e){return e.keyCode===+n}))[0];if(""===t){var l={};for(var c in F)l=c===d.id?Object(We.a)(Object(We.a)({},l),{},Object(E.a)({},d.id,Object(We.a)(Object(We.a)({},F[d.id]),{},{data:F[d.id].data.filter((function(e){return e.answerCode!==a}))}))):"pool"!==c?Object(We.a)(Object(We.a)({},l),{},Object(E.a)({},c,F[c])):Object(We.a)(Object(We.a)({},l),{},{pool:F.pool.filter((function(e){return e!==a}))});return T(l),m((function(e){return Object(We.a)(Object(We.a)({},e),{},{answers:e.answers.map((function(e){return e.code===a?Object(We.a)(Object(We.a)({},e),{},{selected:!1,showFreeAnswer:!1}):e})).map((function(e){return l[d.id].data.length?e:Object(We.a)(Object(We.a)({},e),{},{disabled:!1})})).map((function(e){var t=[];for(var a in C.criticalExclude)a===e.code&&(t=[].concat(Object(Le.a)(t),Object(Le.a)(C.criticalExclude[a]))),C.criticalExclude[a].includes(e.code)&&(t=[].concat(Object(Le.a)(t),[a]));for(var n=0;n<t.length;n++)if(l.pool.includes(t[n]))return Object(We.a)(Object(We.a)({},e),{},{disabled:!0,excludeM:"\u043f\u0440\u043e\u0442\u0438\u0432\u043e\u0440\u0435\u0447\u0438\u0442 \u043a\u043e\u0434\u0443 ".concat(t[n])});return Object(We.a)(Object(We.a)({},e),{},{disabled:!1,excludeM:""})})).map((function(e){return l[d.id].data.length&&e.unique?Object(We.a)(Object(We.a)({},e),{},{disabled:!0}):e}))})})),void X(l)}var i={answerCode:a,freeAnswer:!1,freeAnswerText:t},o={};F.pool.includes(a)?(o=Object.assign({},F))[d.id]=Object(We.a)(Object(We.a)({},o[d.id]),{},{data:F[d.id].data.map((function(e){return e.answerCode===a?Object(We.a)(Object(We.a)({},e),{},{freeAnswerText:t}):e}))}):((o=Object.assign({},F))[d.id].data.push(i),o.pool.push(a)),T(o),C.unique.includes(a)&&m((function(e){return Object(We.a)(Object(We.a)({},e),{},{answers:e.answers.map((function(e){return e.keyCode===+n?e:Object(We.a)(Object(We.a)({},e),{},{disabled:!0})}))})})),m((function(e){return Object(We.a)(Object(We.a)({},e),{},{answers:e.answers.map((function(e){return e.keyCode===a?Object(We.a)(Object(We.a)({},e),{},{selected:!0}):e})).map((function(e){return C.unique.includes(e.code)&e.keyCode!==a?Object(We.a)(Object(We.a)({},e),{},{disabled:!0}):e})).map((function(e){return r.exclude.includes(e.code)?Object(We.a)(Object(We.a)({},e),{},{disabled:!0,excludeM:"\u043f\u0440\u043e\u0442\u0438\u0432\u043e\u0440\u0435\u0447\u0438\u0442 \u043a\u043e\u0434\u0443 ".concat(r.code)}):e}))})})),X(o)||F[d.id].data.length>=d.limit-1&&setTimeout((function(){G()}),100)},multipleHandler:function(e,t){if(e.length){var a=e.map((function(e){return e.code})),n=e.map((function(e){return{answerCode:e.code,freeAnswer:!1,freeAnswerText:""}})),r=F.pool.filter((function(e){return!t.includes(e)}));return T((function(e){var t;return Object(We.a)(Object(We.a)({},e),{},(t={},Object(E.a)(t,d.id,Object(We.a)(Object(We.a)({},e[d.id]),{},{data:Object(Le.a)(n)})),Object(E.a)(t,"pool",[].concat(Object(Le.a)(r),Object(Le.a)(a))),t))})),void(e.length&&setTimeout((function(){G()}),100))}T((function(e){var a;return Object(We.a)(Object(We.a)({},e),{},(a={},Object(E.a)(a,d.id,Object(We.a)(Object(We.a)({},e[d.id]),{},{data:[]})),Object(E.a)(a,"pool",e.pool.filter((function(e){return!t.includes(e)}))),a))}))}}),r.a.createElement(qe.a,{onClick:K,variant:"contained",className:"control-button"},"\u041d\u0430\u0437\u0430\u0434"),r.a.createElement(qe.a,{onClick:G,variant:"contained",className:"control-button"},"\u0412\u043f\u0435\u0440\u0435\u0434"),M&&r.a.createElement(qe.a,{onClick:J,variant:"contained",className:"control-button"},"\u0424\u0438\u043d\u0438\u0448"))},Kt=a(432);function Xt(e){var t=e.open,a=e.handleClose,l=e.save,c=e.cities,i=Object(n.useState)(""),o=Object(f.a)(i,2),u=o[0],s=o[1];return r.a.createElement("div",null,r.a.createElement(He.a,{open:t,"aria-labelledby":"form-dialog-title"},r.a.createElement(_e.a,{id:"form-dialog-title"},"\u0413\u041e\u0420\u041e\u0414"),r.a.createElement(Ue.a,null,r.a.createElement(_t.a,null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0433\u043e\u0440\u043e\u0434 \u0432 \u043a\u043e\u0442\u043e\u0440\u043e\u043c \u043f\u0440\u043e\u0432\u043e\u0434\u0438\u043b\u0441\u044f \u043e\u043f\u0440\u043e\u0441"),r.a.createElement(Kt.a,{fullWidth:!0,native:!0,value:u.id,onChange:function(e){return function(e){var t=e.target,a=t.options,n=t.selectedIndex,r=t.value,l=a[n].innerHTML;s({id:r,title:l})}(e)}},r.a.createElement("option",{"aria-label":"None",disabled:!0,selected:!0,value:""}),c.map((function(e,t){return r.a.createElement("option",{key:t,value:e.id},e.title)})))),r.a.createElement(Qe.a,null,r.a.createElement(qe.a,{onClick:a,color:"primary"},"\u041e\u0442\u043c\u0435\u043d\u0430"),r.a.createElement(qe.a,{onClick:function(){l(u)},disabled:!Boolean(u),color:"primary"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"))))}var Jt=a(266);function Zt(){var e=Object(ee.a)(["\n  query citiesQ {\n    cities {\n      id\n      title\n    }\n  }\n"]);return Zt=function(){return e},e}function Yt(){var e=Object(ee.a)(["\n  query pollsQuery($id: ID!) {\n    poll(id: $id) {\n      id\n      questions{\n        id\n        title\n        limit\n        answers {\n          id\n          code\n          title\n        }\n      }\n      logic {\n        path\n      }\n    }\n  }\n"]);return Yt=function(){return e},e}var ea=Object(te.a)(Yt()),ta=Object(te.a)(Zt());function aa(){var e=Object(ee.a)(["\nmutation saveResult($poll: String!, $city: String!, $user: String!, $pool: [String], $data: [ResultData]) {\n  saveResult(\n    poll: $poll,\n    city: $city,\n    user: $user,\n    pool: $pool,\n    data: $data\n  )\n}\n"]);return aa=function(){return e},e}var na=Object(te.a)(aa()),ra=function(e){var t={section:/^\s*\[\s*([^\]]*)\s*\]\s*$/,param:/^\s*([^=]+?)\s*=\s*(.*?)\s*$/,comment:/^\s*#.*$/},a={},n=e.split(/[\r\n]+/),r=null;return n.forEach((function(e){if(!t.comment.test(e))if(t.param.test(e)){var n=e.match(t.param);r?a[r][n[1]]=la(n[2]):a[n[1]]=la(n[2])}else if(t.section.test(e)){var l=e.match(t.section);a[l[1]]={},r=l[1]}else 0==e.length&&r&&(r=null)})),function(e){var t=/([0-9]{1,})/gm,a={},n=null;for(var r in e)n=r.match(/[a-zA-Z]*/gm)[0],a[n]={};for(var l in e){n=l.match(/[a-zA-Z]*/gm)[0];var c=l.match(t);null!==c?a[n][c]=e[l]:a[n][1]=e[l]}return a}(a)};function la(e){var t,a=e.replace(/\s*/g,""),n={srange:/([0-9]{1,3})|\[(.+?)\]/gm},r=[];do{if((t=n.srange.exec(a))&&(void 0!==t[1]&&r.push(t[1]),void 0!==t[2])){var l=t[2];r=r.concat(ca(l))}}while(t);return r}function ca(e){return e.replace(/(\d{1,3})\s*-\s*(\d{1,3})/gm,(function(){var e=[],t=arguments.length<=1?void 0:arguments[1],a=arguments.length<=2?void 0:arguments[2];t>a&&(t=arguments.length<=2?void 0:arguments[2],a=arguments.length<=1?void 0:arguments[1]);for(var n=a-t+1;n;)t+="",e.push(t.padStart(3,"0")),t++,n--;return e})).split(",")}var ia=function(e){var t={};for(var a in console.log(e),e)!function(){switch(a){case"difficult":t=Object(We.a)(Object(We.a)({},t),{},{difficult:e[a][1].answers});break;case"freeAnswers":t=Object(We.a)(Object(We.a)({},t),{},{freeAnswers:e[a][1].answers});break;case"exclude":var n=e[a],r={},l={},c=function(e){"1"===n[e].critical[0]&&n[e].answers.map((function(t){r[t]=n[e].exclude})),"0"===n[e].critical[0]&&n[e].answers.map((function(t){l[t]=n[e].exclude}))};for(var i in n)c(i);t=Object(We.a)(Object(We.a)({},t),{},{criticalExclude:r,nonCriticalExclude:l});break;case"unique":t=Object(We.a)(Object(We.a)({},t),{},{unique:e[a][1].answers});break;case"invisible":var o=e[a],u=[];for(var s in o)u=[].concat(Object(Le.a)(u),Object(Le.a)(o[s].answers));t=Object(We.a)(Object(We.a)({},t),{},{invisible:u})}}();return console.log(t),t},oa=Object(v.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}})),ua=function(e){var t=e.id,a=oa(),l=Object(p.f)(),c=Object(n.useState)(null),i=Object(f.a)(c,2),o=i[0],u=i[1],s=Object(n.useState)(!1),d=Object(f.a)(s,2),m=d[0],b=d[1],E=Object(n.useState)(null),v=Object(f.a)(E,2),O=v[0],j=v[1],g=Object(n.useState)(!0),h=Object(f.a)(g,2),x=h[0],w=h[1],y=Object(n.useState)(null),C=Object(f.a)(y,2),k=C[0],S=C[1],N=Object(n.useState)(null),q=Object(f.a)(N,2),A=q[0],$=q[1],F=Object(n.useState)({multiple:!1}),T=Object(f.a)(F,2),I=T[0],B=T[1],M=Object(mt.a)(ea,{variables:{id:t},onCompleted:function(e){L(e.poll.logic.path)}}),D=(M.pollLoading,M.error),P=M.data,L=function(e){fetch(wt+e).then((function(e){return e.text()})).then((function(e){var t=ra(e),a=ia(t);S(a)}))},W=Object(Jt.a)(na),z=Object(f.a)(W,1)[0];Object(n.useEffect)((function(){if(k)if(k.invisible){var e=k.invisible,t=P.poll.questions.filter((function(t){for(var a=t.answers,n=a.length,r=0,l=0;l<n;l++)e.includes(a[l].code)&&r++;if(r!==n)return!0}));u({id:P.poll.id,questions:t})}else u({id:P.poll.id,questions:P.poll.questions})}),[k]);var R=Object(mt.a)(ta,{onCompleted:function(e){j(e.cities)}}),H=(R.citiesLoading,R.cError);R.cData;if(!o||!O||!k)return r.a.createElement(n.Fragment,null,r.a.createElement(me.a,null),r.a.createElement("p",null,"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430. \u041f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435 \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430"));if(D||H)return r.a.createElement("p",null,"Error :(");var Q=function(e){var t=[];for(var a in e)"pool"!==a&&t.push({id:a,data:e[a].data.map((function(e){return{code:e.answerCode,text:e.freeAnswerText}}))});return t};return r.a.createElement(n.Fragment,null,r.a.createElement(Xe.a,{className:a.backdrop,open:m},r.a.createElement(me.a,{color:"inherit"}),r.a.createElement("p",null,"\u041f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435, \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432")),r.a.createElement("div",{style:{backgroundColor:I.multiple?"rgb(208 226 252)":"#fff"}},r.a.createElement(de.a,{maxWidth:"md"},r.a.createElement(Xt,{open:x,cities:O,save:function(e){$(e),w(!1)},handleClose:function(){w(!1),l.push("/")}}),r.a.createElement(Gt,{poll:o,logics:k,setCurrentQuestion:B,saveAndGoBack:function(e){b(!0);var t=Q(e);z({variables:{poll:o.id,city:A.id,user:"5f73207d34750a3be7865de7",pool:e.pool,data:t}}),b(!1)},saveWorksheet:function(e){b(!0);var t=Q(e);z({variables:{poll:o.id,city:A.id,user:"5f73207d34750a3be7865de7",pool:e.pool,data:t}}),b(!1)}}))))},sa=function(){var e=Object(p.g)(),t=e.id,a=e.code;return r.a.createElement(n.Fragment,null,r.a.createElement(xt,{title:"\u041e\u043f\u0440\u043e\u0441 "+a+" - \u0432\u0431\u0438\u0432\u0430\u043d\u0438\u0435"}),r.a.createElement(ua,{id:t}))},da=a(429),ma=a(426),ba=a(428);function pa(){var e=Object(ee.a)(["\n  query pollQuery($id: ID!) {\n    poll(id: $id) {\n      id\n      title\n      code\n      liter\n      questionsCount\n      answersCount\n      questions {\n        id\n        title\n        limit\n        order\n        answers {\n          id\n          title\n          order\n          code\n        }\n      }\n      logic {\n        path\n      }\n    }\n  }\n"]);return pa=function(){return e},e}var fa=Object(te.a)(pa()),Ea=function(e){var t=e.id,a=Object(n.useState)(null),l=Object(f.a)(a,2),c=l[0],i=l[1],o=Object(n.useState)(null),u=Object(f.a)(o,2),s=u[0],d=u[1],m=Object(n.useState)(null),b=Object(f.a)(m,2),p=b[0],E=b[1],v=Object(n.useState)(null),O=Object(f.a)(v,2),j=O[0],g=O[1],h=Object(mt.a)(fa,{variables:{id:t},onCompleted:function(){i({id:w.poll.id,title:w.poll.title,questionsCount:w.poll.questionsCount,answersCount:w.poll.answersCount}),y(w.poll.logic.path)}}),x=h.loading,w=(h.error,h.data),y=function(e){fetch("http://localhost:4000".concat(e)).then((function(e){return e.text()})).then((function(e){var t=ra(e),a=ia(t);E(a)}))};if(Object(n.useEffect)((function(){if(p){var e=[];if(p.invisible){var t=p.invisible;e=w.poll.questions.filter((function(e){for(var a=e.answers,n=a.length,r=0,l=0;l<n;l++)t.includes(a[l].code)&&r++;if(r!==n)return!0}))}else e=w.poll.questions;var a=e.map((function(e,t){var a=e.answers.map((function(e,t){var a={};return p.invisible&&p.invisible.includes(e.code)&&(a=Object(We.a)(Object(We.a)({},a),{},{disabled:!0})),p.freeAnswers&&p.freeAnswers.includes(e.code)&&(a=Object(We.a)(Object(We.a)({},a),{},{freeAnswer:!0})),p.unique&&p.unique.includes(e.code)&&(a=Object(We.a)(Object(We.a)({},a),{},{unique:!0})),p.difficult&&p.difficult.includes(e.code)&&(a=Object(We.a)(Object(We.a)({},a),{},{difficult:!0})),Object(We.a)(Object(We.a)({},e),a)}));return Object(We.a)(Object(We.a)({},e),{},{answers:a})}));d(a)}}),[p]),x||!p||!s)return r.a.createElement(n.Fragment,null,r.a.createElement(me.a,null),r.a.createElement("p",null,"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430. \u041f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435 \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430"));return r.a.createElement(n.Fragment,null,r.a.createElement(he.a,{container:!0},r.a.createElement("h3",null,c.title),r.a.createElement(Ve.a,{id:"outlined-number",label:"Number",type:"number",value:j,onChange:function(e){var t=e.currentTarget.value;t<0||g(t)},InputLabelProps:{shrink:!0},variant:"outlined"}),r.a.createElement(qe.a,{variant:"contained",color:"primary",disabled:!j,onClick:function(){var e=j;console.log(s);for(var t=0;t<e;t++)s.map((function(e,t){}))}},"\u0413\u0435\u043d\u0435\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c")))};function va(e){var t=e.children,a=e.value,n=e.index,l=Object(ze.a)(e,["children","value","index"]);return r.a.createElement("div",Object.assign({role:"tabpanel",hidden:a!==n,id:"vertical-tabpanel-".concat(n),"aria-labelledby":"vertical-tab-".concat(n)},l),a===n&&r.a.createElement(ba.a,{p:3},r.a.createElement(h.a,null,t)))}function Oa(e){return{id:"vertical-tab-".concat(e),"aria-controls":"vertical-tabpanel-".concat(e)}}var ja=Object(v.a)((function(e){return{root:{flexGrow:1,backgroundColor:e.palette.background.paper,display:"flex"},tabs:{borderRight:"1px solid ".concat(e.palette.divider)}}})),ga=function(e){var t=e.id,a=ja(),n=r.a.useState(0),l=Object(f.a)(n,2),c=l[0],i=l[1];return r.a.createElement("div",{className:a.root},r.a.createElement(da.a,{orientation:"vertical",variant:"scrollable",value:c,onChange:function(e,t){i(t)},className:a.tabs},r.a.createElement(ma.a,Object.assign({label:"\u041e\u0431\u0449\u0438\u0435"},Oa(0))),r.a.createElement(ma.a,Object.assign({label:"\u041f\u043e \u041d.\u041f."},Oa(1))),r.a.createElement(ma.a,Object.assign({label:"\u041b\u0438\u043d\u0435\u0439\u043a\u0430"},Oa(2))),r.a.createElement(ma.a,Object.assign({label:"\u0421\u0440\u0430\u0432\u043d\u0435\u043d\u0438\u044f"},Oa(3))),r.a.createElement(ma.a,Object.assign({label:"\u0413\u0440\u0430\u0444\u0438\u043a\u0438"},Oa(4))),r.a.createElement(ma.a,Object.assign({label:"\u041f\u0430\u043a\u0435\u0442\u043d\u044b\u0439"},Oa(5))),r.a.createElement(ma.a,Object.assign({label:"\u0422\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435"},Oa(6)))),r.a.createElement(va,{value:c,index:0},"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u043e\u043f\u0440\u043e\u0441\u0430 ID - ",t),r.a.createElement(va,{value:c,index:1},"\u0420\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0435 \u043f\u043e \u043d\u0430\u0441\u0435\u043b\u0435\u043d\u043d\u044b\u043c \u043f\u0443\u043d\u043a\u0442\u0430\u043c"),r.a.createElement(va,{value:c,index:2},"\u041b\u0438\u043d\u0435\u0439\u043d\u043e\u0435 \u0440\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0435 \u043e\u0442\u0432\u0435\u0442\u043e\u0432"),r.a.createElement(va,{value:c,index:3},"\u0421\u0440\u0430\u0432\u043d\u0435\u043d\u0438\u044f \u0441 \u0430\u043d\u0430\u043b\u043e\u0433\u0438\u0447\u043d\u044b\u043c\u0438 \u043e\u043f\u0440\u043e\u0441\u0430\u043c\u0438"),r.a.createElement(va,{value:c,index:4},"\u0413\u0440\u0430\u0444\u0438\u043a\u0438"),r.a.createElement(va,{value:c,index:5},"\u041f\u0430\u043a\u0435\u0442\u043d\u044b\u0439 \u0412\u0412\u043e\u0434 \u0434\u0430\u043d\u043d\u044b\u0445"),r.a.createElement(va,{value:c,index:6},r.a.createElement(Ea,{id:t})))},ha=function(){var e=Object(p.g)(),t=e.id,a=e.code;return r.a.createElement(n.Fragment,null,r.a.createElement(xt,{title:"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b "+a}),r.a.createElement("div",{style:{paddingTop:"10px"}},r.a.createElement(de.a,{maxWidth:"xl"},r.a.createElement(ga,{id:t}))))};var xa=function(e){var t=function(e){var t=new DOMParser,a=t.parseFromString("INVALID","text/xml").getElementsByTagName("parsererror")[0].namespaceURI,n=t.parseFromString(e,"text/xml");return!(n.getElementsByTagNameNS(a,"parsererror").length>0)&&n}(e);if(t){for(var a=t.getElementsByTagName("a"),n=a.length,r=[],l=0;l<n;l++){for(var c={unit:a[l].getAttribute("usr_intrv"),date:a[l].getAttribute("date_intrv"),lan:a[l].getAttribute("start-lan"),lon:a[l].getAttribute("start-lon")},i=a[l].getElementsByTagName("v"),o=i.length,u=[],s=0;s<o;s++){for(var d=i[s].getElementsByTagName("o"),m=d.length,b=0;b<m;b++){var p=d[b].getAttribute("c").padStart(3,"0");u.push(p)}c.answers=u}r.push(c)}return r}return!1},wa=Object(v.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}})),ya=function(){var e=Object(n.useState)(null),t=Object(f.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(!1),i=Object(f.a)(c,2),o=i[0],u=i[1],s=wa(),d=function(e){var t=e.data;return console.log(t),""!==t.lan||""!==t.lon?t.answers.toString()+",999":t.answers.toString()+",999-"};return r.a.createElement(n.Fragment,null,r.a.createElement(Xe.a,{className:s.backdrop,open:o},r.a.createElement(me.a,{color:"inherit"})),r.a.createElement("input",{type:"file",onInput:function(e){e.preventDefault(),u(!0);var t=new FileReader,a=e.target.files[0];a&&(t.onloadend=function(){var e=t.result,a=xa(e);return a?(l(a),void u(!1)):(u(!1),void console.log("\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 XML"))},t.readAsText(a))}}),r.a.createElement("div",{className:"parcha-results"},a?a.map((function(e,t){return r.a.createElement("div",null,r.a.createElement(d,{data:e}))})):r.a.createElement("p",null,"\u041f\u043e\u0434\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0434\u0430\u043d\u043d\u044b\u0435")))},Ca=a(434),ka=a(236),Sa=function(e){var t=e.data;return r.a.createElement(n.Fragment,null,r.a.createElement(he.a,{container:!0,spacing:3},t.map((function(e,t){var a=e.person,n=e.places.map((function(e){var t=e.title,a=e.workDays.map((function(e){return r.a.createElement("span",null,r.a.createElement("span",null,e),r.a.createElement("br",null))}));return r.a.createElement("span",null,r.a.createElement("span",{className:"work-title"},t),r.a.createElement("br",null),r.a.createElement("span",null,a))}));return r.a.createElement(he.a,{item:!0,xs:6,sm:6,md:4},r.a.createElement(ka.a,null,r.a.createElement("span",null,"\u2116 \u043f.\u043f. ",t+1),r.a.createElement("br",null),r.a.createElement("span",null,"\u2116 \u043f\u043e \u0441\u043f\u0438\u0441\u043a\u0443 ",a[0]),r.a.createElement("br",null),r.a.createElement("span",null,a[1]),r.a.createElement("span",{className:"person-name"},"".concat(a[2]," ").concat(a[3]," ").concat(a[4].slice(0,-1)," ")),r.a.createElement("br",null),r.a.createElement("span",null,"".concat(a[2]," ").concat(a[3].substring(0,1),".").concat(a[4].substring(0,1),". ")),r.a.createElement("br",null),r.a.createElement("span",null,"\u0414\u0430\u0442\u0430 \u0440\u043e\u0436\u0434\u0435\u043d\u0438\u044f: ",a[5]),r.a.createElement("br",null),r.a.createElement("span",null,"\u0414\u0430\u0442\u0430 \u0443\u0432\u043e\u043b\u044c\u043d\u0435\u043d\u0438\u044f:"),r.a.createElement("span",{className:"person-out"}," ",a[6]),r.a.createElement(H.a,null),r.a.createElement("span",{className:"work-header"},r.a.createElement("em",null,"\u041c\u0435\u0441\u0442\u0430 \u0440\u0430\u0431\u043e\u0442\u044b:")),r.a.createElement("br",null),r.a.createElement("span",null,n)))}))))},Na=function(e,t){for(var a=function(e,t){for(var a=[],n=[],r=[].concat(Object(Le.a)(t.empty),Object(Le.a)(t.need)),l=0;l<e.length;l++){for(var c=e[l][2],i=e[l][3],o=(e[l][4],c.split(" ")[0].toLowerCase()),u=0,s=0;s<r.length;s++){o===r[s].person[0].toLowerCase()&i===r[s].person[3]&&u++}u?n.push(e[l]):a.push(e[l])}for(var d=Object(Le.a)(t.need),m=[],b=[],p=0;p<n.length;p++){for(var f=n[p][0],E=n[p][1],v=n[p][2],O=n[p][3],j=n[p][4],g=v.split(" ")[0].toLowerCase(),h=0,x=0;x<d.length;x++){if(g===d[x].person[0].toLowerCase()&O===d[x].person[3]){var w=[f,E].concat(Object(Le.a)(d[x].person),[j]);m.push({person:w,data:d[x].data}),h++}}if(!h){var y=[f,E,v,O,j];b.push(y)}}return m}(e,t),n=a.length,r=[],l=0;l<n;l++){var c=a[l],i=c.person,o=c.data.split("\n").slice(3);r.push({person:i,places:Object(Le.a)(Aa(o.slice(1)))})}return r},qa=function(e){var t=e.match(/([\u0430-\u044f\u0410-\u042f]+)\s(\d{4})/),a=t[1],n=t[2];switch(a){case"\u044f\u043d\u0432\u0430\u0440\u044c":return"01.01."+n;case"\u0444\u0435\u0432\u0440\u0430\u043b\u044c":return"01.02."+n;case"\u043c\u0430\u0440\u0442":return"01.03."+n;case"\u0430\u043f\u0440\u0435\u043b\u044c":return"01.04."+n;case"\u043c\u0430\u0439":return"01.05."+n;case"\u0438\u044e\u043d\u044c":return"01.06."+n;case"\u0438\u044e\u043b\u044c":return"01.07."+n;case"\u0430\u0432\u0433\u0443\u0441\u0442":return"01.08."+n;case"\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044c":return"01.09."+n;case"\u043e\u043a\u0442\u044f\u0431\u0440\u044c":return"01.10."+n;case"\u043d\u043e\u044f\u0431\u0440\u044c":return"01.11."+n;case"\u0434\u0435\u043a\u0430\u0431\u0440\u044c":return"01.12."+n}},Aa=function(e){for(var t=[],a=1,n="",r=[],l=/^(\S+) (\d{4})\s/,c=0;c<e.length;c++)l.test(e[c])?(r.push(e[c]),c===e.length-1&&(t=[].concat(Object(Le.a)(t),[{title:n,work:r}])),a=1):(a?(t=[].concat(Object(Le.a)(t),[{title:n,work:r}]),n=e[c],r=[]):n+=" "+e[c],a=0);return t.slice(1)},$a=Object(v.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}})),Fa=function(){var e=Object(n.useState)(null),t=Object(f.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(null),i=Object(f.a)(c,2),o=i[0],u=i[1],s=Object(n.useState)(!1),d=Object(f.a)(s,2),m=d[0],b=d[1],p=Object(n.useState)(null),E=Object(f.a)(p,2),v=E[0],O=E[1],j=Object(n.useState)(null),g=Object(f.a)(j,2),h=g[0],x=g[1],w=Object(n.useState)(null),y=Object(f.a)(w,2),C=y[0],k=y[1],S=Object(n.useState)(null),N=Object(f.a)(S,2),q=N[0],A=N[1],$=$a();return r.a.createElement(n.Fragment,null,r.a.createElement(Xe.a,{className:$.backdrop,open:m},r.a.createElement(me.a,{color:"inherit"})),r.a.createElement(he.a,{container:!0,spacing:3},r.a.createElement(he.a,{item:!0,xs:!0},r.a.createElement(ba.a,null,r.a.createElement("label",null,"\u0421\u043f\u0438\u0441\u043e\u043a \u0432\u043e\u0435\u043d\u043d\u044b\u0445"),r.a.createElement("br",null),r.a.createElement("input",{type:"file",onInput:function(e){e.preventDefault(),O(null),b(!0);var t=new FileReader,a=e.target.files[0];a&&(t.onloadend=function(){var e=function(e){for(var t=[],a=e.split("\n"),n=0;n<a.length;n++){var r=[],l=a[n].split(";");r.push(l[0],l[1],l[2],l[3],l[4]),t.push(r)}return t}(t.result);u(e),b(!1)}),t.readAsText(a)}}))),r.a.createElement(he.a,{item:!0,xs:!0},r.a.createElement(ba.a,null,r.a.createElement("label",null,"\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u0435\u0441\u0438\u043e\u043d\u043d\u043e\u0433\u043e \u0444\u043e\u043d\u0434\u0430"),r.a.createElement("br",null),r.a.createElement("input",{type:"file",onInput:function(e){e.preventDefault(),O(null),b(!0);var t=new FileReader,a=e.target.files[0];a&&(t.onloadend=function(){var e=function(e){for(var t=[],a=[],n=e.split("\n\r"),r=/\u043d\u0435\u0442 \u0441\u0432\u0435\u0434\u0435\u043d.., \u0441\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u044e\u0449.. \u043f\u0435\u043d\u0441\u0438\u043e\u043d\u043d.. \u043f\u0440\u0430\u0432.?/,l=0;l<n.length;l++)if(r.test(n[l])){var c=[],i=n[l].split(" ");c.push(i[7],i[8],i[9],i[10]),t.push({person:c,data:null})}else{var o=[],u=n[l].split(" ");o.push(u[7],u[8],u[9],u[10]);var s=n[l];a.push({person:o,data:s})}return{empty:t,need:a}}(t.result);l(e),b(!1)}),t.readAsText(a)}})))),r.a.createElement(he.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:3},r.a.createElement(he.a,{item:!0},r.a.createElement(qe.a,{variant:"contained",color:"primary",onClick:function(){if(a&&o){O(null);var e=Na(o,a);k(e),x(!0)}else O("\u041d\u0435 \u0432\u0441\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u043f\u043e\u0434\u0433\u0440\u0443\u0436\u0435\u043d\u044b")}},"\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c")),r.a.createElement(he.a,{item:!0},r.a.createElement(qe.a,{variant:"contained",color:"primary",onClick:function(){if(h){var e=C.map((function(e,t){for(var a=/^(\d{2}).(\d{2}).(\d{4})/,n=Date.parse(e.person[6].replace(a,"01.$2.$3")),r=e.person[6].match(a),l=Date.parse("01."+r[2]+"."+(parseInt(r[3],10)+2)),c=e.places,i=[],o=0;o<c.length;o++){for(var u=c[o].work,s=[],d=0;d<u.length;d++){var m=Date.parse(qa(u[d]));m>=n&m<=l&&s.push(u[d])}s.length&&i.push({title:c[o].title,workDays:s})}return!!i.length&&Object(We.a)(Object(We.a)({},e),{},{places:i})})).filter((function(e){return e}));console.log(e),A(e)}else O(a&&o?"\u0421\u043f\u0435\u0440\u0432\u0430 \u043d\u0443\u0436\u043d\u043e \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c":"\u041d\u0435 \u0432\u0441\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u043f\u043e\u0434\u0433\u0440\u0443\u0436\u0435\u043d\u044b")}},"\u0421\u0440\u0430\u0432\u043d\u0438\u0442\u044c \u0434\u0430\u0442\u044b"))),r.a.createElement("p",null),v?r.a.createElement(Ca.a,{severity:"error"},v):r.a.createElement("p",null),r.a.createElement("div",{className:"parcha-results"},q?r.a.createElement(Sa,{data:q}):r.a.createElement("p",null)))};function Ta(e){var t=e.children,a=e.value,n=e.index,l=Object(ze.a)(e,["children","value","index"]);return r.a.createElement("div",Object.assign({role:"tabpanel",className:"right-pannel",hidden:a!==n,id:"vertical-tabpanel-".concat(n),"aria-labelledby":"vertical-tab-".concat(n)},l),a===n&&r.a.createElement(ba.a,{p:3},r.a.createElement(h.a,null,t)))}function Ia(e){return{id:"vertical-tab-".concat(e),"aria-controls":"vertical-tabpanel-".concat(e)}}var Ba=Object(v.a)((function(e){return{root:{flexGrow:1,backgroundColor:e.palette.background.paper,display:"flex"},tabs:{borderRight:"1px solid ".concat(e.palette.divider),overflow:"visible"}}})),Ma=function(e){e.id,e.code;var t=Ba(),a=r.a.useState(0),n=Object(f.a)(a,2),l=n[0],c=n[1];return r.a.createElement("div",{className:t.root},r.a.createElement(da.a,{orientation:"vertical",variant:"scrollable",value:l,onChange:function(e,t){c(t)},className:t.tabs},r.a.createElement(ma.a,Object.assign({label:"\u041f\u0430\u0440\u0447\u0430"},Ia(0))),r.a.createElement(ma.a,Object.assign({label:"Word"},Ia(1)))),r.a.createElement(Ta,{value:l,index:0},r.a.createElement(ya,null)),r.a.createElement(Ta,{value:l,index:1},r.a.createElement(Fa,null)))},Da=function(){Object(p.g)().id;return r.a.createElement(n.Fragment,null,r.a.createElement(xt,{title:"\u0410\u043d\u0430\u043b\u0438\u0437\u0430\u0442\u043e\u0440 \u0434\u0430\u043d\u043d\u044b\u0445"}),r.a.createElement("div",{style:{paddingTop:"10px"}},r.a.createElement(de.a,{maxWidth:"xl"},r.a.createElement(Ma,null))))},Pa=a(25),La=a(228),Wa=Object(La.a)((function(){var e=Object(n.useState)((function(){return Object(Pa.l)({secondsPassed:0})})),t=Object(f.a)(e,1)[0];Object(n.useEffect)((function(){var e=setInterval((function(){t.secondsPassed++}),1e3);return function(){clearTimeout(e)}}),[]);var a=function(e){var t=e.children,a=e.color;return r.a.createElement("div",{className:"test-nested-"+a},t)};return r.a.createElement(a,{color:"green"},r.a.createElement("span",null,"Seconds passed: ",t.secondsPassed," "))})),za=function(){return r.a.createElement(n.Fragment,null,r.a.createElement(xt,{title:"\u0422\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0438\u043d\u0435\u0440\u0444\u0435\u0439\u0441\u0430"}),r.a.createElement(de.a,{maxWidth:"lg"},r.a.createElement(Wa,null)))},Ra=a(287),Ha=a.n(Ra),Qa=a(286),Ua=a.n(Qa);function _a(){var e=Object(ee.a)(["\n  query pollQuery($id: ID!) {\n    poll(id: $id) {\n      id\n      title\n      code\n      liter\n      questionsCount\n      answersCount\n      questions {\n        id\n        title\n        limit\n        order\n        answers {\n          id\n          title\n          order\n          code\n        }\n      }\n      logic {\n        path\n      }\n    }\n  }\n"]);return _a=function(){return e},e}var Va=Object(te.a)(_a()),Ga=function(e){var t=e.answer,a=r.a.createElement(L.a,{title:"\u0421\u0432\u043e\u0431\u043e\u0434\u043d\u044b\u0439 \u043e\u0442\u0432\u0435\u0442"},r.a.createElement(kt.a,null)),n=r.a.createElement(L.a,{title:"\u0417\u0430\u0442\u0440\u0443\u0434\u043d\u044f\u044e\u0441\u044c \u043e\u0442\u0432\u0435\u0442\u0438\u0442\u044c"},r.a.createElement(Ua.a,null)),l=r.a.createElement(L.a,{title:"\u0423\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u0439 \u043e\u0442\u0432\u0435\u0442"},r.a.createElement(Ha.a,null)),c=[];return t.difficult&&c.push(n),t.freeAnswer&&c.push(a),t.unique&&c.push(l),c},Ka=function(e){var t=e.answer,a=e.index;return r.a.createElement("div",{className:t.disabled?"answer-card invisible":"answer-card"},r.a.createElement("span",{className:"answer-number"},a+1,"."),r.a.createElement("span",{className:"devider"}," "),r.a.createElement("span",{className:"answer-code"},t.code),r.a.createElement("span",{className:"devider"}," - "),r.a.createElement("span",{className:"answer-title"},t.title),r.a.createElement("span",{className:"answer-extend"},r.a.createElement(Ga,{answer:t})))},Xa=function(e){var t=e.question,a=e.index;return r.a.createElement(be.a,{className:"question-card"},r.a.createElement(fe.a,null,r.a.createElement("div",{className:"question-header"},r.a.createElement(L.a,{title:"\u041c\u0430\u043a\u0441. \u043a\u043e\u043b-\u0432\u043e \u043e\u0442\u0432\u0435\u0442\u043e\u0432"},r.a.createElement("span",{className:"question-limit"},t.limit)),r.a.createElement("span",{className:"question-number"},a+1,". "),r.a.createElement("span",{className:"question-title",color:"textSecondary",gutterBottom:!0},t.title)),t.answers.map((function(e,t){return r.a.createElement(Ka,{key:t,answer:e,index:t})}))))},Ja=function(e){var t=e.id,a=Object(n.useState)(null),l=Object(f.a)(a,2),c=l[0],i=l[1],o=Object(n.useState)(null),u=Object(f.a)(o,2),s=u[0],d=u[1],m=Object(n.useState)(null),b=Object(f.a)(m,2),p=b[0],E=b[1],v=Object(mt.a)(Va,{variables:{id:t},onCompleted:function(){i({id:j.poll.id,title:j.poll.title,questionsCount:j.poll.questionsCount,answersCount:j.poll.answersCount}),g(j.poll.logic.path)}}),O=v.loading,j=(v.error,v.data),g=function(e){fetch(wt+e).then((function(e){return e.text()})).then((function(e){var t=ra(e),a=ia(t);E(a)}))};return Object(n.useEffect)((function(){if(p){var e=j.poll.questions.map((function(e,t){var a=e.answers.map((function(e,t){var a={};return p.invisible&&p.invisible.includes(e.code)&&(a=Object(We.a)(Object(We.a)({},a),{},{disabled:!0})),p.freeAnswers&&p.freeAnswers.includes(e.code)&&(a=Object(We.a)(Object(We.a)({},a),{},{freeAnswer:!0})),p.unique&&p.unique.includes(e.code)&&(a=Object(We.a)(Object(We.a)({},a),{},{unique:!0})),p.difficult&&p.difficult.includes(e.code)&&(a=Object(We.a)(Object(We.a)({},a),{},{difficult:!0})),Object(We.a)(Object(We.a)({},e),a)}));return Object(We.a)(Object(We.a)({},e),{},{answers:a})}));d(e)}}),[p]),!O&&p&&s?r.a.createElement(n.Fragment,null,r.a.createElement(he.a,{container:!0},r.a.createElement("h3",null,c.title),r.a.createElement(he.a,{className:"poll-info",container:!0,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement(ba.a,{m:1},r.a.createElement("div",null," \u0412\u043e\u043f\u0440\u043e\u0441\u043e\u0432: ",c.questionsCount)),r.a.createElement(ba.a,{m:1},r.a.createElement("div",null," \u041e\u0442\u0432\u0435\u0442\u043e\u0432: ",c.answersCount))),s.map((function(e,t){return r.a.createElement(Xa,{question:e,key:t,index:t})})))):r.a.createElement(n.Fragment,null,r.a.createElement(me.a,null),r.a.createElement("p",null,"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430. \u041f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435 \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430"))},Za=a(288),Ya=a.n(Za);function en(){var e=Object(ee.a)(["\nmutation saveConfigChanges($path: String!, $text: String!) {\n  saveConfig(path: $path, text: $text)\n}\n"]);return en=function(){return e},e}function tn(){var e=Object(ee.a)(["\n  query logicQuery($id: ID!) {\n    pollLogic(id: $id) {\n      id\n      path\n    }\n  }\n"]);return tn=function(){return e},e}var an=Object(te.a)(tn()),nn=Object(te.a)(en()),rn=function(e){var t=e.id,a=Object(n.useState)(null),l=Object(f.a)(a,2),c=l[0],i=l[1],o=Object(n.useState)(null),u=Object(f.a)(o,2),s=u[0],d=u[1],m=Object(n.useRef)(),b=Object(mt.a)(an,{variables:{id:t},onCompleted:function(){g(v.pollLogic.path)}}),p=b.loading,E=b.error,v=b.data,O=(b.refetch,Object(Y.useMutation)(nn,{})),j=Object(f.a)(O,1)[0],g=function(e){d(e),fetch(wt+e).then((function(e){return e.text()})).then((function(e){i(e)}))};return p||!c?r.a.createElement(n.Fragment,null,r.a.createElement(me.a,null),r.a.createElement("p",null,"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430. \u041f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435 \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430")):E?r.a.createElement("p",null,"\u041e\u0448\u0438\u0431\u043a\u0430. \u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! :("):r.a.createElement(n.Fragment,null,r.a.createElement(he.a,{item:!0,xs:12,sm:!0,container:!0},r.a.createElement(he.a,{container:!0},r.a.createElement(he.a,{item:!0,xs:!0,container:!0,direction:"column",spacing:2,alignItems:"flex-start"},r.a.createElement(he.a,{item:!0,xs:12},"\u041e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u0433\u043e \u0444\u0430\u0439\u043b\u0430")),r.a.createElement(he.a,{item:!0,xs:!0,container:!0,direction:"column",spacing:1,alignItems:"flex-end"},r.a.createElement(he.a,{item:!0,xs:12},r.a.createElement(L.a,{title:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"},r.a.createElement(Ya.a,{className:"save-config",onClick:function(e){j({variables:{path:s,text:m.current.value}})}})))),r.a.createElement(he.a,{item:!0,xs:12},r.a.createElement("textarea",{ref:m,defaultValue:c})))))},ln=a(235),cn=a(289),on=a.n(cn),un=function(e){var t=e.question,a=e.handleLimitInput,l=Object(n.useState)(t.limit),c=Object(f.a)(l,2),i=c[0],o=c[1];return r.a.createElement(he.a,{item:!0,xs:12,sm:6,lg:3,xl:2},r.a.createElement(ka.a,{className:"question-item",elevation:2},r.a.createElement(he.a,{item:!0,xs:12,sm:!0,container:!0},r.a.createElement(he.a,{item:!0,xs:!0,container:!0,direction:"column",spacing:2,alignItems:"flex-start"},r.a.createElement(he.a,{item:!0,xs:!0},r.a.createElement(L.a,{title:"\u041e\u0447\u0435\u0440\u0435\u0434\u043d\u043e\u0441\u0442\u044c \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f","aria-label":"add"},r.a.createElement(h.a,{variant:"body2",color:"primary"},t.order)))),r.a.createElement(he.a,{item:!0,xs:!0,container:!0,direction:"column",spacing:3,alignItems:"flex-end"},r.a.createElement(he.a,{item:!0,xs:!0,alignItems:"center",style:{cursor:"pointer"}},r.a.createElement(L.a,{title:"\u041c\u0435\u043d\u044e. \u0412 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435","aria-label":"add"},r.a.createElement(I.a,null)))),r.a.createElement(he.a,{item:!0},r.a.createElement(L.a,{title:"\u041b\u0438\u043c\u0438\u0442 \u043e\u0442\u0432\u0435\u0442\u043e\u0432","aria-label":"add"},r.a.createElement("input",{type:"number",className:"question-limit-input",onChange:function(e){var t=e.currentTarget.value;console.log(e),o(t<1?1:t>99?99:t)},onBlur:function(e){a({id:t.id,limit:i})},onKeyUp:function(e){13===e.keyCode&&e.currentTarget.blur()},value:i})))),r.a.createElement(h.a,{className:"question-title"},t.title)))};function sn(){var e=Object(ee.a)(["\nmutation saveNewOrder($questions: [ReorderedArray]) {\n  newOrder(neworder: $questions)\n}\n"]);return sn=function(){return e},e}function dn(){var e=Object(ee.a)(["\nmutation saveNewLimit($id: ID!, $limit: Int!) {\n  newLimit(id: $id, limit: $limit)\n}\n"]);return dn=function(){return e},e}function mn(){var e=Object(ee.a)(["\n  query pollQuery($id: ID!) {\n    poll(id: $id) {\n      id\n      title\n      code\n      liter\n      questions {\n        id\n        title\n        limit\n        order\n        answers {\n          id\n          title\n          order\n        }\n      }\n    }\n  }\n"]);return mn=function(){return e},e}var bn=Object(te.a)(mn()),pn=Object(te.a)(dn()),fn=Object(te.a)(sn()),En=function(e){var t=e.id,a=Object(n.useState)(null),l=Object(f.a)(a,2),c=l[0],i=l[1],o=Object(n.useState)(null),u=Object(f.a)(o,2),s=(u[0],u[1]),d=Object(mt.a)(bn,{variables:{id:t},onCompleted:function(){return i(p.poll.questions)}}),m=d.loading,b=d.error,p=d.data,E=(d.refetch,Object(Y.useMutation)(pn,{})),v=Object(f.a)(E,1)[0],O=Object(Y.useMutation)(fn,{}),j=Object(f.a)(O,1)[0];if(m||!c)return r.a.createElement(n.Fragment,null,r.a.createElement(me.a,null),r.a.createElement("p",null,"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430. \u041f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435 \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430"));if(b)return r.a.createElement("p",null,"\u041e\u0448\u0438\u0431\u043a\u0430. \u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! :(");var g=function(e){var t=e.id,a=+e.limit;i(c.map((function(e){return e.id===t?Object(We.a)(Object(We.a)({},e),{},{limit:a}):e}))),v({variables:{id:t,limit:a}})},h=Object(ln.b)((function(e){var t=e.question;return r.a.createElement(un,{question:t,handleLimitInput:g})})),x=Object(ln.a)((function(e){var t=e.questions;return r.a.createElement(he.a,{container:!0,item:!0,xs:12,spacing:2},t.map((function(e,t){return r.a.createElement(h,{key:"item-".concat(e.id),index:t,question:e})})))}));return r.a.createElement(n.Fragment,null,r.a.createElement(x,{questions:c,onSortEnd:function(e){var t=e.oldIndex,a=e.newIndex;s(Object(We.a)({},c));var n=on()(c,t,a),r=[],l=n.reduce((function(e,t,a){return t.order===a+1?e.push(t):(r.push({id:t.id,order:a+1}),e.push(Object(We.a)(Object(We.a)({},t),{},{order:a+1}))),e}),[]);j({variables:{questions:r}}),i(l)},axis:"xy"}))};function vn(){var e=Object(ee.a)(["\n  mutation deletePoll($id: ID!) {\n    deletePoll(id: $id) {\n      title\n    }\n  }\n"]);return vn=function(){return e},e}var On=Object(te.a)(vn()),jn=function(e){var t=e.id,a=e.code,l=Object(p.f)(),c=Object(n.useState)(!1),i=Object(f.a)(c,2),o=i[0],u=i[1],s=Object(n.useState)(!0),d=Object(f.a)(s,2),m=d[0],b=d[1],E=Object(Y.useMutation)(On,{onCompleted:function(){l.push("/")}}),v=Object(f.a)(E,2),O=v[0],j=(v[1].poll,function(){u(!1)});return r.a.createElement(n.Fragment,null,r.a.createElement(He.a,{open:o,onClose:j,"aria-labelledby":"form-dialog-title"},r.a.createElement(_e.a,{id:"form-dialog-title"},"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435"),r.a.createElement(Ue.a,null,r.a.createElement(_t.a,null,r.a.createElement(h.a,{variant:"subtitle1",gutterBottom:!0},"\u042d\u0442\u043e \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043e\u0442\u043c\u0435\u043d\u0435\u043d\u043e. \u041e\u043d\u043e \u043f\u0440\u0438\u0432\u0435\u0434\u0435\u0442 \u043a \u0431\u0435\u0437\u0432\u043e\u0437\u0432\u0440\u0430\u0442\u043d\u043e\u043c\u0443 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044e \u0412\u0421\u0415\u0425 \u0434\u0430\u043d\u043d\u044b\u0445 \u043e\u043f\u0440\u043e\u0441\u0430."),r.a.createElement(h.a,{variant:"button",display:"block",gutterBottom:!0},"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u041a\u041e\u0414 \u043e\u043f\u0440\u043e\u0441\u0430.")),r.a.createElement(Ve.a,{margin:"dense",id:"name",label:"\u041a\u043e\u0434 \u043e\u043f\u0440\u043e\u0441\u0430",type:"text",fullWidth:!0,onChange:function(e){var t=e.currentTarget.value.toUpperCase();e.currentTarget.value=t,t.toUpperCase()===a?b(!1):b(!0)}})),r.a.createElement(Qe.a,null,r.a.createElement(qe.a,{onClick:j,color:"primary"},"\u041e\u0442\u043c\u0435\u043d\u0430"),r.a.createElement(qe.a,{onClick:function(){!function(e){O({variables:{id:e},refetchQueries:[{query:Et}]})}(t)},color:"primary",disabled:m},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"))),r.a.createElement(he.a,{item:!0,container:!0,xs:12},r.a.createElement(he.a,null,r.a.createElement(h.a,{variant:"button",display:"block",gutterBottom:!0},"\u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u043e\u043f\u0440\u043e\u0441\u0430"),r.a.createElement(h.a,{variant:"caption",display:"block",gutterBottom:!0},"\u041f\u043e\u0441\u043b\u0435 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u041e\u041f\u0420\u041e\u0421\u0410 \u043f\u0443\u0442\u0438 \u043d\u0430\u0437\u0430\u0434 \u0443\u0436\u0435 \u043d\u0435 \u0431\u0443\u0434\u0435\u0442. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0431\u0443\u0434\u044c\u0442\u0435 \u0432\u043d\u0438\u043c\u0430\u0442\u0435\u043b\u044c\u043d\u044b."),r.a.createElement(qe.a,{variant:"contained",color:"secondary",onClick:function(){u(!0)}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043e\u043f\u0440\u043e\u0441"))))};function gn(e){var t=e.children,a=e.value,n=e.index,l=Object(ze.a)(e,["children","value","index"]);return r.a.createElement("div",Object.assign({role:"tabpanel",className:"right-pannel",hidden:a!==n,id:"vertical-tabpanel-".concat(n),"aria-labelledby":"vertical-tab-".concat(n)},l),a===n&&r.a.createElement(ba.a,{p:3},r.a.createElement(h.a,null,t)))}function hn(e){return{id:"vertical-tab-".concat(e),"aria-controls":"vertical-tabpanel-".concat(e)}}var xn=Object(v.a)((function(e){return{root:{flexGrow:1,backgroundColor:e.palette.background.paper,display:"flex"},tabs:{borderRight:"1px solid ".concat(e.palette.divider),overflow:"visible"}}})),wn=function(e){var t=e.id,a=e.code,n=xn(),l=r.a.useState(0),c=Object(f.a)(l,2),i=c[0],o=c[1];return r.a.createElement("div",{className:n.root},r.a.createElement(da.a,{orientation:"vertical",variant:"scrollable",value:i,onChange:function(e,t){o(t)},className:n.tabs},r.a.createElement(ma.a,Object.assign({label:"\u041e\u0431\u0449\u0438\u0435"},hn(0))),r.a.createElement(ma.a,Object.assign({label:"\u041f\u043e\u0440\u044f\u0434\u043e\u043a \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f"},hn(1))),r.a.createElement(ma.a,Object.assign({label:"\u041a\u043e\u043d\u0444\u0438\u0433"},hn(2))),r.a.createElement(ma.a,Object.assign({label:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435"},hn(3)))),r.a.createElement(gn,{value:i,index:0},r.a.createElement(Ja,{id:t})),r.a.createElement(gn,{value:i,index:1},r.a.createElement(En,{id:t})),r.a.createElement(gn,{value:i,index:2},r.a.createElement(rn,{id:t})),r.a.createElement(gn,{value:i,index:3},r.a.createElement(jn,{id:t,code:a})))},yn=function(){var e=Object(p.g)(),t=e.id,a=e.code;return r.a.createElement(n.Fragment,null,r.a.createElement(xt,{title:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u043e\u043f\u0440\u043e\u0441\u0430 "+a}),r.a.createElement("div",{style:{paddingTop:"10px"}},r.a.createElement(de.a,{maxWidth:"xl"},r.a.createElement(wn,{id:t,code:a}))))};function Cn(e){var t=e.children,a=e.value,n=e.index,l=Object(ze.a)(e,["children","value","index"]);return r.a.createElement("div",Object.assign({role:"tabpanel",hidden:a!==n,id:"vertical-tabpanel-".concat(n),"aria-labelledby":"vertical-tab-".concat(n)},l),a===n&&r.a.createElement(ba.a,{p:3},r.a.createElement(h.a,null,t)))}var kn=Object(v.a)((function(e){return{root:{flexGrow:1,backgroundColor:e.palette.background.paper,display:"flex"},tabs:{borderRight:"1px solid ".concat(e.palette.divider)}}})),Sn=function(e){var t,a=e.id,n=kn(),l=r.a.useState(0),c=Object(f.a)(l,2),i=c[0],o=c[1];return r.a.createElement("div",{className:n.root},r.a.createElement(da.a,{orientation:"vertical",variant:"scrollable",value:i,onChange:function(e,t){o(t)},className:n.tabs},r.a.createElement(ma.a,Object.assign({label:"\u0424\u0430\u0439\u043b\u044b"},{id:"vertical-tab-".concat(t=0),"aria-controls":"vertical-tabpanel-".concat(t)}))),r.a.createElement(Cn,{value:i,index:0},"\u0424\u0430\u0439\u043b\u044b \u043e\u043f\u0440\u043e\u0441\u0430 - ",a,r.a.createElement("p",null,"\u0412 \u0420\u0410\u0417\u0420\u0410\u0411\u041e\u0422\u041a\u0415")))},Nn=function(){var e=Object(p.g)(),t=e.id,a=e.code;return r.a.createElement(n.Fragment,null,r.a.createElement(xt,{title:"\u0424\u0430\u0439\u043b\u044b "+a}),r.a.createElement("div",{style:{paddingTop:"10px"}},r.a.createElement(de.a,{maxWidth:"xl"},r.a.createElement(Sn,{id:t}))))},qn=function(){return r.a.createElement(n.Fragment,null,r.a.createElement(he.a,{container:!0,item:!0},"WIKI"))},An=function(){var e=Object(p.g)(),t=(e.id,e.code);return r.a.createElement(n.Fragment,null,r.a.createElement(xt,{title:"Wiki "+t}),r.a.createElement(de.a,{maxWidth:"lg"},r.a.createElement(qn,null)))};function $n(){var e=Object(ee.a)(["\n  query citiesQuery{\n    cities{\n      id\n      title\n    }\n  }\n"]);return $n=function(){return e},e}var Fn=Object(te.a)($n()),Tn=function(){var e=Object(mt.a)(Fn),t=e.loading,a=(e.error,e.data),l=Object(n.useState)(!1),c=Object(f.a)(l,2),i=c[0],o=c[1],u=function(e){var t=e.city;return r.a.createElement("p",null,t.title)},s=function(e){var t=e.save,a=e.close;return r.a.createElement(n.Fragment,null,r.a.createElement(he.a,{container:!0,direction:"column",justify:"center",alignItems:"center"},r.a.createElement(Ve.a,{required:!0,label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"}),r.a.createElement(Ve.a,{label:"\u0427\u0438\u0441\u043b\u0435\u043d\u043d\u043e\u0441\u0442\u044c \u043d\u0430\u0441\u0435\u043b\u0435\u043d\u0438\u044f",type:"number",InputLabelProps:{shrink:!0}}),r.a.createElement(Ve.a,{select:!0,label:"Native select",SelectProps:{native:!0},helperText:"Please select your currency"},[{value:"c001",label:"\u0433\u043e\u0440\u043e\u0434 \u0441 \u0447\u0438\u0441\u043b\u0435\u043d\u043d\u043e\u0441\u0442\u044c\u044e \u0431\u043e\u043b\u0435\u0435 1 \u043c\u043b\u043d \u0447\u0435\u043b."},{value:"c002",label:"\u0433\u043e\u0440\u043e\u0434 \u0441 \u0447\u0438\u0441\u043b\u0435\u043d\u043d\u043e\u0441\u0442\u044c\u044e \u043e\u0442 500 \u0442\u044b\u0441. \u0447\u0435\u043b. \u0434\u043e 1 \u043c\u043b\u043d \u0447\u0435\u043b."},{value:"c003",label:"\u0433\u043e\u0440\u043e\u0434 \u0441 \u0447\u0438\u0441\u043b\u0435\u043d\u043d\u043e\u0441\u0442\u044c\u044e \u043e\u0442 100 \u0434\u043e 500 \u0442\u044b\u0441. \u0447\u0435\u043b."},{value:"c004",label:"\u0433\u043e\u0440\u043e\u0434 \u0441 \u0447\u0438\u0441\u043b\u0435\u043d\u043d\u043e\u0441\u0442\u044c\u044e \u043e\u0442 50 \u0434\u043e 100 \u0442\u044b\u0441. \u0447\u0435\u043b."},{value:"c005",label:"\u0433\u043e\u0440\u043e\u0434 \u0441 \u0447\u0438\u0441\u043b\u0435\u043d\u043d\u043e\u0441\u0442\u044c\u044e \u0434\u043e 50 \u0442\u044b\u0441. \u0447\u0435\u043b., \u043f\u043e\u0441\u0451\u043b\u043e\u043a \u0433\u043e\u0440\u043e\u0434\u0441\u043a\u043e\u0433\u043e \u0442\u0438\u043f\u0430"},{value:"c006",label:"\u0441\u0435\u043b\u044c\u0441\u043a\u0438\u0439 \u043d\u0430\u0441\u0435\u043b\u0451\u043d\u043d\u044b\u0439 \u043f\u0443\u043d\u043a\u0442"}].map((function(e){return r.a.createElement("option",{key:e.value,value:e.value},e.label)})))),r.a.createElement("button",{onClick:a},"Close"),r.a.createElement("button",{onClick:function(){t()}},"Save"))};return t||!a?r.a.createElement(n.Fragment,null,r.a.createElement(me.a,null),r.a.createElement("p",null,"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430. \u041f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435 \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430")):r.a.createElement("span",null,r.a.createElement("p",null,"\u0413\u043e\u0440\u043e\u0434\u0430 \u043f\u0440\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u044f \u043e\u043f\u0440\u043e\u0441\u043e\u0432"),!i&&r.a.createElement("button",{onClick:function(){o(!0)}},"Add"),r.a.createElement("span",null,i&&r.a.createElement(s,{save:function(e){console.log("\u0413\u043e\u0440\u043e\u0434\u0430 - ",e),o(!1)},close:function(){o(!1)}}),a.cities.map((function(e,t){return r.a.createElement(u,{city:e,key:t})}))))};function In(e){var t=e.children,a=e.value,n=e.index,l=Object(ze.a)(e,["children","value","index"]);return r.a.createElement("div",Object.assign({role:"tabpanel",className:"right-pannel",hidden:a!==n,id:"vertical-tabpanel-".concat(n),"aria-labelledby":"vertical-tab-".concat(n)},l),a===n&&r.a.createElement(ba.a,null,r.a.createElement(h.a,null,t)))}var Bn=Object(v.a)((function(e){return{root:{flexGrow:1,backgroundColor:e.palette.background.paper,display:"flex"},tabs:{borderRight:"1px solid ".concat(e.palette.divider),overflow:"visible"}}})),Mn=function(){var e,t=Bn(),a=r.a.useState(0),n=Object(f.a)(a,2),l=n[0],c=n[1];return r.a.createElement("div",{className:t.root},r.a.createElement(da.a,{orientation:"vertical",variant:"scrollable",value:l,onChange:function(e,t){c(t)},className:t.tabs},r.a.createElement(ma.a,Object.assign({label:"\u0413\u043e\u0440\u043e\u0434\u0430"},{id:"vertical-tab-".concat(e=0),"aria-controls":"vertical-tabpanel-".concat(e)}))),r.a.createElement(In,{value:l,index:0},r.a.createElement(Tn,null)))},Dn=function(){return r.a.createElement(n.Fragment,null,r.a.createElement(xt,{title:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u043f\u043e\u0434\u0441\u0438\u0441\u0442\u0435\u043c\u044b"}),r.a.createElement("div",{style:{paddingTop:"10px"}},r.a.createElement(de.a,{maxWidth:"xl"},r.a.createElement(Mn,null))))},Pn=function(){return r.a.createElement(b.a,null,r.a.createElement(p.c,null,r.a.createElement(p.a,{path:"/",exact:!0,component:Ot}),r.a.createElement(p.a,{path:"/results/:id/:code",component:ha}),r.a.createElement(p.a,{path:"/poll-settings/:id/:code",component:yn}),r.a.createElement(p.a,{path:"/drive/:id/:code",component:sa}),r.a.createElement(p.a,{path:"/analyze",component:Da}),r.a.createElement(p.a,{path:"/attachment/:id/:code",component:Nn}),r.a.createElement(p.a,{path:"/poll-wiki/:id/:code",component:An}),r.a.createElement(p.a,{path:"/pollappsetting",component:Dn}),r.a.createElement(p.a,{path:"/tester",component:za})))},Ln=a(427),Wn=a(290),zn=a.n(Wn);function Rn(){return r.a.createElement(h.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ","\u0420\u0418\u0410\u0426i51 ",(new Date).getFullYear())}var Hn=Object(v.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},forget:{cursor:"pointer"}}})),Qn=function(e){var t=e.onLogin,a=e.userError,l=e.passwordError,c=Object(n.useState)(""),i=Object(f.a)(c,2),o=i[0],u=i[1],s=Object(n.useState)(""),d=Object(f.a)(s,2),m=d[0],b=d[1],p=Hn();return r.a.createElement(de.a,{component:"main",maxWidth:"xs"},r.a.createElement(Ln.a,null),r.a.createElement("div",{className:p.paper},r.a.createElement(xe.a,{className:p.avatar},r.a.createElement(zn.a,null)),r.a.createElement(h.a,{component:"h1",variant:"h5"},"\u0412\u043e\u0439\u0434\u0438\u0442\u0435 \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0443"),r.a.createElement("form",{className:p.form,noValidate:!0},r.a.createElement(Ve.a,{error:!!a,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"login",label:"\u041b\u043e\u0433\u0438\u043d",name:"login",autoComplete:"login",autoFocus:!0,onChange:function(e){u(e.target.value)},helperText:a}),r.a.createElement(Ve.a,{error:l,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",id:"password",autoComplete:"current-password",onChange:function(e){b(e.target.value)}}),r.a.createElement(Tt.a,{control:r.a.createElement(It.a,{value:"remember",color:"primary"}),label:"\u0417\u0430\u043f\u043e\u043c\u043d\u0438\u0442\u044c \u043c\u0435\u043d\u044f"}),r.a.createElement(qe.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:p.submit,onClick:function(e){e.preventDefault(),(o||m)&&t({username:o,password:m})}},"\u0412\u043e\u0439\u0442\u0438"))),r.a.createElement(ba.a,null,r.a.createElement(Rn,null)))};function Un(){var e=Object(ee.a)(["\n  mutation signup(\n    $username: String!,\n    $password: String!\n  ) {\n    signup(\n      username: $username,\n      password: $password\n    ) {\n      user {\n        id\n        username\n      }\n    }\n  }\n\n"]);return Un=function(){return e},e}function _n(){var e=Object(ee.a)(["\n  mutation signin(\n    $username: String!,\n    $password: String!\n  ) {\n    signin(\n      username: $username,\n      password: $password\n    ) {\n      user {\n        id\n        username\n      }\n    }\n  }\n"]);return _n=function(){return e},e}var Vn=Object(te.a)(_n()),Gn=(Object(te.a)(Un()),function(){var e=Object(n.useState)(null),t=Object(f.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(null),i=Object(f.a)(c,2),o=i[0],u=i[1],s=Object(n.useState)(null),d=Object(f.a)(s,2),m=d[0],b=d[1],p=Object(Y.useMutation)(Vn,{onError:function(e){l("\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c"),u(!0)},update:function(e,t){var a=t.data.signin;return e.writeQuery({query:re,data:{currentUser:a.user}})}}),E=Object(f.a)(p,2),v=E[0],O=E[1];O.data,O.loading,O.error;Object(n.useEffect)((function(){m&&v({variables:m})}),[m]);return r.a.createElement(n.Fragment,null,r.a.createElement(Qn,{onLogin:function(e){b(e)},userError:a,passwordError:o}))}),Kn=function(){var e=Object(Y.useQuery)(re,{onCompleted:function(e){return m(e.currentUser)}}),t=e.loading,a=e.error,l=e.data;return t?r.a.createElement(n.Fragment,null,r.a.createElement(de.a,{component:"main",maxWidth:"xs"},r.a.createElement("div",{className:"loading-circle"},r.a.createElement(me.a,null),r.a.createElement("p",null,"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430. \u041f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435 \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430")))):a?r.a.createElement("div",null,"Error: ",JSON.stringify(a)):l.currentUser?r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"App"},r.a.createElement(Pn,{user:l.currentUser}))):r.a.createElement("div",null,r.a.createElement(Gn,null))},Xn=new i.a({uri:"http://192.168.31.83:4000/graphql",cache:d,credentials:"include"});c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(o.a,{client:Xn},r.a.createElement(Kn,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[326,1,2]]]);
//# sourceMappingURL=main.b5b50cd4.chunk.js.map