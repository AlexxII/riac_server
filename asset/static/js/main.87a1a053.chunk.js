(this.webpackJsonpriac=this.webpackJsonpriac||[]).push([[0],{354:function(e,t,a){e.exports=a(381)},360:function(e,t,a){},381:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l="http://192.168.31.82:4000",c=a(23),i=a.n(c),o=a(196),u=a(285);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var s=new(a(197).a)({typePolicies:{Poll:{fields:{question:{read:function(e){return e}}}}}}),d=a(7),m=(a(360),a(38)),p=a(43),b=a(31),f=a(447),E=a(448),g=a(441),v=a(440),O=a(83),j=a(439),h=a(321),y=a(301),x=a.n(y),w=a(180),C=a.n(w),k=a(252),S=a.n(k),q=a(214),N=a.n(q),$=a(442),F=a(14),A=a(297),T=a.n(A),I=a(385),B=a(270),M=a(13),P=a(27);function D(){var e=Object(F.a)(["\n  mutation Logout {\n    logout\n  }\n"]);return D=function(){return e},e}var z=Object(M.a)(D());function W(){var e=Object(F.a)(["\n  query {\n    currentUser {\n      id\n      username\n    }\n  }\n"]);return W=function(){return e},e}var R=Object(M.a)(W());function U(){var e=Object(F.a)(["\n    query {\n      currentUser {\n        id\n        username\n      }\n    }\n    "]);return U=function(){return e},e}var L=function(e){e.close;var t=Object(B.a)().readQuery({query:Object(M.a)(U())}).currentUser,a=Object(n.useState)(null),l=Object(d.a)(a,2),c=l[0],i=l[1],o=Boolean(c),u=Object(P.useMutation)(z,{update:function(e){return e.writeQuery({query:R,data:{currentUser:null}})}}),s=Object(d.a)(u,1)[0],m=function(){i(null)},p=r.a.createElement(h.a,{anchorEl:c,anchorOrigin:{vertical:"top",horizontal:"right"},id:"account-menu",keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:o,onClose:m},r.a.createElement(j.a,{onClick:function(){s(),m()}},"\u0412\u044b\u0445\u043e\u0434"));return r.a.createElement(n.Fragment,null,r.a.createElement(v.a,{edge:"end","aria-label":"account of current user","aria-controls":"account-menu","aria-haspopup":"true",onClick:function(e){i(e.currentTarget)},color:"inherit"},r.a.createElement(g.a,{badgeContent:0,color:"secondary"},r.a.createElement(I.a,{title:t.username},r.a.createElement(T.a,null)))),p)},H=a(5),Q=a(446),V=a(438),_=a(445),J=a(384),K=a(443),G=a(444),Z=a(213),X=a.n(Z),Y=a(299),ee=a.n(Y),te=a(300),ae=a.n(te),ne=a(298),re=a.n(ne),le=Object($.a)({list:{width:250},fullList:{width:"auto"}});function ce(e){var t=e.open,a=e.close,n=le();return r.a.createElement(Q.a,{anchor:"left",open:t,onClose:a,className:"left-app-menu"},r.a.createElement("div",{className:Object(H.a)(n.list),role:"presentation",onClick:a,onKeyDown:a},r.a.createElement(V.a,null,r.a.createElement(O.a,{variant:"overline",style:{fontSize:"10px"}},"\u043f\u043e\u0434\u0441\u0438\u0441\u0442\u0435\u043c\u0430 \u043e\u043f\u0440\u043e\u0441\u043e\u0432"),r.a.createElement(m.b,{to:"analyze"},r.a.createElement(J.a,{button:!0,key:1},r.a.createElement(K.a,null,r.a.createElement(re.a,null)),r.a.createElement(G.a,{primary:"\u0410\u043d\u0430\u043b\u0438\u0437\u0430\u0442\u043e\u0440"}))),r.a.createElement(J.a,{button:!0,key:2},r.a.createElement(K.a,null,r.a.createElement(ee.a,null)),r.a.createElement(G.a,{primary:"\u0413\u0435\u043d\u0435\u0440\u0430\u0442\u043e\u0440 \u043d\u043e\u043c\u0435\u0440\u043e\u0432"})),r.a.createElement(m.b,{to:"poll-app-settings"},r.a.createElement(J.a,{button:!0,key:3},r.a.createElement(K.a,null,r.a.createElement(X.a,null)),r.a.createElement(G.a,{primary:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"}))),r.a.createElement(O.a,{variant:"overline",style:{fontSize:"10px"}},"\u043e\u0431\u0449\u0438\u0435"),r.a.createElement(_.a,null),r.a.createElement(m.b,{to:"settings/users"},r.a.createElement(J.a,{button:!0,key:4},r.a.createElement(K.a,null,r.a.createElement(ae.a,null)),r.a.createElement(G.a,{primary:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438"}))))))}var ie=Object($.a)((function(e){return{grow:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:Object(b.a)({display:"none"},e.breakpoints.up("xs"),{display:"block"}),inputRoot:{color:"inherit"},sectionDesktop:Object(b.a)({display:"none"},e.breakpoints.up("sm"),{display:"flex"}),sectionMobile:Object(b.a)({display:"flex"},e.breakpoints.up("sm"),{display:"none"}),link:{color:"white",textDecoration:"none"}}})),oe=function(e){var t=e.title,a=ie(),n=r.a.useState(null),l=Object(d.a)(n,2),c=l[0],i=l[1],o=r.a.useState(null),u=Object(d.a)(o,2),s=u[0],m=u[1],p=r.a.useState(!1),b=Object(d.a)(p,2),y=b[0],w=b[1],k=Boolean(s),q=Boolean(c),$=function(e){i(e.currentTarget)},F=function(){m(null)},A=function(){i(null),F()},T=r.a.createElement(h.a,{anchorEl:c,anchorOrigin:{vertical:"top",horizontal:"right"},id:"primary-apps-menu",keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:q,onClose:A},r.a.createElement(j.a,{onClick:A},"\u041f\u0423\u0421\u0422\u041e_1"),r.a.createElement(j.a,{onClick:A},"\u041f\u0423\u0421\u0422\u041e_2")),I=r.a.createElement(h.a,{anchorEl:s,anchorOrigin:{vertical:"top",horizontal:"right"},id:"primary-account-menu-mobile",keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:k,onClose:F},r.a.createElement(j.a,null,r.a.createElement(v.a,{color:"inherit"},r.a.createElement(g.a,{badgeContent:0,color:"secondary"},r.a.createElement(S.a,null))),r.a.createElement("p",null,"\u0423\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f")),r.a.createElement(j.a,{onClick:$},r.a.createElement(v.a,{"aria-label":"more apps","aria-controls":"primary-apps-menu","aria-haspopup":"true",color:"inherit"},r.a.createElement(C.a,null)),r.a.createElement("p",null,"\u041f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f")),r.a.createElement(j.a,null,r.a.createElement(L,null),r.a.createElement("p",null,"Profile")));return r.a.createElement("div",{className:a.grow},r.a.createElement(f.a,{position:"static"},r.a.createElement(E.a,null,r.a.createElement(v.a,{edge:"start",className:a.menuButton,color:"inherit",onClick:function(e){w(!0)},"aria-label":"open drawer"},r.a.createElement(x.a,null)),r.a.createElement(O.a,{className:a.title,variant:"h6",noWrap:!0},t),r.a.createElement("div",{className:a.grow}),r.a.createElement("div",{className:a.sectionDesktop},r.a.createElement(v.a,{color:"inherit"},r.a.createElement(g.a,{badgeContent:0,color:"secondary"},r.a.createElement(S.a,null))),r.a.createElement(v.a,{"aria-label":"apps","aria-controls":"primary-apps-menu","aria-haspopup":"true",onClick:$,color:"inherit"},r.a.createElement(g.a,{badgeContent:0,color:"secondary"},r.a.createElement(C.a,null))),r.a.createElement(L,null)),r.a.createElement("div",{className:a.sectionMobile},r.a.createElement(v.a,{"aria-label":"show more","aria-controls":"primary-account-menu-mobile","aria-haspopup":"true",onClick:function(e){m(e.currentTarget)},color:"inherit"},r.a.createElement(N.a,null))))),r.a.createElement(ce,{open:y,close:function(e){w(!1)}}),I,T)},ue=a(19),se=a(462),de=a(449),me=a(450),pe=a(451),be=a(453),fe=a(215),Ee=a.n(fe),ge=a(302),ve=a.n(ge),Oe=a(452),je=(a(303),a(304),a(482)),he=a(10),ye=Object(he.a)((function(e){return{badge:{backgroundColor:"#44b700",color:"#44b700",boxShadow:"0 0 0 2px ".concat(e.palette.background.paper),"&::after":{position:"absolute",top:"-1px",left:"-1px",width:"100%",height:"100%",borderRadius:"50%",animation:"$ripple 1.2s infinite ease-in-out",border:"1px solid currentColor",content:'""'}},"@keyframes ripple":{"0%":{transform:"scale(.8)",opacity:1},"100%":{transform:"scale(2.4)",opacity:0}}}}))(g.a),xe=Object($.a)({root:{display:"flex"},avatar:{backgroundColor:function(e){return e.color}}}),we=function(e){var t=e.data,a=xe(t);return t.active?r.a.createElement("div",{className:a.root},r.a.createElement(ye,{overlap:"circle",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot"},r.a.createElement(je.a,{className:a.avatar},r.a.createElement("span",{className:"poll-liter-title"},t.liter)))):r.a.createElement("div",{className:a.root},r.a.createElement(je.a,{className:a.avatar},t.liter))},Ce=["\u0418\u043d\u0442\u0435\u0440\u0432\u044c\u044e\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435","\u0410\u043d\u043a\u0435\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435","\u0422\u0435\u043b\u0435\u0444\u043e\u043d\u043d\u044b\u0439","WEB"],ke=["\u0412\u0441\u0435\u0440\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0439","\u042d\u043a\u0441\u043f\u0435\u0440\u0442\u043d\u044b\u0439"],Se=Object($.a)((function(e){return{root:{maxWidth:"100%",margin:"10px 0"},header:{padding:"16px 16px 0 16px"},content:{flex:1,padding:"10px 16px 0 16px"}}})),qe=function(e){var t=e.data,a=Se(),l=function(){return r.a.createElement(I.a,{title:"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b"},r.a.createElement(m.b,{to:"/results/".concat(t.id,"/").concat(t.code)},r.a.createElement(v.a,null,r.a.createElement(Ee.a,null))))},c=function(){return r.a.createElement(I.a,{title:"\u0412\u0432\u043e\u0434 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432"},r.a.createElement(m.b,{to:"/drive/".concat(t.id,"/").concat(t.code)},r.a.createElement(v.a,null,r.a.createElement(ve.a,null))))},i=function(){return r.a.createElement(I.a,{title:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u043e\u043f\u0440\u043e\u0441\u0430"},r.a.createElement(m.b,{to:"/poll-settings/".concat(t.id,"/").concat(t.code)},r.a.createElement(v.a,null,r.a.createElement(X.a,null))))};return r.a.createElement(n.Fragment,null,r.a.createElement(de.a,{className:a.root},r.a.createElement(me.a,{className:a.header,avatar:r.a.createElement(we,{data:t}),action:r.a.createElement(i,null),title:t.code+": "+t.title,subheader:t.startDate+" - "+t.endDate}),r.a.createElement(pe.a,{className:a.content},r.a.createElement(Oe.a,{container:!0,spacing:1},r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(O.a,{variant:"button",display:"block",gutterBottom:!0},"\u041c\u0435\u0442\u043e\u0434 \u043f\u0440\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u044f: ",Ce[t.way])),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(O.a,{variant:"button",display:"block",gutterBottom:!0},"\u0420\u0435\u0441\u043f\u043e\u043d\u0434\u0435\u043d\u0442\u043e\u0432: ",t.sample)))),r.a.createElement(be.a,{disableSpacing:!0},r.a.createElement(Oe.a,{container:!0,item:!0,xs:12},r.a.createElement(l,null)),r.a.createElement(Oe.a,{container:!0,item:!0,xs:12,justify:"flex-end"},t.cities.length?r.a.createElement(c,null):r.a.createElement(I.a,{title:"\u0413\u043e\u0440\u043e\u0434\u0430 \u0443\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u044e\u0442\u0441\u044f \u0432 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u0445 \u043e\u043f\u0440\u043e\u0441\u0430"},r.a.createElement(O.a,{variant:"overline",display:"block",gutterBottom:!0,className:"empty-cities-warning"},"\u043d\u0430\u0441\u0442\u0440\u043e\u0439\u0442\u0435 \u0433\u043e\u0440\u043e\u0434\u0430"))))))},Ne=function(e){return e.data.polls.map((function(e,t){return r.a.createElement(qe,{key:t,data:e})}))},$e=a(3),Fe=a(112),Ae=a(457),Te=a(460),Ie=a(459),Be=a(458),Me=a(455),Pe=a(456),De=a(91),ze=a(102),We=a(223),Re=a.n(We),Ue=a(325),Le=a(454);var He=function(e){var t=function(e){var t=new DOMParser,a=t.parseFromString("INVALID","text/xml").getElementsByTagName("parsererror")[0].namespaceURI,n=t.parseFromString(e,"text/xml");return!(n.getElementsByTagNameNS(a,"parsererror").length>0)&&n}(e);if(t){var a={},n=t.getElementsByTagName("opros")[0];return a.title=n.getAttribute("name"),a.code=n.getAttribute("cod"),a.start=n.getAttribute("start_date"),a.end=n.getAttribute("end_date"),a.structure={data:""},a}return!1},Qe=Object($.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}})),Ve=function(e){var t,a=e.field,l=Object(Fe.a)(e,["field"]),c=l.errorMessage,i=(l.touched,l.setFieldValue),o=a.name,u=(a.value,a.onChange,a.onBlur),s=Object(n.useState)(!1),m=Object(d.a)(s,2),p=m[0],f=m[1],E=Object(n.useState)(void 0),v=Object(d.a)(E,2),j=(v[0],v[1],Object(n.useState)(0)),h=Object(d.a)(j,2),y=h[0],x=(h[1],Qe()),w=Object(n.useRef)();return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ue.a,{className:x.backdrop,open:p},r.a.createElement(Le.a,{color:"inherit"})),r.a.createElement("input",(t={style:{display:"none"},id:o,name:o,type:"file"},Object(b.a)(t,"id",o),Object(b.a)(t,"ref",w),Object(b.a)(t,"onBlur",u),Object(b.a)(t,"onInput",(function(e){e.preventDefault(),f(!0);var t=new FileReader,a=e.target.files[0];a&&(t.onloadend=function(){var e=t.result,n=He(e);if(!n)return console.log("\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 XML"),void i("mainconfig","");f(!1);var r=/^(\d{2}).(\d{2}).(\d{4})$/;i("title",n.title),i("startdate",n.start.replace(r,"$3-$2-$1")),i("enddate",n.end.replace(r,"$3-$2-$1")),i("code",n.code),i("xmlfile",a)},t.readAsText(a))})),t)),r.a.createElement(g.a,{color:"secondary",badgeContent:y,style:{top:"5px"}},r.a.createElement(Me.a,{variant:"contained",color:"default",startIcon:r.a.createElement(Re.a,null),onClick:function(){w&&w.current.click()}},"XML")),c?r.a.createElement(O.a,{variant:"caption",color:"error"},c):null)},_e=function(e){var t=e.field,a=Object(Fe.a)(e,["field"]),n=a.errorMessage,l=a.label,c=a.type,i=a.touched,o=t.name,u=t.value,s=t.onChange,d=t.onBlur;return r.a.createElement("div",null,r.a.createElement(Pe.a,{fullWidth:!0,type:c,name:o,label:l,value:u,error:!(!i||!n),helperText:i&&n?n:void 0,onChange:s,onBlur:d,InputLabelProps:{shrink:!0}}))},Je=function(e){var t=e.field,a=Object(Fe.a)(e,["field"]),n=a.errorMessage,l=a.label,c=a.touched,i=a.array,o=t.name,u=t.value,s=t.onChange,d=t.onBlur;return r.a.createElement("div",null,r.a.createElement(Pe.a,{select:!0,fullWidth:!0,name:o,label:l,value:u,error:!(!c||!n),helperText:c&&n?n:void 0,onChange:s,onBlur:d,InputLabelProps:{shrink:!0}},i.map((function(e,t){return r.a.createElement(j.a,{key:t,value:t},e)}))))},Ke=function(e){var t=e.open,a=e.closeHndl,n=e.saveHndl,l=["text/xml"],c=ze.d().shape({title:ze.e().required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),startdate:ze.a().required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),enddate:ze.a().required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),code:ze.e().matches(/^[A-Za-z]{3}[0-9]{2}-[0-9]{2}?$/,"\u0424\u043e\u0440\u043c\u0430\u0442 \u043d\u0435 \u0432\u0430\u043b\u0438\u0434\u043d\u044b\u0439").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),sample:ze.c().min(1,"\u041d\u0435 \u043c\u0435\u043d\u044c\u0448\u0435 \u043e\u0434\u043d\u043e\u0433\u043e").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),type:ze.e().ensure().required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),way:ze.e().ensure().required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),xmlfile:ze.b().required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435 \u0444\u043e\u0440\u043c\u044b").test("fileSize","\u0421\u043b\u0438\u0448\u043a\u043e\u043c \u0431\u043e\u043b\u044c\u0448\u043e\u0439 \u0444\u0430\u0439\u043b",(function(e){return e&&e.size<=1048576})).test("fileFormat","\u041d\u0435\u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u043c\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442",(function(e){return e&&l.includes(e.type)}))});return r.a.createElement(Ae.a,{className:"add-poll-dialog",disableBackdropClick:!0,disableEscapeKeyDown:!0,open:t,maxWidth:"sm","aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(Be.a,{id:"alert-dialog-title"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043e\u043f\u0440\u043e\u0441"),r.a.createElement(Ie.a,null,r.a.createElement(De.b,{initialValues:{xmlfile:void 0,title:void 0,startdate:void 0,enddate:void 0,code:void 0,sample:10,type:1,way:1,comment:void 0},validationSchema:c,validateOnBlur:!0,onSubmit:function(e,t){var r=t.setSubmitting;n(e),a(),r(!0)}},(function(e){e.saveHndl,e.values;var t=e.errors,n=e.touched,l=(e.dirty,e.isSubmitting),c=(e.handleReset,e.handleSubmit),i=e.handleChange,o=e.handleBlur,u=e.setFieldValue;return r.a.createElement("form",{onSubmit:c},r.a.createElement(Oe.a,{container:!0,spacing:2},r.a.createElement(Oe.a,{item:!0,xs:6,sm:6},r.a.createElement(De.a,{name:"xmlfile",component:Ve,setFieldValue:u,errorMessage:t.xmlfile?t.xmlfile:void 0,touched:n.xmlfile,onBlur:o})),r.a.createElement(Oe.a,{item:!0,xs:12,sm:12},r.a.createElement(De.a,{name:"title",type:"text",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435",setFieldValue:u,component:_e,errorMessage:t.title,touched:n.title,onBlur:o})),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(De.a,{name:"startdate",type:"date",label:"\u0414\u0430\u0442\u0430 \u043d\u0430\u0447\u0430\u043b\u0430",setFieldValue:u,component:_e,errorMessage:t.startdate,touched:n.startdate,onBlur:o})),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(De.a,{name:"enddate",type:"date",label:"\u0414\u0430\u0442\u0430 \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f",setFieldValue:u,component:_e,errorMessage:t.enddate,touched:n.enddate,onBlur:o})),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(De.a,{name:"code",label:"\u041a\u043e\u0434 \u043e\u043f\u0440\u043e\u0441\u0430",type:"text",setFieldValue:u,component:_e,errorMessage:t.code,touched:n.code,onChange:i,onBlur:o})),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(De.a,{name:"sample",type:"number",label:"\u0412\u044b\u0431\u043e\u0440\u043a\u0430",setFieldValue:u,component:_e,errorMessage:t.sample,touched:n.sample,onChange:i,onBlur:o})),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(De.a,{name:"type",label:"\u0422\u0438\u043f \u043e\u043f\u0440\u043e\u0441\u0430",array:ke,setFieldValue:u,component:Je,errorMessage:t.type,touched:n.type,onChange:i,onBlur:o})),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(De.a,{name:"way",label:"\u0421\u043f\u043e\u0441\u043e\u0431 \u043f\u0440\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u044f",array:Ce,component:Je,errorMessage:t.way,touched:n.way,onChange:i,onBlur:o})),r.a.createElement(Oe.a,{item:!0,xs:12},r.a.createElement(De.a,{name:"comment",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",component:_e,errorMessage:t.comment,touched:n.comment,onChange:i,onBlur:o}))),r.a.createElement(Te.a,null,r.a.createElement(Me.a,{onClick:a,color:"primary"},"\u041e\u0442\u043c\u0435\u043d\u0430"),r.a.createElement(Me.a,{type:"submit",disabled:l},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")))}))))},Ge=a(308),Ze=a.n(Ge),Xe=a(487),Ye=a(488),et=a(461),tt=Object($.a)((function(e){return{speedDial:{position:"fixed",bottom:"30px",right:"30px"}}})),at=function(e){var t=e.actions,a=tt(),l=Object(n.useState)(!1),c=Object(d.a)(l,2),i=c[0],o=c[1],u=function(){o(!1)};return r.a.createElement(n.Fragment,null,r.a.createElement(Xe.a,{ariaLabel:"SpeedDial openIcon",className:a.speedDial,icon:r.a.createElement(Ye.a,null),onClose:u,onMouseLeave:u,onOpen:function(){o(!0)},open:i},t.map((function(e){return r.a.createElement(et.a,{key:e.name,icon:e.icon,onClick:e.click,tooltipTitle:e.name})}))))},nt=function(e){var t=e.addPoll,a=Object(p.g)(),l=Object(n.useState)(!1),c=Object(d.a)(l,2),i=c[0],o=c[1],u=function(e){var t={questions:[],logic:[],topic:[]},a=new FileReader;return new Promise((function(n,r){a.onloadend=function(){for(var e=a.result,r=(new DOMParser).parseFromString(e,"text/xml"),l=r.getElementsByTagName("vopros"),c=l.length,i=0;i<c;i++){for(var o={title:l[i].getAttribute("text"),topic:+l[i].getAttribute("tema_id"),limit:l[i].getAttribute("limit")?+l[i].getAttribute("limit"):1,type:+l[i].getAttribute("type_id"),order:+l[i].getAttribute("sort"),answers:[]},u=l[i].getElementsByTagName("otvet"),s=u.length,d=0;d<s;d++){var m={title:u[d].getAttribute("otvet_text"),code:u[d].getAttribute("otvet_cod").padStart(3,"0"),type:+u[d].getAttribute("otvet_type"),order:+u[d].getAttribute("otvet_sort")};o.answers[d]=m}t.questions[i]=o}var p=r.getElementsByTagName("restrict"),b=p.length;if(b){for(var f=[],E=0;E<b;E++){var g={code:p[E].getAttribute("otvet_cod").padStart(3,"0"),restrict:p[E].getAttribute("restrict_cod").padStart(3,"0"),type:p[E].getAttribute("restrict_type")};f[E]=g}t.logic=f}var v=r.getElementsByTagName("tema"),O=v.length;if(O)for(var j=0;j<O;j++){var h={id:v[j].getAttribute("id"),title:v[j].getAttribute("name")};t.topic[j]=h}n(t)},a.readAsText(e)}))},s=function(e){var t=e.logic.reduce((function(e,t,a){return"3"===t.type?e.exclude[t.code]?e.exclude[t.code]={restrict:[].concat(Object(ue.a)(e.exclude[t.code].restrict),[t.restrict])}:e.exclude[t.code]={restrict:[t.restrict]}:"5"===t.type&&(e.unique=[].concat(Object(ue.a)(e.unique),[t.code])),e}),{unique:[],exclude:{}}),a=e.questions.reduce((function(e,a){return a.limit>1&&(t.unique=[].concat(Object(ue.a)(t.unique),Object(ue.a)(a.answers.filter((function(e){return 3===e.type})).map((function(e){return e.code}))))),e.difficult=[].concat(Object(ue.a)(e.difficult),Object(ue.a)(a.answers.filter((function(e){return 3===e.type})).map((function(e){return e.code})))),e.freeAnswers=[].concat(Object(ue.a)(e.freeAnswers),Object(ue.a)(a.answers.filter((function(e){return 2===e.type})).map((function(e){return e.code})))),e}),{difficult:[],freeAnswers:[]});return e.logic=Object($e.a)(Object($e.a)({},t),a),e},m=[{icon:r.a.createElement(Ee.a,null),name:"\u041d\u043e\u0432\u044b\u0439 \u043e\u043f\u0440\u043e\u0441",click:function(){o(!0)}},{icon:r.a.createElement(Ze.a,null),name:"\u0410\u0440\u0445\u0438\u0432 \u043e\u043f\u0440\u043e\u0441\u043e\u0432",click:function(){return a.push("/poll-archive")}}];return r.a.createElement(n.Fragment,null,r.a.createElement(at,{actions:m}),r.a.createElement(Ke,{open:i,saveHndl:function(e){var a=e.xmlfile;a.size&&new Promise((function(e,t){e(u(a))})).then((function(a){var n=s(a),r={title:e.title,startDate:e.startdate,endDate:e.enddate,code:e.code,sample:e.sample,type:e.type,way:e.way,comment:e.comment};t({variables:{newPoll:Object($e.a)(Object($e.a)({},r),{},{comment:r.comment?r.comment:"",shortTitle:"",active:!0}),poolOfQuestions:n.questions,logic:Object($e.a)({},n.logic),topic:n.topic}})}))},closeHndl:function(){o(!1)}}))},rt=a(475),lt=function(e){var t,a,n;switch(e.size){case"small":t=40,a=40,n="h6";break;case"medium":t=60,a=60,n="h5";break;case"large":t=100,a=100,n="h4";break;default:t=60,a=60,n="h5"}return"page"===e.type?r.a.createElement(rt.a,{style:{transform:"translate(-50%, -50%)"},position:"absolute",top:"50%",left:"50%",textAlign:"center"},e.image&&r.a.createElement(rt.a,{clone:!0,mb:e.title||e.description?2:0,width:"".concat(t,"%"),height:"".concat(a,"%")},e.image),e.title&&r.a.createElement(rt.a,{mb:!e.description&&e.button?2:0},r.a.createElement(O.a,{variant:n},e.title)),e.description&&r.a.createElement(rt.a,{mb:e.button&&2},r.a.createElement(O.a,{variant:"body1"},e.description)),e.button&&e.button):"card"===e.type?r.a.createElement(rt.a,{padding:e.padding,textAlign:"center"},e.image&&r.a.createElement(rt.a,{clone:!0,mb:e.title||e.description?2:0,width:"".concat(t,"%"),height:"".concat(a,"%")},e.image),e.title&&r.a.createElement(rt.a,{mb:!e.description&&e.button?2:0},r.a.createElement(O.a,{variant:n},e.title)),e.description&&r.a.createElement(rt.a,{mb:e.button&&2},r.a.createElement(O.a,{variant:"body1"},e.description)),e.button&&e.button):null};lt.defaultProps={image:r.a.createElement(Le.a,null),title:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430",description:"\u041f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435 \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430",type:"page",size:"medium",padding:2};var ct=lt,it=Object($.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}})),ot=function(){var e=it();return r.a.createElement(Ue.a,{className:e.backdrop,open:!0},r.a.createElement(Le.a,{color:"inherit"}))},ut=a(481),st=a(478),dt=function(e){var t=function(e){return r.a.createElement(st.a,Object.assign({elevation:6,variant:"filled"},e))};return r.a.createElement(ut.a,{open:e.open,autoHideDuration:e.duration,onClose:e.close},r.a.createElement(t,{severity:e.type,onClose:e.close},e.text))};dt.defaultProps={type:"error",duration:4e3};var mt=dt,pt=a(254),bt=a.n(pt),ft=a(436),Et=Object($.a)((function(e){return{popover:{pointerEvents:"none"},paper:{padding:e.spacing(1)}}})),gt=function(e){var t,a,l,c=r.a.useState(null),i=Object(d.a)(c,2),o=i[0],u=i[1],s=Et(),m=function(e){u(e.currentTarget)},p=function(){u(null)},b=Boolean(o),f=function(t){var a=t.open;return r.a.createElement(ft.a,{id:"mouse-over-popover",className:s.popover,classes:{paper:s.paper},open:a,anchorEl:o,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},onClose:p,disableRestoreFocus:!0},r.a.createElement(O.a,null,e.poper&&e.poper))};switch(e.size){case"small":t=40,a=40,l="h6";break;case"medium":t=60,a=60,l="h5";break;case"large":t=100,a=100,l="h4";break;default:t=60,a=60,l="h5"}return"page"===e.type?r.a.createElement(n.Fragment,null,r.a.createElement(f,{open:b}),r.a.createElement(rt.a,{style:{transform:"translate(-50%, -50%)"},position:"absolute",top:"50%",left:"50%",textAlign:"center"},e.image&&r.a.createElement(rt.a,{clone:!0,mb:e.title||e.description?2:0,width:"".concat(t,"%"),height:"".concat(a,"%")},e.image),e.title&&r.a.createElement(rt.a,{mb:!e.description&&e.button?2:0},r.a.createElement(O.a,{variant:l},e.title)),e.description&&r.a.createElement(rt.a,{mb:e.button&&2},r.a.createElement(O.a,{variant:"body1"},e.description)),r.a.createElement(bt.a,{onMouseEnter:m,onMouseLeave:p}),e.button&&e.button)):"card"===e.type?r.a.createElement(n.Fragment,null,r.a.createElement(f,{open:b}),r.a.createElement(rt.a,{padding:e.padding,textAlign:"center"},e.image&&r.a.createElement(rt.a,{clone:!0,mb:e.title||e.description?2:0,width:"".concat(t,"%"),height:"".concat(a,"%")},e.image),e.title&&r.a.createElement(rt.a,{mb:!e.description&&e.button?2:0},r.a.createElement(O.a,{variant:l},e.title)),e.description&&r.a.createElement(rt.a,{mb:e.button&&2},r.a.createElement(O.a,{variant:"body1"},e.description)),r.a.createElement(bt.a,{onMouseEnter:m,onMouseLeave:p}),e.button&&e.button)):null},vt=function(){return r.a.createElement("span",null,"\u0421\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u043a\u043e\u043d\u0441\u043e\u043b\u044c")};gt.defaultProps={title:"\u041e\u0448\u0438\u0431\u043a\u0430",description:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a",poper:r.a.createElement(vt,null),type:"page",size:"medium",padding:2};var Ot=gt,jt=a(289);function ht(){var e=Object(F.a)(["\n  query {\n    polls {\n      id\n      title\n      code\n      liter\n      color\n      startDate\n      endDate\n      sample\n      way\n      type\n      complete\n      questionsCount\n      answersCount\n      active\n      cities {\n        id\n        title\n      }\n    }\n  }\n"]);return ht=function(){return e},e}var yt=Object(M.a)(ht());function xt(){var e=Object(F.a)(["\n  mutation ($newPoll: PollWithConfig!, $poolOfQuestions: [QuestionInput], $logic: LogicInput, $topic: [TopicInput]) {\n    addPoll(poll: $newPoll, questions: $poolOfQuestions, logic: $logic, topic: $topic) {\n      id\n      title\n      code\n      liter\n      color\n      startDate\n      endDate\n      sample\n      way\n      type\n      complete\n      questionsCount\n      answersCount\n      active\n      cities {\n        id\n        title\n      }\n    }\n  }\n"]);return xt=function(){return e},e}var wt=Object(M.a)(xt()),Ct=function(){var e=Object(n.useState)(!1),t=Object(d.a)(e,2),a=t[0],l=t[1],c=Object(jt.a)(yt),i=c.loading,o=c.error,u=c.data,s=Object(P.useMutation)(wt,{onError:function(e){l({type:"error",text:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c. \u0421\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u043a\u043e\u043d\u0441\u043e\u043b\u044c."}),console.log(e)},update:function(e,t){var a=t.data,n=e.readQuery({query:yt}).polls;e.writeQuery({query:yt,data:{polls:[].concat(Object(ue.a)(n),[a.addPoll])}})}}),m=Object(d.a)(s,2),p=m[0],b=m[1].loading;if(i)return r.a.createElement(ct,null);if(o)return r.a.createElement(Ot,{title:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a",description:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u043a\u0440\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0435. \u0421\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u043a\u043e\u043d\u0441\u043e\u043b\u044c"});var f=function(){return b?r.a.createElement(ot,null):null};return r.a.createElement(n.Fragment,null,r.a.createElement(mt,{open:a,text:a?a.text:"",type:a?a.type:"",close:function(){return l(!1)}}),r.a.createElement(f,null),r.a.createElement(se.a,{maxWidth:"md"},r.a.createElement(Ne,{data:u})),r.a.createElement(nt,{addPoll:p}))},kt=function(){return r.a.createElement(n.Fragment,null,r.a.createElement(oe,{title:"\u041e\u043f\u0440\u043e\u0441\u044b"}),r.a.createElement(Ct,null))},St=a(309),qt=a.n(St),Nt=Object($.a)((function(e){return{grow:{flexGrow:1},menuButton:{marginRight:e.spacing(2),textDecoration:"none"},title:Object(b.a)({display:"none"},e.breakpoints.up("xs"),{display:"block"}),inputRoot:{color:"inherit"},sectionDesktop:{display:"flex"},sectionMobile:Object(b.a)({display:"flex"},e.breakpoints.up("sm"),{display:"none"}),arrow:{color:"white",textDecoration:"none"}}})),$t=function(e){var t=e.title,a=Nt(),n=r.a.useState(null),l=Object(d.a)(n,2),c=l[0],i=l[1],o=Boolean(c),u=function(){i(null)},s=r.a.createElement(h.a,{anchorEl:c,anchorOrigin:{vertical:"top",horizontal:"right"},id:"primary-apps-menu",keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:o,onClose:u},r.a.createElement(j.a,{onClick:u},"\u041f\u0423\u0421\u0422\u041e_1"),r.a.createElement(j.a,{onClick:u},"\u041f\u0423\u0421\u0422\u041e_2"));return r.a.createElement("div",{className:a.grow},r.a.createElement(f.a,{position:"static"},r.a.createElement(E.a,null,r.a.createElement(m.b,{to:"/"},r.a.createElement(v.a,{edge:"start",className:a.menuButton,color:"inherit","aria-label":"open drawer"},r.a.createElement(qt.a,{className:a.arrow}))),r.a.createElement(O.a,{className:a.title,variant:"h6",noWrap:!0},t),r.a.createElement("div",{className:a.grow}),r.a.createElement("div",{className:a.sectionDesktop},r.a.createElement(v.a,{edge:"end","aria-label":"apps","aria-controls":"primary-apps-menu","aria-haspopup":"true",onClick:function(e){i(e.currentTarget)},color:"inherit"},r.a.createElement(C.a,null))))),s)},Ft=function(){return r.a.createElement("p",null,"\u041f\u043e\u043a\u0430 \u041f\u0443\u0441\u0442\u043e")},At=function(){return r.a.createElement(n.Fragment,null,r.a.createElement($t,{title:"\u0410\u0440\u0445\u0438\u0432 \u043e\u043f\u0440\u043e\u0441\u043e\u0432"}),r.a.createElement("div",null,r.a.createElement(se.a,{maxWidth:"xl",style:{padding:0}},r.a.createElement(Ft,null))))},Tt=a(464),It=a(477),Bt=a(479),Mt=function(e){var t=e.answer,a=e.focusHandler,l=e.blurHandler,c=Object(n.useRef)(null);Object(n.useEffect)((function(){t.focus&&c.current.focus(),""!==t.freeAnswerText&&(c.current.value=t.freeAnswerText)}),[]);return t.showFreeAnswer?r.a.createElement("span",null,r.a.createElement("input",{className:"free-answer",type:"text",ref:c,"data-code":t.code,"data-keycode":t.keyCode,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0432\u043e\u0431\u043e\u0434\u043d\u044b\u0439 \u043e\u0442\u0432\u0435\u0442",onKeyUp:function(e){var t=e.keyCode;if(13!==t)return 27===t?""!==c.current.value?void(c.current.value=""):void e.currentTarget.blur():void 0;e.currentTarget.blur()},onFocus:a,onBlur:l})):null},Pt=a(77),Dt=a.n(Pt),zt=function(e){var t=e.answer,a=e.clickHandler,l=e.focusHandler,c=e.blurHandler,i=e.settings,o=Object(n.useRef)(null),u=["answer-wrap"],s=["answer-title"];t.selected&&u.push("selected"),t.disabled&&s.push("disabled");return r.a.createElement(n.Fragment,null,r.a.createElement("div",{onClick:function(e){a(o.current)},className:u.join(" "),ref:o,"data-code":t.keyCode},r.a.createElement("div",{className:"answer-title"},r.a.createElement("span",{className:"answer-key"},t.showIndex),r.a.createElement("span",null," "),i.codesShow&&r.a.createElement("span",{className:"answer-code"},t.code),r.a.createElement("span",null," - "),r.a.createElement("span",{className:s.join(" ")},t.title),r.a.createElement("span",{className:"free-answer-icon"},t.freeAnswer?r.a.createElement(Dt.a,{fontSize:"small"}):null),r.a.createElement("span",{className:"answer-exclude-message"},t.excludeM)),r.a.createElement("div",null,t.showFreeAnswer&&r.a.createElement(Mt,{answer:t,focus:t.focus,focusHandler:l,blurHandler:c}))))},Wt=a(484),Rt=a(480),Ut=Object($.a)((function(e){return{root:{width:500,"& > * + *":{marginTop:e.spacing(3)}},errorText:{color:"red"}}}));function Lt(e){var t=e.data,a=e.limit,l=e.settings,c=e.multipleHandler,i=Ut(),o=Object(n.useState)([]),u=Object(d.a)(o,2),s=u[0],m=u[1],p=Object(n.useState)([]),b=Object(d.a)(p,2),f=b[0],E=b[1],g=Object(n.useState)({state:!1,text:""}),v=Object(d.a)(g,2),O=v[0],j=v[1];Object(n.useEffect)((function(){var e=t.filter((function(e){if(e.selected)return e})),a=t.map((function(e){return e.code}));E(a),m(e)}),[]);return r.a.createElement("div",{className:i.root},r.a.createElement(Rt.a,{multiple:a>1,id:"tags-standard",options:t,onChange:function(e,t,n){switch(n){case"select-option":if(t.length>a)return void j({state:!0,text:"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043e\u0442\u0432\u0435\u0442\u043e\u0432"});m(t),j(Object($e.a)(Object($e.a)({},O),{},{state:!1}));break;case"remove-option":m(t),j(Object($e.a)(Object($e.a)({},O),{},{state:!1}));break;case"clear":m([]),j(Object($e.a)(Object($e.a)({},O),{},{state:!1}))}},value:s,getOptionLabel:function(e){return e.title},getOptionDisabled:function(e){return e.disabled},renderOption:function(e){return l.codesShow?r.a.createElement("span",null,r.a.createElement("span",{style:{fontSize:"10px"}},e.code)," - ",e.title):e.title},onBlur:function(e){j(Object($e.a)(Object($e.a)({},O),{},{state:!1})),c(s,f)},renderTags:function(e,t){return e.map((function(e,a){return r.a.createElement(Wt.a,Object.assign({},t({index:a}),{variant:"outlined",key:a,label:l.codesShow?r.a.createElement("span",null,r.a.createElement("span",{style:{fontSize:"10px"}},e.code)," - ",e.title):r.a.createElement("span",null,e.title)}))}))},renderInput:function(e){return r.a.createElement(Pe.a,Object.assign({},e,{error:O.state,variant:"standard",label:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043e\u0442\u0432\u0435\u0442\u044b",helperText:O.state?O.text:""}))}}))}var Ht=function(e){var t=e.count,a=e.question,l=e.clickHandler,c=e.focusHandler,i=e.blurHandler,o=e.multipleHandler,u=e.settings;return r.a.createElement(n.Fragment,null,r.a.createElement("span",{className:"drive-question-card"},r.a.createElement("h3",{className:"question-title-card"},r.a.createElement("span",{className:"question-number"},t+1),r.a.createElement("span",null," - "),a.title),r.a.createElement("div",null,a.mega?r.a.createElement(Lt,{data:a.answers,limit:a.limit,settings:u,multipleHandler:o}):a.answers.map((function(e,t){return r.a.createElement(zt,{key:t,answer:e,clickHandler:l,focusHandler:c,blurHandler:i,settings:u})})))))},Qt=a(463),Vt=function(e){var t=e.open,a=e.handleClose,n=e.finishAll,l=e.confirm;return r.a.createElement("div",null,r.a.createElement(Ae.a,{open:t,onClose:a,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(Be.a,{id:"alert-dialog-title"},"\u0414\u0430\u043d\u043d\u0430\u044f \u0430\u043d\u043a\u0435\u0442\u0430 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0430."),r.a.createElement(Ie.a,null,r.a.createElement(Qt.a,{id:"alert-dialog-description"},"\u041a\u0430\u0436\u0435\u0442\u0441\u044f \u0434\u0430\u043d\u043d\u0430\u044f \u0430\u043d\u043a\u0435\u0442\u0430 \u0437\u0430\u043a\u043e\u043d\u0447\u0435\u043d\u0430. \u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043a \u0434\u0440\u0443\u0433\u043e\u0439 \u0430\u043d\u043a\u0435\u0442\u0435?")),r.a.createElement(Te.a,null,r.a.createElement(Me.a,{onClick:a,color:"primary"},"\u041e\u0442\u043c\u0435\u043d\u0430"),r.a.createElement(Me.a,{onClick:n,color:"primary"},"\u0417\u0430\u043a\u043e\u043d\u0447\u0438\u0442\u044c"),r.a.createElement(Me.a,{onClick:l,color:"primary",autoFocus:!0},"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0430\u044f"))))},_t=function(e){var t=e.open,a=e.confirm,n=e.close,l=e.data,c=e.buttons;return r.a.createElement(Ae.a,{open:t,onClose:n,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(Be.a,{id:"alert-dialog-title"},l.title),r.a.createElement(Ie.a,null,r.a.createElement(Qt.a,{id:"alert-dialog-description"},l.text)),r.a.createElement(Te.a,null,c.close&&r.a.createElement(Me.a,{onClick:n,color:"primary"},c.close),c.confirm&&r.a.createElement(Me.a,{onClick:a,color:"primary",autoFocus:!0},c.confirm)))},Jt=[8,9,16,17,18,19,20,32,33,34,35,36,38,40,91,106,107,109,110,112,113,114,115,116,117,118,119,120,121,122,123,144],Kt=[27],Gt=[48,96,13],Zt={97:49,98:50,99:51,100:52,101:53,102:54,103:55,104:56,105:57},Xt=[37,39,49,50,51,52,53,54,55,56,57,81,87,69,82,84,89,85,73,79,80,65,83,68,70,71,72,74,75,76,90,88,67,97,98,99,100,101,102,103,104,105],Yt=[["1",49],["2",50],["3",51],["4",52],["5",53],["6",54],["7",55],["8",56],["9",57],["Q",81],["W",87],["E",69],["R",82],["T",84],["Y",89],["U",85],["I",73],["O",79],["P",80],["A",65],["S",83],["D",68],["F",70],["G",71],["H",72],["J",74],["K",75],["L",76],["Z",90],["X",88],["C",67],["V",86],["B",66],["N",78],["M",77]];function ea(e){return void 0!==Zt[e]?Zt[e]:e}var ta=function(e){return function(e){return Xt.includes(e)}(e)?{do:1,trueCode:ea(e)}:function(e){return Jt.includes(e)}(e)?{do:4}:function(e){return Kt.includes(e)}(e)?{do:2}:function(e){return Gt.includes(e)}(e)?{do:3}:{do:4}},aa=function(e,t,a,n,r){var l=e.questions[t],c=[],i=[],o=n.invisible?l.answers.filter((function(e){return!n.invisible.includes(e.code)})):l.answers,u=!!n.criticalExclude&&n.criticalExclude,s=!1,d=!1,m=!1,p=o.map((function(e,t){var r={freeAnswer:!1,showFreeAnswer:!1,freeAnswerText:"",focus:!1,selected:!1,disabled:!1,exclude:[],excludeM:""};if(i.push(e.code),u){for(var p in u)p===e.code&&(r=Object($e.a)(Object($e.a)({},r),{},{exclude:[].concat(Object(ue.a)(r.exclude),Object(ue.a)(u[p]))})),u[p].includes(e.code)&&(r=Object($e.a)(Object($e.a)({},r),{},{exclude:[].concat(Object(ue.a)(r.exclude),[p])}));r.exclude.map((function(e){a.pool.includes(e)&&(r=Object($e.a)(Object($e.a)({},r),{},{disabled:!0,excludeM:"\u043f\u0440\u043e\u0442\u0438\u0432\u043e\u0440\u0435\u0447\u0438\u0442 \u043a\u043e\u0434\u0443 ".concat(e)}))}))}if(o.length>Yt.length?c[t]=[t,t+1]:(c[t]=Yt[t][1],r=Object($e.a)(Object($e.a)({},r),{},{showIndex:Yt[t][0],keyCode:Yt[t][1]})),a.pool.includes(e.code)&&(d=!0,r=Object($e.a)(Object($e.a)({},r),{},{selected:!0})),n.unique.includes(e.code)&&(s=!0,r=Object($e.a)(Object($e.a)({},r),{},{unique:!0})),n.unique.includes(e.code)&a.pool.includes(e.code)&&(m=!0),n.freeAnswers.includes(e.code)&&(r=Object($e.a)(Object($e.a)({},r),{},{freeAnswer:!0,focus:!0})),a[l.id])for(var b=a[l.id].data,f=0;f<b.length;f++)e.code===b[f].answerCode&&""!==b[f].freeAnswerText&&(r=Object($e.a)(Object($e.a)({},r),{},{freeAnswer:!0,showFreeAnswer:!0,freeAnswerText:b[f].freeAnswerText,focus:!1}));return Object($e.a)(Object($e.a)({},e),r)})),f={mega:!1,megaMltp:!1,multiple:!1};if(l.limit>1&&(f=Object($e.a)(Object($e.a)({},f),{},{multiple:!0})),f=o.length>Yt.length?Object($e.a)(Object($e.a)({},f),{},{mega:!0,megaMltp:l.limit}):Object($e.a)(Object($e.a)({},f),{},{keyCodesPool:c}),p.reduce((function(e,t){return e+t.disabled}),0)===p.length)return r((function(e){return Object($e.a)(Object($e.a)({},e),{},Object(b.a)({},l.id,{data:[],codesPool:i,count:t}))})),{next:!0};void 0===a[l.id]&&r((function(e){return Object($e.a)(Object($e.a)({},e),{},Object(b.a)({},l.id,{data:[],codesPool:i,count:t}))}));var E=p.map((function(e,t){return d&&s?m?e.unique&e.selected?e:Object($e.a)(Object($e.a)({},e),{},{disabled:!0}):e.unique?Object($e.a)(Object($e.a)({},e),{},{disabled:!0}):e:e})).map((function(e){if(u)for(var t in u)if(a.pool.includes(t))return u[t].includes(e.code)?Object($e.a)(Object($e.a)({},e),{},{disabled:!0}):e;return e}));return{next:!1,data:Object($e.a)(Object($e.a)(Object($e.a)({},l),f),{},{answers:E})}},na=function(e){var t=new(window.AudioContext||window.webkitAudioContext);e=Object.assign({volume:.25,frequency:3020,duration:150,type:"sine"},e);var a=t.createOscillator(),n=t.createGain();a.connect(n),n.connect(t.destination),n.gain.value=e.volume,a.frequency.value=e.frequency,a.type=e.type,a.start(),setTimeout((function(){a.stop()}),e.duration)},ra=function(e){var t=e.poll,a=e.logics,l=e.setCurrentQuestion,c=e.saveAndGoBack,i=e.saveWorksheet,o=t.questions.length,u=Object(n.useState)(null),s=Object(d.a)(u,2),m=s[0],f=s[1],E=Object(n.useState)({codesShow:!0}),g=Object(d.a)(E,2),v=g[0],j=g[1],h=Object(n.useState)(!1),y=Object(d.a)(h,2),x=y[0],w=y[1],C=Object(n.useState)(1),k=Object(d.a)(C,2),S=k[0],q=k[1],N=Object(n.useState)(a),$=Object(d.a)(N,1)[0],F=Object(n.useState)(0),A=Object(d.a)(F,2),T=A[0],I=A[1],B=Object(n.useState)({pool:[]}),M=Object(d.a)(B,2),P=M[0],D=M[1],z=Object(n.useState)(!1),W=Object(d.a)(z,2),R=W[0],U=W[1],L=Object(n.useState)(!1),H=Object(d.a)(L,2),Q=H[0],V=H[1],_=Object(n.useState)(""),J=Object(d.a)(_,2),K=J[0],G=J[1],Z=function(e){var t=e.target,a=e.keyCode;if("BODY"===t.nodeName){var n=ta(a);switch(n.do){case 1:return void re(n.trueCode);case 3:return void X();case 2:return void ne();case 4:default:return}}},X=function(){if(R)ae();else{if(P[m.id].data.length)return void Y();na()}},Y=function(){q(1),I(T<o-1?T+1:0)},ee=function(){q(0),I(0===T?o-1:T-1)};Object(n.useEffect)((function(){return document.addEventListener("keyup",Z),function(){document.removeEventListener("keyup",Z)}})),Object(n.useEffect)((function(){var e=aa(t,T,P,$,D);if(e)if(e.next)if(S){if(T===o-1)return console.log("END"),void w(!0);I(T+1)}else I(T-1);else f(e.data),l(e.data)}),[T]);var te=function(e){var a=0;for(var n in e)"pool"!==n&&a++;if(a<t.questions.length)return!1;for(var r in e)if("pool"!==r){var l=e[r];if(!l.data.length){if(!$.criticalExclude)return G("\u041f\u0440\u043e\u043f\u0443\u0449\u0435\u043d ".concat(l.count+1,"\u0439 \u0432\u043e\u043f\u0440\u043e\u0441")),U(!1),!1;var c=function(){var t=e.pool,a=l.codesPool,n=$.criticalExclude;if(a.filter((function(e,a){for(var r in n)if(t.includes(r)&&n[r].includes(e))return!1;return!0})).length)return G("\u041f\u0440\u043e\u043f\u0443\u0449\u0435\u043d ".concat(l.count+1,"\u0439 \u0432\u043e\u043f\u0440\u043e\u0441")),U(!1),{v:!1}}();if("object"===typeof c)return c.v}}return G(""),U(!0),!0},ae=function(){V(!0)},ne=function(){var e=P[m.id].data.reduce((function(e,t){return[].concat(Object(ue.a)(e),[t.answerCode])}),[]),t={};for(var a in P)a===m.id?t[m.id]=Object($e.a)(Object($e.a)({},P[m.id]),{},{data:[]}):t="pool"!==a?Object($e.a)(Object($e.a)({},t),{},Object(b.a)({},a,P[a])):Object($e.a)(Object($e.a)({},t),{},{pool:P.pool.filter((function(t){return!e.includes(t)}))});D(t),te(t),f((function(e){return Object($e.a)(Object($e.a)({},e),{},{answers:e.answers.map((function(e){return Object($e.a)(Object($e.a)({},e),{},{selected:!1,showFreeAnswer:!1,disabled:!1})})).map((function(e){var a=[];for(var n in $.criticalExclude)n===e.code&&(a=[].concat(Object(ue.a)(a),Object(ue.a)($.criticalExclude[n]))),$.criticalExclude[n].includes(e.code)&&(a=[].concat(Object(ue.a)(a),[n]));for(var r=0;r<a.length;r++)if(t.pool.includes(a[r]))return Object($e.a)(Object($e.a)({},e),{},{disabled:!0,excludeM:"\u043f\u0440\u043e\u0442\u0438\u0432\u043e\u0440\u0435\u0447\u0438\u0442 \u043a\u043e\u0434\u0443 ".concat(a[r])});return Object($e.a)(Object($e.a)({},e),{},{disabled:!1,excludeM:""})}))})})),U(!1)},re=function(e){var t=+e,a=m.keyCodesPool,n=m.answers.filter((function(e){return e.keyCode===t}))[0];if(39!==t)if(37!==t)if(a.includes(t)){if(P.pool.includes(n.code)){var r={};for(var l in P)r=l===m.id?Object($e.a)(Object($e.a)({},r),{},Object(b.a)({},m.id,Object($e.a)(Object($e.a)({},P[m.id]),{},{data:P[m.id].data.filter((function(e){return e.answerCode!==n.code}))}))):"pool"!==l?Object($e.a)(Object($e.a)({},r),{},Object(b.a)({},l,P[l])):Object($e.a)(Object($e.a)({},r),{},{pool:P.pool.filter((function(e){return e!==n.code}))});return D(r),f((function(e){return Object($e.a)(Object($e.a)({},e),{},{answers:e.answers.map((function(e){return e.code===n.code?Object($e.a)(Object($e.a)({},e),{},{selected:!1,showFreeAnswer:!1}):e})).map((function(e){return r[m.id].data.length?e:Object($e.a)(Object($e.a)({},e),{},{disabled:!1})})).map((function(e){var t=[];for(var a in $.criticalExclude)a===e.code&&(t=[].concat(Object(ue.a)(t),Object(ue.a)($.criticalExclude[a]))),$.criticalExclude[a].includes(e.code)&&(t=[].concat(Object(ue.a)(t),[a]));for(var n=0;n<t.length;n++)if(r.pool.includes(t[n]))return Object($e.a)(Object($e.a)({},e),{},{disabled:!0,excludeM:"\u043f\u0440\u043e\u0442\u0438\u0432\u043e\u0440\u0435\u0447\u0438\u0442 \u043a\u043e\u0434\u0443 ".concat(t[n])});return Object($e.a)(Object($e.a)({},e),{},{disabled:!1,excludeM:""})})).map((function(e){return r[m.id].data.length&&e.unique?Object($e.a)(Object($e.a)({},e),{},{disabled:!0}):e}))})})),void te(r)}if($.unique.includes(n.code)&&P[m.id].data.length)return void na();if(n.disabled||P[m.id].data.length>=m.limit)return void na();if(n.freeAnswer)return void f((function(e){return Object($e.a)(Object($e.a)({},e),{},{answers:e.answers.map((function(e){return e.keyCode===n.keyCode?Object($e.a)(Object($e.a)({},e),{},{selected:!0,showFreeAnswer:!0}):e}))})}));var c={answerCode:n.code,answerId:n.id,freeAnswer:!1,freeAnswerText:""};for(var i in $.criticalExclude)if(P.pool.includes(i)&&$.criticalExclude[i].includes(n.code))return void na();for(var o in $.nonCriticalExclude)P.pool.includes(o)&&$.nonCriticalExclude[o].includes(n.code)&&console.log("\u041e\u0442\u0432\u0435\u0442 \u043d\u0435 \u0441\u043e\u0432\u0441\u0435\u043c \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u0435\u043d");var u=Object.assign({},P);if(u[m.id].data.push(c),u.pool.push(n.code),D(u),f((function(e){return Object($e.a)(Object($e.a)({},e),{},{answers:e.answers.map((function(e){return e.keyCode===t?Object($e.a)(Object($e.a)({},e),{},{selected:!0}):e})).map((function(e){return $.unique.includes(e.code)&e.keyCode!==t?Object($e.a)(Object($e.a)({},e),{},{disabled:!0}):e})).map((function(e){return n.exclude.includes(e.code)?Object($e.a)(Object($e.a)({},e),{},{disabled:!0,excludeM:"\u043f\u0440\u043e\u0442\u0438\u0432\u043e\u0440\u0435\u0447\u0438\u0442 \u043a\u043e\u0434\u0443 ".concat(n.code)}):e}))})})),$.unique.includes(n.code)&&f((function(e){return Object($e.a)(Object($e.a)({},e),{},{answers:e.answers.map((function(e){return e.keyCode===t?e:Object($e.a)(Object($e.a)({},e),{},{disabled:!0})}))})})),te(u))return;if(P[m.id].data.length>=m.limit)return void setTimeout((function(){Y()}),100)}else na();else setTimeout((function(){ee()}),0);else setTimeout((function(){Y()}),0)},le=function(){return r.a.createElement(O.a,{variant:"overline",display:"block",gutterBottom:!0},K)};return r.a.createElement(n.Fragment,null,r.a.createElement(p.a,{when:P.pool.length,message:function(e){return"\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u043f\u043e\u043a\u0438\u043d\u0443\u0442\u044c \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443 \u0432\u0432\u043e\u0434\u0430 \u0434\u0430\u043d\u043d\u044b\u0445. \u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0431\u0443\u0434\u0443\u0442 \u043f\u043e\u0442\u0435\u0440\u044f\u043d\u044b!"}}),r.a.createElement(_t,{open:x,confirm:function(){D({pool:[]}),I(0),w(!1)},buttons:{confirm:"\u0417\u0430\u043d\u043e\u0432\u043e"},data:{title:"\u0410\u043d\u043a\u0435\u0442\u0430 \u0434\u043e\u0441\u0440\u043e\u0447\u043d\u043e \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0430",text:"\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435! \u0412\u043d\u043e\u0441\u0438\u043c\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u043f\u0440\u043e\u0442\u0438\u0432\u043e\u0440\u0435\u0447\u0430\u0442 \u0443\u0441\u043b\u043e\u0432\u0438\u044f\u043c \u043f\u0440\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u043e\u0433\u043e \u043e\u043f\u0440\u043e\u0441\u0430. \u0412\u0435\u0440\u043e\u044f\u0442\u043d\u043e \u0431\u044b\u043b \u0432\u044b\u0431\u0440\u0430\u043d \u043a\u043e\u0434, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u043f\u0440\u0438\u0432\u0435\u043b \u043a \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0438\u044e. \u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u044b\u0439 \u0444\u0430\u0439\u043b."}}),r.a.createElement(Vt,{open:Q,handleClose:function(){V(!1)},finishAll:function(){U(!1),V(!1),c(P)},confirm:function(){i(P),D({pool:[]}),I(0),U(!1),V(!1)}}),r.a.createElement(Oe.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement(Oe.a,{container:!0,xs:6,md:3,justify:"flex-start"},r.a.createElement(Tt.a,{value:"end",control:r.a.createElement(It.a,{color:"primary",onChange:function(e){j((function(e){return Object($e.a)(Object($e.a)({},e),{},{codesShow:!e.codesShow})}))},defaultChecked:v.codesShow}),label:"\u041a\u043e\u0434\u044b \u043e\u0442\u0432\u0435\u0442\u043e\u0432",labelPlacement:"end"})),r.a.createElement(Bt.a,{only:["sm","xs"]},r.a.createElement(Oe.a,{container:!0,md:6,justify:"center"},r.a.createElement(le,null))),r.a.createElement(Oe.a,{container:!0,xs:6,md:3,justify:"flex-end"},r.a.createElement("p",null,"\u0412\u0441\u0435\u0433\u043e: ",r.a.createElement("span",null,r.a.createElement("strong",null,o)))),r.a.createElement(Bt.a,{mdUp:!0},r.a.createElement(Oe.a,{container:!0,xs:12,justify:"center"},r.a.createElement(le,null)))),m&&r.a.createElement(Ht,{count:T,question:m,settings:v,clickHandler:function(e){var t=e.dataset.code,a=m.answers.filter((function(e){return e.keyCode===+t}))[0];a.freeAnswer&&a.selected||re(t)},blurHandler:function(e){var t=e.currentTarget.value,a=e.currentTarget.dataset.code,n=e.currentTarget.dataset.keycode,r=m.answers.filter((function(e){return e.keyCode===+n}))[0];if(""===t){var l={};for(var c in P)l=c===m.id?Object($e.a)(Object($e.a)({},l),{},Object(b.a)({},m.id,Object($e.a)(Object($e.a)({},P[m.id]),{},{data:P[m.id].data.filter((function(e){return e.answerCode!==a}))}))):"pool"!==c?Object($e.a)(Object($e.a)({},l),{},Object(b.a)({},c,P[c])):Object($e.a)(Object($e.a)({},l),{},{pool:P.pool.filter((function(e){return e!==a}))});return D(l),f((function(e){return Object($e.a)(Object($e.a)({},e),{},{answers:e.answers.map((function(e){return e.code===a?Object($e.a)(Object($e.a)({},e),{},{selected:!1,showFreeAnswer:!1}):e})).map((function(e){return l[m.id].data.length?e:Object($e.a)(Object($e.a)({},e),{},{disabled:!1})})).map((function(e){var t=[];for(var a in $.criticalExclude)a===e.code&&(t=[].concat(Object(ue.a)(t),Object(ue.a)($.criticalExclude[a]))),$.criticalExclude[a].includes(e.code)&&(t=[].concat(Object(ue.a)(t),[a]));for(var n=0;n<t.length;n++)if(l.pool.includes(t[n]))return Object($e.a)(Object($e.a)({},e),{},{disabled:!0,excludeM:"\u043f\u0440\u043e\u0442\u0438\u0432\u043e\u0440\u0435\u0447\u0438\u0442 \u043a\u043e\u0434\u0443 ".concat(t[n])});return Object($e.a)(Object($e.a)({},e),{},{disabled:!1,excludeM:""})})).map((function(e){return l[m.id].data.length&&e.unique?Object($e.a)(Object($e.a)({},e),{},{disabled:!0}):e}))})})),void te(l)}var i={answerCode:a,answerId:r.id,freeAnswer:!1,freeAnswerText:t},o={};P.pool.includes(a)?(o=Object.assign({},P))[m.id]=Object($e.a)(Object($e.a)({},o[m.id]),{},{data:P[m.id].data.map((function(e){return e.answerCode===a?Object($e.a)(Object($e.a)({},e),{},{freeAnswerText:t}):e}))}):((o=Object.assign({},P))[m.id].data.push(i),o.pool.push(a)),D(o),$.unique.includes(a)&&f((function(e){return Object($e.a)(Object($e.a)({},e),{},{answers:e.answers.map((function(e){return e.keyCode===+n?e:Object($e.a)(Object($e.a)({},e),{},{disabled:!0})}))})})),f((function(e){return Object($e.a)(Object($e.a)({},e),{},{answers:e.answers.map((function(e){return e.keyCode===a?Object($e.a)(Object($e.a)({},e),{},{selected:!0}):e})).map((function(e){return $.unique.includes(e.code)&e.keyCode!==a?Object($e.a)(Object($e.a)({},e),{},{disabled:!0}):e})).map((function(e){return r.exclude.includes(e.code)?Object($e.a)(Object($e.a)({},e),{},{disabled:!0,excludeM:"\u043f\u0440\u043e\u0442\u0438\u0432\u043e\u0440\u0435\u0447\u0438\u0442 \u043a\u043e\u0434\u0443 ".concat(r.code)}):e}))})})),te(o)||P[m.id].data.length>=m.limit-1&&setTimeout((function(){Y()}),100)},multipleHandler:function(e,t){if(e.length){var a=e.map((function(e){return e.code})),n=e.map((function(e){return{answerCode:e.code,freeAnswer:!1,freeAnswerText:""}})),r=P.pool.filter((function(e){return!t.includes(e)}));return D((function(e){var t;return Object($e.a)(Object($e.a)({},e),{},(t={},Object(b.a)(t,m.id,Object($e.a)(Object($e.a)({},e[m.id]),{},{data:Object(ue.a)(n)})),Object(b.a)(t,"pool",[].concat(Object(ue.a)(r),Object(ue.a)(a))),t))})),void(e.length&&setTimeout((function(){Y()}),100))}D((function(e){var a;return Object($e.a)(Object($e.a)({},e),{},(a={},Object(b.a)(a,m.id,Object($e.a)(Object($e.a)({},e[m.id]),{},{data:[]})),Object(b.a)(a,"pool",e.pool.filter((function(e){return!t.includes(e)}))),a))}))}}),r.a.createElement(Me.a,{onClick:ee,variant:"contained",className:"control-button"},"\u041d\u0430\u0437\u0430\u0434"),r.a.createElement(Me.a,{onClick:Y,variant:"contained",className:"control-button"},"\u0412\u043f\u0435\u0440\u0435\u0434"),R&&r.a.createElement(Me.a,{onClick:ae,variant:"contained",className:"control-button"},"\u0424\u0438\u043d\u0438\u0448"))},la=a(394),ca=function(e){var t=e.open,a=e.handleClose,l=e.save,c=e.header,i=e.text,o=e.options,u=Object(n.useState)(""),s=Object(d.a)(u,2),m=s[0],p=s[1];return r.a.createElement("div",null,r.a.createElement(Ae.a,{open:t,"aria-labelledby":"form-dialog-title"},r.a.createElement(Be.a,{id:"form-dialog-title"},c),r.a.createElement(Ie.a,null,r.a.createElement(Qt.a,null,i),r.a.createElement(la.a,{fullWidth:!0,native:!0,value:m.id,onChange:function(e){return function(e){var t=e.target,a=t.options,n=t.selectedIndex,r=t.value,l=a[n].innerHTML;p({id:r,title:l})}(e)}},r.a.createElement("option",{"aria-label":"None",disabled:!0,selected:!0,value:""}),o.map((function(e,t){return r.a.createElement("option",{key:e.id,value:e.id},e.title)})))),r.a.createElement(Te.a,null,r.a.createElement(Me.a,{onClick:a,color:"primary"},"\u041e\u0442\u043c\u0435\u043d\u0430"),r.a.createElement(Me.a,{onClick:function(){l(m)},disabled:!Boolean(m),color:"primary"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"))))},ia=a(291);function oa(){var e=Object(F.a)(["\n  query ($id: ID!) {\n    poll(id: $id) {\n      id\n      questions{\n        id\n        title\n        limit\n        order\n        answers {\n          id\n          code\n          title\n        }\n      }\n      cities {\n        id\n        title\n      }\n      logic {\n        path\n      }\n    }\n  }\n"]);return oa=function(){return e},e}var ua=Object(M.a)(oa());function sa(){var e=Object(F.a)(["\n  query ($id: String!) {\n    pollResults(id: $id) {\n      id\n      user {\n        id\n        username\n      }\n      city {\n        id\n        title\n        category {\n          title\n        }\n      }\n      created\n      lastModified\n      processed\n      result {\n        answer\n        code\n        text\n      }\n    }\n  }\n\n"]);return sa=function(){return e},e}function da(){var e=Object(F.a)(["\nquery ($id: ID!) {\n  poll(id: $id) {\n    id\n    title\n    results {\n      id\n      user {\n        id\n        username\n      }\n      city {\n        id\n        title\n        category {\n          title\n        }\n      }\n      created\n      lastModified\n      processed\n      result {\n        answer\n        code\n        text\n      }\n    }\n    questions {\n      id\n      title\n      order\n      limit\n      type\n      answers {\n        id\n        title\n        order\n        code\n        results {\n          id\n          code\n          text\n          respondent {\n            id\n          }\n        }\n      }\n    }\n  }\n}\n"]);return da=function(){return e},e}function ma(){var e=Object(F.a)(["\n  query {\n    cities {\n      id\n      title\n      population\n      category {\n        title\n      }\n    }\n    intervievers {\n      id\n      username\n    }\n    status {\n      value\n      title\n    }\n    sex {\n      value\n      title\n    }\n    age {\n      value\n      title\n    }\n  }\n"]);return ma=function(){return e},e}var pa=Object(M.a)(ma()),ba=Object(M.a)(da());Object(M.a)(sa());function fa(){var e=Object(F.a)(["\nmutation ($poll: String!, $city: String!, $user: String!, $pool: [String], $data: [ResultData]) {\n  saveResult(\n    poll: $poll,\n    city: $city,\n    user: $user,\n    pool: $pool,\n    data: $data\n  )\n}\n"]);return fa=function(){return e},e}var Ea=Object(M.a)(fa()),ga=function(e){var t={section:/^\s*\[\s*([^\]]*)\s*\]\s*$/,param:/^\s*([^=]+?)\s*=\s*(.*?)\s*$/,comment:/^\s*#.*$/},a={},n=e.split(/[\r\n]+/),r=null;return n.forEach((function(e){if(!t.comment.test(e))if(t.param.test(e)){var n=e.match(t.param);r?a[r][n[1]]=va(n[2]):a[n[1]]=va(n[2])}else if(t.section.test(e)){var l=e.match(t.section);a[l[1]]={},r=l[1]}else 0==e.length&&r&&(r=null)})),function(e){var t=/([0-9]{1,})/gm,a={},n=null;for(var r in e)n=r.match(/[a-zA-Z]*/gm)[0],a[n]={};for(var l in e){n=l.match(/[a-zA-Z]*/gm)[0];var c=l.match(t);null!==c?a[n][c]=e[l]:a[n][1]=e[l]}return a}(a)};function va(e){var t,a=e.replace(/\s*/g,""),n={srange:/([0-9]{1,3})|\[(.+?)\]/gm},r=[];do{if((t=n.srange.exec(a))&&(void 0!==t[1]&&r.push(t[1]),void 0!==t[2])){var l=t[2];r=r.concat(Oa(l))}}while(t);return r}function Oa(e){return e.replace(/(\d{1,3})\s*-\s*(\d{1,3})/gm,(function(){var e=[],t=arguments.length<=1?void 0:arguments[1],a=arguments.length<=2?void 0:arguments[2];t>a&&(t=arguments.length<=2?void 0:arguments[2],a=arguments.length<=1?void 0:arguments[1]);for(var n=a-t+1;n;)t+="",e.push(t.padStart(3,"0")),t++,n--;return e})).split(",")}var ja=function(e){var t={};for(var a in e)!function(){switch(a){case"difficult":t=Object($e.a)(Object($e.a)({},t),{},{difficult:e[a][1].answers});break;case"freeAnswers":t=Object($e.a)(Object($e.a)({},t),{},{freeAnswers:e[a][1].answers});break;case"exclude":var n=e[a],r={},l={},c=function(e){"1"===n[e].critical[0]&&n[e].answers.map((function(t){r[t]=n[e].exclude})),"0"===n[e].critical[0]&&n[e].answers.map((function(t){l[t]=n[e].exclude}))};for(var i in n)c(i);t=Object($e.a)(Object($e.a)({},t),{},{criticalExclude:r,nonCriticalExclude:l});break;case"unique":t=Object($e.a)(Object($e.a)({},t),{},{unique:e[a][1].answers});break;case"invisible":var o=e[a],u=[];for(var s in o)u=[].concat(Object(ue.a)(u),Object(ue.a)(o[s].answers));t=Object($e.a)(Object($e.a)({},t),{},{invisible:u})}}();return t};function ha(){var e=Object(F.a)(["\n    query CurrentUserQuery {\n      currentUser {\n        id\n        username\n      }\n    }\n    "]);return ha=function(){return e},e}var ya=Object($.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}})),xa=function(e){var t=e.id,a=Object(n.useState)(!1),c=Object(d.a)(a,2),i=c[0],o=c[1],u=Object(B.a)(),s=Object(n.useState)({show:!1,type:"error",message:"",duration:6e3}),m=Object(d.a)(s,2),b=(m[0],m[1],u.readQuery({query:Object(M.a)(ha())}).currentUser),f=(ya(),Object(p.g)()),E=Object(n.useState)(null),g=Object(d.a)(E,2),v=g[0],O=g[1],j=Object(n.useState)(!1),h=Object(d.a)(j,2),y=(h[0],h[1],Object(n.useState)(null)),x=Object(d.a)(y,2),w=x[0],C=x[1],k=Object(n.useState)(!0),S=Object(d.a)(k,2),q=S[0],N=S[1],$=Object(n.useState)(null),F=Object(d.a)($,2),A=F[0],T=F[1],I=Object(n.useState)(null),P=Object(d.a)(I,2),D=P[0],z=P[1],W=Object(n.useState)({multiple:!1}),R=Object(d.a)(W,2),U=R[0],L=R[1],H=Object(jt.a)(ua,{variables:{id:t},onCompleted:function(e,t){_(V.poll.logic.path),C(V.poll.cities)}}),Q=(H.loading,H.error),V=H.data,_=function(e){fetch(l+e).then((function(e){return e.text()})).then((function(e){var t=ga(e),a=ja(t);T(a)}))},J=Object(ia.a)(Ea,{onError:function(e){console.log(e),o({type:"error",text:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c. \u0421\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u043a\u043e\u043d\u0441\u043e\u043b\u044c."})},refetchQueries:[{query:ba,variables:{id:t}}]}),K=Object(d.a)(J,2),G=K[0],Z=K[1].loading;Object(n.useEffect)((function(){if(A){var e=V.poll.questions.slice().sort((function(e,t){return e.order>t.order?1:-1}));if(A.invisible){var t=A.invisible,a=e.filter((function(e){for(var a=e.answers,n=a.length,r=0,l=0;l<n;l++)t.includes(a[l].code)&&r++;return r!==n}));O({id:V.poll.id,questions:a})}else O({id:V.poll.id,questions:e})}}),[A]);var X=function(){return Z?r.a.createElement(ot,null):null};if(!v||!w||!A||!b)return r.a.createElement(ct,null);if(Q)return console.log(JSON.stringify(Q)),r.a.createElement(Ot,{title:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a",description:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u043a\u0440\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0435. \u0421\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u043a\u043e\u043d\u0441\u043e\u043b\u044c"});var Y=function(e){var t=[];for(var a in e)"pool"!==a&&t.push({id:a,data:e[a].data.map((function(e){return{answer:e.answerId,code:e.answerCode,text:e.freeAnswerText}}))});return t};return r.a.createElement(n.Fragment,null,r.a.createElement(mt,{open:i,text:i?i.text:"",type:i?i.type:"",close:function(){return o(!1)}}),r.a.createElement(X,null),r.a.createElement("div",{style:{backgroundColor:U.multiple?"rgb(208 226 252)":"#fff"}},r.a.createElement(se.a,{maxWidth:"md"},r.a.createElement(ca,{open:q,options:w,header:"\u0413\u043e\u0440\u043e\u0434",text:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0433\u043e\u0440\u043e\u0434 \u0432 \u043a\u043e\u0442\u043e\u0440\u043e\u043c \u043f\u0440\u043e\u0432\u043e\u0434\u0438\u043b\u0441\u044f \u043e\u043f\u0440\u043e\u0441",save:function(e){z(e),N(!1)},handleClose:function(){N(!1),f.push("/")}}),r.a.createElement(ra,{poll:v,logics:A,setCurrentQuestion:L,saveAndGoBack:function(e){var t=Y(e);G({variables:{poll:v.id,city:D.id,user:b.id,pool:e.pool,data:t}}).then((function(e){f.push("/")}))},saveWorksheet:function(e){var t=Y(e);G({variables:{poll:v.id,city:D.id,user:b.id,pool:e.pool,data:t}})}}))))},wa=function(){var e=Object(p.h)(),t=e.id,a=e.code;return r.a.createElement(n.Fragment,null,r.a.createElement($t,{title:"\u041e\u043f\u0440\u043e\u0441 "+a+" - \u0432\u0431\u0438\u0432\u0430\u043d\u0438\u0435"}),r.a.createElement(xa,{id:t}))},Ca=a(476),ka=a(466);function Sa(e){var t=e.children,a=e.value,n=e.index,l=e.p,c=Object(Fe.a)(e,["children","value","index","p"]);return r.a.createElement("div",Object.assign({role:"tabpanel",className:"right-pannel",hidden:a!==n,id:"scrollable-auto-tabpanel-".concat(n),"aria-labelledby":"scrollable-auto-tab-".concat(n)},c),a===n&&r.a.createElement(rt.a,{p:l},t))}function qa(e){return{id:"scrollable-auto-tab-".concat(e),"aria-controls":"scrollable-auto-tabpanel-".concat(e)}}var Na=Object($.a)((function(e){return{tabs:{minWidth:"160px",borderRight:"1px solid ".concat(e.palette.divider),overflow:"visible"}}})),$a=function(e){var t=e.data,a=e.value,n=e.handleChange,l=Na();return r.a.createElement(Ca.a,{orientation:"vertical",variant:"scrollable",value:a,onChange:n,"aria-label":"Vertical tabs",scrollButtons:"auto",className:l.tabs},t.map((function(e,t){return r.a.createElement(ka.a,Object.assign({label:e.label,key:t},qa({index:t})))})))},Fa=function(e){var t=e.data,a=e.value,n=e.handleChange;return r.a.createElement(f.a,{position:"static",color:"default"},r.a.createElement(Ca.a,{variant:"scrollable",value:a,onChange:n,scrollButtons:"auto","aria-label":"horizontal auto tabs"},t.map((function(e,t){return r.a.createElement(ka.a,Object.assign({label:e.label},qa({index:t})))}))))},Aa=function(e){var t=e.data,a=r.a.useState(0),l=Object(d.a)(a,2),c=l[0],i=l[1],o=function(e,t){i(t)};return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"root-wrap"},r.a.createElement(Bt.a,{xsDown:!0},r.a.createElement($a,{data:t,value:c,handleChange:o})),r.a.createElement(Bt.a,{smUp:!0},r.a.createElement(Fa,{data:t,value:c,handleChange:o})),t.map((function(e,t){return r.a.createElement(Sa,{value:c,key:t,index:t,p:e.padding?e.padding:1},e.component)}))))};function Ta(){var e=Object(F.a)(["\n  query pollQuery($id: ID!) {\n    poll(id: $id) {\n      id\n      title\n      code\n      liter\n      questionsCount\n      answersCount\n      cities {\n        id\n        title\n      }\n      questions {\n        id\n        title\n        limit\n        order\n        answers {\n          id\n          title\n          order\n          code\n        }\n      }\n      logic {\n        path\n      }\n    }\n  }\n"]);return Ta=function(){return e},e}var Ia=Object(M.a)(Ta()),Ba=function(e){var t=e.id,a=Object(n.useState)(null),l=Object(d.a)(a,2),c=l[0],i=l[1],o=Object(n.useState)(null),u=Object(d.a)(o,2),s=u[0],m=u[1],p=Object(n.useState)(null),b=Object(d.a)(p,2),f=b[0],E=b[1],g=Object(n.useState)(null),v=Object(d.a)(g,2),O=v[0],j=v[1],h=Object(jt.a)(Ia,{variables:{id:t},onCompleted:function(){i({id:x.poll.id,title:x.poll.title,questionsCount:x.poll.questionsCount,answersCount:x.poll.answersCount}),w(x.poll.logic.path)}}),y=h.loading,x=h.data,w=function(e){fetch("http://localhost:4000".concat(e)).then((function(e){return e.text()})).then((function(e){var t=ga(e),a=ja(t);E(a)}))};if(Object(n.useEffect)((function(){if(f){var e=[];if(f.invisible){var t=f.invisible;e=x.poll.questions.filter((function(e){for(var a=e.answers,n=a.length,r=0,l=0;l<n;l++)t.includes(a[l].code)&&r++;if(r!==n)return!0}))}else e=x.poll.questions;var a=e.map((function(e,t){var a=e.answers.map((function(e,t){var a={};return f.invisible&&f.invisible.includes(e.code)&&(a=Object($e.a)(Object($e.a)({},a),{},{disabled:!0})),f.freeAnswers&&f.freeAnswers.includes(e.code)&&(a=Object($e.a)(Object($e.a)({},a),{},{freeAnswer:!0})),f.unique&&f.unique.includes(e.code)&&(a=Object($e.a)(Object($e.a)({},a),{},{unique:!0})),f.difficult&&f.difficult.includes(e.code)&&(a=Object($e.a)(Object($e.a)({},a),{},{difficult:!0})),Object($e.a)(Object($e.a)({},e),a)}));return Object($e.a)(Object($e.a)({},e),{},{answers:a})}));m(a)}}),[f]),y||!f||!s)return r.a.createElement(n.Fragment,null,r.a.createElement(Le.a,null),r.a.createElement("p",null,"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430. \u041f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435 \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430"));return r.a.createElement(n.Fragment,null,r.a.createElement(Oe.a,{container:!0},r.a.createElement(rt.a,null,r.a.createElement("h3",null,c.title)),r.a.createElement(Oe.a,{xs:12,item:!0,container:!0,justify:"flex-start"},r.a.createElement(rt.a,null,r.a.createElement(Pe.a,{id:"outlined-number",label:"Number",type:"number",value:O,onChange:function(e){var t=e.currentTarget.value;t<0||j(t)},InputLabelProps:{shrink:!0},variant:"outlined"})),r.a.createElement(rt.a,{p:1},r.a.createElement(Me.a,{variant:"contained",color:"primary",disabled:!O,onClick:function(){var e=O;console.log(s);for(var t=0;t<e;t++)s.map((function(e,t){}))}},"\u0413\u0435\u043d\u0435\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c")))))},Ma=a(123),Pa=a.n(Ma),Da=a(315),za=a.n(Da),Wa=a(316),Ra=a.n(Wa),Ua=a(314),La=a.n(Ua),Ha=a(184),Qa=a(310),Va=a.n(Qa),_a=function(e){var t=e.result,a=e.index,l=e.show,c=e.edit,i=e.selected,o=e.select,u=e.count;return r.a.createElement(n.Fragment,null,r.a.createElement(Ha.a,{className:"respondent-card"},r.a.createElement(Oe.a,{container:!0,item:!0,justify:"space-between"},r.a.createElement(O.a,{variant:"h6",gutterBottom:!0},a+1),t.processed?r.a.createElement("p",null,"dd"):"",r.a.createElement(It.a,{checked:i,onChange:function(e){return o({id:t.id,index:a,event:e})},inputProps:{"aria-label":"primary checkbox"}})),r.a.createElement(O.a,{variant:"subtitle2",gutterBottom:!0},"\u043d.\u043f.: ",t.city?t.city.title:"-"),r.a.createElement(O.a,{variant:"caption",display:"block",gutterBottom:!0},"\u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d: ",t.created),r.a.createElement(O.a,{variant:"caption",display:"block",gutterBottom:!0},"\u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d: ",t.lastModified),r.a.createElement(Oe.a,{container:!0,item:!0,justify:"space-between",className:"card-service-buttons"},r.a.createElement(v.a,{className:"card-button","aria-label":"delete",onClick:function(){return c(t.id)},disabled:u>1},r.a.createElement(Dt.a,{fontSize:"small"})),r.a.createElement(v.a,{className:"card-button","aria-label":"delete",onClick:function(){return l(t)},disabled:u>1},r.a.createElement(Va.a,{fontSize:"small"})))))},Ja=function(e){var t=e.data,a=e.selectPool,l=e.setSelectPool,c=Object(n.useState)(),i=Object(d.a)(c,2),o=i[0],u=i[1],s=function(e){var t=e.result.slice().sort((function(e,t){return e.code>t.code?1:-1})).map((function(e){return""!==e.text?e.code+" "+e.text:e.code}));console.log(t)},m=function(){},p=function(e){if(e.event.nativeEvent.shiftKey){var n=(e.index+1>o?t.slice(o,e.index+1):t.slice(e.index,o)).filter((function(e){return!a.includes(e.id)})).map((function(e){return e.id}));return l((function(e){return[].concat(Object(ue.a)(e),Object(ue.a)(n))})),void u(e.index)}if(u(e.index),e.event.nativeEvent.ctrlKey){if(a.includes(e.id)){var r=a.filter((function(t){return t!==e.id}));return void l(r)}l((function(t){return[].concat(Object(ue.a)(t),[e.id])}))}else if(a.includes(e.id)){if(a.length>1)return void l([e.id]);l([])}else l([e.id])};return r.a.createElement(n.Fragment,null,r.a.createElement(Oe.a,{container:!0,spacing:3,xs:12},t.map((function(e,t){return r.a.createElement(Oe.a,{item:!0,xs:12,sm:6,md:3,lg:2,key:t},r.a.createElement(_a,{result:e,index:t,show:s,edit:m,selected:a.includes(e.id),select:p,count:a.length}))}))))},Ka=a(467),Ga=a(311),Za=a.n(Ga),Xa=a(226),Ya=a.n(Xa),en=a(227),tn=a.n(en),an=function(e){var t=e.filters,a=e.setActiveFilters,l=Object(n.useState)({age:t.age,cities:t.cities.map((function(e){return{value:e.id,title:e.title,category:e.category.label}})).sort((function(e,t){return e.category-t.category})),intervs:t.intervievers.map((function(e){return{value:e.id,title:e.username}})),sex:t.sex,status:t.status}),c=Object(d.a)(l,1)[0],i=Object(n.useState)(null),o=Object(d.a)(i,2),u=o[0],s=o[1],m=Object(n.useState)(!1),p=Object(d.a)(m,2),b=p[0],f=p[1],E=r.a.createElement(Ya.a,{fontSize:"small"}),g=r.a.createElement(tn.a,{fontSize:"small"});return c?r.a.createElement(n.Fragment,null,r.a.createElement(Oe.a,{container:!0,justify:"flex-start",alignItems:"center",spacing:2},r.a.createElement(Oe.a,{item:!0,xs:12,sm:6,md:3,lg:3},r.a.createElement(Pe.a,{style:{width:"100%"},id:"date",type:"date",variant:"outlined",value:u&&u.shownDate?u.shownDate:"",onChange:function(e){var t=/(\d{4})-(\d{2})-(\d{2})/,a=e.target.value;s((function(n){return Object($e.a)(Object($e.a)({},n),{},{date:e.target.value.replace(t,"$3.$2.$1"),shownDate:a})})),f(!0)},InputProps:{startAdornment:r.a.createElement(Ka.a,{position:"start"},r.a.createElement(I.a,{title:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"},r.a.createElement(Za.a,{style:{cursor:"pointer"},onClick:function(){s((function(e){return Object($e.a)(Object($e.a)({},e),{},{date:null,shownDate:null})})),f(!0)}})))}})),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6,md:3,lg:3},r.a.createElement(Rt.a,{multiple:!0,limitTags:1,options:c.age,disableCloseOnSelect:!0,clearOnEscape:!0,onChange:function(e,t){var a=t.map((function(e){return e.value}));s((function(e){return Object($e.a)(Object($e.a)({},e),{},{ages:a.length?a:null})})),f(!0)},noOptionsText:"\u041e\u043f\u0446\u0438\u0438 \u043d\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d\u044b",getOptionLabel:function(e){return e.title},renderOption:function(e,t){var a=t.selected;return r.a.createElement(r.a.Fragment,null,r.a.createElement(It.a,{icon:E,checkedIcon:g,style:{marginRight:8},checked:a}),e.title)},renderInput:function(e){return r.a.createElement(Pe.a,Object.assign({},e,{variant:"outlined",label:"\u0412\u043e\u0437\u0440\u0430\u0441\u0442"}))}})),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6,md:3,lg:3},r.a.createElement(Rt.a,{options:c.sex,onChange:function(e,t){s((function(e){return Object($e.a)(Object($e.a)({},e),{},{sex:t?t.value:null})})),f(!0)},noOptionsText:"\u041e\u043f\u0446\u0438\u0438 \u043d\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d\u044b",getOptionLabel:function(e){return e.title},renderInput:function(e){return r.a.createElement(Pe.a,Object.assign({},e,{variant:"outlined",label:"\u041f\u043e\u043b"}))}})),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6,md:3,lg:3},r.a.createElement(Rt.a,{multiple:!0,limitTags:1,options:c.cities,groupBy:function(e){return e.category},disableCloseOnSelect:!0,clearOnEscape:!0,onChange:function(e,t){var a=t.map((function(e){return e.value}));s((function(e){return Object($e.a)(Object($e.a)({},e),{},{cities:a.length?a:null})})),f(!0)},noOptionsText:"\u041e\u043f\u0446\u0438\u0438 \u043d\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d\u044b",getOptionLabel:function(e){return e.title},renderOption:function(e,t){var a=t.selected;return r.a.createElement(r.a.Fragment,null,r.a.createElement(It.a,{icon:E,checkedIcon:g,style:{marginRight:8},checked:a}),e.title)},renderInput:function(e){return r.a.createElement(Pe.a,Object.assign({},e,{variant:"outlined",label:"\u0413\u043e\u0440\u043e\u0434"}))}}))),r.a.createElement(Oe.a,{container:!0,justify:"flex-start",alignItems:"center",spacing:2},r.a.createElement(Oe.a,{item:!0,xs:12,sm:6,md:3,lg:3},r.a.createElement(Rt.a,{multiple:!0,limitTags:1,options:c.intervs,disableCloseOnSelect:!0,clearOnEscape:!0,onChange:function(e,t){var a=t.map((function(e){return e.value}));s((function(e){return Object($e.a)(Object($e.a)({},e),{},{intervs:a.length?a:null})})),f(!0)},noOptionsText:"\u041e\u043f\u0446\u0438\u0438 \u043d\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d\u044b",getOptionLabel:function(e){return e.title},renderOption:function(e,t){var a=t.selected;return r.a.createElement(r.a.Fragment,null,r.a.createElement(It.a,{icon:E,checkedIcon:g,style:{marginRight:8},checked:a}),e.title)},renderInput:function(e){return r.a.createElement(Pe.a,Object.assign({},e,{variant:"outlined",label:"\u0418\u043d\u0442\u0435\u0440\u0432\u044c\u044e\u0435\u0440"}))}})),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6,md:3,lg:3},r.a.createElement(Rt.a,{options:c.status,onChange:function(e,t){s((function(e){return Object($e.a)(Object($e.a)({},e),{},{status:t?t.value:null})})),f(!0)},noOptionsText:"\u041e\u043f\u0446\u0438\u0438 \u043d\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d\u044b",getOptionLabel:function(e){return e.title},renderInput:function(e){return r.a.createElement(Pe.a,Object.assign({},e,{variant:"outlined",label:"\u0421\u0442\u0430\u0442\u0443\u0441"}))}})),r.a.createElement(Oe.a,{item:!0,container:!0,xs:12,sm:6,md:3,lg:3,justify:"flex-start"},r.a.createElement(Me.a,{variant:"contained",color:"primary",onClick:function(){a(u),f(!1)},disabled:!b},"\u043f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c")))):r.a.createElement("p",null)},nn=a(465),rn=a(35),ln=a(229),cn=a.n(ln),on=a(228),un=a.n(on),sn=a(312),dn=a.n(sn),mn=function(e){var t=e.answer,a=r.a.createElement(I.a,{title:"\u0421\u0432\u043e\u0431\u043e\u0434\u043d\u044b\u0439 \u043e\u0442\u0432\u0435\u0442"},r.a.createElement(Dt.a,null)),n=r.a.createElement(I.a,{title:"\u0417\u0430\u0442\u0440\u0443\u0434\u043d\u044f\u044e\u0441\u044c \u043e\u0442\u0432\u0435\u0442\u0438\u0442\u044c"},r.a.createElement(un.a,null)),l=r.a.createElement(I.a,{title:"\u0423\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u0439 \u043e\u0442\u0432\u0435\u0442"},r.a.createElement(cn.a,null)),c=[];return t.difficult&&c.push(n),t.freeAnswer&&c.push(a),t.unique&&c.push(l),c},pn=function(e){var t=e.answer,a=e.index,l=e.pool,c=e.totalAnswers,i=Object(n.useState)(!1),o=Object(d.a)(i,2),u=o[0],s=o[1],m=function(){var e=null;if(t.results.length){for(var a=t.results.length,n=0;n<a;n++)l.includes(t.results[n].respondent.id)&&(e++,s(!0));return e?(e/c*100).toFixed(1):null}return null};return r.a.createElement("div",{className:t.disabled?"answer-card invisible":"answer-card"},r.a.createElement(Oe.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement(rt.a,{m:1},r.a.createElement("span",{className:"answer-number"},a+1,"."),r.a.createElement("span",{className:"devider"}," "),r.a.createElement("span",{className:"answer-code"},t.code),r.a.createElement("span",{className:"devider"}," - "),r.a.createElement("span",{className:"answer-title"},t.title),r.a.createElement("span",{className:"answer-extend"})),r.a.createElement(rt.a,{m:1},r.a.createElement(mn,{answer:t}),r.a.createElement(m,null),u&&r.a.createElement(dn.a,null))))},bn=function(e){var t=e.question,a=e.index,l=e.pool,c=Object(n.useState)(0),i=Object(d.a)(c,2),o=i[0],u=i[1];return Object(n.useEffect)((function(){for(var e=0,a=0;a<t.answers.length;a++)if(t.answers[a].results.length)for(var n=0;n<t.answers[a].results.length;n++)l.includes(t.answers[a].results[n].respondent.id)&&e++;u(e)}),[]),r.a.createElement(de.a,{className:"question-card"},r.a.createElement(pe.a,null,r.a.createElement("div",{className:"question-header"},r.a.createElement(I.a,{title:"\u041c\u0430\u043a\u0441. \u043a\u043e\u043b-\u0432\u043e \u043e\u0442\u0432\u0435\u0442\u043e\u0432"},r.a.createElement("span",{className:"question-limit"},t.limit)),r.a.createElement("span",{className:"question-number"},a+1,". "),r.a.createElement("span",{className:"question-title",color:"textSecondary",gutterBottom:!0},t.title)),t.answers.map((function(e,t){return r.a.createElement(pn,{key:t,answer:e,index:t,pool:l,totalAnswers:o})}))))},fn=function(e){var t=e.data,a=e.selectPool,n=e.open,l=e.close,c=Object(rn.a)(),i=Object(nn.a)(c.breakpoints.down("sm"));return n?r.a.createElement("div",null,r.a.createElement(Ae.a,{fullScreen:i,maxWidth:"md",open:n,onClose:l,"aria-labelledby":"responsive-dialog-title"},r.a.createElement(Be.a,{id:"responsive-dialog-title"},"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b"),r.a.createElement(Ie.a,null,r.a.createElement(Qt.a,null,t.poll.questions.map((function(e,t){return r.a.createElement(bn,{index:t,key:e.id,question:e,pool:a})})))),r.a.createElement(Te.a,null,r.a.createElement(Me.a,{autoFocus:!0,onClick:l,color:"primary"},"\u041e\u0442\u043c\u0435\u043d\u0430"),r.a.createElement(Me.a,{onClick:l,color:"primary",autoFocus:!0},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")))):null},En=a(230),gn=a.n(En),vn=a(387),On=a(313),jn=a.n(On),hn=function(e){var t=e.question,a=Object(n.useState)({labels:t.answers.map((function(e,t){return t+1+""})),set:[{label:"\u041a\u043e\u043b-\u0432\u043e",data:t.answers.map((function(e){return e.results.length}))}]}),l=Object(d.a)(a,1)[0],c=Object(n.useRef)();return Object(n.useEffect)((function(){var e=c.current.getContext("2d");new jn.a(e,{type:"bar",data:{labels:l.labels,datasets:l.set},options:{showLines:!1,animation:{duration:0},hover:{animationDuration:0},responsiveAnimationDuration:0,legend:{display:!1,labels:{fontColor:"black",fontSize:16}},scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}})}),[]),r.a.createElement(n.Fragment,null,r.a.createElement("canvas",{ref:c}))},yn=function(e){e.index;var t=e.question,a=Object(n.useState)(t.answers.reduce((function(e,t){return e+t.results.length}),0)),l=Object(d.a)(a,1)[0];return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"linear-table"},r.a.createElement("table",null,r.a.createElement("tr",null,r.a.createElement("th",null,"\xa0"),r.a.createElement("th",null,"\u041e\u0442\u0432\u0435\u0442\u043e\u0432"),r.a.createElement("th",null,"%")),t.answers.map((function(e,t){return r.a.createElement("tr",null,r.a.createElement("td",{className:"answer-title"},r.a.createElement("strong",null,t+1),". - ",r.a.createElement("strong",null,e.code)," ",e.title),r.a.createElement("td",null,e.results.length),r.a.createElement("td",null,l?(e.results.length/l*100).toFixed(1):"-"))})))))},xn=Object($.a)((function(e){return{appBar:{position:"relative"},title:{marginLeft:e.spacing(2),flex:1}}})),wn=r.a.forwardRef((function(e,t){return r.a.createElement(vn.a,Object.assign({direction:"up",ref:t},e))})),Cn=function(e){var t=e.data,a=e.selectPool,l=e.open,c=e.close,i=xn(),o=Object(n.useState)(),u=Object(d.a)(o,2),s=u[0],m=u[1];return Object(n.useEffect)((function(){if(l){var e=t.poll.questions.map((function(e){if(a.length){var t=e.answers.map((function(e){if(e.results.length){var t=e.results.filter((function(e){return a.includes(e.respondent.id)}));return Object($e.a)(Object($e.a)({},e),{},{results:t})}return e}));return Object($e.a)(Object($e.a)({},e),{},{answers:t})}return e})),n=Object($e.a)(Object($e.a)({},t.poll),{},{questions:e});m(n)}}),[l]),l?s?r.a.createElement("div",null,r.a.createElement(Ae.a,{fullScreen:!0,open:l,onClose:c,TransitionComponent:wn},r.a.createElement(f.a,{className:i.appBar},r.a.createElement(E.a,null,r.a.createElement(v.a,{edge:"start",color:"inherit",onClick:c,"aria-label":"close"},r.a.createElement(gn.a,null)),r.a.createElement(O.a,{variant:"h6",className:i.title},"\u0413\u0440\u0430\u0444\u0438\u043a\u0438"))),r.a.createElement(se.a,{className:"batch-linear"},r.a.createElement(Oe.a,{item:!0,container:!0},s.questions.map((function(e,t){return r.a.createElement(n.Fragment,null,r.a.createElement(Oe.a,{xs:12,style:{textAlign:"center"}},r.a.createElement("p",{className:"question-title"},t+1,". ",e.title)),r.a.createElement(Oe.a,{xs:12,md:6},r.a.createElement(yn,{index:t,key:e.id,question:e})),r.a.createElement(Oe.a,{xs:12,md:6},r.a.createElement(hn,{key:e.id,question:e})))})))))):r.a.createElement(ct,null):null};function kn(){var e=Object(F.a)(["\nmutation ($results: [String]!) {\n  deleteResults(results: $results) {\n    id\n  }\n}\n"]);return kn=function(){return e},e}function Sn(){var e=Object(F.a)(["\nmutation saveCityEdit($id: String!, $title: String!, $population: Int!, $category: String!) {\n  cityEdit(id: $id, title: $title, population: $population, category: $category) {\n    id\n    title\n    category\n    population\n  }\n}\n"]);return Sn=function(){return e},e}function qn(){var e=Object(F.a)(["\nmutation saveNewCity($title: String!, $population: Int!, $category: String!) {\n  newCity(title: $title, population: $population, category: $category) {\n    id\n    title\n    category\n    population\n  }\n}\n"]);return qn=function(){return e},e}Object(M.a)(qn()),Object(M.a)(Sn());var Nn=Object(M.a)(kn()),$n=function(e){var t=e.id,a=Object(n.useState)(!1),l=Object(d.a)(a,2),c=l[0],i=l[1],o=Object(n.useState)(!1),u=Object(d.a)(o,2),s=u[0],m=u[1],p=Object(n.useState)(),b=Object(d.a)(p,2),f=b[0],E=b[1],g=Object(n.useState)(),O=Object(d.a)(g,2),j=O[0],h=O[1],y=Object(n.useState)([]),x=Object(d.a)(y,2),w=x[0],C=x[1],k=Object(n.useState)(!1),S=Object(d.a)(k,2),q=S[0],N=S[1],$=Object(n.useState)(!1),F=Object(d.a)($,2),A=F[0],T=F[1],B=Object(jt.a)(ba,{variables:{id:t},onCompleted:function(){E(M.poll.results)}}),M=B.data,D=B.loading,z=B.error,W=Object(jt.a)(pa),R=W.data,U=W.loading,L=W.error,H=Object(P.useMutation)(Nn,{onError:function(e){i({type:"error",text:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c. \u0421\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u043a\u043e\u043d\u0441\u043e\u043b\u044c."}),console.log(e)},update:function(e,t){var a=t.data.deleteResults.map((function(e){return e.id}));E(f.filter((function(e){return!a.includes(e.id)}))),console.log(e.data.data),e.modify({fields:{pollResults:function(e,t){var n=t.readField;return console.log(e),e.filter((function(e){return!a.includes(n("id",e))}))}}})}}),Q=Object(d.a)(H,2),V=Q[0],_=Q[1].loading;if(Object(n.useEffect)((function(){if(j){var e=M.poll.results.filter((function(e){return!j.cities||(!e.city||j.cities.includes(e.city.id))})).filter((function(e){return!j.intervs||(!e.user||j.intervs.includes(e.user.id))})).filter((function(e){return!j.date||(!e.lastModified||j.date==e.lastModified)})),t=w.filter((function(t){for(var a=e.length,n=0;n<a;n++)if(t===e[n].id)return!0;return!1}));C(t),E(e)}}),[j]),D||!f||U)return r.a.createElement(ct,null);if(z||L)return console.log(JSON.stringify(z)),r.a.createElement(Ot,{title:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a",description:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u043a\u0440\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0435. \u0421\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u043a\u043e\u043d\u0441\u043e\u043b\u044c"});var J=function(){return _?r.a.createElement(ot,null):null},K=function(e){var t=document.createElement("a"),a=new Blob([e],{type:"text/plain"});t.href=URL.createObjectURL(a),t.download="myFile.txt",document.body.appendChild(t),t.click()};return r.a.createElement(n.Fragment,null,r.a.createElement(Cn,{data:M,selectPool:w,open:A,close:function(){return T(!1)}}),r.a.createElement(fn,{data:M,selectPool:w,open:q,close:function(){return N(!1)}}),r.a.createElement(mt,{open:c,text:c?c.text:"",type:c?c.type:"",close:function(){return i(!1)}}),r.a.createElement(J,null),r.a.createElement(_t,{open:s,confirm:function(){V({variables:{results:w}}),m(!1),C([])},close:function(){return m(!1)},buttons:{close:"\u041e\u0442\u043c\u0435\u043d\u0430",confirm:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"},data:{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b?",text:"\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435! \u0412\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u0431\u0443\u0434\u0443\u0442 \u0443\u043d\u0438\u0447\u0442\u043e\u0436\u0435\u043d\u044b \u0431\u0435\u0437\u0432\u043e\u0437\u0432\u0440\u0430\u0442\u043d\u043e. \u0411\u0443\u0434\u044c\u0442\u0435 \u0432\u043d\u0438\u043c\u0430\u0442\u0435\u043b\u044c\u043d\u044b!"}}),r.a.createElement("div",{className:"result-service-zone"},r.a.createElement(Oe.a,{container:!0,justify:"space-between",className:"service-buttons"},r.a.createElement(rt.a,{className:"main-buttons"},r.a.createElement(I.a,{title:"\u0412\u044b\u0433\u0440\u0443\u0437\u0438\u0442\u044c"},r.a.createElement(v.a,{color:"primary",component:"span",onClick:function(){for(var e=/,/gi,t=f.filter((function(e){return w.includes(e.id)})).map((function(e){return e.result})),a=t.length,n="",r=0;r<a;r++){for(var l=t[r].slice().sort((function(e,t){return e.code>t.code?1:-1})).map((function(t){return""!==t.text?t.code+" "+t.text.replaceAll(e,";"):t.code})),c=l.length,i="",o=0,u=0;u<c;u++)(i+=l[u]+",").length-o>160&&(o=(i+="\n").length);n+=i+",999\n"}K(n)},disabled:!w.length},r.a.createElement(Re.a,null))),r.a.createElement(I.a,{title:"\u0413\u0440\u0430\u0444\u0438\u043a\u0438"},r.a.createElement(v.a,{color:"primary",component:"span",onClick:function(){return T(!0)},disabled:!w.length},r.a.createElement(La.a,null))),r.a.createElement(I.a,{title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c"},r.a.createElement(v.a,{color:"primary",component:"span",onClick:function(){return N(!0)},disabled:!w.length},r.a.createElement(za.a,null))),r.a.createElement(I.a,{title:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0442\u0430\u0442\u0443\u0441"},r.a.createElement(v.a,{color:"primary",component:"span",onClick:function(){return N(!0)},disabled:!w.length},r.a.createElement(Ra.a,null))),r.a.createElement(I.a,{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"},r.a.createElement(v.a,{color:"secondary",component:"span",onClick:function(){return m(!0)},disabled:!w.length},r.a.createElement(Pa.a,null)))),r.a.createElement(Oe.a,{item:!0,container:!0,xs:12,sm:6,md:3,lg:3,justify:"flex-end"},r.a.createElement(rt.a,{m:1},r.a.createElement("a",{href:""},"\u0415\u0441\u0442\u044c \u0434\u0443\u0431\u043b\u0438")),r.a.createElement(rt.a,{m:1},r.a.createElement("a",{href:""},"\u0415\u0441\u0442\u044c \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b")))),r.a.createElement(an,{filters:R,setActiveFilters:h}),r.a.createElement(Ja,{data:f,selectPool:w,setSelectPool:C})))};function Fn(){var e=Object(F.a)(["\n  query ($id: ID!) {\n    poll(id: $id) {\n      id\n      title\n      questions {\n        id\n        title\n        order\n        limit\n        type\n        answers {\n          id\n          title\n          order\n          code\n          results {\n            id\n            code\n            text\n          }\n        }\n      }\n    }\n  }\n\n"]);return Fn=function(){return e},e}var An=Object(M.a)(Fn()),Tn=function(e){var t=e.id,a=Object(jt.a)(An,{variables:{id:t}}),l=a.data,c=a.loading,i=a.error;return c?r.a.createElement(ct,{type:"card"}):i?(console.log(JSON.stringify(i)),r.a.createElement(Ot,{title:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a",description:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u043a\u0440\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0435. \u0421\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u043a\u043e\u043d\u0441\u043e\u043b\u044c"})):r.a.createElement(n.Fragment,null,r.a.createElement(O.a,{variant:"h6",gutterBottom:!0},"\u041b\u0438\u043d\u0435\u0439\u043d\u043e\u0435 \u0440\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0435 \u043e\u0442\u0432\u0435\u0442\u043e\u0432"),r.a.createElement(Oe.a,{item:!0,container:!0,className:"linear-distribution"},l.poll.questions.map((function(e,t){return r.a.createElement(n.Fragment,null,r.a.createElement(Oe.a,{xs:12},r.a.createElement("p",{className:"question-title"},t+1,". ",e.title)),r.a.createElement(Oe.a,{xs:12,md:6},r.a.createElement(yn,{index:t,key:e.id,question:e})),r.a.createElement(Oe.a,{xs:12,md:6},r.a.createElement(hn,{key:e.id,question:e})),r.a.createElement("p",null))}))))};function In(){var e=Object(F.a)(["\n  query($id: ID!) {\n    poll(id: $id) {\n      id\n      title\n      code\n      liter\n      questions {\n        id\n        title\n        limit\n        order\n        answers {\n          id\n          title\n          order\n          code\n          results {\n            id\n            code\n            text\n          }\n        }\n      }\n      logic {\n        path\n      }\n    }\n  }\n"]);return In=function(){return e},e}var Bn=Object(M.a)(In()),Mn=function(e){var t=e.id,a=Object(n.useState)(!1),c=Object(d.a)(a,2),i=c[0],o=c[1],u=Object(n.useState)(!1),s=Object(d.a)(u,2),m=(s[0],s[1]),p=Object(n.useState)(!1),b=Object(d.a)(p,2),f=b[0],E=b[1],g=Object(n.useState)(!1),v=Object(d.a)(g,2),O=v[0],j=v[1];Object(n.useEffect)((function(){if(i){var e=y?y.poll:null;if(e){var t=e.questions,a=i.length,n=t.map((function(e){var t=e.answers.map((function(e){for(var t=Object(ue.a)(e.results),n=0;n<a;n++)i[n].includes(e.code)&&t.push({code:e.code,text:""});return Object($e.a)(Object($e.a)({},e),{},{results:t})}));return Object($e.a)(Object($e.a)({},e),{},{answers:t})}));j(n),console.log(n)}}}),[i]);var h=Object(jt.a)(Bn,{variables:{id:t},onCompleted:function(){C(y.poll.logic.path),console.log(y)}}),y=h.data,x=h.loading,w=h.error,C=function(e){fetch(l+e).then((function(e){return e.text()})).then((function(e){var t=ga(e),a=ja(t);m(a)}))};if(x)return r.a.createElement(ct,{type:"card"});if(w)return console.log(JSON.stringify(w)),r.a.createElement(Ot,{title:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a",description:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u043a\u0440\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0435. \u0421\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u043a\u043e\u043d\u0441\u043e\u043b\u044c"});var k=function(){return f?r.a.createElement(ot,null):null};return r.a.createElement(n.Fragment,null,r.a.createElement(k,null),r.a.createElement("p",null," \u041f\u0430\u043a\u0435\u0442\u043d\u044b\u0439 \u0432\u0432\u043e\u0434 \u0434\u0430\u043d\u043d\u044b\u0445"),r.a.createElement(Oe.a,{container:!0,spacing:3,xs:12},r.a.createElement(Oe.a,{item:!0,xs:12},r.a.createElement(rt.a,null,r.a.createElement("label",null,"\u041f\u043e\u0434\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0444\u0430\u0439\u043b \u0441 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430\u043c\u0438"),r.a.createElement("br",null),r.a.createElement("input",{type:"file",onInput:function(e){if(e.preventDefault(),e.target.files[0]){E(!0);var t=new FileReader,a=e.target.files[0];a&&(t.onloadend=function(){for(var e=t.result.replace(/\r?\n/g,"").split(",999").filter((function(e){return e.length})),a=e.length,n=[],r=0;r<a;r++){for(var l=e[r].split(","),c=l.length,i=[],u=0;u<c;u++){var s=l[u];i.push(s.trim())}n.push(i)}o(n),E(!1)}),t.readAsText(a),e.target.value=""}}}))),O&&O.map((function(e,t){return r.a.createElement(n.Fragment,null,r.a.createElement(Oe.a,{xs:12,md:6},r.a.createElement(yn,{index:t,key:e.id,question:e}),r.a.createElement("p",null)),r.a.createElement(Oe.a,{xs:12,md:6},r.a.createElement(hn,{question:e}),r.a.createElement("p",null)))}))))},Pn=function(e){var t=e.id,a=[{label:"\u041e\u0431\u0449\u0438\u0435",component:r.a.createElement($n,{id:t})},{label:"\u041b\u0438\u043d\u0435\u0439\u043a\u0430",component:r.a.createElement(Tn,{id:t})},{label:"\u041f\u0430\u043a\u0435\u0442\u043d\u044b\u0439",component:r.a.createElement(Mn,{id:t})},{label:"\u0422\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435",component:r.a.createElement(Ba,{id:t})}];return r.a.createElement(Aa,{data:a})},Dn=function(){var e=Object(p.h)(),t=e.id,a=e.code;return r.a.createElement(n.Fragment,null,r.a.createElement($t,{title:"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b "+a}),r.a.createElement("div",null,r.a.createElement(se.a,{maxWidth:"xl",style:{padding:0}},r.a.createElement(Pn,{id:t}))))};var zn=function(e){var t=function(e){var t=new DOMParser,a=t.parseFromString("INVALID","text/xml").getElementsByTagName("parsererror")[0].namespaceURI,n=t.parseFromString(e,"text/xml");return!(n.getElementsByTagNameNS(a,"parsererror").length>0)&&n}(e);if(t){for(var a=t.getElementsByTagName("a"),n=a.length,r=[],l=0;l<n;l++){for(var c={unit:a[l].getAttribute("usr_intrv"),date:a[l].getAttribute("date_intrv"),lan:a[l].getAttribute("start-lan"),lon:a[l].getAttribute("start-lon")},i=a[l].getElementsByTagName("v"),o=i.length,u=[],s=0;s<o;s++){for(var d=i[s].getElementsByTagName("o"),m=d.length,p=0;p<m;p++){var b=d[p].getAttribute("c").padStart(3,"0");u.push(b)}c.answers=u}r.push(c)}return r}return!1},Wn=Object($.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}})),Rn=function(){var e=Object(n.useState)(null),t=Object(d.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(!1),i=Object(d.a)(c,2),o=i[0],u=i[1],s=Wn(),m=function(e){var t=e.data;return console.log(t),""!==t.lan||""!==t.lon?t.answers.toString()+",999":t.answers.toString()+",999-"};return r.a.createElement(n.Fragment,null,r.a.createElement(Ue.a,{className:s.backdrop,open:o},r.a.createElement(Le.a,{color:"inherit"})),r.a.createElement("input",{type:"file",onInput:function(e){e.preventDefault(),u(!0);var t=new FileReader,a=e.target.files[0];a&&(t.onloadend=function(){var e=t.result,a=zn(e);return a?(l(a),void u(!1)):(u(!1),void console.log("\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 XML"))},t.readAsText(a))}}),r.a.createElement("div",{className:"parcha-results"},a?a.map((function(e,t){return r.a.createElement("div",null,r.a.createElement(m,{data:e}))})):r.a.createElement("p",null,"\u041f\u043e\u0434\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0434\u0430\u043d\u043d\u044b\u0435")))},Un=function(){var e=[{label:"\u041f\u0430\u0440\u0447\u0430",component:r.a.createElement(Rn,null)}];return r.a.createElement(Aa,{data:e})},Ln=function(){return r.a.createElement(n.Fragment,null,r.a.createElement($t,{title:"\u0410\u043d\u0430\u043b\u0438\u0437\u0430\u0442\u043e\u0440 \u0434\u0430\u043d\u043d\u044b\u0445"}),r.a.createElement("div",{style:{paddingTop:"10px"}},r.a.createElement(se.a,{maxWidth:"xl"},r.a.createElement(Un,null))))},Hn=function(){return r.a.createElement(n.Fragment,null,r.a.createElement($t,{title:"\u0422\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0438\u043d\u0435\u0440\u0444\u0435\u0439\u0441\u0430"}),r.a.createElement(se.a,{maxWidth:"lg"}))},Qn=a(317),Vn=a.n(Qn);function _n(){var e=Object(F.a)(["\n  query ($id: ID!) {\n    poll(id: $id) {\n      id\n      title\n      code\n      liter\n      questionsCount\n      answersCount\n      questions {\n        id\n        title\n        limit\n        order\n        topic {\n          id\n          title\n        }\n        answers {\n          id\n          title\n          order\n          code\n        }\n      }\n      logic {\n        path\n      }\n    }\n  }\n"]);return _n=function(){return e},e}var Jn=Object(M.a)(_n()),Kn=Object($.a)((function(e){return{popover:{pointerEvents:"none"},paper:{padding:e.spacing(1)}}})),Gn=function(e){var t=e.answer,a=r.a.createElement(I.a,{key:1,title:"\u0421\u0432\u043e\u0431\u043e\u0434\u043d\u044b\u0439 \u043e\u0442\u0432\u0435\u0442"},r.a.createElement(Dt.a,null)),n=r.a.createElement(I.a,{key:2,title:"\u0417\u0430\u0442\u0440\u0443\u0434\u043d\u044f\u044e\u0441\u044c \u043e\u0442\u0432\u0435\u0442\u0438\u0442\u044c"},r.a.createElement(un.a,null)),l=r.a.createElement(I.a,{key:3,title:"\u0423\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u0439 \u043e\u0442\u0432\u0435\u0442"},r.a.createElement(cn.a,null)),c=[];return t.difficult&&c.push(n),t.freeAnswer&&c.push(a),t.unique&&c.push(l),c},Zn=function(e){var t=e.answer,a=e.index;return r.a.createElement("div",{className:t.disabled?"answer-card invisible":"answer-card"},r.a.createElement(Oe.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement(rt.a,{m:1},r.a.createElement("span",{className:"answer-number"},a+1,"."),r.a.createElement("span",{className:"devider"}," "),r.a.createElement("span",{className:"answer-code"},t.code),r.a.createElement("span",{className:"devider"}," - "),r.a.createElement("span",{className:"answer-title"},t.title)),r.a.createElement(rt.a,{m:1},r.a.createElement("span",null,r.a.createElement(Gn,{answer:t})))))},Xn=function(e){var t=e.topic,a=Kn(),l=r.a.useState(null),c=Object(d.a)(l,2),i=c[0],o=c[1],u=function(){o(null)},s=Boolean(i);return r.a.createElement(n.Fragment,null,r.a.createElement(Vn.a,{className:"info-icon",onMouseEnter:function(e){o(e.currentTarget)},onMouseLeave:u}),r.a.createElement(ft.a,{className:a.popover,classes:{paper:a.paper},open:s,anchorEl:i,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"left"},onClose:u,disableRestoreFocus:!0},r.a.createElement(O.a,{variant:"overline",display:"block",gutterBottom:!0},"\u0422\u0435\u043c\u0430: ",t.title)))},Yn=function(e){var t=e.question,a=e.index;return r.a.createElement(de.a,{className:"question-card"},r.a.createElement(pe.a,null,r.a.createElement("div",{className:"question-header"},r.a.createElement(I.a,{title:"\u041c\u0430\u043a\u0441. \u043a\u043e\u043b-\u0432\u043e \u043e\u0442\u0432\u0435\u0442\u043e\u0432"},r.a.createElement("span",{className:"question-limit"},t.limit)),r.a.createElement("span",{className:"question-number"},a+1,"."),r.a.createElement("span",{className:"question-title",color:"textSecondary"},t.title,r.a.createElement(Xn,{topic:t.topic}))),t.answers.map((function(e,t){return r.a.createElement(Zn,{key:t,answer:e,index:t})}))))},er=function(e){var t=e.id,a=Object(n.useState)(!1),c=Object(d.a)(a,2),i=c[0],o=c[1],u=Object(n.useState)(),s=Object(d.a)(u,2),m=s[0],p=s[1],b=Object(jt.a)(Jn,{variables:{id:t},onCompleted:function(){v(g.poll)}}),f=b.loading,E=b.error,g=b.data,v=function(e){var t=e.logic.path;fetch(l+t).then((function(e){return e.text()})).then((function(e){var t=ja(ga(e)),a=j(t);p(a.sort((function(e,t){return e.order>t.order?1:-1}))),o(!0)}))},j=function(e){return g.poll.questions.map((function(t){var a=t.answers.map((function(t){var a={};return e.invisible&&e.invisible.includes(t.code)&&(a=Object($e.a)(Object($e.a)({},a),{},{disabled:!0})),e.freeAnswers&&e.freeAnswers.includes(t.code)&&(a=Object($e.a)(Object($e.a)({},a),{},{freeAnswer:!0})),e.unique&&e.unique.includes(t.code)&&(a=Object($e.a)(Object($e.a)({},a),{},{unique:!0})),e.difficult&&e.difficult.includes(t.code)&&(a=Object($e.a)(Object($e.a)({},a),{},{difficult:!0})),Object($e.a)(Object($e.a)({},t),a)}));return Object($e.a)(Object($e.a)({},t),{},{answers:a,ffffuck:!0})}))};return!f&&m&&i?E?(console.log(JSON.stringify(E)),r.a.createElement(Ot,{title:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a",description:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u043a\u0440\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0435. \u0421\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u043a\u043e\u043d\u0441\u043e\u043b\u044c"})):r.a.createElement(n.Fragment,null,r.a.createElement(Oe.a,{container:!0,className:"common-settings"},r.a.createElement(O.a,{variant:"h6",gutterBottom:!0},r.a.createElement("strong",null,"\u0422\u0435\u043c\u0430: "),g.poll.title),r.a.createElement(Oe.a,{className:"poll-info",container:!0,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement(rt.a,{m:1},r.a.createElement("div",null," \u0412\u043e\u043f\u0440\u043e\u0441\u043e\u0432: ",g.poll.questionsCount)),r.a.createElement(rt.a,{m:1},r.a.createElement("div",null," \u041e\u0442\u0432\u0435\u0442\u043e\u0432: ",g.poll.answersCount))),m.map((function(e,t){return r.a.createElement(Yn,{question:e,key:e.id,index:t})})))):r.a.createElement(ct,{type:"card"})},tr=a(231),ar=a.n(tr);function nr(){var e=Object(F.a)(["\n  query logicQuery($id: ID!) {\n    pollLogic(id: $id) {\n      id\n      path\n    }\n  }\n"]);return nr=function(){return e},e}var rr=Object(M.a)(nr());function lr(){var e=Object(F.a)(["\nmutation saveConfigChanges($path: String!, $text: String!) {\n  saveConfig(path: $path, text: $text)\n}\n"]);return lr=function(){return e},e}var cr=Object(M.a)(lr()),ir=function(e){var t=e.id,a=Object(n.useState)(!1),c=Object(d.a)(a,2),i=c[0],o=c[1],u=Object(n.useState)(!1),s=Object(d.a)(u,2),m=s[0],p=s[1],b=Object(n.useState)(null),f=Object(d.a)(b,2),E=f[0],g=f[1],j=Object(n.useState)(null),h=Object(d.a)(j,2),y=h[0],x=h[1],w=Object(n.useRef)(),C=Object(jt.a)(rr,{variables:{id:t},onCompleted:function(){T(q.pollLogic.path)}}),k=C.loading,S=C.error,q=C.data,N=Object(P.useMutation)(cr,{onError:function(e){console.log(e),o({type:"error",text:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c. \u0421\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u043a\u043e\u043d\u0441\u043e\u043b\u044c."})},onCompleted:function(){o({type:"success",text:"\u041a\u043e\u043d\u0444\u0438\u0433 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e!"})},refetchQueries:function(){return[{query:Jn,variables:{id:t}}]}}),$=Object(d.a)(N,2),F=$[0],A=$[1].loading,T=function(e){x(e),fetch(l+e).then((function(e){return e.text()})).then((function(e){g(e)}))},B=function(){return A?r.a.createElement(ot,null):null};return k||!E?r.a.createElement(ct,{type:"card"}):S?(console.log(JSON.stringify(S)),r.a.createElement(Ot,{title:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a",description:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u043a\u0440\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0435. \u0421\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u043a\u043e\u043d\u0441\u043e\u043b\u044c"})):r.a.createElement(n.Fragment,null,r.a.createElement(mt,{open:i,text:i?i.text:"",type:i?i.type:"",close:function(){return o(!1)}}),r.a.createElement(B,null),r.a.createElement(Oe.a,{item:!0,container:!0},r.a.createElement(Oe.a,{item:!0,container:!0,justify:"space-between"},r.a.createElement(rt.a,{p:1},r.a.createElement(O.a,{variant:"subtitle1",gutterBottom:!0},"\u041e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u0433\u043e \u0444\u0430\u0439\u043b\u0430")),r.a.createElement(rt.a,null,r.a.createElement(I.a,{title:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"},r.a.createElement(v.a,{onClick:function(e){F({variables:{path:y,text:w.current.value}})},disabled:!m},r.a.createElement(ar.a,null)))),r.a.createElement("textarea",{ref:w,defaultValue:E,onChange:function(e){E!==e.currentTarget.value?p(!0):p(!1)}}))))};function or(){var e=Object(F.a)(["\n  mutation deletePoll($id: ID!) {\n    deletePoll(id: $id) {\n      title\n    }\n  }\n"]);return or=function(){return e},e}var ur=Object(M.a)(or()),sr=function(e){var t=e.id,a=e.code,l=Object(p.g)(),c=Object(n.useState)(!1),i=Object(d.a)(c,2),o=i[0],u=i[1],s=Object(n.useState)(!0),m=Object(d.a)(s,2),b=m[0],f=m[1],E=Object(P.useMutation)(ur,{onCompleted:function(){l.push("/")}}),g=Object(d.a)(E,2),v=g[0],j=(g[1].poll,function(){u(!1)});return r.a.createElement(n.Fragment,null,r.a.createElement(Ae.a,{open:o,onClose:j,"aria-labelledby":"form-dialog-title"},r.a.createElement(Be.a,{id:"form-dialog-title"},"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435"),r.a.createElement(Ie.a,null,r.a.createElement(Qt.a,null,r.a.createElement(O.a,{variant:"subtitle1",gutterBottom:!0},"\u042d\u0442\u043e \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043e\u0442\u043c\u0435\u043d\u0435\u043d\u043e. \u041e\u043d\u043e \u043f\u0440\u0438\u0432\u0435\u0434\u0435\u0442 \u043a \u0431\u0435\u0437\u0432\u043e\u0437\u0432\u0440\u0430\u0442\u043d\u043e\u043c\u0443 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044e \u0412\u0421\u0415\u0425 \u0434\u0430\u043d\u043d\u044b\u0445 \u043e\u043f\u0440\u043e\u0441\u0430."),r.a.createElement(O.a,{variant:"button",display:"block",gutterBottom:!0},"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u041a\u041e\u0414 \u043e\u043f\u0440\u043e\u0441\u0430.")),r.a.createElement(Pe.a,{margin:"dense",id:"name",label:"\u041a\u043e\u0434 \u043e\u043f\u0440\u043e\u0441\u0430",type:"text",fullWidth:!0,onChange:function(e){var t=e.currentTarget.value.toUpperCase();e.currentTarget.value=t,t.toUpperCase()===a?f(!1):f(!0)}})),r.a.createElement(Te.a,null,r.a.createElement(Me.a,{onClick:j,color:"primary"},"\u041e\u0442\u043c\u0435\u043d\u0430"),r.a.createElement(Me.a,{onClick:function(){!function(e){v({variables:{id:e},refetchQueries:[{query:yt}]})}(t)},color:"primary",disabled:b},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"))),r.a.createElement(O.a,{variant:"button",display:"block",gutterBottom:!0},"\u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u043e\u043f\u0440\u043e\u0441\u0430"),r.a.createElement(O.a,{variant:"caption",display:"block",gutterBottom:!0},"\u041f\u043e\u0441\u043b\u0435 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u041e\u041f\u0420\u041e\u0421\u0410 \u043f\u0443\u0442\u0438 \u043d\u0430\u0437\u0430\u0434 \u0443\u0436\u0435 \u043d\u0435 \u0431\u0443\u0434\u0435\u0442. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0431\u0443\u0434\u044c\u0442\u0435 \u0432\u043d\u0438\u043c\u0430\u0442\u0435\u043b\u044c\u043d\u044b."),r.a.createElement(Me.a,{variant:"contained",color:"secondary",onClick:function(){u(!0)}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043e\u043f\u0440\u043e\u0441"))};function dr(){var e=Object(F.a)(["\n  query ($id: ID!) {\n    poll(id: $id) {\n      id\n      cities {\n        id\n        title\n        population\n        category {\n          title\n        }\n      }\n    }\n    cities {\n      id\n      title\n      category {\n        title\n      }\n    }\n  }\n"]);return dr=function(){return e},e}var mr=Object(M.a)(dr());function pr(){var e=Object(F.a)(["\n  mutation ($id: ID!, $cities: [String]) {\n    setPollCity(id: $id, cities: $cities) {\n      id\n      cities {\n        id\n      }\n    }\n  }\n"]);return pr=function(){return e},e}function br(){var e=Object(F.a)(["\n  mutation ($id: ID!, $cities: [String]) {\n    deleteCityFromActive(id: $id, cities: $cities) {\n      id\n      cities {\n        id\n      }\n    }\n  }\n"]);return br=function(){return e},e}var fr=Object(M.a)(br()),Er=Object(M.a)(pr()),gr=function(e){var t=e.id,a=Object(n.useState)(!1),l=Object(d.a)(a,2),c=l[0],i=l[1],o=Object(n.useState)(0),u=Object(d.a)(o,2),s=u[0],m=u[1],p=Object(n.useState)(!1),b=Object(d.a)(p,2),f=b[0],E=b[1],g=Object(n.useState)(),j=Object(d.a)(g,2),h=j[0],y=j[1],x=Object(n.useState)(),w=Object(d.a)(x,2),C=w[0],k=w[1],S=Object(n.useState)([]),q=Object(d.a)(S,2),N=q[0],$=q[1],F=Object(jt.a)(mr,{variables:{id:t},onCompleted:function(){var e=A.poll.cities;y(A.cities),k(A.cities.filter((function(t){for(var a=0;a<e.length;a++)if(t.id===e[a].id)return!1;return!0})))}}),A=F.data,T=F.loading,I=F.error,B=Object(P.useMutation)(Er,{onError:function(e){console.log(e),i({type:"error",text:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c. \u0421\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u043a\u043e\u043d\u0441\u043e\u043b\u044c."})},update:function(e,t){var a=t.data.setPollCity.cities.map((function(e){return e.id}));k(C.filter((function(e){return!a.includes(e.id)})))}}),M=Object(d.a)(B,2),D=M[0],z=M[1].loading,W=Object(P.useMutation)(fr,{onError:function(e){console.log(e),i({type:"error",text:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c. \u0421\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u043a\u043e\u043d\u0441\u043e\u043b\u044c."})},update:function(e,t){var a=t.data.deleteCityFromActive.cities,n=h.filter((function(e){for(var t=0;t<a.length;t++)if(e.id===a[t].id)return!1;return!0}));k(n)}}),R=Object(d.a)(W,2),U=R[0],L=R[1].loading;if(T||!A||!C)return r.a.createElement(ct,{type:"card"});var H=function(){return z||L?r.a.createElement(ot,null):null};if(I)return console.log(JSON.stringify(I)),r.a.createElement(Ot,{title:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a",description:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u043a\u0440\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0435. \u0421\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u043a\u043e\u043d\u0441\u043e\u043b\u044c"});var Q=function(e){E(e)},V=r.a.createElement(Ya.a,{fontSize:"small"}),_=r.a.createElement(tn.a,{fontSize:"small"}),J=function(e){U({variables:{id:t,cities:e}})},K=function(e){var t=e.city,a=e.deleteCity;return r.a.createElement(Oe.a,{item:!0,xs:12,sm:6,md:4,lg:3,xl:2},r.a.createElement(Ha.a,{className:"city-card"},r.a.createElement(O.a,{variant:"h6",gutterBottom:!0},t.title),r.a.createElement(O.a,{variant:"subtitle2",gutterBottom:!0},t.category.title),r.a.createElement(O.a,{variant:"overline",display:"block",gutterBottom:!0},"\u041d\u0430\u0441\u0435\u043b\u0435\u043d\u0438\u0435: ",t.population),r.a.createElement(Oe.a,{container:!0,item:!0,justify:"space-between",className:"card-service-buttons"},r.a.createElement(v.a,{className:"card-button","aria-label":"delete",onClick:function(){a(t.id)}},r.a.createElement(Pa.a,{fontSize:"small"})))))};return r.a.createElement(n.Fragment,null,r.a.createElement(mt,{open:c,text:c?c.text:"",type:c?c.type:"",close:function(){return i(!1)}}),r.a.createElement(H,null),r.a.createElement(_t,{open:f,confirm:function(){J([f]),E(!1)},close:function(){return E(!1)},buttons:{close:"\u041e\u0442\u043c\u0435\u043d\u0430",confirm:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"},data:{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043d\u0430\u0441\u0435\u043b\u0435\u043d\u043d\u044b\u0439 \u043f\u0443\u043d\u043a\u0442?",text:"\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435! \u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u043e\u043f\u0440\u043e\u0441\u043e\u0432 \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u044e\u0442 \u043d.\u043f. \u0432 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u043e\u043d\u0438 \u043f\u0440\u043e\u0432\u043e\u0434\u0438\u043b\u0438\u0441\u044c, \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u043f\u0440\u0438\u0432\u0435\u0434\u0435\u0442 \u043a \u043f\u043e\u0442\u0435\u0440\u0435 \u0447\u0430\u0441\u0442\u0438 \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0438 \u0438 \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e\u0441\u0442\u0438 \u0435\u0435 \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f."}}),r.a.createElement("div",{className:"cities-service-zone"},r.a.createElement(O.a,{className:"header"},"\u0413\u043e\u0440\u043e\u0434\u0430 \u0432 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u043f\u0440\u043e\u0432\u043e\u0434\u0438\u0442\u0441\u044f \u043e\u043f\u0440\u043e\u0441"),r.a.createElement(Oe.a,{container:!0,justify:"flex-start",alignItems:"center",spacing:2},r.a.createElement(Oe.a,{item:!0,xs:12,sm:8,md:6,lg:5},r.a.createElement(Rt.a,{multiple:!0,key:s,limitTags:3,options:C,disableCloseOnSelect:!0,clearOnEscape:!0,onChange:function(e,t){$(t)},getOptionLabel:function(e){return e.title},renderOption:function(e,t){var a=t.selected;return r.a.createElement(r.a.Fragment,null,r.a.createElement(It.a,{icon:V,checkedIcon:_,style:{marginRight:8},checked:a}),e.title)},renderInput:function(e){return r.a.createElement(Pe.a,Object.assign({},e,{variant:"outlined",label:"\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0433\u043e\u0440\u043e\u0434"}))}})),r.a.createElement(Oe.a,{item:!0,xs:12,sm:4,md:6,lg:5},r.a.createElement(Me.a,{variant:"contained",color:"primary",size:"small",onClick:function(){var e=N.map((function(e){return e.id}));D({variables:{id:t,cities:e}}),m(s+1)},disabled:!N.length},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c")))),r.a.createElement(Oe.a,{container:!0,spacing:3,xs:12},A.poll.cities.map((function(e,t){return r.a.createElement(K,{key:t,city:e,deleteCity:Q})}))))},vr=a(255),Or=a(318),jr=a.n(Or),hr=function(e){var t=e.question,a=e.handleLimitInput,l=Object(n.useState)(t.limit),c=Object(d.a)(l,2),i=c[0],o=c[1];return r.a.createElement(Oe.a,{item:!0,xs:12,sm:6,md:4,lg:3,xl:2},r.a.createElement(Ha.a,{className:"question-item",elevation:2},r.a.createElement(Oe.a,{item:!0,xs:12,sm:!0,container:!0},r.a.createElement(Oe.a,{item:!0,xs:!0,container:!0,direction:"column",spacing:2,alignItems:"flex-start"},r.a.createElement(Oe.a,{item:!0,xs:!0},r.a.createElement(I.a,{title:"\u041e\u0447\u0435\u0440\u0435\u0434\u043d\u043e\u0441\u0442\u044c \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f","aria-label":"add"},r.a.createElement(O.a,{variant:"body2",color:"primary"},t.order)))),r.a.createElement(Oe.a,{item:!0,xs:!0,container:!0,direction:"column",spacing:3,alignItems:"flex-end"},r.a.createElement(Oe.a,{item:!0,xs:!0,alignItems:"center",style:{cursor:"pointer"}},r.a.createElement(I.a,{title:"\u041c\u0435\u043d\u044e. \u0412 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435","aria-label":"add"},r.a.createElement(N.a,null)))),r.a.createElement(Oe.a,{item:!0},r.a.createElement(I.a,{title:"\u041b\u0438\u043c\u0438\u0442 \u043e\u0442\u0432\u0435\u0442\u043e\u0432","aria-label":"add"},r.a.createElement("input",{type:"number",className:"question-limit-input",onChange:function(e){var t=e.currentTarget.value;console.log(e),o(t<1?1:t>99?99:t)},onBlur:function(e){a({id:t.id,limit:i})},onKeyUp:function(e){13===e.keyCode&&e.currentTarget.blur()},value:i})))),r.a.createElement(O.a,{className:"question-title"},t.title.length>160?t.title.substring(0,100)+" ... "+t.title.substring(t.title.length-45):t.title)))};function yr(){var e=Object(F.a)(["\n  query pollQuery($id: ID!) {\n    poll(id: $id) {\n      id\n      title\n      code\n      liter\n      questions {\n        id\n        title\n        limit\n        order\n        answers {\n          id\n          title\n          order\n        }\n      }\n    }\n  }\n"]);return yr=function(){return e},e}var xr=Object(M.a)(yr());function wr(){var e=Object(F.a)(["\nmutation ($questions: [ReorderedArray]) {\n  newOrder(neworder: $questions) {\n    id\n    order\n  }\n}\n"]);return wr=function(){return e},e}function Cr(){var e=Object(F.a)(["\nmutation ($id: ID!, $limit: Int!) {\n  newLimit(id: $id, limit: $limit) {\n    id\n    limit\n  }\n}\n"]);return Cr=function(){return e},e}var kr=Object(M.a)(Cr()),Sr=Object(M.a)(wr()),qr=function(e){var t=e.id,a=Object(n.useState)(!1),l=Object(d.a)(a,2),c=l[0],i=l[1],o=Object(n.useState)(null),u=Object(d.a)(o,2),s=u[0],m=u[1],p=Object(n.useState)(null),b=Object(d.a)(p,2),f=(b[0],b[1]),E=Object(jt.a)(xr,{variables:{id:t},onCompleted:function(){var e=O.poll.questions;console.log(e),m(e.slice().sort((function(e,t){return e.order>t.order?1:-1})))}}),g=E.loading,v=E.error,O=E.data,j=Object(P.useMutation)(kr,{onError:function(e){console.log(e),i({type:"error",text:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043b\u0438\u043c\u0438\u0442 \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c. \u0421\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u043a\u043e\u043d\u0441\u043e\u043b\u044c."})}}),h=Object(d.a)(j,2),y=h[0],x=h[1].loading,w=Object(P.useMutation)(Sr,{onError:function(e){console.log(e),i({type:"error",text:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043f\u043e\u0440\u044f\u0434\u043e\u043a \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c. \u0421\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u043a\u043e\u043d\u0441\u043e\u043b\u044c."})},update:function(e,t){for(var a=t.data.newOrder,n=0;n<a.length;n++){var r=a[n].id,l=e.data.data;for(var c in l)l[c].id===r&&console.log(l[c])}}}),C=Object(d.a)(w,2),k=C[0],S=C[1].loading;if(g||!s)return r.a.createElement(ct,{type:"card"});if(v)return console.log(JSON.stringify(v)),r.a.createElement(Ot,{title:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a",description:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u043a\u0440\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0435. \u0421\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u043a\u043e\u043d\u0441\u043e\u043b\u044c"});var q=function(){return x||S?r.a.createElement(ot,null):null},N=function(e){var t=e.id,a=+e.limit;m(s.map((function(e){return e.id===t?Object($e.a)(Object($e.a)({},e),{},{limit:a}):e}))),y({variables:{id:t,limit:a}})},$=Object(vr.b)((function(e){var t=e.question;return r.a.createElement(hr,{question:t,handleLimitInput:N})})),F=Object(vr.a)((function(e){var t=e.questions;return r.a.createElement(Oe.a,{container:!0,item:!0,xs:12,spacing:2},t.map((function(e,t){return r.a.createElement($,{key:"item-".concat(e.id),index:t,question:e})})))}));return r.a.createElement(n.Fragment,null,r.a.createElement(mt,{open:c,text:c?c.text:"",type:c?c.type:"",close:function(){return i(!1)}}),r.a.createElement(q,null),r.a.createElement(F,{questions:s,onSortEnd:function(e){var t=e.oldIndex,a=e.newIndex;if(f(Object($e.a)({},s)),console.log(t,a),t!==a){var n=jr()(s,t,a),r=[],l=n.reduce((function(e,t,a){return t.order===a+1?e.push(t):(r.push({id:t.id,order:a+1}),e.push(Object($e.a)(Object($e.a)({},t),{},{order:a+1}))),e}),[]);m(l),k({variables:{questions:r}})}},axis:"xy"}))},Nr=function(e){var t=e.id,a=e.code,l=[{label:"\u041e\u0431\u0449\u0438\u0435",component:r.a.createElement(er,{id:t})},{label:"\u041f\u043e\u0440\u044f\u0434\u043e\u043a \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f",component:r.a.createElement(qr,{id:t})},{label:"\u041a\u043e\u043d\u0444\u0438\u0433",component:r.a.createElement(ir,{id:t})},{label:"\u0413\u043e\u0440\u043e\u0434\u0430",component:r.a.createElement(gr,{id:t})},{label:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435",component:r.a.createElement(sr,{id:t,code:a})}];return r.a.createElement(n.Fragment,null,r.a.createElement(Aa,{data:l}))},$r=function(){var e=Object(p.h)(),t=e.id,a=e.code;return r.a.createElement(n.Fragment,null,r.a.createElement($t,{title:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u043e\u043f\u0440\u043e\u0441\u0430 "+a}),r.a.createElement("div",null,r.a.createElement(se.a,{maxWidth:"xl",style:{padding:0}},r.a.createElement(Nr,{id:t,code:a}))))};function Fr(e){var t=e.children,a=e.value,n=e.index,l=Object(Fe.a)(e,["children","value","index"]);return r.a.createElement("div",Object.assign({role:"tabpanel",hidden:a!==n,id:"vertical-tabpanel-".concat(n),"aria-labelledby":"vertical-tab-".concat(n)},l),a===n&&r.a.createElement(rt.a,{p:3},r.a.createElement(O.a,null,t)))}var Ar=Object($.a)((function(e){return{root:{flexGrow:1,backgroundColor:e.palette.background.paper,display:"flex"},tabs:{borderRight:"1px solid ".concat(e.palette.divider)}}})),Tr=function(e){var t,a=e.id,n=Ar(),l=r.a.useState(0),c=Object(d.a)(l,2),i=c[0],o=c[1];return r.a.createElement("div",{className:n.root},r.a.createElement(Ca.a,{orientation:"vertical",variant:"scrollable",value:i,onChange:function(e,t){o(t)},className:n.tabs},r.a.createElement(ka.a,Object.assign({label:"\u0424\u0430\u0439\u043b\u044b"},{id:"vertical-tab-".concat(t=0),"aria-controls":"vertical-tabpanel-".concat(t)}))),r.a.createElement(Fr,{value:i,index:0},"\u0424\u0430\u0439\u043b\u044b \u043e\u043f\u0440\u043e\u0441\u0430 - ",a,r.a.createElement("p",null,"\u0412 \u0420\u0410\u0417\u0420\u0410\u0411\u041e\u0422\u041a\u0415")))},Ir=function(){var e=Object(p.h)(),t=e.id,a=e.code;return r.a.createElement(n.Fragment,null,r.a.createElement($t,{title:"\u0424\u0430\u0439\u043b\u044b "+a}),r.a.createElement("div",{style:{paddingTop:"10px"}},r.a.createElement(se.a,{maxWidth:"xl"},r.a.createElement(Tr,{id:t}))))},Br=function(){return r.a.createElement(n.Fragment,null,r.a.createElement(Oe.a,{container:!0,item:!0},"WIKI"))},Mr=function(){var e=Object(p.h)(),t=(e.id,e.code);return r.a.createElement(n.Fragment,null,r.a.createElement($t,{title:"Wiki "+t}),r.a.createElement(se.a,{maxWidth:"lg"},r.a.createElement(Br,null)))},Pr=a(143),Dr=a.n(Pr),zr=a(237);function Wr(){var e=Object(F.a)(["\nquery {\n  cities{\n    id\n    title\n    population\n    category {\n      id\n      title\n    }\n  }\n  cityCategories{\n    id\n    title\n  }\n}\n"]);return Wr=function(){return e},e}var Rr=Object(M.a)(Wr());function Ur(){var e=Object(F.a)(["\nmutation ($id: String!) {\n  deleteCity(id: $id) {\n    id\n    title\n    category {\n      id\n      title\n    }\n    population\n  }\n}\n"]);return Ur=function(){return e},e}function Lr(){var e=Object(F.a)(["\nmutation ($id: String!, $title: String!, $population: Int!, $category: String!) {\n  cityEdit(id: $id, title: $title, population: $population, category: $category) {\n    id\n    title\n    category {\n      id\n      title\n    }\n    population\n  }\n}\n"]);return Lr=function(){return e},e}function Hr(){var e=Object(F.a)(["\nmutation ($title: String!, $population: Int!, $category: String!) {\n  newCity(title: $title, population: $population, category: $category) {\n    id\n    title\n    category {\n      id\n      title\n    }\n    population\n  }\n}\n"]);return Hr=function(){return e},e}var Qr=Object(M.a)(Hr()),Vr=Object(M.a)(Lr()),_r=Object(M.a)(Ur()),Jr=function(){var e=Object(n.useState)(!1),t=Object(d.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(!1),i=Object(d.a)(c,2),o=i[0],u=i[1],s=Object(n.useState)(!1),m=Object(d.a)(s,2),p=m[0],b=m[1],f=Object(jt.a)(Rr),E=f.data,g=f.loading,j=f.error,h=Object(P.useMutation)(Qr,{onError:function(e){l({type:"error",text:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043d\u043e\u0432\u044b\u0439 \u0433\u043e\u0440\u043e\u0434 \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c. \u0421\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u043a\u043e\u043d\u0441\u043e\u043b\u044c."}),console.log(e)},update:function(e,t){var a=t.data.newCity;return e.writeQuery({query:Rr,data:{cities:[].concat(Object(ue.a)(E.cities),[a])}})}}),y=Object(d.a)(h,2),x=y[0],w=y[1].loading,C=Object(P.useMutation)(Vr,{onError:function(e){l({type:"error",text:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c. \u0421\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u043a\u043e\u043d\u0441\u043e\u043b\u044c."}),console.log(e)},update:function(e,t){var a=t.data.cityEdit;return e.writeQuery({query:Rr,data:{cities:E.cities.map((function(e){return e.id===a.id?a:e}))}})}}),k=Object(d.a)(C,2),S=k[0],q=k[1].loading,N=Object(P.useMutation)(_r,{onError:function(e){l({type:"error",text:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0433\u043e\u0440\u043e\u0434 \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c. \u0421\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u043a\u043e\u043d\u0441\u043e\u043b\u044c."}),console.log(e)},update:function(e,t){var a=t.data.deleteCity;return e.writeQuery({query:Rr,data:{cities:E.cities.filter((function(e){return e.id!==a.id}))}})}}),$=Object(d.a)(N,2),F=$[0],A=$[1].loading,T=function(e){var t=e.city,a=e.save,l=e.deleteCity,c=Object(n.useState)(!1),i=Object(d.a)(c,2),o=i[0],u=i[1];return r.a.createElement(n.Fragment,null,o?r.a.createElement(I,{city:t,save:function(e){a(Object($e.a)(Object($e.a)({},e),{},{id:t.id}))},close:function(){u(!1)}}):r.a.createElement(Oe.a,{item:!0,xs:12,sm:6,md:4,lg:3,xl:2},r.a.createElement(Ha.a,{className:"city-card"},r.a.createElement(O.a,{variant:"h6",gutterBottom:!0},t.title),r.a.createElement(O.a,{variant:"subtitle2",gutterBottom:!0},t.category.title),r.a.createElement(O.a,{variant:"overline",display:"block",gutterBottom:!0},"\u041d\u0430\u0441\u0435\u043b\u0435\u043d\u0438\u0435: ",t.population),r.a.createElement(Oe.a,{container:!0,item:!0,justify:"space-between",className:"card-service-buttons"},r.a.createElement(v.a,{className:"card-button","aria-label":"delete",onClick:function(){l(t.id)}},r.a.createElement(Pa.a,{fontSize:"small"})),r.a.createElement(v.a,{className:"card-button","aria-label":"delete",onClick:function(){u(!0)}},r.a.createElement(Dt.a,{fontSize:"small"}))))))},I=function(e){var t=e.save,a=e.close,l=e.city,c=Object(n.useState)(!1),i=Object(d.a)(c,2),o=i[0],u=i[1],s=Object(n.useState)(l?l.title:""),m=Object(d.a)(s,2),p=m[0],b=m[1],f=Object(n.useState)(l?l.population:""),g=Object(d.a)(f,2),O=g[0],j=g[1],h=Object(n.useState)(l?l.category.id:""),y=Object(d.a)(h,2),x=y[0],w=y[1];return r.a.createElement(Oe.a,{item:!0,xs:12,sm:6,md:4,lg:3,xl:2},r.a.createElement(Ha.a,{className:"add-city-card"},r.a.createElement(v.a,{className:"add-dialog-close","aria-label":"delete",size:"small",onClick:a},r.a.createElement(gn.a,{fontSize:"inherit"})),r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var a={title:p,population:+O,category:x};console.log(a),t(a)}},r.a.createElement(Pe.a,{className:"add-city-title",required:!0,defaultValue:l?l.title:"",helperText:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043d.\u043f.",onChange:function(e){u(!0),b(e.currentTarget.value)}}),r.a.createElement(Pe.a,{className:"add-city-population",type:"number",required:!0,defaultValue:l?l.population:"",onChange:function(e){u(!0),j(e.currentTarget.value)},InputLabelProps:{shrink:!0},helperText:"\u0427\u0438\u0441\u043b\u0435\u043d\u043d\u043e\u0441\u0442\u044c, \u0447\u0435\u043b."}),r.a.createElement(Pe.a,{select:!0,required:!0,onChange:function(e){u(!0),w(e.currentTarget.value)},defaultValue:l?l.category.id:"",SelectProps:{native:!0},helperText:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f \u043d.\u043f."},r.a.createElement("option",{key:0,disabled:!0,selected:!0,value:""}),E.cityCategories.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.title)}))),r.a.createElement(Me.a,{className:"city-dialog-save",variant:"contained",color:"primary",size:"small",startIcon:r.a.createElement(ar.a,null),type:"submit",disabled:!o},"Save"))))};function B(){return(B=Object(zr.a)(Dr.a.mark((function e(t){return Dr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x({variables:Object($e.a)({},t)});case 2:b(!1);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e){return D.apply(this,arguments)}function D(){return(D=Object(zr.a)(Dr.a.mark((function e(t){return Dr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S({variables:Object($e.a)({},t)});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(){return(z=Object(zr.a)(Dr.a.mark((function e(t){return Dr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F({variables:{id:t}});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var W=function(e){u(e)};if(g)return r.a.createElement(ct,null);if(j)return console.log(JSON.stringify(j)),r.a.createElement(Ot,{title:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a",description:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u043a\u0440\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0435. \u0421\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u043a\u043e\u043d\u0441\u043e\u043b\u044c"});var R=function(){return w||q||A?r.a.createElement(ot,null):null};return r.a.createElement(n.Fragment,null,r.a.createElement(mt,{open:a,text:a?a.text:"",type:a?a.type:"",close:function(){return l(!1)}}),r.a.createElement(R,null),r.a.createElement("div",{className:"cities-service-zone"},r.a.createElement(O.a,{className:"header"},"\u0413\u043e\u0440\u043e\u0434\u0430 \u043f\u0440\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u044f \u043e\u043f\u0440\u043e\u0441\u043e\u0432"),r.a.createElement(Me.a,{variant:"contained",color:"primary",size:"small",onClick:function(){b(!0)}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c")),r.a.createElement(_t,{open:o,confirm:function(){!function(e){z.apply(this,arguments)}(o),u(!1)},close:function(){u(!1)},buttons:{close:"\u041e\u0442\u043c\u0435\u043d\u0430",confirm:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"},data:{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043d\u0430\u0441\u0435\u043b\u0435\u043d\u043d\u044b\u0439 \u043f\u0443\u043d\u043a\u0442?",text:"\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435! \u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u043e\u043f\u0440\u043e\u0441\u043e\u0432 \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u044e\u0442 \u043d.\u043f. \u0432 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u043e\u043d\u0438 \u043f\u0440\u043e\u0432\u043e\u0434\u0438\u043b\u0438\u0441\u044c, \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u043f\u0440\u0438\u0432\u0435\u0434\u0435\u0442 \u043a \u043f\u043e\u0442\u0435\u0440\u0435 \u0447\u0430\u0441\u0442\u0438 \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0438 \u0438 \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e\u0441\u0442\u0438 \u0435\u0435 \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f."}}),r.a.createElement(Oe.a,{container:!0,spacing:3,xs:12},p&&r.a.createElement(I,{save:function(e){return B.apply(this,arguments)},close:function(){b(!1)}}),E.cities.map((function(e,t){return r.a.createElement(T,{city:e,save:M,deleteCity:W})}))))},Kr=function(){return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"sample-service-zone"},r.a.createElement(O.a,{className:"header"},"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440 \u0432\u044b\u0431\u043e\u0440\u043a\u0438")))},Gr=function(){var e=[{label:"\u0413\u043e\u0440\u043e\u0434\u0430",component:r.a.createElement(Jr,null)},{label:"\u0412\u044b\u0431\u043e\u0440\u043a\u0430",component:r.a.createElement(Kr,null)},{label:"\u041f\u043e\u043b",component:"\u041f\u041e\u041b"},{label:"\u0412\u043e\u0437\u0440\u0430\u0441\u0442",component:"\u0412\u043e\u0437\u0440\u0430\u0441\u0442"},{label:"\u0422\u041d\u041f",component:"\u0422\u041d\u041f"}];return r.a.createElement(Aa,{data:e})},Zr=function(){return r.a.createElement(n.Fragment,null,r.a.createElement($t,{title:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u043f\u043e\u0434\u0441\u0438\u0441\u0442\u0435\u043c\u044b"}),r.a.createElement("div",null,r.a.createElement(se.a,{maxWidth:"xl",style:{padding:0}},r.a.createElement(Gr,null))))},Xr=a(16),Yr=a(472),el=a(473),tl=a(470),al=a(471),nl=a(468),rl=a(486),ll=a(469),cl=a(485),il=a(319),ol=a.n(il),ul=a(390),sl=a(391),dl=a(396),ml=function(e){var t=e.open,a=e.close,l=e.saveNewUser,c=e.selects,i=Object(n.useState)(),o=Object(d.a)(i,2),u=o[0],s=o[1];return r.a.createElement(n.Fragment,null,r.a.createElement(Ae.a,{open:t,onClose:a,"aria-labelledby":"form-dialog-title"},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),l(u)}},r.a.createElement(Be.a,null,"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"),r.a.createElement(Ie.a,null,r.a.createElement(Oe.a,{container:!0,spacing:2},r.a.createElement(Oe.a,{item:!0,xs:12,md:6},r.a.createElement(Pe.a,{required:!0,fullWidth:"true",label:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c",variant:"outlined",onChange:function(e){return s(Object($e.a)(Object($e.a)({},u),{},{username:e.currentTarget.value}))},helperText:"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u0444\u043e\u0440\u043c\u0430\u0442: \u0418\u0432\u0430\u043d\u043e\u0432 \u0418.\u0418."})),r.a.createElement(Oe.a,{item:!0,xs:12,md:6},r.a.createElement(Pe.a,{required:!0,fullWidth:"true",label:"\u041b\u043e\u0433\u0438\u043d",variant:"outlined",onChange:function(e){return s(Object($e.a)(Object($e.a)({},u),{},{login:e.currentTarget.value}))},helperText:"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u0444\u043e\u0440\u043c\u0430\u0442: IvanovII"})),r.a.createElement(Oe.a,{item:!0,xs:12,md:6},r.a.createElement(Pe.a,{required:!0,fullWidth:"true",label:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",variant:"outlined",onChange:function(e){return s(Object($e.a)(Object($e.a)({},u),{},{password:e.currentTarget.value}))},helperText:"\u041d\u0435 \u043c\u0435\u043d\u0435\u0435 \u0432\u043e\u0441\u044c\u043c\u0438 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"})),r.a.createElement(Oe.a,{item:!0,xs:12,md:6},r.a.createElement(Pe.a,{required:!0,fullWidth:"true",label:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",variant:"outlined",helperText:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"})),r.a.createElement(Oe.a,{item:!0,xs:12,md:6},r.a.createElement(ul.a,{required:!0,variant:"outlined",fullWidth:"true"},r.a.createElement(dl.a,{htmlFor:"outlined-age-native-simple"},"\u0421\u0442\u0430\u0442\u0443\u0441"),r.a.createElement(la.a,{required:!0,native:!0,label:"\u0421\u0442\u0430\u0442\u0443\u0441",onChange:function(e){return s(Object($e.a)(Object($e.a)({},u),{},{status:e.currentTarget.value}))},inputProps:{name:"age",id:"outlined-age-native-simple"}},r.a.createElement("option",{"aria-label":"None",selected:!0,disabled:"true",value:""}),c.userStatus.map((function(e){return r.a.createElement("option",{value:e.id},e.title)}))),r.a.createElement(sl.a,null,"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0441\u043e\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0439 \u0441\u0442\u0430\u0442\u0443\u0441"))),r.a.createElement(Oe.a,{item:!0,xs:12,md:6},r.a.createElement(ul.a,{required:!0,variant:"outlined",fullWidth:"true"},r.a.createElement(dl.a,{htmlFor:"outlined-age-native-simple"},"\u041f\u0440\u0430\u0432\u0430"),r.a.createElement(la.a,{native:!0,label:"\u041f\u0440\u0430\u0432\u0430",onChange:function(e){return s(Object($e.a)(Object($e.a)({},u),{},{rights:e.currentTarget.value}))},inputProps:{name:"age",id:"outlined-age-native-simple"}},r.a.createElement("option",{"aria-label":"None",selected:!0,disabled:"true",value:""}),c.userRights.map((function(e){return r.a.createElement("option",{value:e.id},e.title)}))),r.a.createElement(sl.a,null,"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043f\u0440\u0430\u0432\u0430 \u043f\u043e\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"))))),r.a.createElement("p",null),r.a.createElement(Te.a,null,r.a.createElement(Me.a,{variant:"contained",onClick:a},"\u041e\u0442\u043c\u0435\u043d\u0430"),r.a.createElement(Me.a,{variant:"contained",type:"submit",color:"primary"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c")))))},pl=function(e){var t=e.data,a=e.selects,l=e.open,c=e.close,i=e.updateUser,o=Object(n.useState)(!1),u=Object(d.a)(o,2),s=u[0],m=u[1];return r.a.createElement(n.Fragment,null,r.a.createElement(Ae.a,{open:l,onClose:c,"aria-labelledby":"form-dialog-title"},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),i({id:t.id,data:s}),m(!1),c()}},r.a.createElement(Be.a,null,"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435"),r.a.createElement(Ie.a,null,r.a.createElement(Oe.a,{container:!0,spacing:2},r.a.createElement(Oe.a,{item:!0,xs:12,md:6},r.a.createElement(Pe.a,{required:!0,fullWidth:"true",label:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c",variant:"outlined",defaultValue:t.username,onChange:function(e){return m(Object($e.a)(Object($e.a)({},s),{},{username:e.currentTarget.value}))},helperText:"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u0444\u043e\u0440\u043c\u0430\u0442: \u0418\u0432\u0430\u043d\u043e\u0432 \u0418.\u0418."})),r.a.createElement(Oe.a,{item:!0,xs:12,md:6},r.a.createElement(Pe.a,{required:!0,fullWidth:"true",label:"\u041b\u043e\u0433\u0438\u043d",variant:"outlined",defaultValue:t.login,onChange:function(e){return m(Object($e.a)(Object($e.a)({},s),{},{login:e.currentTarget.value}))},helperText:"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u0444\u043e\u0440\u043c\u0430\u0442: IvanovII"})),r.a.createElement(Oe.a,{item:!0,xs:12,md:6},r.a.createElement(ul.a,{required:!0,variant:"outlined",fullWidth:"true"},r.a.createElement(dl.a,{htmlFor:"outlined-age-native-simple"},"\u0421\u0442\u0430\u0442\u0443\u0441"),r.a.createElement(la.a,{required:!0,native:!0,defaultValue:t.status?t.status.id:"",label:"\u0421\u0442\u0430\u0442\u0443\u0441",onChange:function(e){return m(Object($e.a)(Object($e.a)({},s),{},{status:e.currentTarget.value}))},inputProps:{name:"age",id:"outlined-age-native-simple"}},r.a.createElement("option",{"aria-label":"None",selected:!0,disabled:"true",value:""}),a.userStatus.map((function(e){return r.a.createElement("option",{value:e.id},e.title)}))),r.a.createElement(sl.a,null,"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0441\u043e\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0439 \u0441\u0442\u0430\u0442\u0443\u0441"))),r.a.createElement(Oe.a,{item:!0,xs:12,md:6},r.a.createElement(ul.a,{required:!0,variant:"outlined",fullWidth:"true"},r.a.createElement(dl.a,{htmlFor:"outlined-age-native-simple"},"\u041f\u0440\u0430\u0432\u0430"),r.a.createElement(la.a,{native:!0,defaultValue:t.rights?t.rights.id:"",label:"\u041f\u0440\u0430\u0432\u0430",onChange:function(e){return m(Object($e.a)(Object($e.a)({},s),{},{rights:e.currentTarget.value}))},inputProps:{name:"age",id:"outlined-age-native-simple"}},r.a.createElement("option",{"aria-label":"None",selected:!0,disabled:"true",value:""}),a.userRights.map((function(e){return r.a.createElement("option",{value:e.id},e.title)}))),r.a.createElement(sl.a,null,"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043f\u0440\u0430\u0432\u0430 \u043f\u043e\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"))))),r.a.createElement("p",null),r.a.createElement(Te.a,null,r.a.createElement(Me.a,{variant:"contained",onClick:c},"\u041e\u0442\u043c\u0435\u043d\u0430"),r.a.createElement(Me.a,{variant:"contained",type:"submit",color:"primary"},"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c")))))},bl=function(e){var t=e.data,a=e.open,l=e.close,c=e.passReset,i=Object(n.useState)(!1),o=Object(d.a)(i,2),u=o[0],s=o[1];return r.a.createElement(n.Fragment,null,r.a.createElement(Ae.a,{open:a,onClose:l,"aria-labelledby":"form-dialog-title"},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),c({id:t.id,password:u.password}),s(!1),l()}},r.a.createElement(Be.a,null,"\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 \u043f\u0430\u0440\u043e\u043b\u044f"),r.a.createElement(Ie.a,null,r.a.createElement(Qt.a,{id:"alert-dialog-description"},"\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f - ",t.username),r.a.createElement(Oe.a,{container:!0,spacing:2},r.a.createElement(Oe.a,{item:!0,xs:12},r.a.createElement(Pe.a,{required:!0,fullWidth:"true",label:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",variant:"outlined",onChange:function(e){return s(Object($e.a)(Object($e.a)({},u),{},{password:e.currentTarget.value}))},helperText:"\u041d\u0435 \u043c\u0435\u043d\u0435\u0435 \u0432\u043e\u0441\u044c\u043c\u0438 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"})),r.a.createElement(Oe.a,{item:!0,xs:12},r.a.createElement(Pe.a,{required:!0,fullWidth:"true",label:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",variant:"outlined",helperText:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"})))),r.a.createElement("p",null),r.a.createElement(Te.a,null,r.a.createElement(Me.a,{variant:"contained",onClick:l},"\u041e\u0442\u043c\u0435\u043d\u0430"),r.a.createElement(Me.a,{variant:"contained",type:"submit",color:"primary"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")))))};function fl(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}var El=[{id:"username",numeric:!1,disablePadding:!0,label:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c",sort:!0},{id:"login",numeric:!1,disablePadding:!1,label:"\u041b\u043e\u0433\u0438\u043d",sort:!0},{id:"status",numeric:!1,disablePadding:!1,label:"\u0421\u0442\u0430\u0442\u0443\u0441",sort:!0},{id:"rights",numeric:!1,disablePadding:!1,label:"\u041f\u0440\u0430\u0432\u0430",sort:!0},{id:"",numeric:!0,disablePadding:!0,label:"Action",sort:!1}];function gl(e){var t=e.classes,a=e.onSelectAllClick,n=e.order,l=e.orderBy,c=e.numSelected,i=e.rowCount,o=e.onRequestSort;return r.a.createElement(nl.a,null,r.a.createElement(ll.a,null,r.a.createElement(tl.a,{padding:"checkbox"},r.a.createElement(It.a,{indeterminate:c>0&&c<i,checked:i>0&&c===i,onChange:a,inputProps:{"aria-label":"select all desserts"}})),El.map((function(e){return r.a.createElement(tl.a,{key:e.id,align:"center",padding:e.disablePadding?"none":"default"},e.sort?r.a.createElement(cl.a,{active:l===e.id,direction:l===e.id?n:"asc",onClick:(a=e.id,function(e){o(e,a)}),hideSortIcon:!e.sort},e.label,l===e.id?r.a.createElement("span",{className:t.visuallyHidden},"desc"===n?"sorted descending":"sorted ascending"):null):r.a.createElement("span",null,e.label));var a}))))}var vl=Object($.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(Xr.e)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},title:{flex:"1 1 100%"}}})),Ol=function(e){var t=vl(),a=e.numSelected,n=e.deleteDelete,l=e.setUserAddOpen;return r.a.createElement(E.a,{className:Object(H.a)(t.root,Object(b.a)({},t.highlight,a>0))},a>0?r.a.createElement(O.a,{className:t.title,color:"inherit",variant:"subtitle1",component:"div"},a," \u0432\u044b\u0431\u0440\u0430\u043d\u043e"):r.a.createElement(O.a,{className:t.title,variant:"h6",id:"tableTitle",component:"div"},"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438"),a>0?r.a.createElement(I.a,{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"},r.a.createElement(v.a,{"aria-label":"delete",onClick:n},r.a.createElement(Pa.a,null))):r.a.createElement(I.a,{title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"},r.a.createElement(Me.a,{variant:"contained",color:"primary",onClick:function(){return l(!0)}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c")))},jl=Object($.a)((function(e){return{paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}})),hl=function(e){var t=e.users,a=e.addNewUser,l=e.deleteUsers,c=e.updateUser,i=e.resetPassword,o=e.selects,u=jl(),s=Object(n.useState)(!1),m=Object(d.a)(s,2),p=m[0],b=m[1],f=Object(n.useState)(!1),E=Object(d.a)(f,2),g=E[0],O=E[1],j=Object(n.useState)(!1),h=Object(d.a)(j,2),y=h[0],x=h[1],w=Object(n.useState)(!1),C=Object(d.a)(w,2),k=C[0],S=C[1],q=Object(n.useState)("asc"),N=Object(d.a)(q,2),$=N[0],F=N[1],A=Object(n.useState)("calories"),T=Object(d.a)(A,2),B=T[0],M=T[1],P=Object(n.useState)([]),D=Object(d.a)(P,2),z=D[0],W=D[1],R=Object(n.useState)(0),U=Object(d.a)(R,2),L=U[0],H=U[1],Q=Object(n.useState)(5),V=Object(d.a)(Q,2),_=V[0],J=V[1];return r.a.createElement(n.Fragment,null,r.a.createElement(ml,{open:g,selects:o,close:function(){return O(!1)},saveNewUser:function(e){a(e),O(!1)}}),r.a.createElement(pl,{data:y,selects:o,open:y,close:function(){return x(!1)},updateUser:function(e){var t=e.id,a=e.data;c({id:t,data:a})}}),r.a.createElement(bl,{data:k,open:k,close:function(){return S(!1)},passReset:function(e){var t=e.id,a=e.password;i({id:t,password:a})}}),r.a.createElement(_t,{open:p,confirm:function(){l(z),b(!1),W([])},close:function(){return b(!1)},buttons:{close:"\u041e\u0442\u043c\u0435\u043d\u0430",confirm:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"},data:{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439(\u044f)?",text:"\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435! \u042d\u0442\u043e \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044f \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043e\u0442\u043c\u0435\u043d\u0435\u043d\u0430. \u0427\u0430\u0441\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u043f\u0440\u0438\u0432\u044f\u0437\u0430\u043d\u044b \u043a \u0443\u0447\u0435\u0442\u043d\u043e\u0439 \u0437\u0430\u043f\u0438\u0441\u0438, \u0431\u0443\u0434\u044c\u0442\u0435 \u0432\u043d\u0438\u043c\u0430\u0442\u0435\u043b\u044c\u043d\u044b."}}),r.a.createElement(Ha.a,{className:u.paper},r.a.createElement(Ol,{numSelected:z.length,deleteDelete:b,setUserAddOpen:O}),r.a.createElement(al.a,null,r.a.createElement(Yr.a,{className:u.table,"aria-labelledby":"tableTitle",size:"medium","aria-label":"enhanced table"},r.a.createElement(gl,{classes:u,numSelected:z.length,order:$,orderBy:B,onSelectAllClick:function(e){if(e.target.checked){var a=t.map((function(e){return e.id}));W(a)}else W([])},onRequestSort:function(e,t){F(B===t&&"asc"===$?"desc":"asc"),M(t)},rowCount:t.length}),r.a.createElement(el.a,null,function(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((function(e){return e[0]}))}(t,function(e,t){return"desc"===e?function(e,a){return fl(e,a,t)}:function(e,a){return-fl(e,a,t)}}($,B)).slice(L*_,L*_+_).map((function(e,t){var a,n=(a=e.id,-1!==z.indexOf(a)),l="enhanced-table-checkbox-".concat(t);return r.a.createElement(ll.a,{hover:!0,role:"checkbox","aria-checked":n,tabIndex:-1,key:e.id,selected:n},r.a.createElement(tl.a,{padding:"checkbox"},r.a.createElement(It.a,{checked:n,onClick:function(t){return function(e,t){var a=z.indexOf(t),n=[];-1===a?n=n.concat(z,t):0===a?n=n.concat(z.slice(1)):a===z.length-1?n=n.concat(z.slice(0,-1)):a>0&&(n=n.concat(z.slice(0,a),z.slice(a+1))),W(n)}(0,e.id)},inputProps:{"aria-labelledby":l}})),r.a.createElement(tl.a,{align:"center",component:"th",id:l,scope:"row",padding:"none"},e.username),r.a.createElement(tl.a,{align:"center"},e.login),r.a.createElement(tl.a,{align:"center"},e.status?e.status.title:"-"),r.a.createElement(tl.a,{align:"center"},e.rights?e.rights.title:"-"),r.a.createElement(tl.a,{align:"center",padding:"none"},r.a.createElement(I.a,{title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c"},r.a.createElement(v.a,{onClick:function(t){return function(e,t){x(t)}(0,e)}},r.a.createElement(Dt.a,null))),r.a.createElement(I.a,{title:"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"},r.a.createElement(v.a,{onClick:function(t){return function(e,t){S(t)}(0,e)}},r.a.createElement(ol.a,null)))))}))))),r.a.createElement(rl.a,{rowsPerPageOptions:[5,10,25],component:"div",count:t.length,rowsPerPage:_,page:L,labelRowsPerPage:"\u0421\u0442\u0440\u043e\u043a:",onChangePage:function(e,t){H(t)},onChangeRowsPerPage:function(e){J(parseInt(e.target.value,10)),H(0)}})))};function yl(){var e=Object(F.a)(["\n  query {\n    userRights {\n      id\n      title\n    }\n    userStatus {\n      id\n      title\n    }\n  }\n"]);return yl=function(){return e},e}function xl(){var e=Object(F.a)(["\n  query {\n    users {\n      id\n      username\n      login\n      status {\n        id\n        title\n      }\n      rights {\n        id\n        title\n      }\n    }\n  }\n"]);return xl=function(){return e},e}var wl=Object(M.a)(xl()),Cl=Object(M.a)(yl());function kl(){var e=Object(F.a)(["\n  mutation($id: String, $password: String) {\n    resetPassword(id: $id, password: $password)\n  }\n"]);return kl=function(){return e},e}function Sl(){var e=Object(F.a)(["\n  mutation($users: [String]) {\n    deleteUsers(users: $users) {\n      id\n    }\n  }\n"]);return Sl=function(){return e},e}function ql(){var e=Object(F.a)(["\n  mutation($id: String, $data: UserDataUpdate) {\n    updateUser(id: $id, data: $data) {\n      id\n      username\n      login\n      status {\n        id\n        title\n      }\n      rights {\n        id\n        title\n      }\n    }\n  }\n"]);return ql=function(){return e},e}function Nl(){var e=Object(F.a)(["\n  mutation($user: UserDataCreate!) {\n    addNewUser(user: $user) {\n      id\n      username\n      login\n      status {\n        id\n        title\n      }\n      rights {\n        id\n        title\n      }\n    }\n  }\n"]);return Nl=function(){return e},e}var $l=Object(M.a)(Nl()),Fl=Object(M.a)(ql()),Al=Object(M.a)(Sl()),Tl=Object(M.a)(kl()),Il=function(){var e=Object(n.useState)(!1),t=Object(d.a)(e,2),a=t[0],l=t[1],c=Object(jt.a)(wl),i=c.loading,o=c.error,u=c.data,s=Object(jt.a)(Cl),m=s.loading,p=s.error,b=s.data,f=Object(P.useMutation)(Al,{onError:function(e){l({type:"error",text:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c. \u0421\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u043a\u043e\u043d\u0441\u043e\u043b\u044c."}),console.log(e)},update:function(e,t){var a=t.data.deleteUsers;return e.writeQuery({query:wl,data:{users:u.users.filter((function(e){for(var t=0;t<a.length;t++)if(a[t].id===e.id)return!1;return!0}))}})}}),E=Object(d.a)(f,2),g=E[0],v=E[1].loading,O=Object(P.useMutation)($l,{onError:function(e){l({type:"error",text:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c. \u0421\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u043a\u043e\u043d\u0441\u043e\u043b\u044c."}),console.log(e)},update:function(e,t){var a=t.data.addNewUser;return e.writeQuery({query:wl,data:{users:[].concat(Object(ue.a)(u.users),[a])}})}}),j=Object(d.a)(O,2),h=j[0],y=j[1].loading,x=Object(P.useMutation)(Fl,{onError:function(e){l({type:"error",text:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c. \u0421\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u043a\u043e\u043d\u0441\u043e\u043b\u044c."}),console.log(e)},update:function(e,t){var a=t.data.updateUser;return e.writeQuery({query:wl,data:{users:u.users.map((function(e){return e.id===a.id?a:e}))}})}}),w=Object(d.a)(x,2),C=w[0],k=w[1].loading,S=Object(P.useMutation)(Tl),q=Object(d.a)(S,1)[0];if(i||m)return r.a.createElement(ct,null);if(o||p)return r.a.createElement(Ot,{title:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a",description:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u043a\u0440\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0435. \u0421\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u043a\u043e\u043d\u0441\u043e\u043b\u044c"});var N=function(){return v||y||k?r.a.createElement(ot,null):null};return r.a.createElement(n.Fragment,null,r.a.createElement(mt,{open:a,text:a?a.text:"",type:a?a.type:"",close:function(){return l(!1)}}),r.a.createElement(N,null),r.a.createElement(hl,{users:u.users,selects:b,addNewUser:function(e){h({variables:{user:e}})},deleteUsers:function(e){g({variables:{users:e}})},updateUser:function(e){var t=e.id,a=e.data;C({variables:{id:t,data:a}})},resetPassword:function(e){var t=e.id,a=e.password;q({variables:{id:t,password:a}})}}))},Bl=function(){return r.a.createElement(n.Fragment,null,r.a.createElement($t,{title:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438 \u0441\u0438\u0441\u0442\u0435\u043c\u044b"}),r.a.createElement("div",{style:{paddingTop:"10px"}},r.a.createElement(se.a,{maxWidth:"lg"},r.a.createElement(Il,null))))},Ml=function(){return r.a.createElement(n.Fragment,null,r.a.createElement(Ot,{title:"404 \u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430",description:"\u0412\u044b \u0437\u0430\u0431\u043b\u0443\u0434\u0438\u043b\u0438\u0441\u044c. \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0430\u0434\u0440\u0435\u0441"}))},Pl=function(){return r.a.createElement(m.a,null,r.a.createElement(p.d,null,r.a.createElement(p.b,{path:"/",exact:!0,component:kt}),r.a.createElement(p.b,{path:"/poll-archive",exact:!0,component:At}),r.a.createElement(p.b,{path:"/settings/users",exact:!0,component:Bl}),r.a.createElement(p.b,{path:"/results/:id/:code",component:Dn}),r.a.createElement(p.b,{path:"/poll-settings/:id/:code",component:$r}),r.a.createElement(p.b,{path:"/drive/:id/:code",component:wa}),r.a.createElement(p.b,{path:"/analyze",component:Ln}),r.a.createElement(p.b,{path:"/attachment/:id/:code",component:Ir}),r.a.createElement(p.b,{path:"/poll-wiki/:id/:code",component:Mr}),r.a.createElement(p.b,{path:"/poll-app-settings",component:Zr}),r.a.createElement(p.b,{path:"/tester",component:Hn}),r.a.createElement(p.b,{component:Ml})))},Dl=a(474),zl=a(320),Wl=a.n(zl);function Rl(){return r.a.createElement(O.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ","\u0420\u0418\u0410\u0426i51 ",(new Date).getFullYear())}var Ul=Object($.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},forget:{cursor:"pointer"}}})),Ll=function(e){var t=e.onLogin,a=e.userError,l=e.passwordError,c=Object(n.useState)(""),i=Object(d.a)(c,2),o=i[0],u=i[1],s=Object(n.useState)(""),m=Object(d.a)(s,2),p=m[0],b=m[1],f=Ul();return r.a.createElement(se.a,{component:"main",maxWidth:"xs"},r.a.createElement(Dl.a,null),r.a.createElement("div",{className:f.paper},r.a.createElement(je.a,{className:f.avatar},r.a.createElement(Wl.a,null)),r.a.createElement(O.a,{component:"h1",variant:"h5"},"\u0412\u043e\u0439\u0434\u0438\u0442\u0435 \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0443"),r.a.createElement("form",{className:f.form,noValidate:!0},r.a.createElement(Pe.a,{error:!!a,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"login",label:"\u041b\u043e\u0433\u0438\u043d",name:"login",autoComplete:"login",autoFocus:!0,onChange:function(e){u(e.target.value)},helperText:a}),r.a.createElement(Pe.a,{error:l,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",id:"password",autoComplete:"current-password",onChange:function(e){b(e.target.value)}}),r.a.createElement(Tt.a,{control:r.a.createElement(It.a,{value:"remember",color:"primary"}),label:"\u0417\u0430\u043f\u043e\u043c\u043d\u0438\u0442\u044c \u043c\u0435\u043d\u044f"}),r.a.createElement(Me.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:f.submit,onClick:function(e){e.preventDefault(),(o||p)&&t({login:o,password:p})}},"\u0412\u043e\u0439\u0442\u0438"))),r.a.createElement(rt.a,null,r.a.createElement(Rl,null)))};function Hl(){var e=Object(F.a)(["\n  mutation signup(\n    $login: String!,\n    $password: String!\n  ) {\n    signup(\n      login: $login,\n      password: $password\n    ) {\n      user {\n        id\n        login\n      }\n    }\n  }\n\n"]);return Hl=function(){return e},e}function Ql(){var e=Object(F.a)(["\n  mutation signin(\n    $login: String!,\n    $password: String!\n  ) {\n    signin(\n      login: $login,\n      password: $password\n    ) {\n      user {\n        id\n        login\n      }\n    }\n  }\n"]);return Ql=function(){return e},e}var Vl=Object(M.a)(Ql()),_l=(Object(M.a)(Hl()),function(){var e=Object(P.useQuery)(R),t=e.loading,a=e.error,l=e.data,c=Object(n.useState)(null),i=Object(d.a)(c,2),o=i[0],u=i[1],s=Object(n.useState)(null),m=Object(d.a)(s,2),p=m[0],b=m[1],f=Object(P.useMutation)(Vl,{onError:function(e){b("\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c"),u(!0)},update:function(e,t){var a=t.data.signin;return e.writeQuery({query:R,data:{currentUser:a.user}})}}),E=Object(d.a)(f,2),g=E[0],v=E[1].loading;if(t)return r.a.createElement(ct,null);if(a)return console.log(JSON.stringify(a)),r.a.createElement(Ot,{title:"\u0427\u0442\u043e-\u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a",description:"\u041f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043d\u0435 \u0445\u043e\u0447\u0435\u0442 \u0441\u0442\u0430\u0440\u0442\u043e\u0432\u0430\u0442\u044c, \u0441\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u043a\u043e\u043d\u0441\u043e\u043b\u044c!"});var O=function(){return v?r.a.createElement(ot,null):null};return l.currentUser?r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"App"},r.a.createElement(O,null),r.a.createElement(Pl,null))):r.a.createElement("div",null,r.a.createElement(O,null),r.a.createElement(Ll,{onLogin:function(e){g({variables:e})},userError:p,passwordError:o}))}),Jl=new o.a({uri:l+"/graphql",cache:s,credentials:"include",connectToDevTools:!0});i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(u.a,{client:Jl},r.a.createElement(_l,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[354,1,2]]]);
//# sourceMappingURL=main.87a1a053.chunk.js.map