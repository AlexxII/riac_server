(this.webpackJsonpriac=this.webpackJsonpriac||[]).push([[0],{308:function(e,t,a){e.exports=a(332)},313:function(e,t,a){},332:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(20),l=a.n(c),o=a(172),i=a(173),u=a(252),s=(a(313),a(35)),d=a(36),m=a(13),b=a(23),p=a(373),f=a(378),E=a(379),O=a(376),j=a(159),v=a(377),g=a(404),h=a(277),x=a(258),w=a.n(x),y=a(166),C=a.n(y),k=a(217),S=a.n(k),A=a(215),N=a.n(A),q=a(216),T=a.n(q),F=a(185),B=a.n(F),$=a(214),I=a.n($),M=a(259),P=a.n(M),D=Object(p.a)((function(e){return{grow:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:Object(b.a)({display:"none"},e.breakpoints.up("xs"),{display:"block"}),inputRoot:{color:"inherit"},sectionDesktop:Object(b.a)({display:"none"},e.breakpoints.up("sm"),{display:"flex"}),sectionMobile:Object(b.a)({display:"flex"},e.breakpoints.up("sm"),{display:"none"}),link:{color:"white",textDecoration:"none"}}})),H=function(e){var t=e.title,a=D(),n=r.a.useState(null),c=Object(m.a)(n,2),l=c[0],o=c[1],i=r.a.useState(null),u=Object(m.a)(i,2),d=u[0],b=u[1],p=r.a.useState(null),x=Object(m.a)(p,2),y=x[0],k=x[1],A=Boolean(l),q=Boolean(y),F=Boolean(d),$=function(e){o(e.currentTarget)},M=function(e){b(e.currentTarget)},H=function(){k(null)},L=function(){o(null),H()},W=function(){b(null),H()},z="primary-account-menu",R=r.a.createElement(h.a,{anchorEl:l,anchorOrigin:{vertical:"top",horizontal:"right"},id:z,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:A,onClose:L},r.a.createElement(g.a,{onClick:L},"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"),r.a.createElement(g.a,{onClick:L},"\u0412\u044b\u0445\u043e\u0434")),Q=r.a.createElement(h.a,{anchorEl:d,anchorOrigin:{vertical:"top",horizontal:"right"},id:"primary-apps-menu",keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:F,onClose:W},r.a.createElement(g.a,{onClick:W},"\u041f\u0423\u0421\u0422\u041e_1"),r.a.createElement(g.a,{onClick:W},"\u041f\u0423\u0421\u0422\u041e_2")),_=r.a.createElement(h.a,{anchorEl:y,anchorOrigin:{vertical:"top",horizontal:"right"},id:"primary-account-menu-mobile",keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:q,onClose:H},r.a.createElement(s.b,{to:"analyze"},r.a.createElement(g.a,null,r.a.createElement(O.a,{color:"inherit"},r.a.createElement(v.a,{badgeContent:0,color:"secondary"},r.a.createElement(I.a,null))),r.a.createElement("p",null,"XML"))),r.a.createElement(g.a,null,r.a.createElement(O.a,{color:"inherit"},r.a.createElement(v.a,{badgeContent:0,color:"secondary"},r.a.createElement(N.a,null))),r.a.createElement("p",null,"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f")),r.a.createElement(g.a,null,r.a.createElement(O.a,{color:"inherit"},r.a.createElement(v.a,{badgeContent:0,color:"secondary"},r.a.createElement(T.a,null))),r.a.createElement("p",null,"\u0423\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f")),r.a.createElement(g.a,{onClick:M},r.a.createElement(O.a,{"aria-label":"more apps","aria-controls":"primary-apps-menu","aria-haspopup":"true",color:"inherit"},r.a.createElement(C.a,null)),r.a.createElement("p",null,"\u041f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f")),r.a.createElement(g.a,{onClick:$},r.a.createElement(O.a,{"aria-label":"account of current user","aria-controls":"primary-search-account-menu","aria-haspopup":"true",color:"inherit"},r.a.createElement(S.a,null)),r.a.createElement("p",null,"Profile")));return r.a.createElement("div",{className:a.grow},r.a.createElement(f.a,{position:"static"},r.a.createElement(E.a,null,r.a.createElement(O.a,{edge:"start",className:a.menuButton,color:"inherit","aria-label":"open drawer"},r.a.createElement(w.a,null)),r.a.createElement(j.a,{className:a.title,variant:"h6",noWrap:!0},t),r.a.createElement("div",{className:a.grow}),r.a.createElement("div",{className:a.sectionDesktop},r.a.createElement(s.b,{to:"tester"},r.a.createElement(O.a,{color:"inherit"},r.a.createElement(v.a,{badgeContent:0,color:"secondary"},r.a.createElement(P.a,{className:a.link})))),r.a.createElement(s.b,{to:"analyze"},r.a.createElement(O.a,{color:"inherit"},r.a.createElement(v.a,{badgeContent:0,color:"secondary"},r.a.createElement(I.a,{className:a.link})))),r.a.createElement(O.a,{color:"inherit"},r.a.createElement(v.a,{badgeContent:0,color:"secondary"},r.a.createElement(N.a,null))),r.a.createElement(O.a,{color:"inherit"},r.a.createElement(v.a,{badgeContent:0,color:"secondary"},r.a.createElement(T.a,null))),r.a.createElement(O.a,{"aria-label":"apps","aria-controls":"primary-apps-menu","aria-haspopup":"true",onClick:M,color:"inherit"},r.a.createElement(v.a,{badgeContent:0,color:"secondary"},r.a.createElement(C.a,null))),r.a.createElement(O.a,{edge:"end","aria-label":"account of current user","aria-controls":z,"aria-haspopup":"true",onClick:$,color:"inherit"},r.a.createElement(v.a,{badgeContent:0,color:"secondary"},r.a.createElement(S.a,null)))),r.a.createElement("div",{className:a.sectionMobile},r.a.createElement(O.a,{"aria-label":"show more","aria-controls":"primary-account-menu-mobile","aria-haspopup":"true",onClick:function(e){k(e.currentTarget)},color:"inherit"},r.a.createElement(B.a,null))))),_,R,Q)},L=a(395),W=a(387),z=a(382),R=a(383),Q=a(384),_=a(386),V=a(262),G=a.n(V),U=a(263),X=a.n(U),K=a(381),Z=a(385),J=a(406),Y=a(9),ee=Object(Y.a)((function(e){return{badge:{backgroundColor:"#44b700",color:"#44b700",boxShadow:"0 0 0 2px ".concat(e.palette.background.paper),"&::after":{position:"absolute",top:"-1px",left:"-1px",width:"100%",height:"100%",borderRadius:"50%",animation:"$ripple 1.2s infinite ease-in-out",border:"1px solid currentColor",content:'""'}},"@keyframes ripple":{"0%":{transform:"scale(.8)",opacity:1},"100%":{transform:"scale(2.4)",opacity:0}}}}))(v.a),te=Object(p.a)({root:{display:"flex"},avatar:{backgroundColor:function(e){return e.color}}}),ae=function(e){var t=te(e);return r.a.createElement("div",{className:t.root},r.a.createElement(ee,{overlap:"circle",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot"},r.a.createElement(J.a,{className:t.avatar},e.liter)))},ne=Object(p.a)({root:{display:"flex"},avatar:{backgroundColor:function(e){return e.color}}}),re=function(e){var t=ne(e);return r.a.createElement("div",{className:t.root},r.a.createElement(J.a,{className:t.avatar},e.liter))},ce=a(380);a(403),a(209);var le=a(264),oe=a.n(le),ie=a(265),ue=a.n(ie),se=a(266),de=a.n(se),me=Object(p.a)((function(e){return{root:{maxWidth:"100%",margin:"10px 0"},header:{padding:"16px 16px 0 16px"},content:{flex:1,padding:"10px 16px 0 16px"},media:{height:0},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"}}})),be=function(e){var t=e.data,a=me(),c=Object(n.useState)(t.id),l=(Object(m.a)(c,1)[0],Object(n.useState)(!1)),o=Object(m.a)(l,2),i=o[0],u=(o[1],Boolean(i),function(){return t.active?r.a.createElement(ae,{type:t.type,color:t.color},t.type):r.a.createElement(re,{type:t.type,color:t.color},t.type)}),d=function(){return r.a.createElement(K.a,{title:"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b"},r.a.createElement(s.b,{to:"/results/".concat(t.id,"/").concat(t.code)},r.a.createElement(O.a,null,r.a.createElement(G.a,null))))},b=function(){return r.a.createElement(K.a,{title:"\u0412\u0432\u043e\u0434 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432"},r.a.createElement(s.b,{to:"/drive/".concat(t.id,"/").concat(t.code)},r.a.createElement(O.a,null,r.a.createElement(X.a,null))))},p=function(){return r.a.createElement(K.a,{title:"\u0424\u0430\u0439\u043b\u044b"},r.a.createElement(s.b,{to:"/attachment/".concat(t.id,"/").concat(t.code)},r.a.createElement(O.a,null,r.a.createElement(oe.a,null))))},f=function(){return r.a.createElement(K.a,{title:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"},r.a.createElement(s.b,{to:"/poll-settings/".concat(t.id,"/").concat(t.code)},r.a.createElement(O.a,null,r.a.createElement(ue.a,null))))},E=function(){return r.a.createElement(K.a,{title:"\u0417\u0430\u043c\u0435\u0442\u043a\u0438"},r.a.createElement(s.b,{to:"/poll-wiki/".concat(t.id,"/").concat(t.code)},r.a.createElement(O.a,null,r.a.createElement(de.a,null))))};return r.a.createElement(n.Fragment,null,r.a.createElement(z.a,{className:a.root},r.a.createElement(R.a,{className:a.header,avatar:r.a.createElement(u,null),action:r.a.createElement(f,null),title:t.code+": "+t.title,subheader:t.startDate+" - "+t.endDate}),r.a.createElement(Q.a,{className:a.content},r.a.createElement(Z.a,{container:!0,spacing:1},r.a.createElement(Z.a,{item:!0,xs:12,sm:6},r.a.createElement(j.a,{variant:"button",display:"block",gutterBottom:!0},"\u041c\u0435\u0442\u043e\u0434 \u043f\u0440\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u044f: ",t.way)),r.a.createElement(Z.a,{item:!0,xs:12,sm:6},r.a.createElement(j.a,{variant:"button",display:"block",gutterBottom:!0},"\u0412\u043e\u043f\u0440\u043e\u0441\u043e\u0432/\u043e\u0442\u0432\u0435\u0442\u043e\u0432: ",t.questionsCount+"/"+t.answersCount))),r.a.createElement(Z.a,{container:!0,spacing:1},r.a.createElement(Z.a,{item:!0,xs:12,sm:6},r.a.createElement(j.a,{variant:"overline",display:"block",gutterBottom:!0},"\u0420\u0435\u0441\u043f\u043e\u043d\u0434\u0435\u043d\u0442\u043e\u0432: ",t.sample)),r.a.createElement(Z.a,{item:!0,xs:12,sm:6},r.a.createElement(j.a,{variant:"overline",display:"block",gutterBottom:!0},"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432: ",t.complete)))),r.a.createElement(_.a,{disableSpacing:!0},r.a.createElement(Z.a,{container:!0,item:!0,xs:12},r.a.createElement(d,null),r.a.createElement(b,null)),r.a.createElement(Z.a,{container:!0,item:!0,xs:12,justify:"flex-end"},r.a.createElement(p,null),r.a.createElement(E,null)))))},pe=function(e){return e.data.polls.map((function(e,t){return r.a.createElement(be,{key:t,data:e})}))},fe=a(31),Ee=a(3),Oe=a(75),je=a(78),ve=a(390),ge=a(393),he=a(392),xe=a(391),we=a(400),ye=a(269),Ce=a.n(ye),ke=a(336);var Se=function(e){var t=function(e){var t=new DOMParser,a=t.parseFromString("INVALID","text/xml").getElementsByTagName("parsererror")[0].namespaceURI,n=t.parseFromString(e,"text/xml");return!(n.getElementsByTagNameNS(a,"parsererror").length>0)&&n}(e);if(t){var a={},n=t.getElementsByTagName("opros")[0];return a.title=n.getAttribute("name"),a.code=n.getAttribute("cod"),a.start=n.getAttribute("start_date"),a.end=n.getAttribute("end_date"),a.structure={data:""},a}return!1},Ae=Object(p.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}})),Ne=function(e){var t,a=e.field,c=Object(Oe.a)(e,["field"]),l=c.errorMessage,o=(c.touched,c.setFieldValue),i=a.name,u=(a.value,a.onChange,a.onBlur),s=Object(n.useState)(!1),d=Object(m.a)(s,2),p=d[0],f=d[1],E=Object(n.useState)(void 0),O=Object(m.a)(E,2),g=(O[0],O[1],Object(n.useState)(0)),h=Object(m.a)(g,2),x=h[0],w=h[1],y=Ae(),C=Object(n.useRef)();return r.a.createElement(r.a.Fragment,null,r.a.createElement(ke.a,{className:y.backdrop,open:p},r.a.createElement(W.a,{color:"inherit"})),r.a.createElement("input",(t={style:{display:"none"},id:i,name:i,type:"file"},Object(b.a)(t,"id",i),Object(b.a)(t,"ref",C),Object(b.a)(t,"onBlur",u),Object(b.a)(t,"onInput",(function(e){e.preventDefault(),f(!0);var t=new FileReader,a=e.target.files[0];a&&(t.onloadend=function(){var e=t.result,a=Se(e);if(a){var n=/^(\d{2}).(\d{2}).(\d{4})$/,r=a.start.replace(n,"$3-$2-$1"),c=a.end.replace(n,"$3-$2-$1");return o("title",a.title),o("code",a.code),o("startdate",r),o("enddate",c),w(1),void f(!1)}return console.log("\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 XML"),void o("mainconfig","")},t.readAsText(a),c.setFieldValue(i,a))})),t)),r.a.createElement(v.a,{color:"secondary",badgeContent:x,style:{top:"5px"}},r.a.createElement(ce.a,{variant:"contained",color:"default",startIcon:r.a.createElement(Ce.a,null),onClick:function(){C&&C.current.click()}},"XML")),l?r.a.createElement(j.a,{variant:"caption",color:"error"},l):null)},qe=["\u042d\u043a\u0441\u043f\u0435\u0440\u0442\u043d\u044b\u0439","\u0412\u0441\u0435\u0440\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0439"],Te=["\u0418\u043d\u0442\u0435\u0440\u0432\u044c\u044e\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435","\u0410\u043d\u043a\u0435\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435","\u0422\u0435\u043b\u0435\u0444\u043e\u043d\u043d\u044b\u0439","Web-\u043e\u043f\u0440\u043e\u0441"],Fe=a(88),Be=function(e){var t=e.field,a=Object(Oe.a)(e,["field"]),n=a.errorMessage,c=a.label,l=a.type,o=a.touched,i=t.name,u=t.value,s=t.onChange,d=t.onBlur;return r.a.createElement("div",null,r.a.createElement(we.a,{fullWidth:!0,type:l,name:i,label:c,value:u,error:!(!o||!n),helperText:o&&n?n:void 0,onChange:s,onBlur:d,InputLabelProps:{shrink:!0}}))},$e=function(e){var t=e.field,a=Object(Oe.a)(e,["field"]),n=a.errorMessage,c=a.label,l=a.touched,o=a.array,i=t.name,u=t.value,s=t.onChange,d=t.onBlur;return r.a.createElement("div",null,r.a.createElement(we.a,{select:!0,fullWidth:!0,name:i,label:c,value:u,error:!(!l||!n),helperText:l&&n?n:void 0,onChange:s,onBlur:d,InputLabelProps:{shrink:!0}},o.map((function(e,t){return r.a.createElement(g.a,{key:t,value:t},e)}))))},Ie=function(e){var t=e.open,a=e.closeHndl,n=e.saveHndl,c=["text/xml"],l=Fe.d().shape({title:Fe.e().required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),startdate:Fe.a().required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),enddate:Fe.a().required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),code:Fe.e().matches(/^[A-Za-z]{3}[0-9]{2}-[0-9]{2}?$/,"\u0424\u043e\u0440\u043c\u0430\u0442 \u043d\u0435 \u0432\u0430\u043b\u0438\u0434\u043d\u044b\u0439").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),sample:Fe.c().min(1,"\u041d\u0435 \u043c\u0435\u043d\u044c\u0448\u0435 \u043e\u0434\u043d\u043e\u0433\u043e").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),type:Fe.e().ensure().required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),way:Fe.e().ensure().required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),xmlfile:Fe.b().required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435 \u0444\u043e\u0440\u043c\u044b").test("fileSize","\u0421\u043b\u0438\u0448\u043a\u043e\u043c \u0431\u043e\u043b\u044c\u0448\u043e\u0439 \u0444\u0430\u0439\u043b",(function(e){return e&&e.size<=1048576})).test("fileFormat","\u041d\u0435\u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u043c\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442",(function(e){return e&&c.includes(e.type)}))});return r.a.createElement(ve.a,{className:"add-poll-dialog",disableBackdropClick:!0,disableEscapeKeyDown:!0,open:t,maxWidth:"sm","aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(xe.a,{id:"alert-dialog-title"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043e\u043f\u0440\u043e\u0441"),r.a.createElement(he.a,null,r.a.createElement(je.b,{initialValues:{xmlfile:void 0,title:void 0,startdate:void 0,enddate:void 0,code:void 0,sample:10,type:1,way:1,comment:void 0},validationSchema:l,validateOnBlur:!0,onSubmit:function(e,t){var r=t.setSubmitting;n(e),a(),r(!0)}},(function(e){e.saveHndl,e.values;var t=e.errors,n=e.touched,c=(e.dirty,e.isSubmitting),l=(e.handleReset,e.handleSubmit),o=e.handleChange,i=e.handleBlur,u=e.setFieldValue;return r.a.createElement("form",{onSubmit:l},r.a.createElement(Z.a,{container:!0,spacing:2},r.a.createElement(Z.a,{item:!0,xs:6,sm:6},r.a.createElement(je.a,{name:"xmlfile",component:Ne,setFieldValue:u,errorMessage:t.xmlfile?t.xmlfile:void 0,touched:n.xmlfile,onBlur:i})),r.a.createElement(Z.a,{item:!0,xs:12,sm:12},r.a.createElement(je.a,{name:"title",type:"text",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435",setFieldValue:u,component:Be,errorMessage:t.title,touched:n.title,onBlur:i})),r.a.createElement(Z.a,{item:!0,xs:12,sm:6},r.a.createElement(je.a,{name:"startdate",type:"date",label:"\u0414\u0430\u0442\u0430 \u043d\u0430\u0447\u0430\u043b\u0430",setFieldValue:u,component:Be,errorMessage:t.startdate,touched:n.startdate,onBlur:i})),r.a.createElement(Z.a,{item:!0,xs:12,sm:6},r.a.createElement(je.a,{name:"enddate",type:"date",label:"\u0414\u0430\u0442\u0430 \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f",setFieldValue:u,component:Be,errorMessage:t.enddate,touched:n.enddate,onBlur:i})),r.a.createElement(Z.a,{item:!0,xs:12,sm:6},r.a.createElement(je.a,{name:"code",label:"\u041a\u043e\u0434 \u043e\u043f\u0440\u043e\u0441\u0430",type:"text",setFieldValue:u,component:Be,errorMessage:t.code,touched:n.code,onChange:o,onBlur:i})),r.a.createElement(Z.a,{item:!0,xs:12,sm:6},r.a.createElement(je.a,{name:"sample",type:"number",label:"\u0412\u044b\u0431\u043e\u0440\u043a\u0430",setFieldValue:u,component:Be,errorMessage:t.sample,touched:n.sample,onChange:o,onBlur:i})),r.a.createElement(Z.a,{item:!0,xs:12,sm:6},r.a.createElement(je.a,{name:"type",label:"\u0422\u0438\u043f \u043e\u043f\u0440\u043e\u0441\u0430",array:qe,setFieldValue:u,component:$e,errorMessage:t.type,touched:n.type,onChange:o,onBlur:i})),r.a.createElement(Z.a,{item:!0,xs:12,sm:6},r.a.createElement(je.a,{name:"way",label:"\u0421\u043f\u043e\u0441\u043e\u0431 \u043f\u0440\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u044f",array:Te,component:$e,errorMessage:t.way,touched:n.way,onChange:o,onBlur:i})),r.a.createElement(Z.a,{item:!0,xs:12},r.a.createElement(je.a,{name:"comment",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",component:Be,errorMessage:t.comment,touched:n.comment,onChange:o,onBlur:i}))),r.a.createElement(ge.a,null,r.a.createElement(ce.a,{onClick:a,color:"primary"},"\u041e\u0442\u043c\u0435\u043d\u0430"),r.a.createElement(ce.a,{type:"submit",disabled:c},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")))}))))},Me=a(97),Pe=a(48),De=a(32);function He(){var e=Object(Pe.a)(["\n  mutation addNewPoll($newPoll: PollWithConfig!, $poolOfQuestions: [QuestionInput], $logic: LogicInput, $topic: [TopicInput]) {\n    addPoll(poll: $newPoll, questions: $poolOfQuestions, logic: $logic, topic: $topic) {\n      title\n    }\n  }\n"]);return He=function(){return e},e}var Le=Object(De.a)(He()),We=a(394),ze=a(272),Re=a.n(ze),Qe=Object(p.a)((function(e){return{root:{position:"absolute",top:"10px",left:"-55px"},small:{position:"fixed",bottom:"30px",right:"30px"}}})),_e=function(e){var t=e.onClick,a=Qe();return r.a.createElement("div",{className:a.small},r.a.createElement(We.a,{color:"secondary","aria-label":"add",onClick:t},r.a.createElement(Re.a,null)))},Ve=function(e){var t=e.refetch,a=Object(n.useState)(!1),c=Object(m.a)(a,2),l=c[0],o=c[1],i=Object(Me.useMutation)(Le,{onCompleted:function(){return t()}}),u=Object(m.a)(i,2),s=u[0],d=(u[1].newPoll,function(e){var t={questions:[],logic:[],topic:[]},a=new FileReader;return new Promise((function(n,r){a.onloadend=function(){for(var e=a.result,r=(new DOMParser).parseFromString(e,"text/xml"),c=r.getElementsByTagName("vopros"),l=c.length,o=0;o<l;o++){for(var i={title:c[o].getAttribute("text"),topic:+c[o].getAttribute("tema_id"),limit:+c[o].getAttribute("limit"),type:+c[o].getAttribute("type_id"),order:+c[o].getAttribute("sort"),answers:[]},u=c[o].getElementsByTagName("otvet"),s=u.length,d=0;d<s;d++){var m={title:u[d].getAttribute("otvet_text"),code:u[d].getAttribute("otvet_cod").padStart(3,"0"),type:+u[d].getAttribute("otvet_type"),order:+u[d].getAttribute("otvet_sort")};i.answers[d]=m}t.questions[o]=i}var b=r.getElementsByTagName("restrict"),p=b.length;if(p){for(var f=[],E=0;E<p;E++){var O={code:b[E].getAttribute("otvet_cod").padStart(3,"0"),restrict:b[E].getAttribute("restrict_cod").padStart(3,"0"),type:b[E].getAttribute("restrict_type")};f[E]=O}t.logic=f}var j=r.getElementsByTagName("tema"),v=j.length;if(v)for(var g=0;g<v;g++){var h={id:j[g].getAttribute("id"),title:j[g].getAttribute("name")};t.topic[g]=h}n(t)},a.readAsText(e)}))}),b=function(e){var t=e.logic.reduce((function(e,t,a){return"3"===t.type?e.exclude[t.code]?e.exclude[t.code]={restrict:[].concat(Object(fe.a)(e.exclude[t.code].restrict),[t.restrict])}:e.exclude[t.code]={restrict:[t.restrict]}:"5"===t.type&&(e.unique=[].concat(Object(fe.a)(e.unique),[t.code])),e}),{unique:[],exclude:{}}),a=e.questions.reduce((function(e,a){return a.limit>1&&(t.unique=[].concat(Object(fe.a)(t.unique),Object(fe.a)(a.answers.filter((function(e){return 3===e.type})).map((function(e){return e.code}))))),e.difficult=[].concat(Object(fe.a)(e.difficult),Object(fe.a)(a.answers.filter((function(e){return 3===e.type})).map((function(e){return e.code})))),e.freeAnswers=[].concat(Object(fe.a)(e.freeAnswers),Object(fe.a)(a.answers.filter((function(e){return 2===e.type})).map((function(e){return e.code})))),e}),{difficult:[],freeAnswers:[]});return e.logic=Object(Ee.a)(Object(Ee.a)({},t),a),console.log(e.logic),e};return r.a.createElement(n.Fragment,null,r.a.createElement(_e,{onClick:function(){o(!0)}}),r.a.createElement(Ie,{open:l,saveHndl:function(e){var t=e.xmlfile;t.size&&new Promise((function(e,a){e(d(t))})).then((function(t){var a=b(t),n={title:e.title,startDate:e.startdate,endDate:e.enddate,code:e.code,sample:e.sample,type:e.type,way:e.way,comment:e.comment};e.xmlfile;s({variables:{newPoll:Object(Ee.a)(Object(Ee.a)({},n),{},{comment:n.comment?n.comment:"",shortTitle:"",active:!0}),poolOfQuestions:a.questions,logic:Object(Ee.a)({},a.logic),topic:a.topic}})}))},closeHndl:function(){o(!1)}}))},Ge=a(256);function Ue(){var e=Object(Pe.a)(["\n  mutation deletePoll($id: ID!) {\n    deletePoll(id: $id) {\n      title\n    }\n  }\n"]);return Ue=function(){return e},e}function Xe(){var e=Object(Pe.a)(["\n  mutation addNewPoll($newPoll: PollWithConfig!, $poolOfQuestions: [QuestionInput], $logic: LogicInput, $topic: [TopicInput]) {\n    addPoll(poll: $newPoll, questions: $poolOfQuestions, logic: $logic, topic: $topic) {\n      title\n    }\n  }\n"]);return Xe=function(){return e},e}function Ke(){var e=Object(Pe.a)(["\n  query pollsQuery {\n    polls {\n      id\n      title\n      code\n      liter\n      color\n      startDate\n      endDate\n      sample\n      way\n      type\n      complete\n      questionsCount\n      answersCount\n      active\n    }\n  }\n"]);return Ke=function(){return e},e}var Ze=Object(De.a)(Ke()),Je=(Object(De.a)(Xe()),Object(De.a)(Ue()),function(e,t){var a=Object(Ge.a)(Ze),c=a.loading,l=a.error,o=a.data,i=a.refetch;return console.log(e),c?r.a.createElement(n.Fragment,null,r.a.createElement(W.a,null),r.a.createElement("p",null,"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430. \u041f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435 \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430")):l?r.a.createElement("p",null,"Error :("):r.a.createElement(n.Fragment,null,r.a.createElement(L.a,{maxWidth:"md"},r.a.createElement(pe,{data:o})),r.a.createElement(Ve,{refetch:i}))}),Ye=function(){return r.a.createElement(n.Fragment,null,r.a.createElement(H,{title:"\u041e\u043f\u0440\u043e\u0441\u044b"}),r.a.createElement(Je,null))},et=a(273),tt=a.n(et),at=Object(p.a)((function(e){return{grow:{flexGrow:1},menuButton:{marginRight:e.spacing(2),textDecoration:"none"},title:Object(b.a)({display:"none"},e.breakpoints.up("xs"),{display:"block"}),inputRoot:{color:"inherit"},sectionDesktop:{display:"flex"},sectionMobile:Object(b.a)({display:"flex"},e.breakpoints.up("sm"),{display:"none"}),arrow:{color:"white",textDecoration:"none"}}})),nt=function(e){var t=e.title,a=at(),n=r.a.useState(null),c=Object(m.a)(n,2),l=c[0],o=c[1],i=Boolean(l),u=function(){o(null)},d=r.a.createElement(h.a,{anchorEl:l,anchorOrigin:{vertical:"top",horizontal:"right"},id:"primary-apps-menu",keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:i,onClose:u},r.a.createElement(g.a,{onClick:u},"\u041f\u0423\u0421\u0422\u041e_1"),r.a.createElement(g.a,{onClick:u},"\u041f\u0423\u0421\u0422\u041e_2"));return r.a.createElement("div",{className:a.grow},r.a.createElement(f.a,{position:"static"},r.a.createElement(E.a,null,r.a.createElement(s.b,{to:"/"},r.a.createElement(O.a,{edge:"start",className:a.menuButton,color:"inherit","aria-label":"open drawer"},r.a.createElement(tt.a,{className:a.arrow}))),r.a.createElement(j.a,{className:a.title,variant:"h6",noWrap:!0},t),r.a.createElement("div",{className:a.grow}),r.a.createElement("div",{className:a.sectionDesktop},r.a.createElement(O.a,{edge:"end","aria-label":"apps","aria-controls":"primary-apps-menu","aria-haspopup":"true",onClick:function(e){o(e.currentTarget)},color:"inherit"},r.a.createElement(C.a,null))))),d)},rt=function(e){var t=e.answer,a=e.focusHandler,c=e.blurHandler,l=Object(n.useRef)(null);Object(n.useEffect)((function(){t.focus&&l.current.focus(),""!==t.freeAnswerText&&(l.current.value=t.freeAnswerText)}),[]);return t.showFreeAnswer?r.a.createElement("input",{className:"free-answer",type:"text",ref:l,"data-code":t.code,"data-keycode":t.keyCode,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0432\u043e\u0431\u043e\u0434\u043d\u044b\u0439 \u043e\u0442\u0432\u0435\u0442",onKeyUp:function(e){var t=e.keyCode;if(13!==t)return 27===t?""!==l.current.value?void(l.current.value=""):void e.currentTarget.blur():void 0;e.currentTarget.blur()},onFocus:a,onBlur:c}):null},ct=a(274),lt=a.n(ct),ot=function(e){var t=e.answer,a=e.clickHandler,c=e.focusHandler,l=e.blurHandler,o=e.settings,i=Object(n.useRef)(null),u=["answer-wrap"],s=["answer-title"];t.selected&&u.push("selected"),t.disabled&&s.push("disabled");return r.a.createElement(n.Fragment,null,r.a.createElement("div",{onClick:function(e){a(i.current)},className:u.join(" "),ref:i,"data-code":t.keyCode},r.a.createElement("div",{className:"answer-title"},r.a.createElement("span",{className:"answer-key"},t.showIndex),r.a.createElement("span",null," "),o.codesShow&&r.a.createElement("span",{className:"answer-code"},t.code),r.a.createElement("span",null," - "),r.a.createElement("span",{className:s.join(" ")},t.title),r.a.createElement("span",null,t.freeAnswer?r.a.createElement(lt.a,{fontSize:"small"}):null)),r.a.createElement("div",null,t.showFreeAnswer&&r.a.createElement(rt,{answer:t,focus:t.focus,focusHandler:c,blurHandler:l}))))},it=a(408),ut=a(402),st=Object(p.a)((function(e){return{root:{width:500,"& > * + *":{marginTop:e.spacing(3)}},errorText:{color:"red"}}}));function dt(e){var t=e.data,a=e.limit,c=e.settings,l=e.multipleHandler,o=st(),i=Object(n.useState)([]),u=Object(m.a)(i,2),s=u[0],d=u[1],b=Object(n.useState)([]),p=Object(m.a)(b,2),f=p[0],E=p[1],O=Object(n.useState)({state:!1,text:""}),j=Object(m.a)(O,2),v=j[0],g=j[1];Object(n.useEffect)((function(){var e=t.filter((function(e){if(e.selected)return e})),a=t.map((function(e){return e.code}));E(a),d(e)}),[]);return r.a.createElement("div",{className:o.root},r.a.createElement(ut.a,{multiple:a>1,id:"tags-standard",options:t,onChange:function(e,t,n){switch(n){case"select-option":if(t.length>a)return void g({state:!0,text:"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043e\u0442\u0432\u0435\u0442\u043e\u0432"});d(t),g(Object(Ee.a)(Object(Ee.a)({},v),{},{state:!1}));break;case"remove-option":d(t),g(Object(Ee.a)(Object(Ee.a)({},v),{},{state:!1}));break;case"clear":d([]),g(Object(Ee.a)(Object(Ee.a)({},v),{},{state:!1}))}},value:s,getOptionLabel:function(e){return e.title},getOptionDisabled:function(e){return e.disabled},renderOption:function(e){return c.codesShow?r.a.createElement("span",null,r.a.createElement("span",{style:{fontSize:"10px"}},e.code)," - ",e.title):e.title},onBlur:function(e){g(Object(Ee.a)(Object(Ee.a)({},v),{},{state:!1})),l(s,f)},renderTags:function(e,t){return e.map((function(e,a){return r.a.createElement(it.a,Object.assign({},t({index:a}),{variant:"outlined",key:a,label:c.codesShow?r.a.createElement("span",null,r.a.createElement("span",{style:{fontSize:"10px"}},e.code)," - ",e.title):r.a.createElement("span",null,e.title)}))}))},renderInput:function(e){return r.a.createElement(we.a,Object.assign({},e,{error:v.state,variant:"standard",label:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043e\u0442\u0432\u0435\u0442\u044b",helperText:v.state?v.text:""}))}}))}var mt=function(e){var t=e.count,a=e.question,c=e.clickHandler,l=e.focusHandler,o=e.blurHandler,i=e.multipleHandler,u=e.settings;return r.a.createElement(n.Fragment,null,r.a.createElement("h3",{className:"question-title"},r.a.createElement("span",{className:"question-number"},t+1),r.a.createElement("span",null," - "),a.title),r.a.createElement("div",null,a.mega?r.a.createElement(dt,{data:a.answers,limit:a.limit,settings:u,multipleHandler:i}):a.answers.map((function(e,t){return r.a.createElement(ot,{key:t,answer:e,clickHandler:c,focusHandler:l,blurHandler:o,settings:u})}))))},bt=[8,9,16,17,18,19,20,32,33,34,35,36,38,40,91,106,107,109,110,112,113,114,115,116,117,118,119,120,121,122,123,144],pt=[27],ft=[48,96,13],Et={97:49,98:50,99:51,100:52,101:53,102:54,103:55,104:56,105:57},Ot=[37,39,49,50,51,52,53,54,55,56,57,81,87,69,82,84,89,85,73,79,80,65,83,68,70,71,72,74,75,76,90,88,67,97,98,99,100,101,102,103,104,105],jt=[["1",49],["2",50],["3",51],["4",52],["5",53],["6",54],["7",55],["8",56],["9",57],["Q",81],["W",87],["E",69],["R",82],["T",84],["Y",89],["U",85],["I",73],["O",79],["P",80],["A",65],["S",83],["D",68],["F",70],["G",71],["H",72],["J",74],["K",75],["L",76],["Z",90],["X",88],["C",67]];function vt(e){return void 0!==Et[e]?Et[e]:e}var gt=function(e){return function(e){return Ot.includes(e)}(e)?{do:1,trueCode:vt(e)}:function(e){return bt.includes(e)}(e)?{do:4}:function(e){return pt.includes(e)}(e)?{do:2}:function(e){return ft.includes(e)}(e)?{do:3}:{do:4}},ht=function(e,t,a,n,r){var c=e.questions[t],l=[],o=n.invisible?c.answers.filter((function(e){return!n.invisible.includes(e.code)})):c.answers,i=[],u=o.map((function(e,t){var r={freeAnswer:!1,showFreeAnswer:!1,freeAnswerText:"",focus:!1,selected:!1,disabled:!1};if(o.length>jt.length?l[t]=[t,t+1]:(l[t]=jt[t][1],r=Object(Ee.a)(Object(Ee.a)({},r),{},{showIndex:jt[t][0],keyCode:jt[t][1]})),a.pool.includes(e.code)&&(r=Object(Ee.a)(Object(Ee.a)({},r),{},{selected:!0})),i.includes(e.code)&&(r=Object(Ee.a)(Object(Ee.a)({},r),{},{disabled:!0})),n.freeAnswers.includes(e.code)&&(r=Object(Ee.a)(Object(Ee.a)({},r),{},{freeAnswer:!0,focus:!0})),a[c.id])for(var u=a[c.id].data,s=0;s<u.length;s++)e.code===u[s].answerCode&&""!==u[s].freeAnswerText&&(r=Object(Ee.a)(Object(Ee.a)({},r),{},{freeAnswer:!0,showFreeAnswer:!0,freeAnswerText:u[s].freeAnswerText,focus:!1}));return Object(Ee.a)(Object(Ee.a)({},e),r)})),s={mega:!1,megaMltp:!1,multiple:!1};return c.limit>1&&(s=Object(Ee.a)(Object(Ee.a)({},s),{},{multiple:!0})),s=o.length>jt.length?Object(Ee.a)(Object(Ee.a)({},s),{},{mega:!0,megaMltp:c.limit}):Object(Ee.a)(Object(Ee.a)({},s),{},{keyCodesPool:l}),void 0===a[c.id]&&r((function(e){return Object(Ee.a)(Object(Ee.a)({},e),{},Object(b.a)({},c.id,{data:[],skip:!1}))})),{next:!1,data:Object(Ee.a)(Object(Ee.a)(Object(Ee.a)({},c),s),{},{answers:u})}},xt=function(e){var t=new(window.AudioContext||window.webkitAudioContext);e=Object.assign({volume:.25,frequency:3020,duration:150,type:"sine"},e);var a=t.createOscillator(),n=t.createGain();a.connect(n),n.connect(t.destination),n.gain.value=e.volume,a.frequency.value=e.frequency,a.type=e.type,a.start(),setTimeout((function(){a.stop()}),e.duration)},wt=function(e){var t=e.poll,a=e.logics,c=(e.mainDiv,e.setCurrentQuestion),l=t.questions.length,o=Object(n.useState)(null),i=Object(m.a)(o,2),u=i[0],s=i[1],d=Object(n.useState)({codesShow:!0}),p=Object(m.a)(d,2),f=p[0],E=p[1],O=Object(n.useState)(a),j=Object(m.a)(O,2),v=j[0],g=j[1],h=Object(n.useState)(0),x=Object(m.a)(h,2),w=x[0],y=x[1],C=Object(n.useState)({pool:[]}),k=Object(m.a)(C,2),S=k[0],A=k[1],N=function(e){var t=e.target,a=e.keyCode;if("BODY"==t.nodeName){var n=gt(a);switch(n.do){case 1:return void F(n.trueCode);case 3:return void T();case 2:return void q();case 4:return}}else console.log("input")},q=function(){var e=S[u.id].data.reduce((function(e,t){return[].concat(Object(fe.a)(e),[t.answerCode])}),[]);A((function(t){var a;return Object(Ee.a)(Object(Ee.a)({},t),{},(a={},Object(b.a)(a,u.id,Object(Ee.a)(Object(Ee.a)({},t[u.id]),{},{data:[]})),Object(b.a)(a,"pool",t.pool.filter((function(t){return!e.includes(t)}))),a))})),s((function(e){return Object(Ee.a)(Object(Ee.a)({},e),{},{answers:e.answers.map((function(e){return Object(Ee.a)(Object(Ee.a)({},e),{},{selected:!1,showFreeAnswer:!1})}))})}));var t=u.answers.reduce((function(e,t){return[].concat(Object(fe.a)(e),[t.code])}),[]),a=v.criticalExclude.filter((function(e){return!t.includes(e.code)})).reduce((function(e,t){return[].concat(Object(fe.a)(e),Object(fe.a)(t.explPool))}),[]);a.length?s((function(e){return Object(Ee.a)(Object(Ee.a)({},e),{},{answers:e.answers.map((function(e){return a.includes(e.code)?e:Object(Ee.a)(Object(Ee.a)({},e),{},{disabled:!1})}))})})):s((function(e){return Object(Ee.a)(Object(Ee.a)({},e),{},{answers:e.answers.map((function(e){return Object(Ee.a)(Object(Ee.a)({},e),{},{disabled:!1})}))})})),g((function(e){return Object(Ee.a)(Object(Ee.a)({},e),{},{criticalExclude:e.criticalExclude.filter((function(e){return!t.includes(e.code)}))})}))},T=function(){S[u.id].data.length?B():xt()},F=function(e){var t=+e,a=u.keyCodesPool,n=u.answers.filter((function(e){return e.keyCode===t}))[0];if(39!==t)if(37!==t)if(a.includes(t)){if(S.pool.includes(n.code)){A((function(e){var t;return Object(Ee.a)(Object(Ee.a)({},e),{},(t={},Object(b.a)(t,u.id,Object(Ee.a)(Object(Ee.a)({},e[u.id]),{},{data:e[u.id].data.filter((function(e){return e.answerCode!==n.code}))})),Object(b.a)(t,"pool",e.pool.filter((function(e){return e!==n.code}))),t))})),s((function(e){return Object(Ee.a)(Object(Ee.a)({},e),{},{answers:e.answers.map((function(e){return e.code===n.code?Object(Ee.a)(Object(Ee.a)({},e),{},{selected:!1,showFreeAnswer:!1}):e}))})}));var r=v.criticalExclude.filter((function(e){return e.code!==n.code})).reduce((function(e,t){return[].concat(Object(fe.a)(e),Object(fe.a)(t.explPool))}),[]);return r.length?s((function(e){return Object(Ee.a)(Object(Ee.a)({},e),{},{answers:e.answers.map((function(e){return r.includes(e.code)?e:Object(Ee.a)(Object(Ee.a)({},e),{},{disabled:!1})}))})})):s((function(e){return Object(Ee.a)(Object(Ee.a)({},e),{},{answers:e.answers.map((function(e){return Object(Ee.a)(Object(Ee.a)({},e),{},{disabled:!1})}))})})),void g((function(e){return Object(Ee.a)(Object(Ee.a)({},e),{},{criticalExclude:e.criticalExclude.filter((function(e){return e.code!==n.code}))})}))}if(v.unique.includes(n.code)&&S[u.id].data.length)return void xt();if(n.disabled||S[u.id].data.length>=u.limit)return void xt();if(n.freeAnswer)return void s((function(e){return Object(Ee.a)(Object(Ee.a)({},e),{},{answers:e.answers.map((function(e){return e.keyCode===n.keyCode?Object(Ee.a)(Object(Ee.a)({},e),{},{selected:!0,showFreeAnswer:!0}):e}))})}));var c={answerCode:n.code,freeAnswer:!1,freeAnswerText:""},l=Object.assign({},S);if(l[u.id].data.push(c),l.pool.push(n.code),A(l),s((function(e){return Object(Ee.a)(Object(Ee.a)({},e),{},{answers:e.answers.map((function(e){return e.keyCode===t?Object(Ee.a)(Object(Ee.a)({},e),{},{selected:!0}):e}))})})),v.unique.includes(n.code)){s((function(e){return Object(Ee.a)(Object(Ee.a)({},e),{},{answers:e.answers.map((function(e){return e.keyCode===t?e:Object(Ee.a)(Object(Ee.a)({},e),{},{disabled:!0})}))})}));var o=u.answers.filter((function(e){return e.code!==n.code})).map((function(e){return e.code}));g((function(e){return Object(Ee.a)(Object(Ee.a)({},e),{},{criticalExclude:[].concat(Object(fe.a)(e.criticalExclude),[{code:n.code,explPool:o}])})}))}if(S[u.id].data.length>=u.limit)return void setTimeout((function(){B()}),200)}else xt();else setTimeout((function(){$()}),0);else setTimeout((function(){B()}),0)},B=function(){y(w<l-1?w+1:0)},$=function(){0!==w&&y(w-1)};Object(n.useEffect)((function(){return document.addEventListener("keyup",N),function(){document.removeEventListener("keyup",N)}})),Object(n.useEffect)((function(){var e=ht(t,w,S,v,A);if(e){if(e.next)return A((function(e){return Object(Ee.a)({},e)})),void y(w+1);s(e.data),c(e.data)}}),[w]);return r.a.createElement(n.Fragment,null,r.a.createElement("label",null,r.a.createElement("input",{type:"checkbox",onChange:function(e){E((function(e){return Object(Ee.a)(Object(Ee.a)({},e),{},{codesShow:!e.codesShow})}))},defaultChecked:f.codesShow}),"\u041f\u043e\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u043a\u043e\u0434\u044b \u043e\u0442\u0432\u0435\u0442\u043e\u0432"),u&&r.a.createElement(mt,{count:w,question:u,settings:f,clickHandler:function(e){var t=e.dataset.code,a=u.answers.filter((function(e){return e.keyCode===+t}))[0];a.freeAnswer&&a.selected||F(t)},blurHandler:function(e){var t=e.currentTarget.value,a=e.currentTarget.dataset.code,n=e.currentTarget.dataset.keycode;if(""===t){A((function(e){var t;return Object(Ee.a)(Object(Ee.a)({},e),{},(t={},Object(b.a)(t,u.id,Object(Ee.a)(Object(Ee.a)({},e[u.id]),{},{data:e[u.id].data.filter((function(e){return e.answerCode!==a}))})),Object(b.a)(t,"pool",e.pool.filter((function(e){return e!==a}))),t))})),s((function(e){return Object(Ee.a)(Object(Ee.a)({},e),{},{answers:e.answers.map((function(e){return e.code===a?Object(Ee.a)(Object(Ee.a)({},e),{},{selected:!1,showFreeAnswer:!1}):e}))})}));var r=v.criticalExclude.filter((function(e){return e.code!==a})).reduce((function(e,t){return[].concat(Object(fe.a)(e),Object(fe.a)(t.explPool))}),[]);return r.length?s((function(e){return Object(Ee.a)(Object(Ee.a)({},e),{},{answers:e.answers.map((function(e){return r.includes(e.code)?e:Object(Ee.a)(Object(Ee.a)({},e),{},{disabled:!1})}))})})):s((function(e){return Object(Ee.a)(Object(Ee.a)({},e),{},{answers:e.answers.map((function(e){return Object(Ee.a)(Object(Ee.a)({},e),{},{disabled:!1})}))})})),void g((function(e){return Object(Ee.a)(Object(Ee.a)({},e),{},{criticalExclude:e.criticalExclude.filter((function(e){return e.code!==a}))})}))}var c={answerCode:a,freeAnswer:!1,freeAnswerText:t};if(S.pool.includes(a)?A((function(e){var n;return Object(Ee.a)(Object(Ee.a)({},e),{},(n={},Object(b.a)(n,u.id,Object(Ee.a)(Object(Ee.a)({},e[u.id]),{},{data:e[u.id].data.map((function(e){return e.answerCode===a?Object(Ee.a)(Object(Ee.a)({},e),{},{freeAnswerText:t}):e}))})),Object(b.a)(n,"pool",[].concat(Object(fe.a)(e.pool),[a])),n))})):A((function(e){var t;return Object(Ee.a)(Object(Ee.a)({},e),{},(t={},Object(b.a)(t,u.id,Object(Ee.a)(Object(Ee.a)({},e[u.id]),{},{data:[].concat(Object(fe.a)(e[u.id].data),[c])})),Object(b.a)(t,"pool",[].concat(Object(fe.a)(e.pool),[a])),t))})),v.unique.includes(a)){s((function(e){return Object(Ee.a)(Object(Ee.a)({},e),{},{answers:e.answers.map((function(e){return e.keyCode===+n?e:Object(Ee.a)(Object(Ee.a)({},e),{},{disabled:!0})}))})}));var l=u.answers.filter((function(e){return e.code!==a})).map((function(e){return e.code}));g((function(e){return Object(Ee.a)(Object(Ee.a)({},e),{},{criticalExclude:[].concat(Object(fe.a)(e.criticalExclude),[{code:a,explPool:l}])})}))}S[u.id].data.length>=u.limit-1&&setTimeout((function(){B()}),200)},multipleHandler:function(e,t){if(console.log(e,t),e.length){var a=e.map((function(e){return e.code})),n=e.map((function(e){return{answerCode:e.code,freeAnswer:!1,freeAnswerText:""}})),r=S.pool.filter((function(e){return!t.includes(e)}));return A((function(e){var t;return Object(Ee.a)(Object(Ee.a)({},e),{},(t={},Object(b.a)(t,u.id,Object(Ee.a)(Object(Ee.a)({},e[u.id]),{},{data:Object(fe.a)(n)})),Object(b.a)(t,"pool",[].concat(Object(fe.a)(r),Object(fe.a)(a))),t))})),void(e.length&&setTimeout((function(){B()}),200))}A((function(e){var a;return Object(Ee.a)(Object(Ee.a)({},e),{},(a={},Object(b.a)(a,u.id,Object(Ee.a)(Object(Ee.a)({},e[u.id]),{},{data:[]})),Object(b.a)(a,"pool",e.pool.filter((function(e){return!t.includes(e)}))),a))}))}}),r.a.createElement(ce.a,{onClick:$,variant:"contained",style:{margin:"5px"}},"\u041d\u0430\u0437\u0430\u0434"),r.a.createElement(ce.a,{onClick:B,variant:"contained",style:{margin:"5px"}},"\u0412\u043f\u0435\u0440\u0435\u0434"))},yt=a(396),Ct=a(401);function kt(e){var t=e.open,a=e.handleClose,c=e.save,l=e.cities,o=Object(n.useState)(""),i=Object(m.a)(o,2),u=i[0],s=i[1];return r.a.createElement("div",null,r.a.createElement(ve.a,{open:t,"aria-labelledby":"form-dialog-title"},r.a.createElement(xe.a,{id:"form-dialog-title"},"\u0413\u041e\u0420\u041e\u0414"),r.a.createElement(he.a,null,r.a.createElement(yt.a,null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0433\u043e\u0440\u043e\u0434 \u0432 \u043a\u043e\u0442\u043e\u0440\u043e\u043c \u043f\u0440\u043e\u0432\u043e\u0434\u0438\u043b\u0441\u044f \u043e\u043f\u0440\u043e\u0441"),r.a.createElement(Ct.a,{fullWidth:!0,native:!0,value:u.id,onChange:function(e){return function(e){var t=e.target,a=t.options,n=t.selectedIndex,r=t.value,c=a[n].innerHTML;s({id:r,title:c})}(e)}},r.a.createElement("option",{"aria-label":"None",disabled:!0,selected:!0,value:""}),l.map((function(e,t){return r.a.createElement("option",{key:t,value:e.id},e.title)})))),r.a.createElement(ge.a,null,r.a.createElement(ce.a,{onClick:a,color:"primary"},"\u041e\u0442\u043c\u0435\u043d\u0430"),r.a.createElement(ce.a,{onClick:function(){c(u)},disabled:!Boolean(u),color:"primary"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"))))}function St(){var e=Object(Pe.a)(["\n  query citiesQ {\n    cities {\n      id\n      title\n    }\n  }\n"]);return St=function(){return e},e}function At(){var e=Object(Pe.a)(["\n  query pollsQuery($id: ID!) {\n    poll(id: $id) {\n      id\n      questions{\n        id\n        title\n        limit\n        answers {\n          id\n          code\n          title\n        }\n      }\n      logic {\n        path\n      }\n    }\n  }\n"]);return At=function(){return e},e}var Nt=Object(De.a)(At()),qt=Object(De.a)(St());function Tt(e){var t,a=e.replace(/\s*/g,""),n={srange:/([0-9]{1,3})|\[(.+?)\]/gm},r=[];do{if((t=n.srange.exec(a))&&(void 0!==t[1]&&r.push(t[1]),void 0!==t[2])){var c=t[2];r=r.concat(Ft(c))}}while(t);return r}function Ft(e){return e.replace(/(\d{1,3})\s*-\s*(\d{1,3})/gm,(function(){var e=[],t=arguments.length<=1?void 0:arguments[1],a=arguments.length<=2?void 0:arguments[2];t>a&&(t=arguments.length<=2?void 0:arguments[2],a=arguments.length<=1?void 0:arguments[1]);for(var n=a-t+1;n;)t+="",e.push(t.padStart(3,"0")),t++,n--;return e})).split(",")}var Bt=function(e){var t=e.id,a=Object(n.useRef)(null),c=Object(d.f)(),l=Object(n.useState)(null),o=Object(m.a)(l,2),i=o[0],u=o[1],s=Object(n.useState)(null),b=Object(m.a)(s,2),p=b[0],f=b[1],E=Object(n.useState)(!0),O=Object(m.a)(E,2),j=O[0],v=O[1],g=Object(n.useState)(null),h=Object(m.a)(g,2),x=h[0],w=h[1],y=Object(n.useState)(null),C=Object(m.a)(y,2),k=(C[0],C[1]),S=Object(n.useState)({multiple:!1}),A=Object(m.a)(S,2),N=A[0],q=A[1],T=Object(Ge.a)(Nt,{variables:{id:t},onCompleted:function(e){u({id:e.poll.id,questions:e.poll.questions}),B(e.poll.logic.path)}}),F=(T.pollLoading,T.error),B=(T.data,function(e){fetch("http://localhost:4000".concat(e)).then((function(e){return e.text()})).then((function(e){var t=function(e){var t={};for(var a in e)switch(a){case"difficult":t=Object(Ee.a)(Object(Ee.a)({},t),{},{difficult:e[a][1].answers});break;case"freeAnswers":t=Object(Ee.a)(Object(Ee.a)({},t),{},{freeAnswers:e[a][1].answers});break;case"exclude":var n=e[a];for(var r in n)t="1"===n[r].critical[0]?Object(Ee.a)(Object(Ee.a)({},t),{},{criticalExclude:[n[r].exclude]}):Object(Ee.a)(Object(Ee.a)({},t),{},{noncriticalExclude:[n[r].exclude]});break;case"unique":t=Object(Ee.a)(Object(Ee.a)({},t),{},{unique:e[a][1].answers});break;case"invisible":t=Object(Ee.a)(Object(Ee.a)({},t),{},{invisible:e[a][1].answers})}return t}(function(e){var t={section:/^\s*\[\s*([^\]]*)\s*\]\s*$/,param:/^\s*([^=]+?)\s*=\s*(.*?)\s*$/,comment:/^\s*#.*$/},a={},n=e.split(/[\r\n]+/),r=null;return n.forEach((function(e){if(!t.comment.test(e))if(t.param.test(e)){var n=e.match(t.param);r?a[r][n[1]]=Tt(n[2]):a[n[1]]=Tt(n[2])}else if(t.section.test(e)){var c=e.match(t.section);a[c[1]]={},r=c[1]}else 0==e.length&&r&&(r=null)})),function(e){var t=/([0-9]{1,})/gm,a={},n=null;for(var r in e)n=r.match(/[a-zA-Z]*/gm)[0],a[n]={};for(var c in e){n=c.match(/[a-zA-Z]*/gm)[0];var l=c.match(t);null!==l?a[n][l]=e[c]:a[n][1]=e[c]}return a}(a)}(e));console.log(t),w(t)}))}),$=Object(Ge.a)(qt,{onCompleted:function(e){f(e.cities)}}),I=($.citiesLoading,$.cError);$.cData;if(!i||!p||!x)return r.a.createElement(n.Fragment,null,r.a.createElement(W.a,null),r.a.createElement("p",null,"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430. \u041f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435 \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430"));if(F||I)return r.a.createElement("p",null,"Error :(");return r.a.createElement(n.Fragment,null,r.a.createElement("div",{style:{backgroundColor:N.multiple?"rgb(208 226 252)":"#fff"}},r.a.createElement(L.a,{maxWidth:"md"},r.a.createElement(kt,{open:j,cities:p,save:function(e){k(e),v(!1)},handleClose:function(){v(!1),c.push("/")}}),r.a.createElement(wt,{poll:i,logics:x,mainDiv:a,setCurrentQuestion:q}))))},$t=function(){var e=Object(d.g)(),t=e.id,a=e.code;return r.a.createElement(n.Fragment,null,r.a.createElement(nt,{title:"\u041e\u043f\u0440\u043e\u0441 "+a+" - \u0432\u0431\u0438\u0432\u0430\u043d\u0438\u0435"}),r.a.createElement(Bt,{id:t}))},It=a(399),Mt=a(397),Pt=a(398);function Dt(e){var t=e.children,a=e.value,n=e.index,c=Object(Oe.a)(e,["children","value","index"]);return r.a.createElement("div",Object.assign({role:"tabpanel",hidden:a!==n,id:"vertical-tabpanel-".concat(n),"aria-labelledby":"vertical-tab-".concat(n)},c),a===n&&r.a.createElement(Pt.a,{p:3},r.a.createElement(j.a,null,t)))}function Ht(e){return{id:"vertical-tab-".concat(e),"aria-controls":"vertical-tabpanel-".concat(e)}}var Lt=Object(p.a)((function(e){return{root:{flexGrow:1,backgroundColor:e.palette.background.paper,display:"flex"},tabs:{borderRight:"1px solid ".concat(e.palette.divider)}}})),Wt=function(e){var t=e.id,a=Lt(),n=r.a.useState(0),c=Object(m.a)(n,2),l=c[0],o=c[1];return r.a.createElement("div",{className:a.root},r.a.createElement(It.a,{orientation:"vertical",variant:"scrollable",value:l,onChange:function(e,t){o(t)},className:a.tabs},r.a.createElement(Mt.a,Object.assign({label:"\u041e\u0431\u0449\u0438\u0435"},Ht(0))),r.a.createElement(Mt.a,Object.assign({label:"\u041f\u043e \u041d.\u041f."},Ht(1))),r.a.createElement(Mt.a,Object.assign({label:"\u041b\u0438\u043d\u0435\u0439\u043a\u0430"},Ht(2))),r.a.createElement(Mt.a,Object.assign({label:"\u0421\u0440\u0430\u0432\u043d\u0435\u043d\u0438\u044f"},Ht(3))),r.a.createElement(Mt.a,Object.assign({label:"\u0413\u0440\u0430\u0444\u0438\u043a\u0438"},Ht(4))),r.a.createElement(Mt.a,Object.assign({label:"\u041f\u0430\u043a\u0435\u0442\u043d\u044b\u0439"},Ht(5)))),r.a.createElement(Dt,{value:l,index:0},"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u043e\u043f\u0440\u043e\u0441\u0430 ID - ",t),r.a.createElement(Dt,{value:l,index:1},"\u0420\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0435 \u043f\u043e \u043d\u0430\u0441\u0435\u043b\u0435\u043d\u043d\u044b\u043c \u043f\u0443\u043d\u043a\u0442\u0430\u043c"),r.a.createElement(Dt,{value:l,index:2},"\u041b\u0438\u043d\u0435\u0439\u043d\u043e\u0435 \u0440\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0435 \u043e\u0442\u0432\u0435\u0442\u043e\u0432"),r.a.createElement(Dt,{value:l,index:3},"\u0421\u0440\u0430\u0432\u043d\u0435\u043d\u0438\u044f \u0441 \u0430\u043d\u0430\u043b\u043e\u0433\u0438\u0447\u043d\u044b\u043c\u0438 \u043e\u043f\u0440\u043e\u0441\u0430\u043c\u0438"),r.a.createElement(Dt,{value:l,index:4},"\u0413\u0440\u0430\u0444\u0438\u043a\u0438"),r.a.createElement(Dt,{value:l,index:5},"\u041f\u0430\u043a\u0435\u0442\u043d\u044b\u0439 \u0412\u0412\u043e\u0434 \u0434\u0430\u043d\u043d\u044b\u0445"))},zt=function(){var e=Object(d.g)(),t=e.id,a=e.code;return r.a.createElement(n.Fragment,null,r.a.createElement(nt,{title:"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b "+a}),r.a.createElement("div",{style:{paddingTop:"10px"}},r.a.createElement(L.a,{maxWidth:"xl"},r.a.createElement(Wt,{id:t}))))},Rt=function(){Object(d.g)().id;return r.a.createElement(n.Fragment,null,r.a.createElement(nt,{title:"\u0410\u043d\u0430\u043b\u0438\u0437 XML"}),r.a.createElement(L.a,{maxWidth:"md"},r.a.createElement("h2",null,"\u0410\u043d\u0430\u043b\u0438\u0437 XML")))},Qt=a(22),_t=a(211),Vt=Object(_t.a)((function(){var e=Object(n.useState)((function(){return Object(Qt.l)({secondsPassed:0})})),t=Object(m.a)(e,1)[0];return Object(n.useEffect)((function(){var e=setInterval((function(){t.secondsPassed++}),1e3);return function(){clearTimeout(e)}}),[]),r.a.createElement("span",null,"Seconds passed: ",t.secondsPassed," ")})),Gt=function(){return r.a.createElement(n.Fragment,null,r.a.createElement(nt,{title:"\u0422\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0438\u043d\u0435\u0440\u0444\u0435\u0439\u0441\u0430"}),r.a.createElement(L.a,{maxWidth:"lg"},r.a.createElement(Vt,null)))},Ut=function(e){e.id;return r.a.createElement(n.Fragment,null,r.a.createElement(Z.a,{container:!0},r.a.createElement("div",null,"\u041e\u0431\u0449\u0438\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0432 \u0442\u043e\u043c \u0447\u0438\u0441\u043b\u0435 - \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u043e \u043e\u043f\u0440\u043e\u0441\u0443!")))},Xt=a(275),Kt=a.n(Xt);function Zt(){var e=Object(Pe.a)(["\nmutation saveConfigChanges($path: String!, $text: String!) {\n  saveConfig(path: $path, text: $text)\n}\n"]);return Zt=function(){return e},e}function Jt(){var e=Object(Pe.a)(["\n  query logicQuery($id: ID!) {\n    pollLogic(id: $id) {\n      id\n      path\n    }\n  }\n"]);return Jt=function(){return e},e}var Yt=Object(De.a)(Jt()),ea=Object(De.a)(Zt()),ta=function(e){var t=e.id,a=Object(n.useState)(null),c=Object(m.a)(a,2),l=c[0],o=c[1],i=Object(n.useState)(null),u=Object(m.a)(i,2),s=u[0],d=u[1],b=Object(n.useRef)(),p=Object(Ge.a)(Yt,{variables:{id:t},onCompleted:function(){g(O.pollLogic.path)}}),f=p.loading,E=p.error,O=p.data,j=(p.refetch,Object(Me.useMutation)(ea,{})),v=Object(m.a)(j,1)[0],g=function(e){d(e),fetch("http://localhost:4000".concat(e)).then((function(e){return e.text()})).then((function(e){o(e)}))};return f||!l?r.a.createElement(n.Fragment,null,r.a.createElement(W.a,null),r.a.createElement("p",null,"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430. \u041f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435 \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430")):E?r.a.createElement("p",null,"\u041e\u0448\u0438\u0431\u043a\u0430. \u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! :("):r.a.createElement(n.Fragment,null,r.a.createElement(Z.a,{item:!0,xs:12,sm:!0,container:!0},r.a.createElement(Z.a,{container:!0},r.a.createElement(Z.a,{item:!0,xs:!0,container:!0,direction:"column",spacing:2,alignItems:"flex-start"},r.a.createElement(Z.a,{item:!0,xs:12},"\u041e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u0433\u043e \u0444\u0430\u0439\u043b\u0430")),r.a.createElement(Z.a,{item:!0,xs:!0,container:!0,direction:"column",spacing:1,alignItems:"flex-end"},r.a.createElement(Z.a,{item:!0,xs:12},r.a.createElement(K.a,{title:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"},r.a.createElement(Kt.a,{className:"save-config",onClick:function(e){v({variables:{path:s,text:b.current.value}})}})))),r.a.createElement(Z.a,{item:!0,xs:12},r.a.createElement("textarea",{ref:b,defaultValue:l})))))};function aa(){var e=Object(Pe.a)(["\nmutation saveNewOrder($questions: [ReorderedArray]) {\n  newOrder(neworder: $questions)\n}\n"]);return aa=function(){return e},e}function na(){var e=Object(Pe.a)(["\nmutation saveNewLimit($id: ID!, $limit: Int!) {\n  newLimit(id: $id, limit: $limit)\n}\n"]);return na=function(){return e},e}function ra(){var e=Object(Pe.a)(["\n  query pollQuery($id: ID!) {\n    poll(id: $id) {\n      id\n      title\n      code\n      liter\n      questions {\n        id\n        title\n        limit\n        order\n        answers {\n          id\n          title\n          order\n        }\n      }\n    }\n  }\n"]);return ra=function(){return e},e}var ca=Object(De.a)(ra()),la=Object(De.a)(na()),oa=Object(De.a)(aa()),ia=a(276),ua=a.n(ia),sa=a(219),da=a(220),ma=function(e){var t=e.question,a=e.handleLimitInput,c=Object(n.useState)(t.limit),l=Object(m.a)(c,2),o=l[0],i=l[1];return r.a.createElement(Z.a,{item:!0,xs:12,sm:6,lg:3,xl:2},r.a.createElement(da.a,{className:"question-item",elevation:2},r.a.createElement(Z.a,{item:!0,xs:12,sm:!0,container:!0},r.a.createElement(Z.a,{item:!0,xs:!0,container:!0,direction:"column",spacing:2,alignItems:"flex-start"},r.a.createElement(Z.a,{item:!0,xs:!0},r.a.createElement(K.a,{title:"\u041e\u0447\u0435\u0440\u0435\u0434\u043d\u043e\u0441\u0442\u044c \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f","aria-label":"add"},r.a.createElement(j.a,{variant:"body2",color:"primary"},t.order)))),r.a.createElement(Z.a,{item:!0,xs:!0,container:!0,direction:"column",spacing:3,alignItems:"flex-end"},r.a.createElement(Z.a,{item:!0,xs:!0,alignItems:"center",style:{cursor:"pointer"}},r.a.createElement(K.a,{title:"\u041c\u0435\u043d\u044e. \u0412 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435","aria-label":"add"},r.a.createElement(B.a,null)))),r.a.createElement(Z.a,{item:!0},r.a.createElement(K.a,{title:"\u041b\u0438\u043c\u0438\u0442 \u043e\u0442\u0432\u0435\u0442\u043e\u0432","aria-label":"add"},r.a.createElement("input",{type:"number",className:"question-limit-input",onChange:function(e){var t=e.currentTarget.value;console.log(e),i(t<1?1:t>99?99:t)},onBlur:function(e){a({id:t.id,limit:o})},onKeyUp:function(e){13===e.keyCode&&e.currentTarget.blur()},value:o})))),r.a.createElement(j.a,{className:"question-title"},t.title)))},ba=function(e){var t=e.id,a=Object(n.useState)(null),c=Object(m.a)(a,2),l=c[0],o=c[1],i=Object(n.useState)(null),u=Object(m.a)(i,2),s=(u[0],u[1]),d=Object(Ge.a)(ca,{variables:{id:t},onCompleted:function(){return o(f.poll.questions)}}),b=d.loading,p=d.error,f=d.data,E=(d.refetch,Object(Me.useMutation)(la,{})),O=Object(m.a)(E,1)[0],j=Object(Me.useMutation)(oa,{}),v=Object(m.a)(j,1)[0];if(b||!l)return r.a.createElement(n.Fragment,null,r.a.createElement(W.a,null),r.a.createElement("p",null,"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430. \u041f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435 \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430"));if(p)return r.a.createElement("p",null,"\u041e\u0448\u0438\u0431\u043a\u0430. \u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! :(");var g=function(e){var t=e.id,a=+e.limit;o(l.map((function(e){return e.id===t?Object(Ee.a)(Object(Ee.a)({},e),{},{limit:a}):e}))),O({variables:{id:t,limit:a}})},h=Object(sa.b)((function(e){var t=e.question;return r.a.createElement(ma,{question:t,handleLimitInput:g})})),x=Object(sa.a)((function(e){var t=e.questions;return r.a.createElement(Z.a,{container:!0,item:!0,xs:12,spacing:2},t.map((function(e,t){return r.a.createElement(h,{key:"item-".concat(e.id),index:t,question:e})})))}));return r.a.createElement(n.Fragment,null,r.a.createElement(x,{questions:l,onSortEnd:function(e){var t=e.oldIndex,a=e.newIndex;s(Object(Ee.a)({},l));var n=ua()(l,t,a),r=[],c=n.reduce((function(e,t,a){return t.order===a+1?e.push(t):(r.push({id:t.id,order:a+1}),e.push(Object(Ee.a)(Object(Ee.a)({},t),{},{order:a+1}))),e}),[]);v({variables:{questions:r}}),o(c)},axis:"xy"}))};function pa(){var e=Object(Pe.a)(["\n  mutation deletePoll($id: ID!) {\n    deletePoll(id: $id) {\n      title\n    }\n  }\n"]);return pa=function(){return e},e}var fa=Object(De.a)(pa()),Ea=function(e){var t=e.id,a=e.code,c=Object(d.f)(),l=Object(n.useState)(!1),o=Object(m.a)(l,2),i=o[0],u=o[1],s=Object(n.useState)(!0),b=Object(m.a)(s,2),p=b[0],f=b[1],E=Object(Me.useMutation)(fa,{onCompleted:function(){c.push("/")}}),O=Object(m.a)(E,2),v=O[0],g=(O[1].poll,function(){u(!1)});return r.a.createElement(n.Fragment,null,r.a.createElement(ve.a,{open:i,onClose:g,"aria-labelledby":"form-dialog-title"},r.a.createElement(xe.a,{id:"form-dialog-title"},"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435"),r.a.createElement(he.a,null,r.a.createElement(yt.a,null,r.a.createElement(j.a,{variant:"subtitle1",gutterBottom:!0},"\u042d\u0442\u043e \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043e\u0442\u043c\u0435\u043d\u0435\u043d\u043e. \u041e\u043d\u043e \u043f\u0440\u0438\u0432\u0435\u0434\u0435\u0442 \u043a \u0431\u0435\u0437\u0432\u043e\u0437\u0432\u0440\u0430\u0442\u043d\u043e\u043c\u0443 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044e \u0412\u0421\u0415\u0425 \u0434\u0430\u043d\u043d\u044b\u0445 \u043e\u043f\u0440\u043e\u0441\u0430."),r.a.createElement(j.a,{variant:"button",display:"block",gutterBottom:!0},"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u041a\u041e\u0414 \u043e\u043f\u0440\u043e\u0441\u0430.")),r.a.createElement(we.a,{margin:"dense",id:"name",label:"\u041a\u043e\u0434 \u043e\u043f\u0440\u043e\u0441\u0430",type:"text",fullWidth:!0,onChange:function(e){var t=e.currentTarget.value.toUpperCase();e.currentTarget.value=t,t.toUpperCase()===a?f(!1):f(!0)}})),r.a.createElement(ge.a,null,r.a.createElement(ce.a,{onClick:g,color:"primary"},"\u041e\u0442\u043c\u0435\u043d\u0430"),r.a.createElement(ce.a,{onClick:function(){!function(e){v({variables:{id:e},refetchQueries:[{query:Ze}]})}(t)},color:"primary",disabled:p},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"))),r.a.createElement(Z.a,{item:!0,container:!0,xs:12},r.a.createElement(Z.a,null,r.a.createElement(j.a,{variant:"button",display:"block",gutterBottom:!0},"\u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u043e\u043f\u0440\u043e\u0441\u0430"),r.a.createElement(j.a,{variant:"caption",display:"block",gutterBottom:!0},"\u041f\u043e\u0441\u043b\u0435 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u041e\u041f\u0420\u041e\u0421\u0410 \u043f\u0443\u0442\u0438 \u043d\u0430\u0437\u0430\u0434 \u0443\u0436\u0435 \u043d\u0435 \u0431\u0443\u0434\u0435\u0442. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0431\u0443\u0434\u044c\u0442\u0435 \u0432\u043d\u0438\u043c\u0430\u0442\u0435\u043b\u044c\u043d\u044b."),r.a.createElement(ce.a,{variant:"contained",color:"secondary",onClick:function(){u(!0)}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043e\u043f\u0440\u043e\u0441"))))};function Oa(e){var t=e.children,a=e.value,n=e.index,c=Object(Oe.a)(e,["children","value","index"]);return r.a.createElement("div",Object.assign({role:"tabpanel",className:"right-pannel",hidden:a!==n,id:"vertical-tabpanel-".concat(n),"aria-labelledby":"vertical-tab-".concat(n)},c),a===n&&r.a.createElement(Pt.a,{p:3},r.a.createElement(j.a,null,t)))}function ja(e){return{id:"vertical-tab-".concat(e),"aria-controls":"vertical-tabpanel-".concat(e)}}var va=Object(p.a)((function(e){return{root:{flexGrow:1,backgroundColor:e.palette.background.paper,display:"flex"},tabs:{borderRight:"1px solid ".concat(e.palette.divider),overflow:"visible"}}})),ga=function(e){var t=e.id,a=e.code,n=va(),c=r.a.useState(0),l=Object(m.a)(c,2),o=l[0],i=l[1];return r.a.createElement("div",{className:n.root},r.a.createElement(It.a,{orientation:"vertical",variant:"scrollable",value:o,onChange:function(e,t){i(t)},className:n.tabs},r.a.createElement(Mt.a,Object.assign({label:"\u041e\u0431\u0449\u0438\u0435"},ja(0))),r.a.createElement(Mt.a,Object.assign({label:"\u041f\u043e\u0440\u044f\u0434\u043e\u043a"},ja(1))),r.a.createElement(Mt.a,Object.assign({label:"\u041a\u043e\u043d\u0444\u0438\u0433"},ja(2))),r.a.createElement(Mt.a,Object.assign({label:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435"},ja(3)))),r.a.createElement(Oa,{value:o,index:0},r.a.createElement(Ut,{id:t})),r.a.createElement(Oa,{value:o,index:1},r.a.createElement(ba,{id:t})),r.a.createElement(Oa,{value:o,index:2},r.a.createElement(ta,{id:t})),r.a.createElement(Oa,{value:o,index:3},r.a.createElement(Ea,{id:t,code:a})))},ha=function(){var e=Object(d.g)(),t=e.id,a=e.code;return r.a.createElement(n.Fragment,null,r.a.createElement(nt,{title:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u043e\u043f\u0440\u043e\u0441\u0430 "+a}),r.a.createElement("div",{style:{paddingTop:"10px"}},r.a.createElement(L.a,{maxWidth:"xl"},r.a.createElement(ga,{id:t,code:a}))))};function xa(e){var t=e.children,a=e.value,n=e.index,c=Object(Oe.a)(e,["children","value","index"]);return r.a.createElement("div",Object.assign({role:"tabpanel",hidden:a!==n,id:"vertical-tabpanel-".concat(n),"aria-labelledby":"vertical-tab-".concat(n)},c),a===n&&r.a.createElement(Pt.a,{p:3},r.a.createElement(j.a,null,t)))}var wa=Object(p.a)((function(e){return{root:{flexGrow:1,backgroundColor:e.palette.background.paper,display:"flex"},tabs:{borderRight:"1px solid ".concat(e.palette.divider)}}})),ya=function(e){var t,a=e.id,n=wa(),c=r.a.useState(0),l=Object(m.a)(c,2),o=l[0],i=l[1];return r.a.createElement("div",{className:n.root},r.a.createElement(It.a,{orientation:"vertical",variant:"scrollable",value:o,onChange:function(e,t){i(t)},className:n.tabs},r.a.createElement(Mt.a,Object.assign({label:"\u0424\u0430\u0439\u043b\u044b"},{id:"vertical-tab-".concat(t=0),"aria-controls":"vertical-tabpanel-".concat(t)}))),r.a.createElement(xa,{value:o,index:0},"\u0424\u0430\u0439\u043b\u044b \u043e\u043f\u0440\u043e\u0441\u0430 - ",a,r.a.createElement("p",null,"\u0412 \u0420\u0410\u0417\u0420\u0410\u0411\u041e\u0422\u041a\u0415")))},Ca=function(){var e=Object(d.g)(),t=e.id,a=e.code;return r.a.createElement(n.Fragment,null,r.a.createElement(nt,{title:"\u0424\u0430\u0439\u043b\u044b "+a}),r.a.createElement("div",{style:{paddingTop:"10px"}},r.a.createElement(L.a,{maxWidth:"xl"},r.a.createElement(ya,{id:t}))))},ka=function(){return r.a.createElement(n.Fragment,null,r.a.createElement(Z.a,{container:!0,item:!0},"WIKI"))},Sa=function(){var e=Object(d.g)(),t=(e.id,e.code);return r.a.createElement(n.Fragment,null,r.a.createElement(nt,{title:"Wiki "+t}),r.a.createElement(L.a,{maxWidth:"lg"},r.a.createElement(ka,null)))},Aa=function(){return r.a.createElement(s.a,null,r.a.createElement(d.c,null,r.a.createElement(d.a,{path:"/",exact:!0,component:Ye}),r.a.createElement(d.a,{path:"/results/:id/:code",component:zt}),r.a.createElement(d.a,{path:"/poll-settings/:id/:code",component:ha}),r.a.createElement(d.a,{path:"/drive/:id/:code",component:$t}),r.a.createElement(d.a,{path:"/analyze",component:Rt}),r.a.createElement(d.a,{path:"/attachment/:id/:code",component:Ca}),r.a.createElement(d.a,{path:"/poll-wiki/:id/:code",component:Sa}),r.a.createElement(d.a,{path:"/tester",component:Gt})))},Na=new o.a({uri:"http://192.168.31.83:4000/graphql",cache:new i.a});var qa=function(){return r.a.createElement(u.a,{client:Na},r.a.createElement("div",{className:"App"},r.a.createElement(Aa,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(qa,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[308,1,2]]]);
//# sourceMappingURL=main.9291a08c.chunk.js.map