{"version":3,"sources":["components/HomeBar/index.js","components/ActiveAvatar/index.js","components/PassiveAvatar/index.js","components/DelConfirm/index.js","components/PollCard/index.js","containers/ListOfPolls/index.js","components/AddFab/index.js","lib/xmlparser.js","components/XmlInput/index.js","lib/selects.js","containers/AddPollDialog/index.js","containers/HomeWrap/queries.js","containers/HomeWrap/index.js","pages/Home.js","components/SettingBar/index.js","modules/PollDrive/components/FreeAnswer/index.js","modules/PollDrive/components/Answer/index.js","modules/PollDrive/components/MultipleAnswers/index.js","modules/PollDrive/components/Question/index.js","lib/keycodes.js","lib/defineSelectedAnswer.js","lib/questionFormation.js","lib/beep.js","modules/PollDrive/index.js","components/CityDialog/index.js","containers/DriveWrap/queries.js","containers/DriveWrap/index.js","pages/Drive.js","modules/PollResults/index.js","pages/Results.js","pages/Analyze.js","containers/Test/index.js","pages/Tester.js","modules/PollSettings/components/ConfigEditor/index.js","modules/PollSettings/components/ReoderEditor/queries.js","modules/PollSettings/components/QuestionCard/index.js","modules/PollSettings/components/ReoderEditor/index.js","modules/PollSettings/index.js","pages/Settings.js","containers/Router/index.js","containers/App/App.js","serviceWorker.js","index.js"],"names":["useStyles","makeStyles","theme","grow","flexGrow","menuButton","marginRight","spacing","title","display","breakpoints","up","inputRoot","color","sectionDesktop","sectionMobile","link","textDecoration","HomeBar","classes","React","useState","anchorEl","setAnchorEl","appAnchorEl","setAppAnchorEl","mobileMoreAnchorEl","setMobileMoreAnchorEl","isMenuOpen","Boolean","isMobileMenuOpen","isAppMenuOpen","handleProfileMenuOpen","event","currentTarget","handleAppsMenuOpen","handleMobileMenuClose","handleMenuClose","handleAppMenuClose","menuId","renderMenu","Menu","anchorOrigin","vertical","horizontal","id","keepMounted","transformOrigin","open","onClose","MenuItem","onClick","renderAppsMenu","renderMobileMenu","to","IconButton","Badge","badgeContent","aria-label","aria-controls","aria-haspopup","className","AppBar","position","Toolbar","edge","Typography","variant","noWrap","StyledBadge","withStyles","badge","backgroundColor","boxShadow","palette","background","paper","top","left","width","height","borderRadius","animation","border","content","transform","opacity","root","avatar","props","ActiveAvatar","overlap","liter","PassiveAvatar","DelConfirm","close","confirm","handleClose","reason","Snackbar","autoHideDuration","message","action","Fragment","Button","size","fontSize","maxWidth","margin","header","padding","flex","media","expand","marginLeft","transition","transitions","create","duration","shortest","expandOpen","PollCard","data","handlePollDel","pollId","expanded","setExpanded","delDialogOpen","setDelDialogOpen","isPollMenuOpen","Avatar","active","type","handlePollMenuClose","renderPollMenu","code","data-poll","Results","Tooltip","Drive","Card","CardHeader","e","subheader","startDate","endDate","CardContent","Grid","container","item","xs","sm","gutterBottom","way","questionsCount","answersCount","sample","complete","CardActions","disableSpacing","clsx","aria-expanded","Collapse","in","timeout","unmountOnExit","paragraph","ListOfPolls","polls","map","poll","i","key","small","bottom","right","AddFub","Fab","xmlparser","xmlString","xml","parser","DOMParser","parsererrorNS","parseFromString","getElementsByTagName","namespaceURI","doc","getElementsByTagNameNS","length","testXml","element","getAttribute","start","end","structure","backdrop","zIndex","drawer","XmlImport","field","errorMessage","setFieldValue","touched","name","onBlur","value","onChange","processing","setProcessing","undefined","count","setCount","fileUpload","useRef","Backdrop","CircularProgress","style","preventDefault","reader","FileReader","file","target","files","onloadend","xmlText","result","dateRegex","replace","console","log","readAsText","startIcon","current","click","pollTypes","pollWays","TextInputComponent","label","TextField","fullWidth","error","helperText","InputLabelProps","shrink","SelectInputComponent","array","select","option","AddPollDialog","closeHndl","saveHndl","SUPPORTED_FORMATS","validationSchema","yup","shape","required","startdate","enddate","matches","min","ensure","xmlfile","test","includes","Dialog","disableBackdropClick","disableEscapeKeyDown","aria-labelledby","aria-describedby","DialogTitle","DialogContent","initialValues","comment","validateOnBlur","onSubmit","values","setSubmitting","errors","isSubmitting","dirty","handleSubmit","handleReset","handleChange","handleBlur","component","XmlInput","DialogActions","disabled","pollsQuery","gql","addNewPoll","deletePoll","HomeWrap","openDialog","setOpenDialog","useQuery","loading","refetch","useMutation","onCompleted","addPoll","newPoll","delPoll","xmlParse","questions","logic","topic","Promise","resolve","reject","questionsLen","questionData","limit","order","answers","questionAnswers","answersLen","answerData","padStart","defaultLogic","logicLen","logicData","restrict","topics","topicsLen","topicData","basicLogicFormation","reduce","acum","val","exclude","unique","extLogic","diffUniq","filter","obj","difficult","freeAnswers","Container","variables","xmlFile","then","basicData","pollInfo","shortTitle","poolOfQuestions","AddFab","arrow","SettingBar","FreeAnswer","answer","focusHandler","blurHandler","textInput","useEffect","focus","freeAnswerText","showFreeAnswer","ref","data-code","data-keycode","keyCode","placeholder","onKeyUp","blur","onFocus","Answer","clickHandler","settings","answerRef","answerCls","answerTitle","selected","push","join","showIndex","codesShow","freeAnswer","marginTop","errorText","Tags","multipleHandler","setAnswers","codes","setCodes","state","text","setError","defVal","codesOfAnswers","Autocomplete","multiple","options","getOptionLabel","getOptionDisabled","renderOption","renderTags","getTagProps","index","Chip","renderInput","params","Question","question","mega","serviceBtns","resetBtn","confirmBtns","castCodes","97","98","99","100","101","102","103","104","105","answersCodes","keycodes","cast","defineSelectedAnswer","checkAnswerSelected","do","trueCode","checkServiceBtn","checkResetBtn","checkConfirmBtn","questionFormation","setResults","keyCodesPool","visibleAnswers","invisible","arrayOfBlockedCodes","newAnswers","suffix","pool","answerCode","qSuffix","megaMltp","prevState","skip","next","beep","config","audioCtx","window","AudioContext","webkitAudioContext","Object","assign","volume","frequency","oscillator","createOscillator","gainNode","createGain","connect","destination","gain","setTimeout","stop","PollDrive","logics","setCurrentQuestion","mainDiv","questionsLimit","setQuestion","userSettings","setUserSettings","setLogic","results","keyUpHandler","nodeName","nextStep","mainLogic","confirmResults","resetAnswers","savedCodes","arrayOfCodes","arrayToCheck","criticalExclude","explPool","goToNext","selectedAnswer","el","newResultState","poolOfExcludedCodes","goToPrevious","document","addEventListener","removeEventListener","newQuestion","defaultChecked","dataset","selectedCode","selectedKeyCode","keycode","codesPool","resultsPool","clearPool","CityDialog","save","cities","setState","DialogContentText","Select","native","selectedIndex","innerHTML","city","pollDataQuery","citiesQuery","DriveWrap","history","useHistory","setPoll","poolOfCities","setPoolOfCities","openCityDialog","setOpenCityDialog","setPollLogic","setCurrentCity","currentQuestion","pollLoading","cData","cError","citiesLoading","useParams","TabPanel","children","other","role","hidden","Box","p","a11yProps","tabs","borderRight","divider","PollResults","setValue","Tabs","orientation","newValue","Tab","paddingTop","Analyze","Test","observer","observable","secondsPassed","timerData","handle","setInterval","clearTimeout","Tester","ConfigEditor","class","for","pollQuery","saveNewLimit","saveNewOrder","QuestionCard","handleLimitInput","setVal","lg","xl","Paper","elevation","direction","alignItems","currentValue","ReoderEditor","setQuestions","setPrevOrder","saveLimit","saveOrder","inputData","SortableItem","SortableElement","SortableList","SortableContainer","onSortEnd","oldIndex","newIndex","newArray","arrayMove","deltaArray","newOrder","axis","PollSettings","Settings","Router","path","exact","Home","client","ApolloClient","uri","cache","InMemoryCache","App","ApolloProvider","location","hostname","match","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister","catch"],"mappings":"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","file":"static/js/main.5ea10ed5.chunk.js","sourcesContent":["import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Badge from '@material-ui/core/Badge';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport AppsIcon from '@material-ui/icons/Apps';\r\nimport AccountCircle from '@material-ui/icons/AccountCircle';\r\nimport MailIcon from '@material-ui/icons/Mail';\r\nimport NotificationsIcon from '@material-ui/icons/Notifications';\r\nimport MoreIcon from '@material-ui/icons/MoreVert';\r\nimport PieChartIcon from '@material-ui/icons/PieChart';\r\nimport AlarmOnIcon from '@material-ui/icons/AlarmOn';\r\nimport { NavLink } from 'react-router-dom'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  grow: {\r\n    flexGrow: 1,\r\n  },\r\n  menuButton: {\r\n    marginRight: theme.spacing(2),\r\n  },\r\n  title: {\r\n    display: 'none',\r\n    [theme.breakpoints.up('xs')]: {\r\n      display: 'block',\r\n    },\r\n  },\r\n  inputRoot: {\r\n    color: 'inherit',\r\n  },\r\n  sectionDesktop: {\r\n    display: 'none',\r\n    [theme.breakpoints.up('sm')]: {\r\n      display: 'flex',\r\n    },\r\n  },\r\n  sectionMobile: {\r\n    display: 'flex',\r\n    [theme.breakpoints.up('sm')]: {\r\n      display: 'none',\r\n    },\r\n  },\r\n  link: {\r\n    color: 'white',\r\n    textDecoration: 'none'\r\n  }\r\n}));\r\n\r\nconst HomeBar = ({ title }) => {\r\n  const classes = useStyles();\r\n  const [anchorEl, setAnchorEl] = React.useState(null);\r\n  const [appAnchorEl, setAppAnchorEl] = React.useState(null);\r\n  const [mobileMoreAnchorEl, setMobileMoreAnchorEl] = React.useState(null);\r\n\r\n  const isMenuOpen = Boolean(anchorEl);\r\n  const isMobileMenuOpen = Boolean(mobileMoreAnchorEl);\r\n  const isAppMenuOpen = Boolean(appAnchorEl);\r\n\r\n  const handleProfileMenuOpen = (event) => {\r\n    setAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const handleAppsMenuOpen = (event) => {\r\n    setAppAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const handleMobileMenuClose = () => {\r\n    setMobileMoreAnchorEl(null);\r\n  };\r\n\r\n  const handleMenuClose = () => {\r\n    setAnchorEl(null);\r\n    handleMobileMenuClose();\r\n  };\r\n\r\n  const handleAppMenuClose = () => {\r\n    setAppAnchorEl(null);\r\n    handleMobileMenuClose();\r\n  }\r\n\r\n  const handleMobileMenuOpen = (event) => {\r\n    setMobileMoreAnchorEl(event.currentTarget);\r\n  };\r\n\r\n  const menuId = 'primary-account-menu';\r\n  const appsMenuId = 'primary-apps-menu';\r\n\r\n  const renderMenu = (\r\n    <Menu\r\n      anchorEl={anchorEl}\r\n      anchorOrigin={{ vertical: 'top', horizontal: 'right' }}\r\n      id={menuId}\r\n      keepMounted\r\n      transformOrigin={{ vertical: 'top', horizontal: 'right' }}\r\n      open={isMenuOpen}\r\n      onClose={handleMenuClose}\r\n    >\r\n      <MenuItem onClick={handleMenuClose}>Профиль</MenuItem>\r\n      <MenuItem onClick={handleMenuClose}>Выход</MenuItem>\r\n    </Menu>\r\n  );\r\n\r\n  const renderAppsMenu = (\r\n    <Menu\r\n      anchorEl={appAnchorEl}\r\n      anchorOrigin={{ vertical: 'top', horizontal: 'right' }}\r\n      id={appsMenuId}\r\n      keepMounted\r\n      transformOrigin={{ vertical: 'top', horizontal: 'right' }}\r\n      open={isAppMenuOpen}\r\n      onClose={handleAppMenuClose}\r\n    >\r\n      <MenuItem onClick={handleAppMenuClose}>ПУСТО_1</MenuItem>\r\n      <MenuItem onClick={handleAppMenuClose}>ПУСТО_2</MenuItem>\r\n    </Menu>\r\n  )\r\n\r\n  const mobileMenuId = 'primary-account-menu-mobile';\r\n  const renderMobileMenu = (\r\n    <Menu\r\n      anchorEl={mobileMoreAnchorEl}\r\n      anchorOrigin={{ vertical: 'top', horizontal: 'right' }}\r\n      id={mobileMenuId}\r\n      keepMounted\r\n      transformOrigin={{ vertical: 'top', horizontal: 'right' }}\r\n      open={isMobileMenuOpen}\r\n      onClose={handleMobileMenuClose}\r\n    >\r\n      <NavLink to=\"analyze\">\r\n        <MenuItem>\r\n          <IconButton color=\"inherit\">\r\n            <Badge badgeContent={0} color=\"secondary\">\r\n              <PieChartIcon />\r\n            </Badge>\r\n          </IconButton>\r\n          <p>XML</p>\r\n        </MenuItem>\r\n      </NavLink>\r\n      <MenuItem>\r\n        <IconButton color=\"inherit\">\r\n          <Badge badgeContent={0} color=\"secondary\">\r\n            <MailIcon />\r\n          </Badge>\r\n        </IconButton>\r\n        <p>Сообщения</p>\r\n      </MenuItem>\r\n      <MenuItem>\r\n        <IconButton color=\"inherit\">\r\n          <Badge badgeContent={0} color=\"secondary\">\r\n            <NotificationsIcon />\r\n          </Badge>\r\n        </IconButton>\r\n        <p>Уведомления</p>\r\n      </MenuItem>\r\n      <MenuItem onClick={handleAppsMenuOpen}>\r\n        <IconButton\r\n          aria-label=\"more apps\"\r\n          aria-controls=\"primary-apps-menu\"\r\n          aria-haspopup=\"true\"\r\n          color=\"inherit\">\r\n          <AppsIcon />\r\n        </IconButton>\r\n        <p>Приложения</p>\r\n      </MenuItem>\r\n      <MenuItem onClick={handleProfileMenuOpen}>\r\n        <IconButton\r\n          aria-label=\"account of current user\"\r\n          aria-controls=\"primary-search-account-menu\"\r\n          aria-haspopup=\"true\"\r\n          color=\"inherit\"\r\n        >\r\n          <AccountCircle />\r\n        </IconButton>\r\n        <p>Profile</p>\r\n      </MenuItem>\r\n    </Menu>\r\n  );\r\n\r\n  return (\r\n    <div className={classes.grow}>\r\n      <AppBar position=\"static\">\r\n        <Toolbar>\r\n          <IconButton\r\n            edge=\"start\"\r\n            className={classes.menuButton}\r\n            color=\"inherit\"\r\n            aria-label=\"open drawer\"\r\n          >\r\n            <MenuIcon />\r\n          </IconButton>\r\n          <Typography className={classes.title} variant=\"h6\" noWrap>\r\n            {title}\r\n          </Typography>\r\n          <div className={classes.grow} />\r\n          <div className={classes.sectionDesktop}>\r\n            <NavLink to=\"tester\">\r\n              <IconButton color=\"inherit\">\r\n                <Badge badgeContent={0} color=\"secondary\">\r\n                  <AlarmOnIcon className={classes.link} />\r\n                </Badge>\r\n              </IconButton>\r\n            </NavLink>\r\n            <NavLink to=\"analyze\">\r\n              <IconButton color=\"inherit\">\r\n                <Badge badgeContent={0} color=\"secondary\">\r\n                  <PieChartIcon className={classes.link} />\r\n                </Badge>\r\n              </IconButton>\r\n            </NavLink>\r\n            <IconButton color=\"inherit\">\r\n              <Badge badgeContent={0} color=\"secondary\">\r\n                <MailIcon />\r\n              </Badge>\r\n            </IconButton>\r\n            <IconButton color=\"inherit\">\r\n              <Badge badgeContent={0} color=\"secondary\">\r\n                <NotificationsIcon />\r\n              </Badge>\r\n            </IconButton>\r\n            <IconButton\r\n              aria-label=\"apps\"\r\n              aria-controls={appsMenuId}\r\n              aria-haspopup=\"true\"\r\n              onClick={handleAppsMenuOpen}\r\n              color=\"inherit\">\r\n              <Badge badgeContent={0} color=\"secondary\">\r\n                <AppsIcon />\r\n              </Badge>\r\n            </IconButton>\r\n            <IconButton\r\n              edge=\"end\"\r\n              aria-label=\"account of current user\"\r\n              aria-controls={menuId}\r\n              aria-haspopup=\"true\"\r\n              onClick={handleProfileMenuOpen}\r\n              color=\"inherit\"\r\n            >\r\n              <Badge badgeContent={0} color=\"secondary\">\r\n                <AccountCircle />\r\n              </Badge>\r\n            </IconButton>\r\n          </div>\r\n          <div className={classes.sectionMobile}>\r\n            <IconButton\r\n              aria-label=\"show more\"\r\n              aria-controls={mobileMenuId}\r\n              aria-haspopup=\"true\"\r\n              onClick={handleMobileMenuOpen}\r\n              color=\"inherit\"\r\n            >\r\n              <MoreIcon />\r\n            </IconButton>\r\n          </div>\r\n        </Toolbar>\r\n      </AppBar>\r\n      {renderMobileMenu}\r\n      {renderMenu}\r\n      {renderAppsMenu}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default HomeBar","import React from 'react';\r\nimport Badge from '@material-ui/core/Badge';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\r\n\r\nconst StyledBadge = withStyles((theme) => ({\r\n  badge: {\r\n    backgroundColor: '#44b700',\r\n    color: '#44b700',\r\n    boxShadow: `0 0 0 2px ${theme.palette.background.paper}`,\r\n    '&::after': {\r\n      position: 'absolute',\r\n      top: '-1px',\r\n      left: '-1px',\r\n      width: '100%',\r\n      height: '100%',\r\n      borderRadius: '50%',\r\n      animation: '$ripple 1.2s infinite ease-in-out',\r\n      border: '1px solid currentColor',\r\n      content: '\"\"',\r\n    },\r\n  },\r\n  '@keyframes ripple': {\r\n    '0%': {\r\n      transform: 'scale(.8)',\r\n      opacity: 1,\r\n    },\r\n    '100%': {\r\n      transform: 'scale(2.4)',\r\n      opacity: 0,\r\n    },\r\n  },\r\n}))(Badge);\r\n\r\nconst useStyles = makeStyles(({\r\n  root: {\r\n    display: 'flex'\r\n  },\r\n  avatar: {\r\n    backgroundColor: props => props.color\r\n  }\r\n}));\r\n\r\nconst ActiveAvatar = (props) => {\r\n  const classes = useStyles(props);\r\n  return (\r\n    <div className={classes.root}>\r\n      <StyledBadge\r\n        overlap=\"circle\"\r\n        anchorOrigin={{\r\n          vertical: 'bottom',\r\n          horizontal: 'right',\r\n        }}\r\n        variant=\"dot\"\r\n      >\r\n        <Avatar className={classes.avatar}>\r\n          {props.liter}\r\n        </Avatar>\r\n      </StyledBadge>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ActiveAvatar","import React from 'react';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nconst useStyles = makeStyles(({\r\n  root: {\r\n    display: 'flex'\r\n  },\r\n  avatar: {\r\n    backgroundColor: props => props.color\r\n  }\r\n}));\r\n\r\nconst PassiveAvatar = (props) => {\r\n  const classes = useStyles(props);\r\n  return (\r\n    <div className={classes.root}>\r\n      <Avatar className={classes.avatar}>\r\n        {props.liter}\r\n      </Avatar>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PassiveAvatar","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\n\r\nexport default function DelConfirm({ open, close, confirm }) {\r\n  const handleClose = (event, reason) => {\r\n    if (reason === 'clickaway') {\r\n      return;\r\n    }\r\n    close()\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Snackbar\r\n        anchorOrigin={{\r\n          vertical: 'bottom',\r\n          horizontal: 'left',\r\n        }}\r\n        open={open}\r\n        autoHideDuration={6000}\r\n        onClose={handleClose}\r\n        message=\"Удалить ВЕСЬ опрос?\"\r\n        action={\r\n          <React.Fragment>\r\n            <Button color=\"secondary\" size=\"small\" onClick={confirm}>\r\n              ДА\r\n            </Button>\r\n            <IconButton size=\"small\" aria-label=\"close\" color=\"inherit\" onClick={handleClose}>\r\n              <CloseIcon fontSize=\"small\" />\r\n            </IconButton>\r\n          </React.Fragment>\r\n        }\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, Fragment } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { NavLink } from 'react-router-dom'\r\nimport clsx from 'clsx';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardHeader from '@material-ui/core/CardHeader';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport Collapse from '@material-ui/core/Collapse';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\r\nimport PollIcon from '@material-ui/icons/Poll';\r\nimport AssignmentTurnedInIcon from '@material-ui/icons/AssignmentTurnedIn';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport ActiveAvatar from '../../components/ActiveAvatar'\r\nimport PassiveAvatar from '../../components/PassiveAvatar/'\r\nimport DelConfirm from '../DelConfirm'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    maxWidth: '100%',\r\n    margin: '10px 0'\r\n  },\r\n  header: {\r\n    padding: '16px 16px 0 16px'\r\n  },\r\n  content: {\r\n    flex: 1,\r\n    padding: '10px 16px 0 16px'\r\n  },\r\n  media: {\r\n    height: 0,\r\n  },\r\n  expand: {\r\n    transform: 'rotate(0deg)',\r\n    marginLeft: 'auto',\r\n    transition: theme.transitions.create('transform', {\r\n      duration: theme.transitions.duration.shortest,\r\n    }),\r\n  },\r\n  expandOpen: {\r\n    transform: 'rotate(180deg)',\r\n  }\r\n}));\r\n\r\nconst PollCard = ({ data, handlePollDel }) => {\r\n  const classes = useStyles();\r\n  const [pollId, setPollId] = useState(data.id)\r\n  const [expanded, setExpanded] = useState(false);\r\n  const [anchorEl, setAnchorEl] = useState(false);\r\n  const [delDialogOpen, setDelDialogOpen] = useState(false)\r\n  const handleExpandClick = () => {\r\n    setExpanded(!expanded);\r\n  };\r\n\r\n  const isPollMenuOpen = Boolean(anchorEl);\r\n\r\n  const Avatar = () => {\r\n    if (data.active) {\r\n      return (\r\n        <ActiveAvatar type={data.type} color={data.color}>\r\n          {data.type}\r\n        </ActiveAvatar>\r\n      )\r\n    } else {\r\n      return (\r\n        <PassiveAvatar type={data.type} color={data.color}>\r\n          {data.type}\r\n        </PassiveAvatar>\r\n      )\r\n    }\r\n  }\r\n\r\n  const handlePollMenuOpen = (e) => {\r\n    setAnchorEl(e.currentTarget);\r\n  };\r\n\r\n  const handlePollMenuClose = () => {\r\n    setAnchorEl(null);\r\n  }\r\n\r\n  const handleDelQuery = () => {\r\n    handlePollMenuClose()\r\n    setDelDialogOpen(true)\r\n  }\r\n\r\n  const closeDelDialog = () => {\r\n    setDelDialogOpen(false)\r\n  }\r\n\r\n  const delConfirm = () => {\r\n    handlePollDel(pollId)\r\n  }\r\n\r\n  const renderPollMenu = (\r\n    <Menu\r\n      anchorEl={anchorEl}\r\n      anchorOrigin={{ vertical: 'top', horizontal: 'right' }}\r\n      id={'poll-menu'}\r\n      keepMounted\r\n      transformOrigin={{ vertical: 'top', horizontal: 'right' }}\r\n      open={isPollMenuOpen}\r\n      onClose={handlePollMenuClose}\r\n    >\r\n      <NavLink to={`/poll-settings/${data.id}/${data.code}`}>\r\n        <MenuItem data-poll={data.id}>\r\n          Настройки\r\n        </MenuItem>\r\n      </NavLink>\r\n      <MenuItem onClick={handleDelQuery} data-poll={data.id}>Удалить</MenuItem>\r\n    </Menu>\r\n  )\r\n  const Results = () => {\r\n    return (\r\n      <Tooltip title=\"Результаты\">\r\n        <NavLink to={`/results/${data.id}/${data.code}`}>\r\n          <IconButton>\r\n            <PollIcon />\r\n          </IconButton>\r\n        </NavLink>\r\n      </Tooltip>\r\n    )\r\n  }\r\n  const Drive = () => {\r\n    return (\r\n      <Tooltip title=\"Ввод результатов\">\r\n        <NavLink to={`/drive/${data.id}/${data.code}`}>\r\n          <IconButton aria-label=\"share\" >\r\n            <AssignmentTurnedInIcon />\r\n          </IconButton>\r\n        </NavLink>\r\n      </Tooltip>\r\n    )\r\n  }\r\n  return (\r\n    <Fragment>\r\n      <DelConfirm open={delDialogOpen} close={closeDelDialog} confirm={delConfirm} />\r\n      <Card className={classes.root}>\r\n        <CardHeader className={classes.header}\r\n          avatar={\r\n            <Avatar />\r\n          }\r\n          action={\r\n            <IconButton aria-label=\"settings\" onClick={handlePollMenuOpen}>\r\n              <MoreVertIcon />\r\n            </IconButton>\r\n          }\r\n          title={data.code + ': ' + data.title}\r\n          subheader={data.startDate + ' - ' + data.endDate}\r\n        />\r\n        <CardContent className={classes.content}>\r\n          <Grid container spacing={1}>\r\n            <Grid item xs={12} sm={6}>\r\n              <Typography variant=\"button\" display=\"block\" gutterBottom>\r\n                Метод проведения: {data.way}\r\n              </Typography>\r\n            </Grid>\r\n            <Grid item xs={12} sm={6}>\r\n              <Typography variant=\"button\" display=\"block\" gutterBottom>\r\n                Вопросов/ответов: {data.questionsCount + '/' + data.answersCount}\r\n              </Typography>\r\n            </Grid>\r\n          </Grid>\r\n          <Grid container spacing={1}>\r\n            <Grid item xs={12} sm={6}>\r\n              <Typography variant=\"overline\" display=\"block\" gutterBottom>\r\n                Респондентов: {data.sample}\r\n              </Typography>\r\n            </Grid>\r\n            <Grid item xs={12} sm={6}>\r\n              <Typography variant=\"overline\" display=\"block\" gutterBottom>\r\n                Результатов: {data.complete}\r\n              </Typography>\r\n            </Grid>\r\n          </Grid>\r\n        </CardContent>\r\n        <CardActions disableSpacing>\r\n          <Results />\r\n          <Drive />\r\n          <IconButton\r\n            className={clsx(classes.expand, {\r\n              [classes.expandOpen]: expanded,\r\n            })}\r\n            onClick={handleExpandClick}\r\n            aria-expanded={expanded}\r\n            aria-label=\"show more\"\r\n          >\r\n            <ExpandMoreIcon />\r\n          </IconButton>\r\n        </CardActions>\r\n        <Collapse in={expanded} timeout=\"auto\" unmountOnExit>\r\n          <CardContent>\r\n            <Typography paragraph>Описание:</Typography>\r\n            <Typography paragraph>\r\n              Здесь говорится о замечательных свойствах проведения опроса\r\n          </Typography>\r\n            <Typography paragraph>\r\n              Здесь всякая чушь про методики проведения или прикрепленные документы и распоряжения!!!!!!\r\n          </Typography>\r\n            <IconButton aria-label=\"share\" >\r\n              <AssignmentTurnedInIcon />\r\n            </IconButton>\r\n            <IconButton aria-label=\"share\" >\r\n              <AssignmentTurnedInIcon />\r\n            </IconButton>\r\n          </CardContent>\r\n        </Collapse>\r\n      </Card>\r\n      {renderPollMenu}\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nexport default PollCard","import React, { Fragment } from 'react'\r\nimport PollCard from '../../components/PollCard'\r\n\r\nconst ListOfPolls = ({ data, handlePollDel }) => {\r\n\r\n\r\n  return data.polls.map((poll, i) => (\r\n    <PollCard key={i} data={poll} handlePollDel={handlePollDel} />\r\n  ))\r\n}\r\n\r\nexport default ListOfPolls","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Fab from '@material-ui/core/Fab';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport Hidden from '@material-ui/core/Hidden';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    position: 'absolute',\r\n    top: '10px',\r\n    left: '-55px'\r\n  },\r\n  small: {\r\n    position: 'fixed',\r\n    bottom: '30px',\r\n    right: '30px'\r\n  }\r\n}));\r\n\r\nconst AddFub = ({ onClick }) => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div className={classes.small}>\r\n      <Fab color=\"secondary\" aria-label=\"add\" onClick={onClick}>\r\n        <AddIcon />\r\n      </Fab>\r\n    </div>\r\n  );\r\n}\r\nexport default AddFub","function testXml(xmlString) {\r\n  var parser = new DOMParser();\r\n  var docError = parser.parseFromString('INVALID', 'text/xml');\r\n  var parsererrorNS = docError.getElementsByTagName(\"parsererror\")[0].namespaceURI;\r\n  var doc = parser.parseFromString(xmlString, 'text/xml');\r\n  if (doc.getElementsByTagNameNS(parsererrorNS, 'parsererror').length > 0) {\r\n    return false\r\n  }\r\n  return doc;\r\n}\r\n\r\nconst xmlparser = (xmlString) => {\r\n  const xml = testXml(xmlString)\r\n  if (xml) {\r\n    let data = {}\r\n    const element = xml.getElementsByTagName(\"opros\")[0]\r\n    data.title = element.getAttribute('name')\r\n    data.code = element.getAttribute('cod')\r\n    data.start = element.getAttribute('start_date')\r\n    data.end = element.getAttribute('end_date')\r\n    data.structure = {\r\n      data: ''\r\n    }\r\n    return data\r\n  } else {\r\n    return false\r\n  }\r\n}\r\n\r\nexport default xmlparser","import React, { useRef, useEffect, useState } from 'react'\r\nimport Typography from \"@material-ui/core/Typography\"\r\nimport Button from '@material-ui/core/Button';\r\nimport PublishIcon from '@material-ui/icons/Publish';\r\nimport Badge from '@material-ui/core/Badge';\r\nimport Backdrop from '@material-ui/core/Backdrop';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n\r\nimport xmlparser from '../../lib/xmlparser'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  backdrop: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    color: '#fff',\r\n  },\r\n}));\r\n\r\nconst XmlImport = ({ field, ...props }) => {\r\n  const { errorMessage, touched, setFieldValue } = props;\r\n  const { name, value, onChange, onBlur } = field;\r\n  const [processing, setProcessing] = useState(false)\r\n  const [file, setFile] = useState(undefined)\r\n  const [count, setCount] = useState(0)\r\n  const classes = useStyles();\r\n  const fileUpload = useRef();\r\n  let fileReader\r\n\r\n  const upload = () => {\r\n    if (fileUpload) {\r\n      fileUpload.current.click();\r\n    }\r\n  }\r\n\r\n  const handleChg = (e) => {\r\n    e.preventDefault()\r\n    setProcessing(true)\r\n    let reader = new FileReader();\r\n    let file = e.target.files[0];\r\n    if (file) {\r\n      reader.onloadend = () => {\r\n        const xmlText = reader.result\r\n        const xml = xmlparser(xmlText)\r\n        if (xml) {\r\n          const dateRegex = /^(\\d{2}).(\\d{2}).(\\d{4})$/\r\n          const startDate = xml.start.replace(dateRegex, '$3-$2-$1')\r\n          const endDate = xml.end.replace(dateRegex, '$3-$2-$1')\r\n          setFieldValue('title', xml.title)\r\n          setFieldValue('code', xml.code)\r\n          setFieldValue('startdate', startDate)\r\n          setFieldValue('enddate', endDate)\r\n          setCount(1)\r\n          setProcessing(false)\r\n          return\r\n        } else {\r\n          console.log('Неправильный формат XML');\r\n          setFieldValue('mainconfig', '')\r\n          return\r\n        }\r\n      }\r\n      reader.readAsText(file);\r\n      props.setFieldValue(name, file);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Backdrop className={classes.backdrop} open={processing} >\r\n        <CircularProgress color=\"inherit\" />\r\n      </Backdrop>\r\n\r\n      <input\r\n        style={{ display: 'none' }}\r\n        id={name}\r\n        name={name}\r\n        type=\"file\"\r\n        id={name}\r\n        ref={fileUpload}\r\n        onBlur={onBlur}\r\n        // onChange={handleChange}\r\n        onInput={handleChg}\r\n      />\r\n      <Badge\r\n        color=\"secondary\"\r\n        badgeContent={count}\r\n        style={{ top: '5px' }}\r\n      >\r\n        <Button\r\n          variant=\"contained\"\r\n          color=\"default\"\r\n          startIcon={<PublishIcon />}\r\n          onClick={upload}\r\n        >\r\n          XML\r\n        </Button>\r\n      </Badge>\r\n      {errorMessage ? (\r\n        <Typography variant=\"caption\" color=\"error\">\r\n          {errorMessage}\r\n        </Typography>\r\n      ) : null}\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nexport default XmlImport","export const pollTypes = [\r\n  'Экспертный',\r\n  'Всероссийский'\r\n]\r\n\r\nexport const pollWays = [\r\n  'Интервьюирование',\r\n  'Анкетирование',\r\n  'Телефонный',\r\n  'Web-опрос'\r\n]\r\n","import React, { Component, useState } from \"react\";\r\nimport { Formik, Field } from \"formik\";\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Button from '@material-ui/core/Button';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport XmlInput from \"../../components/XmlInput\";\r\nimport { pollTypes, pollWays } from '../../lib/selects'\r\n\r\nimport * as yup from \"yup\";\r\n\r\nconst TextInputComponent = ({ field, ...props }) => {\r\n  const { errorMessage, label, type, touched } = props;\r\n  const { name, value, onChange, onBlur } = field;\r\n  return (\r\n    <div>\r\n      <TextField\r\n        fullWidth\r\n        type={type}\r\n        name={name}\r\n        label={label}\r\n        value={value}\r\n        error={touched && errorMessage ? true : false}\r\n        helperText={touched && errorMessage ? errorMessage : undefined}\r\n        onChange={onChange}\r\n        onBlur={onBlur}\r\n        InputLabelProps={{\r\n          shrink: true\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nconst SelectInputComponent = ({ field, ...props }) => {\r\n  const { errorMessage, label, touched, array } = props;\r\n  const { name, value, onChange, onBlur } = field;\r\n  return (\r\n    <div>\r\n      <TextField\r\n        select\r\n        fullWidth\r\n        name={name}\r\n        label={label}\r\n        value={value}\r\n        error={touched && errorMessage ? true : false}\r\n        helperText={touched && errorMessage ? errorMessage : undefined}\r\n        onChange={onChange}\r\n        onBlur={onBlur}\r\n        InputLabelProps={{\r\n          shrink: true\r\n        }}\r\n      >\r\n        {array.map((option, i) => (\r\n          <MenuItem key={i} value={i}>\r\n            {option}\r\n          </MenuItem>\r\n        ))}\r\n      </TextField>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst AddPollDialog = ({ open, closeHndl, saveHndl }) => {\r\n  const FILE_SIZE = 1024 * 1024;                              // 1 mb\r\n  const codeRegExp = /^[A-Za-z]{3}[0-9]{2}-[0-9]{2}?$/\r\n  const SUPPORTED_FORMATS = [\r\n    \"text/xml\"\r\n  ];\r\n  const validationSchema = yup.object().shape({\r\n    title: yup.string().required(\"Обязательное поле\"),\r\n    startdate: yup.date().required('Обязательное поле'),\r\n    enddate: yup.date().required('Обязательное поле'),\r\n    code: yup.string().matches(codeRegExp, 'Формат не валидный').required('Обязательное поле'),\r\n    sample: yup.number().min(1, 'Не меньше одного').required('Обязательное поле'),\r\n    type: yup.string().ensure().required('Обязательное поле'),\r\n    way: yup.string().ensure().required('Обязательное поле'),\r\n    xmlfile: yup\r\n      .mixed()\r\n      .required(\"Обязательное поле формы\")\r\n      .test(\r\n        \"fileSize\",\r\n        \"Слишком большой файл\",\r\n        value => value && value.size <= FILE_SIZE\r\n      )\r\n      .test(\r\n        \"fileFormat\",\r\n        \"Неподдерживаемый формат\",\r\n        value => value && SUPPORTED_FORMATS.includes(value.type)\r\n      )\r\n  });\r\n  const submitHandling = (values, { setSubmitting }) => {\r\n    saveHndl(values)\r\n    closeHndl()\r\n    setSubmitting(true);\r\n  }\r\n  return (\r\n    <Dialog\r\n      className=\"add-poll-dialog\"\r\n      disableBackdropClick\r\n      disableEscapeKeyDown\r\n      open={open}\r\n      maxWidth={'sm'}\r\n      aria-labelledby=\"alert-dialog-title\"\r\n      aria-describedby=\"alert-dialog-description\"\r\n    >\r\n      <DialogTitle id=\"alert-dialog-title\">Добавить опрос</DialogTitle>\r\n      <DialogContent>\r\n        <Formik\r\n          initialValues={{\r\n            xmlfile: undefined,\r\n            title: undefined,\r\n            startdate: undefined,\r\n            enddate: undefined,\r\n            code: undefined,\r\n            sample: 10,\r\n            type: 1,\r\n            way: 1,\r\n            comment: undefined\r\n          }}\r\n          validationSchema={validationSchema}\r\n          validateOnBlur={true}\r\n          onSubmit={submitHandling}\r\n        >\r\n          {\r\n            ({\r\n              saveHndl,\r\n              values,\r\n              errors,\r\n              touched,\r\n              dirty,\r\n              isSubmitting,\r\n              handleReset,\r\n              handleSubmit,\r\n              handleChange,\r\n              handleBlur,\r\n              setFieldValue\r\n            }) => (\r\n                <form onSubmit={handleSubmit}>\r\n                  <Grid container spacing={2}>\r\n                    <Grid item xs={6} sm={6}>\r\n                      <Field\r\n                        name=\"xmlfile\"\r\n                        component={XmlInput}\r\n                        setFieldValue={setFieldValue}\r\n                        errorMessage={errors[\"xmlfile\"] ? errors[\"xmlfile\"] : undefined}\r\n                        touched={touched[\"xmlfile\"]}\r\n                        onBlur={handleBlur}\r\n                      />\r\n                    </Grid>\r\n                    <Grid item xs={12} sm={12}>\r\n                      <Field\r\n                        name=\"title\"\r\n                        type=\"text\"\r\n                        label=\"Наименование\"\r\n                        setFieldValue={setFieldValue}\r\n                        component={TextInputComponent}\r\n                        errorMessage={errors[\"title\"]}\r\n                        touched={touched[\"title\"]}\r\n                        onBlur={handleBlur}\r\n                      />\r\n                    </Grid>\r\n                    <Grid item xs={12} sm={6}>\r\n                      <Field\r\n                        name=\"startdate\"\r\n                        type=\"date\"\r\n                        label=\"Дата начала\"\r\n                        setFieldValue={setFieldValue}\r\n                        component={TextInputComponent}\r\n                        errorMessage={errors[\"startdate\"]}\r\n                        touched={touched[\"startdate\"]}\r\n                        onBlur={handleBlur}\r\n                      />\r\n                    </Grid>\r\n                    <Grid item xs={12} sm={6}>\r\n                      <Field\r\n                        name=\"enddate\"\r\n                        type=\"date\"\r\n                        label=\"Дата окончания\"\r\n                        setFieldValue={setFieldValue}\r\n                        component={TextInputComponent}\r\n                        errorMessage={errors[\"enddate\"]}\r\n                        touched={touched[\"enddate\"]}\r\n                        onBlur={handleBlur}\r\n                      />\r\n                    </Grid>\r\n                    <Grid item xs={12} sm={6}>\r\n                      <Field\r\n                        name=\"code\"\r\n                        label=\"Код опроса\"\r\n                        type=\"text\"\r\n                        setFieldValue={setFieldValue}\r\n                        component={TextInputComponent}\r\n                        errorMessage={errors[\"code\"]}\r\n                        touched={touched[\"code\"]}\r\n                        onChange={handleChange}\r\n                        onBlur={handleBlur}\r\n                      />\r\n                    </Grid>\r\n                    <Grid item xs={12} sm={6}>\r\n                      <Field\r\n                        name=\"sample\"\r\n                        type=\"number\"\r\n                        label=\"Выборка\"\r\n                        setFieldValue={setFieldValue}\r\n                        component={TextInputComponent}\r\n                        errorMessage={errors[\"sample\"]}\r\n                        touched={touched[\"sample\"]}\r\n                        onChange={handleChange}\r\n                        onBlur={handleBlur}\r\n                      />\r\n                    </Grid>\r\n                    <Grid item xs={12} sm={6}>\r\n                      <Field\r\n                        name=\"type\"\r\n                        label=\"Тип опроса\"\r\n                        array={pollTypes}\r\n                        setFieldValue={setFieldValue}\r\n                        component={SelectInputComponent}\r\n                        errorMessage={errors[\"type\"]}\r\n                        touched={touched[\"type\"]}\r\n                        onChange={handleChange}\r\n                        onBlur={handleBlur}\r\n                      />\r\n                    </Grid>\r\n                    <Grid item xs={12} sm={6}>\r\n                      <Field\r\n                        name=\"way\"\r\n                        label=\"Способ проведения\"\r\n                        array={pollWays}\r\n                        component={SelectInputComponent}\r\n                        errorMessage={errors[\"way\"]}\r\n                        touched={touched[\"way\"]}\r\n                        onChange={handleChange}\r\n                        onBlur={handleBlur}\r\n                      />\r\n                    </Grid>\r\n                    <Grid item xs={12}>\r\n                      <Field\r\n                        name=\"comment\"\r\n                        label=\"Комментарии\"\r\n                        component={TextInputComponent}\r\n                        errorMessage={errors[\"comment\"]}\r\n                        touched={touched[\"comment\"]}\r\n                        onChange={handleChange}\r\n                        onBlur={handleBlur}\r\n                      />\r\n                    </Grid>\r\n                  </Grid>\r\n                  <DialogActions>\r\n                    <Button onClick={closeHndl} color=\"primary\">\r\n                      Отмена\r\n                    </Button>\r\n                    <Button type=\"submit\" disabled={isSubmitting}>\r\n                      Сохранить\r\n                    </Button>\r\n                  </DialogActions>\r\n                </form>\r\n              )\r\n          }\r\n        </Formik>\r\n      </DialogContent>\r\n    </Dialog>\r\n  )\r\n}\r\nexport default AddPollDialog;","import { gql } from '@apollo/client'\r\n\r\nexport const pollsQuery = gql`\r\n  query pollsQuery {\r\n    polls {\r\n      id\r\n      title\r\n      code\r\n      liter\r\n      color\r\n      startDate\r\n      endDate\r\n      sample\r\n      way\r\n      type\r\n      complete\r\n      questionsCount\r\n      answersCount\r\n      active\r\n    }\r\n  }\r\n`\r\nexport const addNewPoll = gql`\r\n  mutation addNewPoll($newPoll: PollWithConfig!, $poolOfQuestions: [QuestionInput], $logic: LogicInput, $topic: [TopicInput]) {\r\n    addPoll(poll: $newPoll, questions: $poolOfQuestions, logic: $logic, topic: $topic) {\r\n      title\r\n    }\r\n  }\r\n`\r\n\r\nexport const deletePoll = gql`\r\n  mutation deletePoll($id: ID!) {\r\n    deletePoll(id: $id) {\r\n      title\r\n    }\r\n  }\r\n`","import React, { Fragment, useState } from 'react'\r\nimport Container from '@material-ui/core/Container'\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport ListOfPolls from '../ListOfPolls'\r\nimport AddFab from \"../../components/AddFab\";\r\nimport AddPollDialog from '../AddPollDialog';\r\n\r\nimport { useQuery } from '@apollo/client'\r\nimport { useMutation } from '@apollo/react-hooks'\r\nimport { addNewPoll, deletePoll, pollsQuery } from \"./queries\"\r\n\r\nconst HomeWrap = () => {\r\n  const [openDialog, setOpenDialog] = useState(false)\r\n  const { loading, error, data, refetch } = useQuery(pollsQuery)\r\n  const [addPoll, { newPoll }] = useMutation(addNewPoll, {\r\n    onCompleted: () => refetch()\r\n  })\r\n  const [delPoll, { poll }] = useMutation(deletePoll, {\r\n    onCompleted: () => refetch()\r\n  })\r\n\r\n  const openPollDialog = () => {\r\n    setOpenDialog(true)\r\n  }\r\n\r\n  const closeDialog = () => {\r\n    setOpenDialog(false)\r\n  }\r\n\r\n  const handlePollDel = (id) => {\r\n    delPoll({\r\n      variables: {\r\n        id\r\n      }\r\n    })\r\n  }\r\n\r\n  const saveNewPoll = (data) => {\r\n    const xmlFile = data.xmlfile\r\n    if (xmlFile.size) {\r\n      let promise = new Promise((resolve, reject) => {\r\n        resolve(xmlParse(xmlFile))\r\n      })\r\n      promise.then(result => {\r\n        const basicData = basicLogicFormation(result)\r\n        const pollInfo = {\r\n          title: data.title,\r\n          startDate: data.startdate,\r\n          endDate: data.enddate,\r\n          code: data.code,\r\n          sample: data.sample,\r\n          type: data.type,\r\n          way: data.way,\r\n          comment: data.comment\r\n        }\r\n        const xmlFile = data.xmlfile\r\n        addPoll({\r\n          variables: {\r\n            newPoll: {\r\n              ...pollInfo,\r\n              comment: pollInfo.comment ? pollInfo.comment : \"\",\r\n              shortTitle: '',\r\n              active: true\r\n            },\r\n            poolOfQuestions: basicData.questions,\r\n            logic: {\r\n              ...basicData.logic,\r\n              exclude: ['']\r\n            },\r\n            topic: basicData.topic\r\n          }\r\n        })\r\n      })\r\n    }\r\n  }\r\n\r\n  const xmlParse = (file) => {\r\n    let result = {\r\n      questions: [],\r\n      logic: [],\r\n      topic: []\r\n    }\r\n    let reader = new FileReader();\r\n    return new Promise((resolve, reject) => {\r\n      reader.onloadend = () => {\r\n        const xmlText = reader.result\r\n        const parser = new DOMParser();\r\n        const doc = parser.parseFromString(xmlText, 'text/xml');\r\n        const questions = doc.getElementsByTagName('vopros')\r\n        const questionsLen = questions.length\r\n        for (let i = 0; i < questionsLen; i++) {\r\n          let questionData = {\r\n            title: questions[i].getAttribute('text'),\r\n            topic: +questions[i].getAttribute('tema_id'),\r\n            limit: +questions[i].getAttribute('limit'),\r\n            type: +questions[i].getAttribute('type_id'),\r\n            order: +questions[i].getAttribute('sort'),\r\n            answers: []\r\n          }\r\n          const questionAnswers = questions[i].getElementsByTagName('otvet')\r\n          const answersLen = questionAnswers.length\r\n          for (let i = 0; i < answersLen; i++) {\r\n            const answerData = {\r\n              title: questionAnswers[i].getAttribute('otvet_text'),\r\n              code: questionAnswers[i].getAttribute('otvet_cod').padStart(3, \"0\"),\r\n              type: +questionAnswers[i].getAttribute('otvet_type'),\r\n              order: +questionAnswers[i].getAttribute('otvet_sort')\r\n            }\r\n            questionData.answers[i] = answerData\r\n          }\r\n          result.questions[i] = questionData\r\n        }\r\n        const defaultLogic = doc.getElementsByTagName('restrict')\r\n        const logicLen = defaultLogic.length\r\n        if (logicLen) {\r\n          let logicData = []\r\n          for (let i = 0; i < logicLen; i++) {\r\n            const logic = {\r\n              code: defaultLogic[i].getAttribute('otvet_cod').padStart(3, \"0\"),\r\n              restrict: defaultLogic[i].getAttribute('restrict_cod').padStart(3, \"0\"),\r\n              type: defaultLogic[i].getAttribute('restrict_type')\r\n            }\r\n            logicData[i] = logic\r\n          }\r\n          result.logic = logicData\r\n        }\r\n        const topics = doc.getElementsByTagName('tema')\r\n        const topicsLen = topics.length\r\n        if (topicsLen) {\r\n          for (let i = 0; i < topicsLen; i++) {\r\n            const topicData = {\r\n              id: topics[i].getAttribute('id'),\r\n              title: topics[i].getAttribute('name')\r\n            }\r\n            result.topic[i] = topicData\r\n          }\r\n        }\r\n        resolve(result)\r\n      }\r\n      reader.readAsText(file);\r\n    })\r\n  }\r\n\r\n  const basicLogicFormation = (data) => {\r\n    const logic = data.logic.reduce((acum, val, i) => {\r\n      if (val.type === '3') {\r\n        if (!acum.exclude[val.code]) {\r\n          acum.exclude[val.code] = { restrict: [val.restrict] }\r\n        } else {\r\n          acum.exclude[val.code] = {\r\n            restrict: [\r\n              ...acum.exclude[val.code].restrict,\r\n              val.restrict\r\n            ]\r\n          }\r\n        }\r\n      } else if (val.type === '5') {\r\n        acum.unique = [...acum.unique, val.code]\r\n      }\r\n      return acum\r\n    }, {\r\n      unique: [],\r\n      exclude: {}\r\n    })\r\n    const extLogic = data.questions.reduce((acum, val) => {\r\n      if (val.limit > 1) {\r\n        acum.diffUniq = [\r\n          ...acum.diffUniq,\r\n          ...val.answers.filter(obj => obj.type === 3).map(obj => obj.code)\r\n        ]\r\n      }\r\n      acum.difficult = [\r\n        ...acum.difficult,\r\n        ...val.answers.filter(obj => obj.type === 3).map(obj => obj.code)\r\n      ]\r\n      acum.freeAnswers = [\r\n        ...acum.freeAnswers,\r\n        ...val.answers.filter(obj => obj.type === 2).map(obj => obj.code)\r\n      ]\r\n      return acum\r\n    }, {\r\n      difficult: [],\r\n      diffUniq: [],\r\n      freeAnswers: []\r\n    })\r\n    data.logic = {\r\n      ...logic,\r\n      ...extLogic\r\n    }\r\n    console.log(data);\r\n    return data\r\n  }\r\n\r\n  if (loading) return (\r\n    <Fragment>\r\n      <CircularProgress />\r\n      <p>Загрузка. Подождите пожалуйста</p>\r\n    </Fragment>\r\n  )\r\n\r\n  if (error) return <p>Error :(</p>;\r\n\r\n  return (\r\n    <Fragment>\r\n      <Container maxWidth=\"md\">\r\n        <ListOfPolls data={data} handlePollDel={handlePollDel} />\r\n      </Container>\r\n      <AddPollDialog open={openDialog} saveHndl={saveNewPoll} closeHndl={closeDialog} />\r\n      <AddFab onClick={openPollDialog} />\r\n    </Fragment>\r\n  )\r\n}\r\n\r\nexport default HomeWrap","import React, { Fragment } from 'react'\r\n\r\nimport HomeBar from '../components/HomeBar'\r\nimport HomeWrap from '../containers/HomeWrap'\r\n\r\nconst Drive = () => {\r\n\r\n  return (\r\n    <Fragment>\r\n      <HomeBar title={\"Опросы\"} />\r\n      <HomeWrap />\r\n    </Fragment>\r\n  )\r\n}\r\n\r\nexport default Drive","import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport AppsIcon from '@material-ui/icons/Apps';\r\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\r\nimport { NavLink } from 'react-router-dom'\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  grow: {\r\n    flexGrow: 1,\r\n  },\r\n  menuButton: {\r\n    marginRight: theme.spacing(2),\r\n    textDecoration: 'none'\r\n  },\r\n  title: {\r\n    display: 'none',\r\n    [theme.breakpoints.up('xs')]: {\r\n      display: 'block',\r\n    },\r\n  },\r\n  inputRoot: {\r\n    color: 'inherit',\r\n  },\r\n  sectionDesktop: {\r\n    display: 'flex'\r\n  },\r\n  sectionMobile: {\r\n    display: 'flex',\r\n    [theme.breakpoints.up('sm')]: {\r\n      display: 'none',\r\n    },\r\n  },\r\n  arrow: {\r\n    color: 'white',\r\n    textDecoration: 'none'\r\n  }\r\n}));\r\n\r\nconst SettingBar = ({ title }) => {\r\n  const classes = useStyles();\r\n  const [appAnchorEl, setAppAnchorEl] = React.useState(null);\r\n  const isAppMenuOpen = Boolean(appAnchorEl);\r\n\r\n  const handleAppsMenuOpen = (event) => {\r\n    setAppAnchorEl(event.currentTarget);\r\n  };\r\n  const handleAppMenuClose = () => {\r\n    setAppAnchorEl(null);\r\n  }\r\n\r\n  const appsMenuId = 'primary-apps-menu';\r\n\r\n  const renderAppsMenu = (\r\n    <Menu\r\n      anchorEl={appAnchorEl}\r\n      anchorOrigin={{ vertical: 'top', horizontal: 'right' }}\r\n      id={appsMenuId}\r\n      keepMounted\r\n      transformOrigin={{ vertical: 'top', horizontal: 'right' }}\r\n      open={isAppMenuOpen}\r\n      onClose={handleAppMenuClose}\r\n    >\r\n      <MenuItem onClick={handleAppMenuClose}>ПУСТО_1</MenuItem>\r\n      <MenuItem onClick={handleAppMenuClose}>ПУСТО_2</MenuItem>\r\n    </Menu>\r\n  )\r\n\r\n  return (\r\n    <div className={classes.grow}>\r\n      <AppBar position=\"static\">\r\n        <Toolbar>\r\n          <NavLink to=\"/\">\r\n            <IconButton\r\n              edge=\"start\"\r\n              className={classes.menuButton}\r\n              color=\"inherit\"\r\n              aria-label=\"open drawer\"\r\n            >\r\n              <ArrowBackIcon className={classes.arrow} />\r\n            </IconButton>\r\n          </NavLink>\r\n          <Typography className={classes.title} variant=\"h6\" noWrap>\r\n            {title}\r\n          </Typography>\r\n          <div className={classes.grow} />\r\n          <div className={classes.sectionDesktop}>\r\n            <IconButton\r\n              edge=\"end\"\r\n              aria-label=\"apps\"\r\n              aria-controls={appsMenuId}\r\n              aria-haspopup=\"true\"\r\n              onClick={handleAppsMenuOpen}\r\n              color=\"inherit\">\r\n              <AppsIcon />\r\n            </IconButton>\r\n          </div>\r\n        </Toolbar>\r\n      </AppBar>\r\n      {renderAppsMenu}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SettingBar","import React, { useRef, useEffect } from 'react'\r\n\r\nconst FreeAnswer = ({ answer, focusHandler, blurHandler }) => {\r\n  const textInput = useRef(null);\r\n  useEffect(() => {\r\n    if (answer.focus) {\r\n      textInput.current.focus()\r\n    }\r\n    if (answer.freeAnswerText !== '') {\r\n      textInput.current.value = answer.freeAnswerText\r\n    }\r\n  }, [])\r\n\r\n  const handlerInput = (e) => {\r\n    let keyCode = e.keyCode\r\n    if (keyCode === 13) {\r\n      e.currentTarget.blur()\r\n      return\r\n    } else if (keyCode === 27) {\r\n      if (textInput.current.value !== '') {\r\n        textInput.current.value = ''\r\n        return\r\n      }\r\n      e.currentTarget.blur()\r\n      return\r\n    }\r\n  }\r\n\r\n  if (answer.showFreeAnswer) {\r\n    return (\r\n      <input\r\n        className=\"free-answer\"\r\n        type=\"text\"\r\n        ref={textInput}\r\n        data-code={answer.code}\r\n        data-keycode={answer.keyCode}\r\n        placeholder=\"Введите свободный ответ\"\r\n        onKeyUp={handlerInput}\r\n        onFocus={focusHandler}\r\n        onBlur={blurHandler}\r\n      />\r\n    )\r\n  }\r\n  return null\r\n}\r\n\r\nexport default FreeAnswer","import React, { Fragment, useRef } from 'react'\r\nimport FreeAnswer from '../FreeAnswer'\r\nimport FlashOnSharpIcon from '@material-ui/icons/FlashOnSharp';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\n\r\nconst Answer = ({ answer, clickHandler, focusHandler, blurHandler, settings }) => {\r\n  const answerRef = useRef(null)\r\n\r\n  let answerCls = ['answer-wrap']\r\n  let answerTitle = ['answer-title']\r\n  if (answer.selected) {\r\n    answerCls.push('selected')\r\n  }\r\n  if (answer.disabled) {\r\n    answerTitle.push('disabled')\r\n  }\r\n\r\n  const click = () => {\r\n    clickHandler(answerRef.current)\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n      <div onClick={(e) => click(e)}\r\n        className={answerCls.join(' ')}\r\n        ref={answerRef}\r\n        data-code={answer.keyCode} >\r\n        <div className={\"answer-title\"}>\r\n          <span className={\"answer-key\"}>{answer.showIndex}</span>\r\n          <span> </span>\r\n          {settings.codesShow &&\r\n            <span className={\"answer-code\"} >{answer.code}</span>\r\n          }\r\n          <span> - </span>\r\n          <span className={answerTitle.join(' ')}>{answer.title}</span>\r\n          <span>{answer.freeAnswer ? <EditIcon fontSize=\"small\" /> : null}</span>\r\n        </div>\r\n        <div>\r\n          {answer.showFreeAnswer && (\r\n            <FreeAnswer\r\n              answer={answer}\r\n              focus={answer.focus}\r\n              focusHandler={focusHandler}\r\n              blurHandler={blurHandler}\r\n            />\r\n          )}\r\n        </div>\r\n      </div>\r\n    </Fragment>\r\n  )\r\n}\r\nexport default Answer","import React, { useState, useEffect } from 'react';\r\nimport Chip from '@material-ui/core/Chip';\r\nimport Autocomplete from '@material-ui/lab/Autocomplete';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport TextField from '@material-ui/core/TextField';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    width: 500,\r\n    '& > * + *': {\r\n      marginTop: theme.spacing(3),\r\n    },\r\n  },\r\n  errorText: {\r\n    color: 'red'\r\n  }\r\n}));\r\n\r\nexport default function Tags({ data, limit, settings, multipleHandler }) {\r\n  const classes = useStyles();\r\n  const [answers, setAnswers] = useState([])\r\n  const [codes, setCodes] = useState([])\r\n  const [error, setError] = useState({\r\n    state: false,\r\n    text: ''\r\n  })\r\n\r\n  useEffect(() => {\r\n    const defVal = data.filter(val => {\r\n      if (val.selected) return val\r\n    })\r\n    const codesOfAnswers = data.map(val => val.code)\r\n    setCodes(codesOfAnswers)\r\n    setAnswers(defVal)\r\n  }, [])\r\n\r\n  const handleAnswerSelect = (e, value, reason) => {\r\n    switch (reason) {\r\n      case 'select-option':\r\n        if (value.length > limit) {\r\n          setError({ state: true, text: 'Максимальное количество ответов' })\r\n          return\r\n        }\r\n        setAnswers(value)\r\n        setError({ ...error, state: false })\r\n        break\r\n      case 'remove-option':\r\n        setAnswers(value)\r\n        setError({ ...error, state: false })\r\n        break\r\n      case 'clear':\r\n        setAnswers([])\r\n        setError({ ...error, state: false })\r\n        break\r\n      default:\r\n        break\r\n    }\r\n  }\r\n\r\n  const blurHandler = (e) => {\r\n    setError({ ...error, state: false })\r\n    multipleHandler(answers, codes)\r\n  }\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Autocomplete\r\n        multiple={limit > 1}\r\n        id=\"tags-standard\"\r\n        options={data}\r\n        onChange={handleAnswerSelect}\r\n        value={answers}\r\n        getOptionLabel={(option) => option.title}\r\n        getOptionDisabled={(option) => option.disabled}\r\n        renderOption={(option) => {\r\n          if (settings.codesShow) {\r\n            return <span><span style={{ fontSize: '10px' }}>{option.code}</span> - {option.title}</span>\r\n          }\r\n          return option.title\r\n        }}\r\n        onBlur={blurHandler}\r\n        renderTags={(value, getTagProps) =>\r\n          value.map((option, index) => (\r\n            <Chip\r\n              {...getTagProps({ index })}\r\n              variant=\"outlined\"\r\n              key={index}\r\n              label={settings.codesShow ?\r\n                <span><span style={{ fontSize: '10px' }}>{option.code}</span> - {option.title}</span> :\r\n                <span>{option.title}</span>\r\n              }\r\n            />\r\n          ))\r\n        }\r\n        renderInput={(params) => (\r\n          <TextField\r\n            {...params}\r\n            error={error.state}\r\n            variant=\"standard\"\r\n            label=\"Выберите ответы\"\r\n            helperText={error.state ? error.text : ''}\r\n          />\r\n        )}\r\n      />\r\n    </div>\r\n  );\r\n}","import React, { Fragment, useState } from 'react'\r\nimport Answer from \"../Answer\";\r\nimport Tags from '../MultipleAnswers'\r\n\r\nconst Question = ({ count, question, clickHandler, focusHandler, blurHandler, multipleHandler, settings }) => {\r\n  function FlatAnswer() {\r\n    return (\r\n      question.answers.map((answer, i) => (\r\n        <Answer key={i} answer={answer}\r\n          clickHandler={clickHandler}\r\n          focusHandler={focusHandler}\r\n          blurHandler={blurHandler}\r\n          settings={settings}\r\n        />\r\n      )))\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n      <h3 className={\"question-title\"} >\r\n        <span className={\"question-number\"}>{count + 1}</span>\r\n        <span> - </span>\r\n        {question.title}</h3>\r\n      <div>{\r\n        !question.mega ?\r\n          question.answers.map((answer, i) => (\r\n            <Answer key={i} answer={answer}\r\n              clickHandler={clickHandler}\r\n              focusHandler={focusHandler}\r\n              blurHandler={blurHandler}\r\n              settings={settings}\r\n            />\r\n          )) : <Tags data={question.answers} limit={question.limit} settings={settings} multipleHandler={multipleHandler} />\r\n      }\r\n      </div>\r\n    </Fragment>\r\n  )\r\n}\r\nexport default Question","export const serviceBtns = [\r\n  8, 9, 16, 17, 18, 19, 20, 32,\r\n  33, 34, 35, 36, 38, 40, 91, 106,\r\n  107, 109, 110, 112, 113, 114, 115,\r\n  116, 117, 118, 119, 120, 121, 122, 123, 144\r\n];\r\n\r\nexport const resetBtn = [\r\n  27\r\n]\r\n\r\nexport const confirmBtns = [\r\n  48,\r\n  96,\r\n  13\r\n];\r\n\r\nexport const castCodes = {\r\n  97: 49,\r\n  98: 50,\r\n  99: 51,\r\n  100: 52,\r\n  101: 53,\r\n  102: 54,\r\n  103: 55,\r\n  104: 56,\r\n  105: 57\r\n};\r\n\r\nexport const answersCodes = [\r\n  37,\r\n  39,\r\n  49,\r\n  50,\r\n  51,\r\n  52,\r\n  53,\r\n  54,\r\n  55,\r\n  56,\r\n  57,\r\n  81,\r\n  87,\r\n  69,\r\n  82,\r\n  84,\r\n  89,\r\n  85,\r\n  73,\r\n  79,\r\n  80,\r\n  65,\r\n  83,\r\n  68,\r\n  70,\r\n  71,\r\n  72,\r\n  74,\r\n  75,\r\n  76,\r\n  90,\r\n  88,\r\n  67,\r\n  97,\r\n  98,\r\n  99,\r\n  100,\r\n  101,\r\n  102,\r\n  103,\r\n  104,\r\n  105\r\n]\r\n\r\nexport const keycodes = [\r\n  ['1', 49],\r\n  ['2', 50],\r\n  ['3', 51],\r\n  ['4', 52],\r\n  ['5', 53],\r\n  ['6', 54],\r\n  ['7', 55],\r\n  ['8', 56],\r\n  ['9', 57],\r\n  ['Q', 81],\r\n  ['W', 87],\r\n  ['E', 69],\r\n  ['R', 82],\r\n  ['T', 84],\r\n  ['Y', 89],\r\n  ['U', 85],\r\n  ['I', 73],\r\n  ['O', 79],\r\n  ['P', 80],\r\n  ['A', 65],\r\n  ['S', 83],\r\n  ['D', 68],\r\n  ['F', 70],\r\n  ['G', 71],\r\n  ['H', 72],\r\n  ['J', 74],\r\n  ['K', 75],\r\n  ['L', 76],\r\n  ['Z', 90],\r\n  ['X', 88],\r\n  ['C', 67]\r\n];","import { castCodes, serviceBtns, resetBtn, confirmBtns, answersCodes } from './keycodes'\r\n\r\n// приведение клавиш доп.клавиатуры к кодам основной цифровой клавиатуры\r\nfunction cast(keyCode) {\r\n  if (castCodes[keyCode] !== undefined) return castCodes[keyCode];\r\n  return keyCode;\r\n}\r\n\r\nfunction checkAnswerSelected(keyCode) {\r\n  return answersCodes.includes(keyCode)\r\n}\r\n\r\nfunction checkResetBtn(keyCode) {\r\n  return resetBtn.includes(keyCode)\r\n\r\n}\r\n\r\nfunction checkConfirmBtn(keyCode) {\r\n  return confirmBtns.includes(keyCode)\r\n}\r\n\r\nfunction checkServiceBtn(keyCode) {\r\n  return serviceBtns.includes(keyCode)\r\n}\r\n\r\nconst defineSelectedAnswer = (keyCode) => {\r\n  if (checkAnswerSelected(keyCode)) {\r\n    return {\r\n      do: 1,\r\n      trueCode: cast(keyCode)\r\n    }\r\n  }\r\n  if (checkServiceBtn(keyCode)) {\r\n    return {\r\n      do: 4\r\n    }\r\n  }\r\n  if (checkResetBtn(keyCode)) {\r\n    return {\r\n      do: 2\r\n    }\r\n  }\r\n  if (checkConfirmBtn(keyCode)) {\r\n    return {\r\n      do: 3\r\n    }\r\n  }\r\n  return {\r\n    do: 4\r\n  }\r\n}\r\n\r\nexport default defineSelectedAnswer","import { keycodes } from './keycodes'\r\n\r\n// формирует вопрос, на основании логики и ранее сохраненных результатов\r\nconst questionFormation = (poll, count, result, logic, setResults) => {\r\n  const question = poll.questions[count]\r\n  let keyCodesPool = []\r\n\r\n  // проверка на видимость ответа в перечне (ВНЕШНЯЯ ЛОГИКА - видимость)\r\n  const visibleAnswers = logic.invisible ? question.answers.filter(obj => !logic.invisible.includes(obj.code))\r\n    : question.answers\r\n\r\n  // массив для проверrи на уникальность\r\n  const arrayOfBlockedCodes = []\r\n  // const arrayOfBlockedCodes = logic.criticalExclude.reduce((acum, val) => [...acum, ...val.explPool], [])\r\n\r\n  let newAnswers = visibleAnswers.map((obj, i) => {\r\n    // надстройка для объекта - ответ\r\n    let suffix = {\r\n      freeAnswer: false,\r\n      showFreeAnswer: false,\r\n      freeAnswerText: '',\r\n      focus: false,\r\n      selected: false,\r\n      disabled: false\r\n    }\r\n    if (visibleAnswers.length > keycodes.length) {\r\n      keyCodesPool[i] = [i, i + 1]\r\n    } else {\r\n      keyCodesPool[i] = keycodes[i][1]\r\n      suffix = {\r\n        ...suffix,\r\n        showIndex: keycodes[i][0],\r\n        keyCode: keycodes[i][1],\r\n      }\r\n    }\r\n    // восстанавливаем ответы !\r\n    if (result.pool.includes(obj.code)) {\r\n      suffix = {\r\n        ...suffix,\r\n        selected: true\r\n      }\r\n    }\r\n    // проверка на блокировку ответа (ВНЕШНЯЯ ЛОГИКА - уникальность)\r\n    if (arrayOfBlockedCodes.includes(obj.code)) {\r\n      suffix = {\r\n        ...suffix,\r\n        disabled: true\r\n      }\r\n    }\r\n    // проверка на свободный ответ (ВНЕШНЯЯ ЛОГИКА - свободный ответ)\r\n    if (logic.freeAnswers.includes(obj.code)) {\r\n      suffix = {\r\n        ...suffix,\r\n        freeAnswer: true,\r\n        focus: true\r\n      }\r\n    }\r\n    if (result[question.id]) {\r\n      let data = result[question.id].data\r\n      for (let i = 0; i < data.length; i++) {\r\n        if (obj.code === data[i].answerCode && data[i].freeAnswerText !== '') {\r\n          suffix = {\r\n            ...suffix,\r\n            freeAnswer: true,\r\n            showFreeAnswer: true,\r\n            freeAnswerText: data[i].freeAnswerText,\r\n            focus: false\r\n          }\r\n        }\r\n      }\r\n    }\r\n    const resultQ = { ...obj, ...suffix }\r\n    return resultQ\r\n  })\r\n\r\n  // надстройка для объекта - вопрос\r\n  let qSuffix = {\r\n    mega: false,\r\n    megaMltp: false,\r\n    multiple: false                                      // много возможных ответов\r\n  }\r\n\r\n  if (question.limit > 1) {\r\n    qSuffix = {\r\n      ...qSuffix,\r\n      multiple: true\r\n    }\r\n  }\r\n\r\n  // проверка сколько всего ответов в вопросе -> если много, то формируем multiple select\r\n  if (visibleAnswers.length > keycodes.length) {\r\n    qSuffix = {\r\n      ...qSuffix,\r\n      mega: true,\r\n      megaMltp: question.limit\r\n    }\r\n  } else {\r\n    qSuffix = {\r\n      ...qSuffix,\r\n      keyCodesPool\r\n    }\r\n  }\r\n\r\n  if (result[question.id] === undefined) {\r\n    setResults(prevState => ({\r\n      ...prevState,\r\n      [question.id]: {\r\n        data: [],\r\n        skip: false\r\n      }\r\n    }))\r\n  }\r\n  const data = {\r\n    ...question,\r\n    ...qSuffix,\r\n    answers: newAnswers,\r\n\r\n  }\r\n  // console.log(data);\r\n  return {\r\n    next: false,\r\n    data\r\n  }\r\n}\r\n\r\nexport default questionFormation","const beep = (config) => {\r\n  let audioCtx = new (window.AudioContext || window.webkitAudioContext)();\r\n  config = Object.assign({\r\n    volume: 25 / 100,\r\n    frequency: 3020,\r\n    duration: 150,\r\n    type: 'sine'\r\n  }, config);\r\n\r\n  let oscillator = audioCtx.createOscillator();\r\n  let gainNode = audioCtx.createGain();\r\n  oscillator.connect(gainNode);\r\n  gainNode.connect(audioCtx.destination);\r\n  gainNode.gain.value = config.volume;\r\n  oscillator.frequency.value = config.frequency;\r\n  oscillator.type = config.type;\r\n  oscillator.start();\r\n  setTimeout(\r\n    function () {\r\n      oscillator.stop();\r\n    },\r\n    config.duration\r\n  );\r\n}\r\nexport default beep","import React, { Fragment, useEffect, useState } from 'react'\r\nimport Question from './components/Question'\r\nimport Button from '@material-ui/core/Button';\r\n\r\nimport defineSelectedAnswer from '../../lib/defineSelectedAnswer'\r\nimport questionFormation from '../../lib/questionFormation'\r\nimport beep from '../../lib/beep'\r\n// import { logics } from '../../lib/testLogic'\r\n// import mainLogic from '../../lib/mainLogic'\r\n\r\nconst KEY_TYPE = 'keyup'\r\nconst STEP_DELAY = 200\r\nconst MOVE_DELAY = 0\r\n\r\nconst ANSWER_SELECTED = 1\r\nconst RESET_RESULTS = 2\r\nconst CONFIRM_QUESTION = 3\r\nconst SKIP = 4\r\n\r\nconst PollDrive = ({ poll, logics, mainDiv, setCurrentQuestion }) => {\r\n  const questionsLimit = poll.questions.length\r\n  const [question, setQuestion] = useState(null)\r\n  const [userSettings, setUserSettings] = useState({\r\n    codesShow: true\r\n  })\r\n  const [logic, setLogic] = useState(logics)\r\n  const [count, setCount] = useState(0)\r\n  const [results, setResults] = useState(\r\n    {\r\n      pool: []\r\n    }\r\n  )\r\n  const keyUpHandler = ({ target, keyCode }) => {\r\n    if (target.nodeName == 'BODY') {\r\n      const nextStep = defineSelectedAnswer(keyCode)\r\n      switch (nextStep.do) {\r\n        case ANSWER_SELECTED: {\r\n          mainLogic(nextStep.trueCode)\r\n          return\r\n        }\r\n        case CONFIRM_QUESTION: {\r\n          confirmResults()\r\n          return\r\n        }\r\n        case RESET_RESULTS: {\r\n          resetAnswers()\r\n          return\r\n        }\r\n        case SKIP: {\r\n          return                                                    // нажата системная клавиша, не относящаяся к опросу\r\n        }\r\n      }\r\n    } else {\r\n      console.log('input');\r\n    }\r\n  }\r\n\r\n  const resetAnswers = () => {\r\n    const savedCodes = results[question.id].data.reduce((acum, val) => [...acum, val.answerCode], [])\r\n    setResults(prevState => ({\r\n      ...prevState,\r\n      [question.id]: {\r\n        ...prevState[question.id],\r\n        data: []\r\n      },\r\n      pool: prevState.pool.filter(obj => {\r\n        return savedCodes.includes(obj) ? false : true\r\n      })\r\n    }))\r\n    setQuestion(prevState => ({\r\n      ...prevState,\r\n      answers: prevState.answers.map(\r\n        answer => true ? { ...answer, selected: false, showFreeAnswer: false } : answer\r\n      )\r\n    }))\r\n    const arrayOfCodes = question.answers.reduce((acum, val) => [...acum, val.code], [])\r\n    // обновить логику и проверить запрещенные ответы для данного вопроса для их перерисовки!!!!!!\r\n    const arrayToCheck = logic.criticalExclude\r\n      .filter(obj => !arrayOfCodes.includes(obj.code))\r\n      .reduce((acum, val) => [...acum, ...val.explPool], [])\r\n    // если осталось что проверять\r\n    if (arrayToCheck.length) {\r\n      setQuestion(prevState => ({\r\n        ...prevState,\r\n        answers: prevState.answers.map(\r\n          answer => arrayToCheck.includes(answer.code) ? answer : { ...answer, disabled: false }\r\n        )\r\n      }))\r\n    } else {\r\n      // снимаем все ограничения с текущих ответов\r\n      setQuestion(prevState => ({\r\n        ...prevState,\r\n        answers: prevState.answers.map(\r\n          answer => ({ ...answer, disabled: false })\r\n        )\r\n      }))\r\n    }\r\n    // изменить!!!!!\r\n    setLogic(prevState => ({\r\n      ...prevState,\r\n      criticalExclude: prevState.criticalExclude.filter(obj => !arrayOfCodes.includes(obj.code))\r\n    }))\r\n  }\r\n\r\n  const confirmResults = () => {\r\n    if (results[question.id].data.length) {\r\n      goToNext()\r\n      return\r\n    }\r\n    beep()\r\n  }\r\n\r\n  const mainLogic = (code) => {\r\n    const trueCode = +code\r\n    const keyCodesPool = question.keyCodesPool\r\n    const selectedAnswer = question.answers.filter(obj => obj.keyCode === trueCode)[0]\r\n    // движение по опросу\r\n    if (trueCode === 39) {\r\n      setTimeout(() => {\r\n        goToNext()\r\n      }, MOVE_DELAY)\r\n      return\r\n    } else if (trueCode === 37) {\r\n      setTimeout(() => {\r\n        goToPrevious()\r\n      }, MOVE_DELAY)\r\n      return\r\n    }\r\n\r\n    if (keyCodesPool.includes(trueCode)) {                                  // входит ли код клавиатуры в перечень ответов\r\n      if (results.pool.includes(selectedAnswer.code)) {\r\n        // промежуточные результаты уже содержат выбранный код => удаляем промежуточный результат => обновляем текущий вью\r\n        setResults(prevState => ({\r\n          ...prevState,\r\n          [question.id]: {\r\n            ...prevState[question.id],\r\n            data: prevState[question.id].data.filter(el => el.answerCode !== selectedAnswer.code)\r\n          },\r\n          pool: prevState.pool.filter(el => el !== selectedAnswer.code)\r\n        }))\r\n        setQuestion(prevState => ({\r\n          ...prevState,\r\n          answers: prevState.answers.map(\r\n            answer => answer.code === selectedAnswer.code ? { ...answer, selected: false, showFreeAnswer: false } : answer\r\n          ),\r\n        }))\r\n        // обновить логику и проверить запрещенные ответы для данного вопроса для их перерисовки!!!!!!\r\n        const arrayToCheck = logic.criticalExclude\r\n          .filter(obj => obj.code !== selectedAnswer.code)\r\n          .reduce((acum, val) => [...acum, ...val.explPool], [])\r\n        // если осталось что проверять\r\n        if (arrayToCheck.length) {\r\n          setQuestion(prevState => ({\r\n            ...prevState,\r\n            answers: prevState.answers.map(\r\n              answer => arrayToCheck.includes(answer.code) ? answer : { ...answer, disabled: false }\r\n            )\r\n          }))\r\n        } else {\r\n          // снимаем все ограничения с текущих ответов\r\n          setQuestion(prevState => ({\r\n            ...prevState,\r\n            answers: prevState.answers.map(\r\n              answer => ({ ...answer, disabled: false })\r\n            )\r\n          }))\r\n        }\r\n        setLogic(prevState => ({\r\n          ...prevState,\r\n          criticalExclude: prevState.criticalExclude.filter(obj => obj.code !== selectedAnswer.code)\r\n        }))\r\n        return\r\n      }\r\n      // проверка на уникальность ответа и выбраннного до этого противоречивого ответа (ВНЕШНЯЯ ЛОГИКА - уникальность)\r\n      if (logic.unique.includes(selectedAnswer.code)) {\r\n        if (results[question.id].data.length) {\r\n          beep()\r\n          return\r\n        }\r\n      }\r\n      // проверка на активность ответа и ограничение по количеству ответов\r\n      if (selectedAnswer.disabled || results[question.id].data.length >= question.limit) {\r\n        beep()\r\n        return\r\n      }\r\n      // проверка на свободный ответ\r\n      if (selectedAnswer.freeAnswer) {\r\n        setQuestion(prevState => ({\r\n          ...prevState,\r\n          answers: prevState.answers.map(\r\n            answer => answer.keyCode === selectedAnswer.keyCode ? { ...answer, selected: true, showFreeAnswer: true } : answer\r\n          )\r\n        }))\r\n        return\r\n      }\r\n      const result = {\r\n        answerCode: selectedAnswer.code,\r\n        freeAnswer: false,\r\n        freeAnswerText: ''\r\n      }\r\n      let newResultState = Object.assign({}, results);\r\n      newResultState[question.id].data.push(result)\r\n      newResultState.pool.push(selectedAnswer.code)\r\n      setResults(newResultState)\r\n\r\n      setQuestion(prevState => ({\r\n        ...prevState,\r\n        answers: prevState.answers.map(\r\n          answer => answer.keyCode === trueCode ? { ...answer, selected: true } : answer\r\n        ),\r\n      }))\r\n      // проверить на уникальность (ВНЕШНЯЯ ЛОГИКА - уникальность) -> запретить другие ответы\r\n      if (logic.unique.includes(selectedAnswer.code)) {\r\n        setQuestion(prevState => ({\r\n          ...prevState,\r\n          answers: prevState.answers.map(\r\n            answer => answer.keyCode === trueCode ? answer : { ...answer, disabled: true }\r\n          )\r\n        }))\r\n        const poolOfExcludedCodes = question.answers.filter(answer => answer.code !== selectedAnswer.code).map(answer => answer.code)\r\n        setLogic(prevState => ({\r\n          ...prevState,\r\n          criticalExclude: [\r\n            ...prevState.criticalExclude,\r\n            { code: selectedAnswer.code, explPool: poolOfExcludedCodes }\r\n          ]\r\n        }))\r\n      }\r\n      // проверка на ЛИМИТ\r\n      if (results[question.id].data.length >= question.limit) {\r\n        // переходим дальше\r\n        setTimeout(() => {\r\n          goToNext()\r\n        }, STEP_DELAY)\r\n        return\r\n      }\r\n    } else {\r\n      beep()\r\n    }\r\n  }\r\n\r\n  const goToNext = () => {\r\n    if (count < questionsLimit - 1) {\r\n      setCount(count + 1)\r\n    } else {\r\n      setCount(0)\r\n    }\r\n  }\r\n\r\n  const goToPrevious = () => {\r\n    if (count === 0) return\r\n    setCount(count - 1)\r\n  }\r\n\r\n  useEffect(() => {\r\n    document.addEventListener(KEY_TYPE, keyUpHandler)\r\n    return () => {\r\n      document.removeEventListener(KEY_TYPE, keyUpHandler)\r\n    };\r\n  })\r\n\r\n  // Кнопка с треброванием выдать ID и сохранить !!!!!!!!!!!!!!!!!!!!!!!!\r\n\r\n  useEffect(() => {\r\n    // первичная инициализация, наложение логики и сохранение в стор следующего вопроса + восстановление промежуточных итогов\r\n    const newQuestion = questionFormation(poll, count, results, logic, setResults);\r\n    if (!newQuestion) return\r\n    if (newQuestion.next) {\r\n      setResults(prevState => ({\r\n        ...prevState\r\n      }))\r\n      // все ответы забанены\r\n      // ???????????????????\r\n      setCount(count + 1)\r\n      return\r\n    }\r\n    setQuestion(newQuestion.data)\r\n    setCurrentQuestion(newQuestion.data)\r\n  }, [count])\r\n\r\n  const clickHandler = (target) => {\r\n    const code = target.dataset.code\r\n    const selectedAnswer = question.answers.filter(obj => obj.keyCode === +code)[0]\r\n    // проверка, если поле со свободным ответом необходимо отредактировать\r\n    if (selectedAnswer.freeAnswer && selectedAnswer.selected) {\r\n      return\r\n    }\r\n    mainLogic(code)\r\n  }\r\n\r\n  const blurHandler = (e) => {\r\n    const value = e.currentTarget.value\r\n    const selectedCode = e.currentTarget.dataset.code\r\n    const selectedKeyCode = e.currentTarget.dataset.keycode\r\n    if (value === '') {\r\n      // пустое поле не позволительно -> стираем из промежуточного результата и обновляем вью\r\n      setResults(prevState => ({\r\n        ...prevState,\r\n        [question.id]: {\r\n          ...prevState[question.id],\r\n          data: prevState[question.id].data.filter(el => el.answerCode !== selectedCode)\r\n        },\r\n        pool: prevState.pool.filter(el => el !== selectedCode)\r\n      }))\r\n      setQuestion(prevState => ({\r\n        ...prevState,\r\n        answers: prevState.answers.map(\r\n          answer => answer.code === selectedCode ? { ...answer, selected: false, showFreeAnswer: false } : answer\r\n        )\r\n      }))\r\n      const arrayToCheck = logic.criticalExclude\r\n        .filter(obj => obj.code !== selectedCode)\r\n        .reduce((acum, val) => [...acum, ...val.explPool], [])\r\n      // если осталось что проверять\r\n      if (arrayToCheck.length) {\r\n        setQuestion(prevState => ({\r\n          ...prevState,\r\n          answers: prevState.answers.map(\r\n            answer => arrayToCheck.includes(answer.code) ? answer : { ...answer, disabled: false }\r\n          )\r\n        }))\r\n      } else {\r\n        // снимаем все ограничения с текущих ответов\r\n        setQuestion(prevState => ({\r\n          ...prevState,\r\n          answers: prevState.answers.map(\r\n            answer => ({ ...answer, disabled: false })\r\n          )\r\n        }))\r\n      }\r\n      setLogic(prevState => ({\r\n        ...prevState,\r\n        criticalExclude: prevState.criticalExclude.filter(obj => obj.code !== selectedCode)\r\n      }))\r\n      return\r\n    }\r\n    // поле не пустое -> сохраняем результат\r\n    const result = {\r\n      answerCode: selectedCode,\r\n      freeAnswer: false,\r\n      freeAnswerText: value\r\n    }\r\n    if (results.pool.includes(selectedCode)) {\r\n      setResults(prevState => ({\r\n        ...prevState,\r\n        [question.id]: {\r\n          ...prevState[question.id],\r\n          data: prevState[question.id].data.map(\r\n            answer => answer.answerCode === selectedCode ? { ...answer, freeAnswerText: value } : answer\r\n          )\r\n        },\r\n        pool: [\r\n          ...prevState.pool,\r\n          selectedCode\r\n        ]\r\n      }))\r\n    } else {\r\n      setResults(prevState => ({\r\n        ...prevState,\r\n        [question.id]: {\r\n          ...prevState[question.id],\r\n          data: [\r\n            ...prevState[question.id].data,\r\n            result\r\n          ]\r\n        },\r\n        pool: [\r\n          ...prevState.pool,\r\n          selectedCode\r\n        ]\r\n      }))\r\n    }\r\n    // проверить на уникальность (ВНЕШНЯЯ ЛОГИКА - уникальность) -> запретить другие ответы\r\n    if (logic.unique.includes(selectedCode)) {\r\n      setQuestion(prevState => ({\r\n        ...prevState,\r\n        answers: prevState.answers.map(\r\n          answer => answer.keyCode === +selectedKeyCode ? answer : { ...answer, disabled: true }\r\n        )\r\n      }))\r\n      const poolOfExcludedCodes = question.answers.filter(answer => answer.code !== selectedCode).map(answer => answer.code)\r\n      setLogic(prevState => ({\r\n        ...prevState,\r\n        criticalExclude: [\r\n          ...prevState.criticalExclude,\r\n          { code: selectedCode, explPool: poolOfExcludedCodes }\r\n        ]\r\n      }))\r\n    }\r\n\r\n    if (results[question.id].data.length >= question.limit - 1) {         // -1 т.к. не успевает обновится стейт\r\n      setTimeout(() => {\r\n        goToNext()\r\n      }, STEP_DELAY)\r\n    }\r\n  }\r\n\r\n  const codesShow = (e) => {\r\n    setUserSettings(prevState => ({\r\n      ...prevState,\r\n      codesShow: !prevState.codesShow\r\n    }))\r\n  }\r\n\r\n  const multipleHandler = (value, codes) => {\r\n    console.log(value, codes);\r\n    if (value.length) {\r\n      const codesPool = value.map(val => val.code)\r\n      const resultsPool = value.map(val => {\r\n        return {\r\n          answerCode: val.code,\r\n          // keyCode: val.keyCode,\r\n          freeAnswer: false,\r\n          freeAnswerText: ''\r\n        }\r\n      })\r\n      const clearPool = results.pool.filter(val => !codes.includes(val))\r\n      setResults(prevState => ({\r\n        ...prevState,\r\n        [question.id]: {\r\n          ...prevState[question.id],\r\n          data: [\r\n            ...resultsPool\r\n          ]\r\n        },\r\n        pool: [\r\n          ...clearPool,\r\n          ...codesPool\r\n        ]\r\n      }))\r\n      if (value.length) {\r\n        setTimeout(() => {\r\n          goToNext()\r\n        }, STEP_DELAY)\r\n      }\r\n      return\r\n    }\r\n    setResults(prevState => ({\r\n      ...prevState,\r\n      [question.id]: {\r\n        ...prevState[question.id],\r\n        data: []\r\n      },\r\n      pool: prevState.pool.filter(obj => !codes.includes(obj))\r\n    }))\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n      <label>\r\n        <input type=\"checkbox\" onChange={codesShow} defaultChecked={userSettings.codesShow} />\r\n        Показывать коды ответов\r\n      </label>\r\n      {question &&\r\n        <Question\r\n          count={count}\r\n          question={question}\r\n          settings={userSettings}\r\n          clickHandler={clickHandler}\r\n          blurHandler={blurHandler}\r\n          multipleHandler={multipleHandler}\r\n        />\r\n      }\r\n      <Button onClick={goToPrevious} variant=\"contained\" style={{ margin: '5px' }}>Назад</Button>\r\n      <Button onClick={goToNext} variant=\"contained\" style={{ margin: '5px' }}>Вперед</Button>\r\n    </Fragment>\r\n  )\r\n}\r\n\r\nexport default PollDrive","import React, { useState } from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Select from '@material-ui/core/Select';\r\n\r\nexport default function CityDialog({ open, handleClose, save, cities }) {\r\n  const [state, setState] = useState(\"\")\r\n  const handleChange = (e) => {\r\n    const { options, selectedIndex, value } = e.target;\r\n    const id = value\r\n    const title = options[selectedIndex].innerHTML\r\n    setState({\r\n      id,\r\n      title\r\n    })\r\n  }\r\n\r\n  const handleSave = () => {\r\n    save(state)\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Dialog open={open} aria-labelledby=\"form-dialog-title\">\r\n        <DialogTitle id=\"form-dialog-title\">ГОРОД</DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText>\r\n            Выберите город в котором проводился опрос\r\n          </DialogContentText>\r\n          <Select\r\n            fullWidth\r\n            native\r\n            value={state.id}\r\n            onChange={e => handleChange(e)}\r\n          >\r\n            <option aria-label=\"None\" disabled selected value=\"\" />\r\n            {cities.map((city, i) =>\r\n              <option key={i} value={city.id}>{city.title}</option>\r\n            )}\r\n          </Select>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleClose} color=\"primary\">\r\n            Отмена\r\n          </Button>\r\n          <Button onClick={handleSave} disabled={!Boolean(state)} color=\"primary\">\r\n            Сохранить\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import { gql } from '@apollo/client'\r\n\r\nexport const pollDataQuery = gql`\r\n  query pollsQuery($id: ID!) {\r\n    poll(id: $id) {\r\n      id\r\n      questions{\r\n        id\r\n        title\r\n        limit\r\n        answers {\r\n          id\r\n          code\r\n          title\r\n        }\r\n      }\r\n      logic {\r\n        diffUniq\r\n        difficult\r\n        exclude\r\n        freeAnswers\r\n        unique\r\n      }\r\n    }\r\n  }\r\n`\r\n\r\nexport const citiesQuery = gql`\r\n  query citiesQ {\r\n    cities {\r\n      id\r\n      title\r\n    }\r\n  }\r\n`","import React, { Fragment, useState, useRef } from 'react'\r\nimport Container from '@material-ui/core/Container'\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\nimport PollDrive from \"../../modules/PollDrive\";\r\nimport CityDialog from '../../components/CityDialog';\r\nimport { useQuery } from '@apollo/client'\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { pollDataQuery, citiesQuery } from \"./queries\"\r\n\r\nconst DriveWrap = ({ id }) => {\r\n  const mainDiv = useRef(null);\r\n  const history = useHistory();\r\n  const [poll, setPoll] = useState(null)\r\n  const [poolOfCities, setPoolOfCities] = useState(null)\r\n  const [openCityDialog, setOpenCityDialog] = useState(true);\r\n  const [logic, setPollLogic] = useState(null)\r\n  const [currentCity, setCurrentCity] = useState(null)\r\n  const [currentQuestion, setCurrentQuestion] = useState({\r\n    'multiple': false\r\n  })\r\n  const { pollLoading, error, data } = useQuery(pollDataQuery, {\r\n    variables: { id },\r\n    onCompleted: (data) => {\r\n      setPoll({\r\n        id: data.poll.id,\r\n        questions: data.poll.questions\r\n      })\r\n      setPollLogic({\r\n        ...data.poll.logic[0],\r\n        criticalExclude: []\r\n      })\r\n    }\r\n  })\r\n  const { citiesLoading, cError, cData } = useQuery(citiesQuery, {\r\n    onCompleted: (cData) => {\r\n      setPoolOfCities(cData.cities)\r\n      console.log(cData);\r\n    }\r\n  })\r\n\r\n  if (!poll || !poolOfCities) return (\r\n    <Fragment>\r\n      <CircularProgress />\r\n      <p>Загрузка. Подождите пожалуйста</p>\r\n    </Fragment>\r\n  )\r\n\r\n  if (error || cError) return <p>Error :(</p>;\r\n\r\n  const saveCity = (city) => {\r\n    setCurrentCity(city)\r\n    setOpenCityDialog(false)\r\n  }\r\n\r\n  const closeDialog = () => {\r\n    setOpenCityDialog(false)\r\n    history.push(\"/\");\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n      <div style={{ backgroundColor: currentQuestion.multiple ? 'rgb(208 226 252)' : '#fff' }}>\r\n        <Container maxWidth=\"md\">\r\n          <CityDialog open={openCityDialog} cities={poolOfCities} save={saveCity} handleClose={closeDialog} />\r\n          <PollDrive poll={poll} logics={logic} mainDiv={mainDiv} setCurrentQuestion={setCurrentQuestion} />\r\n        </Container>\r\n      </div>\r\n    </Fragment>\r\n  )\r\n}\r\n\r\nexport default DriveWrap","import React, { Fragment } from 'react'\r\nimport { useParams } from 'react-router-dom'\r\n\r\nimport SettingBar from '../components/SettingBar'\r\nimport DriveWrap from \"../containers/DriveWrap\";\r\n\r\nconst Drive = () => {\r\n  let { id, code } = useParams();\r\n\r\n  return (\r\n    <Fragment>\r\n      <SettingBar title={`Опрос ` + code + ` - вбивание`} />\r\n      <DriveWrap id={id}/>\r\n    </Fragment>\r\n  )\r\n}\r\n\r\nexport default Drive","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Box from '@material-ui/core/Box';\r\n\r\nfunction TabPanel(props) {\r\n  const { children, value, index, ...other } = props;\r\n\r\n  return (\r\n    <div\r\n      role=\"tabpanel\"\r\n      hidden={value !== index}\r\n      id={`vertical-tabpanel-${index}`}\r\n      aria-labelledby={`vertical-tab-${index}`}\r\n      {...other}\r\n    >\r\n      {value === index && (\r\n        <Box p={3}>\r\n          <Typography>{children}</Typography>\r\n        </Box>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nTabPanel.propTypes = {\r\n  children: PropTypes.node,\r\n  index: PropTypes.any.isRequired,\r\n  value: PropTypes.any.isRequired,\r\n};\r\n\r\nfunction a11yProps(index) {\r\n  return {\r\n    id: `vertical-tab-${index}`,\r\n    'aria-controls': `vertical-tabpanel-${index}`,\r\n  };\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    flexGrow: 1,\r\n    backgroundColor: theme.palette.background.paper,\r\n    display: 'flex',\r\n  },\r\n  tabs: {\r\n    borderRight: `1px solid ${theme.palette.divider}`,\r\n  },\r\n}));\r\n\r\nconst PollResults = ({ id }) => {\r\n  const classes = useStyles();\r\n  const [value, setValue] = React.useState(0);\r\n\r\n  const handleChange = (event, newValue) => {\r\n    setValue(newValue);\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Tabs\r\n        orientation=\"vertical\"\r\n        variant=\"scrollable\"\r\n        value={value}\r\n        onChange={handleChange}\r\n        aria-label=\"Vertical tabs example\"\r\n        className={classes.tabs}\r\n      >\r\n        <Tab label=\"Общие\" {...a11yProps(0)} />\r\n        <Tab label=\"По Н.П.\" {...a11yProps(1)} />\r\n        <Tab label=\"Линейка\" {...a11yProps(2)} />\r\n        <Tab label=\"Сравнения\" {...a11yProps(3)} />\r\n        <Tab label=\"Графики\" {...a11yProps(4)} />\r\n        <Tab label=\"Пакетный\" {...a11yProps(5)} />\r\n      </Tabs>\r\n      <TabPanel value={value} index={0}>\r\n        Результаты опроса ID - {id}\r\n      </TabPanel>\r\n      <TabPanel value={value} index={1}>\r\n        Распределение по населенным пунктам\r\n      </TabPanel>\r\n      <TabPanel value={value} index={2}>\r\n        Линейное распределение ответов\r\n      </TabPanel>\r\n      <TabPanel value={value} index={3}>\r\n        Сравнения с аналогичными опросами\r\n      </TabPanel>\r\n      <TabPanel value={value} index={4}>\r\n        Графики\r\n      </TabPanel>\r\n      <TabPanel value={value} index={5}>\r\n        Пакетный ВВод данных\r\n      </TabPanel>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PollResults","import React, { Fragment } from 'react'\r\nimport { useParams } from 'react-router-dom'\r\nimport Container from '@material-ui/core/Container';\r\n\r\nimport SettingBar from '../components/SettingBar'\r\nimport PollResults from '../modules/PollResults'\r\n\r\nconst Results = () => {\r\n  let { id, code } = useParams();\r\n\r\n  return (\r\n    <Fragment>\r\n      <SettingBar title={`Результаты ` + code} />\r\n      <div style={{ paddingTop: '10px' }}>\r\n        <Container maxWidth=\"xl\">\r\n          <PollResults id={id} />\r\n        </Container>\r\n      </div>\r\n    </Fragment>\r\n  )\r\n}\r\n\r\nexport default Results","import React, { Fragment } from 'react'\r\nimport { useParams } from 'react-router-dom'\r\nimport Container from '@material-ui/core/Container'\r\n\r\nimport SettingBar from '../components/SettingBar'\r\n// import XmlAnalyzer from '../components/XmlAnalyzer'\r\n\r\nconst Analyze = () => {\r\n  let { id } = useParams();\r\n\r\n  return (\r\n    <Fragment>\r\n      <SettingBar title={`Анализ XML`} />\r\n      <Container maxWidth=\"md\">\r\n        <h2>Анализ XML</h2>\r\n        {/* <XmlAnalyzer /> */}\r\n      </Container>\r\n    </Fragment>\r\n  )\r\n}\r\n\r\nexport default Analyze","import React, { Fragment, useState, useEffect } from 'react'\r\nimport DevTools from 'mobx-react-devtools'\r\nimport { observable } from 'mobx'\r\nimport { observer } from 'mobx-react'\r\n\r\nconst Test = observer(() => {\r\n  const [timerData] = useState(() =>\r\n    observable({\r\n      secondsPassed: 0,\r\n    })\r\n  )\r\n  useEffect(() => {\r\n    const handle = setInterval(() => {\r\n      timerData.secondsPassed++\r\n    }, 1000)\r\n    return () => {\r\n      clearTimeout(handle)\r\n    }\r\n  }, [])\r\n\r\n  return (\r\n    <span>Seconds passed: {timerData.secondsPassed} </span>\r\n  )\r\n})\r\n\r\nexport default Test","import React, { Fragment } from 'react'\r\nimport Container from '@material-ui/core/Container';\r\nimport { observer } from 'mobx-react'\r\n\r\nimport SettingBar from '../components/SettingBar'\r\nimport Test from '../containers/Test'\r\n\r\n// const Tester = observer(\r\nconst Tester = () => {\r\n\r\n  return (\r\n    <Fragment>\r\n      <SettingBar title='Тестирование инерфейса' />\r\n      <Container maxWidth=\"lg\">\r\n        <Test />\r\n      </Container>\r\n    </Fragment>\r\n  )\r\n}\r\n\r\nexport default Tester","import React, { Fragment } from 'react'\r\n\r\nconst ConfigEditor = () => {\r\n  return (\r\n    <Fragment>\r\n      <h3>Конфигурация</h3>\r\n      <p>Отображение и настройка конфигурационного файла</p>\r\n      <div id=\"rulesformitem\" class=\"formitem\">\r\n        <label for=\"rules\" id=\"ruleslabel\">Rules:</label>\r\n        <div class=\"textwrapper\"><textarea id=\"rules\" /></div>\r\n      </div>\r\n    </Fragment>\r\n  )\r\n}\r\n\r\nexport default ConfigEditor","import { gql } from '@apollo/client'\r\n\r\nexport const pollQuery = gql`\r\n  query pollQuery($id: ID!) {\r\n    poll(id: $id) {\r\n      id\r\n      title\r\n      code\r\n      liter\r\n      questions {\r\n        id\r\n        title\r\n        limit\r\n        order\r\n        answers {\r\n          id\r\n          title\r\n          order\r\n        }\r\n      }\r\n    }\r\n  }\r\n`\r\n\r\nexport const saveNewLimit = gql`\r\nmutation saveNewLimit($id: ID!, $limit: Int!) {\r\n  newLimit(id: $id, limit: $limit)\r\n}\r\n`\r\n\r\nexport const saveNewOrder = gql`\r\nmutation saveNewOrder($questions: [ReorderedArray]) {\r\n  newOrder(neworder: $questions)\r\n}\r\n`","import React, { useState } from 'react'\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\r\nimport IconButton from '@material-ui/core/IconButton';\r\n\r\nconst QuestionCard = ({ question, handleLimitInput }) => {\r\n  const [val, setVal] = useState(question.limit)\r\n\r\n  const handleKeyUp = (e) => {\r\n    if (e.keyCode === 13) e.currentTarget.blur()\r\n  }\r\n\r\n  const handleChange = (e) => {\r\n    const currentValue = e.currentTarget.value\r\n    console.log(e);\r\n    if (currentValue < 1) {\r\n      setVal(1)\r\n    } else if (currentValue > 99) {\r\n      setVal(99)\r\n    } else {\r\n      setVal(currentValue)\r\n    }\r\n  }\r\n\r\n  const handleBlur = (e) => {\r\n    handleLimitInput({\r\n      id: question.id,\r\n      limit: val\r\n    })\r\n  }\r\n\r\n  return (\r\n    <Grid item xs={12} sm={6} lg={3} xl={2}>\r\n      <Paper className=\"question-item\" elevation={2}>\r\n        <Grid item xs={12} sm container>\r\n          <Grid item xs container direction=\"column\" spacing={2} alignItems=\"flex-start\">\r\n            <Grid item xs>\r\n              <Tooltip title=\"Очередность отображения\" aria-label=\"add\">\r\n                <Typography variant=\"body2\" color=\"primary\">\r\n                  {question.order}\r\n                </Typography>\r\n              </Tooltip>\r\n            </Grid>\r\n          </Grid>\r\n          <Grid item xs container direction=\"column\" spacing={2} alignItems=\"flex-end\">\r\n            <Grid item xs>\r\n              <Tooltip title=\"Не отображить вопрос\" aria-label=\"add\">\r\n                <Typography variant=\"subtitle1\">\r\n                  <MoreVertIcon />\r\n                </Typography>\r\n              </Tooltip>\r\n            </Grid>\r\n          </Grid>\r\n          <Grid item>\r\n            <Typography variant=\"subtitle1\">\r\n              <Tooltip title=\"Лимит ответов\" aria-label=\"add\">\r\n                <input\r\n                  type=\"number\"\r\n                  className=\"question-limit-input\"\r\n                  onChange={handleChange}\r\n                  onBlur={handleBlur}\r\n                  onKeyUp={handleKeyUp}\r\n                  value={val}\r\n                />\r\n              </Tooltip>\r\n            </Typography>\r\n          </Grid>\r\n        </Grid>\r\n        <Typography className=\"question-title\">{question.title}</Typography>\r\n\r\n      </Paper>\r\n    </Grid>\r\n  )\r\n}\r\n\r\nexport default QuestionCard","import React, { Fragment, useState } from 'react'\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\nimport { useQuery } from '@apollo/client'\r\nimport { useMutation } from '@apollo/react-hooks'\r\nimport { pollQuery, saveNewLimit, saveNewOrder } from \"./queries\"\r\nimport Grid from '@material-ui/core/Grid';\r\n\r\nimport arrayMove from \"array-move\";\r\nimport { SortableContainer, SortableElement } from 'react-sortable-hoc';\r\nimport QuestionCard from '../QuestionCard'\r\n\r\nconst ReoderEditor = ({ id }) => {\r\n  const [questions, setQuestions] = useState(null)\r\n  const [prevOrder, setPrevOrder] = useState(null)\r\n  const { loading, error, data, refetch } = useQuery(pollQuery, {\r\n    variables: { id },\r\n    onCompleted: () => setQuestions(data.poll.questions)\r\n  })\r\n  const [saveLimit] = useMutation(saveNewLimit, {\r\n    // TODO: refetchQueries -> Обновить PollDrive cache!!!\r\n\r\n    // onCompleted: (answer) => console.log(answer)\r\n    // TODO: \"При ОШИБКЕ -> оповещения и восстановления!\"\r\n  })\r\n  const [saveOrder] = useMutation(saveNewOrder, {\r\n    // TODO: refetchQueries -> Обновить PollDrive cache!!!\r\n\r\n    // onCompleted: (answer) => console.log(answer)\r\n    // TODO: \"При ОШИБКЕ -> оповещения и восстановления!\"\r\n  })\r\n\r\n  if (loading || !questions) return (\r\n    <Fragment>\r\n      <CircularProgress />\r\n      <p>Загрузка. Подождите пожалуйста</p>\r\n    </Fragment>\r\n  )\r\n\r\n  if (error) return <p>Ошибка. Что-то пошло не так! :(</p>;\r\n\r\n  const handleLimitInput = (inputData) => {\r\n    const id = inputData.id\r\n    const limit = +inputData.limit\r\n    setQuestions(questions.map(question => question.id === id ? { ...question, limit: limit } : question))\r\n    saveLimit({\r\n      variables: {\r\n        id,\r\n        limit\r\n      }\r\n    })\r\n  }\r\n\r\n  const onSortEnd = ({ oldIndex, newIndex }) => {\r\n    setPrevOrder({ ...questions })\r\n    const newArray = arrayMove(questions, oldIndex, newIndex)\r\n    let deltaArray = []\r\n    const newOrder = newArray.reduce((acum, val, index) => {\r\n      if (val.order === index + 1) {\r\n        acum.push(val)\r\n      } else {\r\n        deltaArray.push({\r\n          id: val.id,\r\n          order: index + 1\r\n        })\r\n        acum.push({ ...val, order: index + 1 })\r\n      }\r\n      return acum\r\n    }, [])\r\n    saveOrder({\r\n      variables: {\r\n        questions: deltaArray\r\n      }\r\n    })\r\n    setQuestions(newOrder)\r\n  };\r\n\r\n  const SortableItem = SortableElement(({ question }) =>\r\n    <QuestionCard question={question} handleLimitInput={handleLimitInput} />\r\n  );\r\n\r\n  const SortableList = SortableContainer(({ questions }) => {\r\n    return (\r\n      <Grid container item xs={12} spacing={2}>\r\n        {questions.map((question, index) => (\r\n          <SortableItem key={`item-${question.id}`} index={index} question={question} />\r\n        ))}\r\n      </Grid>\r\n    );\r\n  });\r\n\r\n  return (\r\n    <Fragment>\r\n      <SortableList\r\n        questions={questions}\r\n        onSortEnd={onSortEnd}\r\n        axis=\"xy\"\r\n      />\r\n    </Fragment>\r\n  )\r\n}\r\n\r\nexport default ReoderEditor","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Box from '@material-ui/core/Box';\r\n\r\nimport ConfigEditor from './components/ConfigEditor/index'\r\nimport ReoderEditor from './components/ReoderEditor';\r\n\r\nfunction TabPanel(props) {\r\n  const { children, value, index, ...other } = props;\r\n  return (\r\n    <div\r\n      role=\"tabpanel\"\r\n      hidden={value !== index}\r\n      id={`vertical-tabpanel-${index}`}\r\n      aria-labelledby={`vertical-tab-${index}`}\r\n      {...other}\r\n    >\r\n      {value === index && (\r\n        <Box p={3}>\r\n          <Typography>{children}</Typography>\r\n        </Box>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nTabPanel.propTypes = {\r\n  children: PropTypes.node,\r\n  index: PropTypes.any.isRequired,\r\n  value: PropTypes.any.isRequired,\r\n};\r\n\r\nfunction a11yProps(index) {\r\n  return {\r\n    id: `vertical-tab-${index}`,\r\n    'aria-controls': `vertical-tabpanel-${index}`,\r\n  };\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    flexGrow: 1,\r\n    backgroundColor: theme.palette.background.paper,\r\n    display: 'flex',\r\n  },\r\n  tabs: {\r\n    borderRight: `1px solid ${theme.palette.divider}`,\r\n  },\r\n}));\r\n\r\n\r\nconst PollSettings = ({ id }) => {\r\n  const classes = useStyles();\r\n  const [value, setValue] = React.useState(0);\r\n\r\n  const handleChange = (event, newValue) => {\r\n    setValue(newValue);\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <Tabs\r\n        orientation=\"vertical\"\r\n        variant=\"scrollable\"\r\n        value={value}\r\n        onChange={handleChange}\r\n        aria-label=\"Vertical tabs example\"\r\n        className={classes.tabs}\r\n      >\r\n        <Tab label=\"Общие\" {...a11yProps(0)} />\r\n        <Tab label=\"Тонкие\" {...a11yProps(1)} />\r\n      </Tabs>\r\n      <TabPanel value={value} index={0}>\r\n        <ReoderEditor id={id} />\r\n      </TabPanel>\r\n      <TabPanel value={value} index={1}>\r\n        <ConfigEditor id={id} />\r\n      </TabPanel>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PollSettings","import React, { Fragment } from 'react'\r\nimport { useParams } from 'react-router-dom'\r\nimport Container from '@material-ui/core/Container';\r\nimport SettingBar from '../components/SettingBar'\r\nimport PollSettings from '../modules/PollSettings'\r\n\r\nconst Settings = () => {\r\n  let { id, code } = useParams();\r\n\r\n  return (\r\n    <Fragment>\r\n      <SettingBar title={`Настройки опроса ` + code} />\r\n      <div style={{ paddingTop: '10px' }}>\r\n        <Container maxWidth=\"xl\">\r\n          <PollSettings id={id} />\r\n        </Container>\r\n      </div>\r\n    </Fragment>\r\n  )\r\n}\r\n\r\nexport default Settings","import React from 'react'\r\nimport { BrowserRouter, Route, Switch } from 'react-router-dom'\r\n\r\nimport { Home, Drive, Results, Analyze, Settings, Tester } from '../../pages'\r\n\r\nconst Router = () => {\r\n\r\n  return (\r\n    <BrowserRouter>\r\n      <Switch>\r\n        <Route path={\"/\"} exact component={Home} />\r\n        <Route path={\"/results/:id/:code\"} component={Results} />\r\n        <Route path={\"/poll-settings/:id/:code\"} component={Settings} />\r\n        <Route path={\"/drive/:id/:code\"} component={Drive} />\r\n        <Route path={\"/analyze\"} component={Analyze} />\r\n        <Route path={\"/tester\"} component={Tester} />\r\n      </Switch>\r\n    </BrowserRouter>\r\n  )\r\n}\r\n\r\nexport default Router","import React from 'react';\nimport { ApolloClient, InMemoryCache } from '@apollo/client'\nimport { ApolloProvider } from '@apollo/client';\n\nimport './App.scss';\nimport Router from '../Router'\n\nconst client = new ApolloClient({\n  uri: 'http://localhost:4000/graphql',\n  cache: new InMemoryCache()\n})\n\nfunction App() {\n  return (\n    <ApolloProvider client={client}>\n      <div className=\"App\">\n        <Router />\n      </div>\n    </ApolloProvider>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './containers/App/App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}