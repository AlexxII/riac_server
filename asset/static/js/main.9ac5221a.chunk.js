(this.webpackJsonpriac=this.webpackJsonpriac||[]).push([[0],{355:function(e,t,a){e.exports=a(382)},361:function(e,t,a){},382:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l="http://localhost:4000",c=a(24),i=a.n(c),o=a(195),u=a(285);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var s=new(a(196).a)({typePolicies:{Poll:{fields:{question:{read:function(e){return e}}}}}}),d=a(7),m=(a(361),a(40)),p=a(43),b=a(31),f=a(448),E=a(449),g=a(443),v=a(442),O=a(82),j=a(441),h=a(325),y=a(301),x=a.n(y),w=a(183),C=a.n(w),k=a(249),S=a.n(k),N=a(213),q=a.n(N),$=a(444),F=a(14),A=a(297),T=a.n(A),I=a(386),B=a(270),D=a(13),M=a(27);function P(){var e=Object(F.a)(["\n  mutation Logout {\n    logout\n  }\n"]);return P=function(){return e},e}var z=Object(D.a)(P());function R(){var e=Object(F.a)(["\n  query {\n    currentUser {\n      id\n      username\n    }\n  }\n"]);return R=function(){return e},e}var W=Object(D.a)(R());function L(){var e=Object(F.a)(["\n    query {\n      currentUser {\n        id\n        username\n      }\n    }\n    "]);return L=function(){return e},e}var U=function(e){e.close;var t=Object(B.a)().readQuery({query:Object(D.a)(L())}).currentUser,a=Object(n.useState)(null),l=Object(d.a)(a,2),c=l[0],i=l[1],o=Boolean(c),u=Object(M.useMutation)(z,{update:function(e){return e.writeQuery({query:W,data:{currentUser:null}})}}),s=Object(d.a)(u,1)[0],m=function(){i(null)},p=r.a.createElement(h.a,{anchorEl:c,anchorOrigin:{vertical:"top",horizontal:"right"},id:"account-menu",keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:o,onClose:m},r.a.createElement(j.a,{onClick:function(){s(),m()}},"\u0412\u044b\u0445\u043e\u0434"));return r.a.createElement(n.Fragment,null,r.a.createElement(v.a,{edge:"end","aria-label":"account of current user","aria-controls":"account-menu","aria-haspopup":"true",onClick:function(e){i(e.currentTarget)},color:"inherit"},r.a.createElement(g.a,{badgeContent:0,color:"secondary"},r.a.createElement(I.a,{title:t.username},r.a.createElement(T.a,null)))),p)},H=a(5),Q=a(485),V=a(440),_=a(447),J=a(385),G=a(445),K=a(446),Z=a(212),X=a.n(Z),Y=a(299),ee=a.n(Y),te=a(300),ae=a.n(te),ne=a(298),re=a.n(ne),le=Object($.a)({list:{width:250},fullList:{width:"auto"}});function ce(e){var t=e.open,a=e.close,n=le();return r.a.createElement(Q.a,{anchor:"left",open:t,onClose:a,className:"left-app-menu"},r.a.createElement("div",{className:Object(H.a)(n.list),role:"presentation",onClick:a,onKeyDown:a},r.a.createElement(V.a,null,r.a.createElement(O.a,{variant:"overline",style:{fontSize:"10px"}},"\u043f\u043e\u0434\u0441\u0438\u0441\u0442\u0435\u043c\u0430 \u043e\u043f\u0440\u043e\u0441\u043e\u0432"),r.a.createElement(m.b,{to:"analyze"},r.a.createElement(J.a,{button:!0,key:1},r.a.createElement(G.a,null,r.a.createElement(re.a,null)),r.a.createElement(K.a,{primary:"\u0410\u043d\u0430\u043b\u0438\u0437\u0430\u0442\u043e\u0440"}))),r.a.createElement(J.a,{button:!0,key:1},r.a.createElement(G.a,null,r.a.createElement(ee.a,null)),r.a.createElement(K.a,{primary:"\u0413\u0435\u043d\u0435\u0440\u0430\u0442\u043e\u0440 \u043d\u043e\u043c\u0435\u0440\u043e\u0432"})),r.a.createElement(m.b,{to:"poll-app-settings"},r.a.createElement(J.a,{button:!0,key:1},r.a.createElement(G.a,null,r.a.createElement(X.a,null)),r.a.createElement(K.a,{primary:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"}))),r.a.createElement(O.a,{variant:"overline",style:{fontSize:"10px"}},"\u043e\u0431\u0449\u0438\u0435"),r.a.createElement(_.a,null),r.a.createElement(m.b,{to:"settings/users"},r.a.createElement(J.a,{button:!0,key:1},r.a.createElement(G.a,null,r.a.createElement(ae.a,null)),r.a.createElement(K.a,{primary:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438"}))))))}var ie=Object($.a)((function(e){return{grow:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:Object(b.a)({display:"none"},e.breakpoints.up("xs"),{display:"block"}),inputRoot:{color:"inherit"},sectionDesktop:Object(b.a)({display:"none"},e.breakpoints.up("sm"),{display:"flex"}),sectionMobile:Object(b.a)({display:"flex"},e.breakpoints.up("sm"),{display:"none"}),link:{color:"white",textDecoration:"none"}}})),oe=function(e){var t=e.title,a=ie(),n=r.a.useState(null),l=Object(d.a)(n,2),c=l[0],i=l[1],o=r.a.useState(null),u=Object(d.a)(o,2),s=u[0],m=u[1],p=r.a.useState(!1),b=Object(d.a)(p,2),y=b[0],w=b[1],k=Boolean(s),N=Boolean(c),$=function(e){i(e.currentTarget)},F=function(){m(null)},A=function(){i(null),F()},T=r.a.createElement(h.a,{anchorEl:c,anchorOrigin:{vertical:"top",horizontal:"right"},id:"primary-apps-menu",keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:N,onClose:A},r.a.createElement(j.a,{onClick:A},"\u041f\u0423\u0421\u0422\u041e_1"),r.a.createElement(j.a,{onClick:A},"\u041f\u0423\u0421\u0422\u041e_2")),I=r.a.createElement(h.a,{anchorEl:s,anchorOrigin:{vertical:"top",horizontal:"right"},id:"primary-account-menu-mobile",keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:k,onClose:F},r.a.createElement(j.a,null,r.a.createElement(v.a,{color:"inherit"},r.a.createElement(g.a,{badgeContent:0,color:"secondary"},r.a.createElement(S.a,null))),r.a.createElement("p",null,"\u0423\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f")),r.a.createElement(j.a,{onClick:$},r.a.createElement(v.a,{"aria-label":"more apps","aria-controls":"primary-apps-menu","aria-haspopup":"true",color:"inherit"},r.a.createElement(C.a,null)),r.a.createElement("p",null,"\u041f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f")),r.a.createElement(j.a,null,r.a.createElement(U,null),r.a.createElement("p",null,"Profile")));return r.a.createElement("div",{className:a.grow},r.a.createElement(f.a,{position:"static"},r.a.createElement(E.a,null,r.a.createElement(v.a,{edge:"start",className:a.menuButton,color:"inherit",onClick:function(e){w(!0)},"aria-label":"open drawer"},r.a.createElement(x.a,null)),r.a.createElement(O.a,{className:a.title,variant:"h6",noWrap:!0},t),r.a.createElement("div",{className:a.grow}),r.a.createElement("div",{className:a.sectionDesktop},r.a.createElement(v.a,{color:"inherit"},r.a.createElement(g.a,{badgeContent:0,color:"secondary"},r.a.createElement(S.a,null))),r.a.createElement(v.a,{"aria-label":"apps","aria-controls":"primary-apps-menu","aria-haspopup":"true",onClick:$,color:"inherit"},r.a.createElement(g.a,{badgeContent:0,color:"secondary"},r.a.createElement(C.a,null))),r.a.createElement(U,null)),r.a.createElement("div",{className:a.sectionMobile},r.a.createElement(v.a,{"aria-label":"show more","aria-controls":"primary-account-menu-mobile","aria-haspopup":"true",onClick:function(e){m(e.currentTarget)},color:"inherit"},r.a.createElement(q.a,null))))),r.a.createElement(ce,{open:y,close:function(e){w(!1)}}),I,T)},ue=a(16),se=a(463),de=a(450),me=a(451),pe=a(452),be=a(454),fe=a(302),Ee=a.n(fe),ge=a(303),ve=a.n(ge),Oe=a(453),je=a(304),he=a.n(je),ye=a(305),xe=a.n(ye),we=a(483),Ce=a(10),ke=Object(Ce.a)((function(e){return{badge:{backgroundColor:"#44b700",color:"#44b700",boxShadow:"0 0 0 2px ".concat(e.palette.background.paper),"&::after":{position:"absolute",top:"-1px",left:"-1px",width:"100%",height:"100%",borderRadius:"50%",animation:"$ripple 1.2s infinite ease-in-out",border:"1px solid currentColor",content:'""'}},"@keyframes ripple":{"0%":{transform:"scale(.8)",opacity:1},"100%":{transform:"scale(2.4)",opacity:0}}}}))(g.a),Se=Object($.a)({root:{display:"flex"},avatar:{backgroundColor:function(e){return e.color}}}),Ne=function(e){var t=e.data,a=Se(t);return t.active?r.a.createElement("div",{className:a.root},r.a.createElement(ke,{overlap:"circle",anchorOrigin:{vertical:"bottom",horizontal:"right"},variant:"dot"},r.a.createElement(we.a,{className:a.avatar},r.a.createElement("span",{className:"poll-liter-title"},t.liter)))):r.a.createElement("div",{className:a.root},r.a.createElement(we.a,{className:a.avatar},t.liter))},qe=["\u0418\u043d\u0442\u0435\u0440\u0432\u044c\u044e\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435","\u0410\u043d\u043a\u0435\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435","\u0422\u0435\u043b\u0435\u0444\u043e\u043d\u043d\u044b\u0439","WEB"],$e=["\u0412\u0441\u0435\u0440\u043e\u0441\u0441\u0438\u0439\u0441\u043a\u0438\u0439","\u042d\u043a\u0441\u043f\u0435\u0440\u0442\u043d\u044b\u0439"],Fe=Object($.a)((function(e){return{root:{maxWidth:"100%",margin:"10px 0"},header:{padding:"16px 16px 0 16px"},content:{flex:1,padding:"10px 16px 0 16px"}}})),Ae=function(e){var t=e.data,a=Fe(),l=function(){return r.a.createElement(I.a,{title:"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b"},r.a.createElement(m.b,{to:"/results/".concat(t.id,"/").concat(t.code)},r.a.createElement(v.a,null,r.a.createElement(Ee.a,null))))},c=function(){return r.a.createElement(I.a,{title:"\u0412\u0432\u043e\u0434 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432"},r.a.createElement(m.b,{to:"/drive/".concat(t.id,"/").concat(t.code)},r.a.createElement(v.a,null,r.a.createElement(ve.a,null))))},i=function(){return r.a.createElement(I.a,{title:"\u0424\u0430\u0439\u043b\u044b"},r.a.createElement(m.b,{to:"/attachment/".concat(t.id,"/").concat(t.code)},r.a.createElement(v.a,null,r.a.createElement(he.a,null))))},o=function(){return r.a.createElement(I.a,{title:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u043e\u043f\u0440\u043e\u0441\u0430"},r.a.createElement(m.b,{to:"/poll-settings/".concat(t.id,"/").concat(t.code)},r.a.createElement(v.a,null,r.a.createElement(X.a,null))))},u=function(){return r.a.createElement(I.a,{title:"\u0417\u0430\u043c\u0435\u0442\u043a\u0438"},r.a.createElement(m.b,{to:"/poll-wiki/".concat(t.id,"/").concat(t.code)},r.a.createElement(v.a,null,r.a.createElement(xe.a,null))))};return r.a.createElement(n.Fragment,null,r.a.createElement(de.a,{className:a.root},r.a.createElement(me.a,{className:a.header,avatar:r.a.createElement(Ne,{data:t}),action:r.a.createElement(o,null),title:t.code+": "+t.title,subheader:t.startDate+" - "+t.endDate}),r.a.createElement(pe.a,{className:a.content},r.a.createElement(Oe.a,{container:!0,spacing:1},r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(O.a,{variant:"button",display:"block",gutterBottom:!0},"\u041c\u0435\u0442\u043e\u0434 \u043f\u0440\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u044f: ",qe[t.way])),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(O.a,{variant:"button",display:"block",gutterBottom:!0},"\u0420\u0435\u0441\u043f\u043e\u043d\u0434\u0435\u043d\u0442\u043e\u0432: ",t.sample)))),r.a.createElement(be.a,{disableSpacing:!0},r.a.createElement(Oe.a,{container:!0,item:!0,xs:12},r.a.createElement(l,null),t.cities.length?r.a.createElement(c,null):r.a.createElement(I.a,{title:"\u0413\u043e\u0440\u043e\u0434\u0430 \u0443\u0441\u0442\u0430\u043d\u0430\u0432\u043b\u0438\u0432\u0430\u044e\u0442\u0441\u044f \u0432 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u0445 \u043e\u043f\u0440\u043e\u0441\u0430"},r.a.createElement(O.a,{variant:"overline",display:"block",gutterBottom:!0,className:"empty-cities-warning"},"\u043d\u0430\u0441\u0442\u0440\u043e\u0439\u0442\u0435 \u0433\u043e\u0440\u043e\u0434\u0430"))),r.a.createElement(Oe.a,{container:!0,item:!0,xs:12,justify:"flex-end"},r.a.createElement(i,null),r.a.createElement(u,null)))))},Te=function(e){return e.data.polls.map((function(e,t){return r.a.createElement(Ae,{key:t,data:e})}))},Ie=a(3),Be=a(88),De=a(458),Me=a(461),Pe=a(460),ze=a(459),Re=a(456),We=a(457),Le=a(91),Ue=a(103),He=a(221),Qe=a.n(He),Ve=a(388),_e=a(455);var Je=function(e){var t=function(e){var t=new DOMParser,a=t.parseFromString("INVALID","text/xml").getElementsByTagName("parsererror")[0].namespaceURI,n=t.parseFromString(e,"text/xml");return!(n.getElementsByTagNameNS(a,"parsererror").length>0)&&n}(e);if(t){var a={},n=t.getElementsByTagName("opros")[0];return a.title=n.getAttribute("name"),a.code=n.getAttribute("cod"),a.start=n.getAttribute("start_date"),a.end=n.getAttribute("end_date"),a.structure={data:""},a}return!1},Ge=Object($.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}})),Ke=function(e){var t,a=e.field,l=Object(Be.a)(e,["field"]),c=l.errorMessage,i=(l.touched,l.setFieldValue),o=a.name,u=(a.value,a.onChange,a.onBlur),s=Object(n.useState)(!1),m=Object(d.a)(s,2),p=m[0],f=m[1],E=Object(n.useState)(void 0),v=Object(d.a)(E,2),j=(v[0],v[1],Object(n.useState)(0)),h=Object(d.a)(j,2),y=h[0],x=(h[1],Ge()),w=Object(n.useRef)();return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ve.a,{className:x.backdrop,open:p},r.a.createElement(_e.a,{color:"inherit"})),r.a.createElement("input",(t={style:{display:"none"},id:o,name:o,type:"file"},Object(b.a)(t,"id",o),Object(b.a)(t,"ref",w),Object(b.a)(t,"onBlur",u),Object(b.a)(t,"onInput",(function(e){e.preventDefault(),f(!0);var t=new FileReader,a=e.target.files[0];a&&(t.onloadend=function(){var e=t.result,n=Je(e);if(!n)return console.log("\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 XML"),void i("mainconfig","");f(!1);var r=/^(\d{2}).(\d{2}).(\d{4})$/;i("title",n.title),i("startdate",n.start.replace(r,"$3-$2-$1")),i("enddate",n.end.replace(r,"$3-$2-$1")),i("code",n.code),i("xmlfile",a)},t.readAsText(a))})),t)),r.a.createElement(g.a,{color:"secondary",badgeContent:y,style:{top:"5px"}},r.a.createElement(Re.a,{variant:"contained",color:"default",startIcon:r.a.createElement(Qe.a,null),onClick:function(){w&&w.current.click()}},"XML")),c?r.a.createElement(O.a,{variant:"caption",color:"error"},c):null)},Ze=function(e){var t=e.field,a=Object(Be.a)(e,["field"]),n=a.errorMessage,l=a.label,c=a.type,i=a.touched,o=t.name,u=t.value,s=t.onChange,d=t.onBlur;return r.a.createElement("div",null,r.a.createElement(We.a,{fullWidth:!0,type:c,name:o,label:l,value:u,error:!(!i||!n),helperText:i&&n?n:void 0,onChange:s,onBlur:d,InputLabelProps:{shrink:!0}}))},Xe=function(e){var t=e.field,a=Object(Be.a)(e,["field"]),n=a.errorMessage,l=a.label,c=a.touched,i=a.array,o=t.name,u=t.value,s=t.onChange,d=t.onBlur;return r.a.createElement("div",null,r.a.createElement(We.a,{select:!0,fullWidth:!0,name:o,label:l,value:u,error:!(!c||!n),helperText:c&&n?n:void 0,onChange:s,onBlur:d,InputLabelProps:{shrink:!0}},i.map((function(e,t){return r.a.createElement(j.a,{key:t,value:t},e)}))))},Ye=function(e){var t=e.open,a=e.closeHndl,n=e.saveHndl,l=["text/xml"],c=Ue.d().shape({title:Ue.e().required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),startdate:Ue.a().required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),enddate:Ue.a().required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),code:Ue.e().matches(/^[A-Za-z]{3}[0-9]{2}-[0-9]{2}?$/,"\u0424\u043e\u0440\u043c\u0430\u0442 \u043d\u0435 \u0432\u0430\u043b\u0438\u0434\u043d\u044b\u0439").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),sample:Ue.c().min(1,"\u041d\u0435 \u043c\u0435\u043d\u044c\u0448\u0435 \u043e\u0434\u043d\u043e\u0433\u043e").required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),type:Ue.e().ensure().required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),way:Ue.e().ensure().required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"),xmlfile:Ue.b().required("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435 \u0444\u043e\u0440\u043c\u044b").test("fileSize","\u0421\u043b\u0438\u0448\u043a\u043e\u043c \u0431\u043e\u043b\u044c\u0448\u043e\u0439 \u0444\u0430\u0439\u043b",(function(e){return e&&e.size<=1048576})).test("fileFormat","\u041d\u0435\u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u043c\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442",(function(e){return e&&l.includes(e.type)}))});return r.a.createElement(De.a,{className:"add-poll-dialog",disableBackdropClick:!0,disableEscapeKeyDown:!0,open:t,maxWidth:"sm","aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(ze.a,{id:"alert-dialog-title"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043e\u043f\u0440\u043e\u0441"),r.a.createElement(Pe.a,null,r.a.createElement(Le.b,{initialValues:{xmlfile:void 0,title:void 0,startdate:void 0,enddate:void 0,code:void 0,sample:10,type:1,way:1,comment:void 0},validationSchema:c,validateOnBlur:!0,onSubmit:function(e,t){var r=t.setSubmitting;n(e),a(),r(!0)}},(function(e){e.saveHndl,e.values;var t=e.errors,n=e.touched,l=(e.dirty,e.isSubmitting),c=(e.handleReset,e.handleSubmit),i=e.handleChange,o=e.handleBlur,u=e.setFieldValue;return r.a.createElement("form",{onSubmit:c},r.a.createElement(Oe.a,{container:!0,spacing:2},r.a.createElement(Oe.a,{item:!0,xs:6,sm:6},r.a.createElement(Le.a,{name:"xmlfile",component:Ke,setFieldValue:u,errorMessage:t.xmlfile?t.xmlfile:void 0,touched:n.xmlfile,onBlur:o})),r.a.createElement(Oe.a,{item:!0,xs:12,sm:12},r.a.createElement(Le.a,{name:"title",type:"text",label:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435",setFieldValue:u,component:Ze,errorMessage:t.title,touched:n.title,onBlur:o})),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(Le.a,{name:"startdate",type:"date",label:"\u0414\u0430\u0442\u0430 \u043d\u0430\u0447\u0430\u043b\u0430",setFieldValue:u,component:Ze,errorMessage:t.startdate,touched:n.startdate,onBlur:o})),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(Le.a,{name:"enddate",type:"date",label:"\u0414\u0430\u0442\u0430 \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f",setFieldValue:u,component:Ze,errorMessage:t.enddate,touched:n.enddate,onBlur:o})),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(Le.a,{name:"code",label:"\u041a\u043e\u0434 \u043e\u043f\u0440\u043e\u0441\u0430",type:"text",setFieldValue:u,component:Ze,errorMessage:t.code,touched:n.code,onChange:i,onBlur:o})),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(Le.a,{name:"sample",type:"number",label:"\u0412\u044b\u0431\u043e\u0440\u043a\u0430",setFieldValue:u,component:Ze,errorMessage:t.sample,touched:n.sample,onChange:i,onBlur:o})),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(Le.a,{name:"type",label:"\u0422\u0438\u043f \u043e\u043f\u0440\u043e\u0441\u0430",array:$e,setFieldValue:u,component:Xe,errorMessage:t.type,touched:n.type,onChange:i,onBlur:o})),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6},r.a.createElement(Le.a,{name:"way",label:"\u0421\u043f\u043e\u0441\u043e\u0431 \u043f\u0440\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u044f",array:qe,component:Xe,errorMessage:t.way,touched:n.way,onChange:i,onBlur:o})),r.a.createElement(Oe.a,{item:!0,xs:12},r.a.createElement(Le.a,{name:"comment",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438",component:Ze,errorMessage:t.comment,touched:n.comment,onChange:i,onBlur:o}))),r.a.createElement(Me.a,null,r.a.createElement(Re.a,{onClick:a,color:"primary"},"\u041e\u0442\u043c\u0435\u043d\u0430"),r.a.createElement(Re.a,{type:"submit",disabled:l},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")))}))))},et=a(393),tt=a(309),at=a.n(tt),nt=Object($.a)((function(e){return{small:{position:"fixed",bottom:"30px",right:"30px"}}})),rt=function(e){var t=e.onClick,a=nt();return r.a.createElement("div",{className:a.small},r.a.createElement(et.a,{color:"secondary","aria-label":"add",onClick:t},r.a.createElement(at.a,null)))},lt=function(e){var t=e.addPoll,a=Object(n.useState)(!1),l=Object(d.a)(a,2),c=l[0],i=l[1],o=function(e){var t={questions:[],logic:[],topic:[]},a=new FileReader;return new Promise((function(n,r){a.onloadend=function(){for(var e=a.result,r=(new DOMParser).parseFromString(e,"text/xml"),l=r.getElementsByTagName("vopros"),c=l.length,i=0;i<c;i++){for(var o={title:l[i].getAttribute("text"),topic:+l[i].getAttribute("tema_id"),limit:l[i].getAttribute("limit")?+l[i].getAttribute("limit"):1,type:+l[i].getAttribute("type_id"),order:+l[i].getAttribute("sort"),answers:[]},u=l[i].getElementsByTagName("otvet"),s=u.length,d=0;d<s;d++){var m={title:u[d].getAttribute("otvet_text"),code:u[d].getAttribute("otvet_cod").padStart(3,"0"),type:+u[d].getAttribute("otvet_type"),order:+u[d].getAttribute("otvet_sort")};o.answers[d]=m}t.questions[i]=o}var p=r.getElementsByTagName("restrict"),b=p.length;if(b){for(var f=[],E=0;E<b;E++){var g={code:p[E].getAttribute("otvet_cod").padStart(3,"0"),restrict:p[E].getAttribute("restrict_cod").padStart(3,"0"),type:p[E].getAttribute("restrict_type")};f[E]=g}t.logic=f}var v=r.getElementsByTagName("tema"),O=v.length;if(O)for(var j=0;j<O;j++){var h={id:v[j].getAttribute("id"),title:v[j].getAttribute("name")};t.topic[j]=h}n(t)},a.readAsText(e)}))},u=function(e){var t=e.logic.reduce((function(e,t,a){return"3"===t.type?e.exclude[t.code]?e.exclude[t.code]={restrict:[].concat(Object(ue.a)(e.exclude[t.code].restrict),[t.restrict])}:e.exclude[t.code]={restrict:[t.restrict]}:"5"===t.type&&(e.unique=[].concat(Object(ue.a)(e.unique),[t.code])),e}),{unique:[],exclude:{}}),a=e.questions.reduce((function(e,a){return a.limit>1&&(t.unique=[].concat(Object(ue.a)(t.unique),Object(ue.a)(a.answers.filter((function(e){return 3===e.type})).map((function(e){return e.code}))))),e.difficult=[].concat(Object(ue.a)(e.difficult),Object(ue.a)(a.answers.filter((function(e){return 3===e.type})).map((function(e){return e.code})))),e.freeAnswers=[].concat(Object(ue.a)(e.freeAnswers),Object(ue.a)(a.answers.filter((function(e){return 2===e.type})).map((function(e){return e.code})))),e}),{difficult:[],freeAnswers:[]});return e.logic=Object(Ie.a)(Object(Ie.a)({},t),a),e};return r.a.createElement(n.Fragment,null,r.a.createElement(rt,{onClick:function(){i(!0)}}),r.a.createElement(Ye,{open:c,saveHndl:function(e){var a=e.xmlfile;a.size&&new Promise((function(e,t){e(o(a))})).then((function(a){var n=u(a),r={title:e.title,startDate:e.startdate,endDate:e.enddate,code:e.code,sample:e.sample,type:e.type,way:e.way,comment:e.comment};t({variables:{newPoll:Object(Ie.a)(Object(Ie.a)({},r),{},{comment:r.comment?r.comment:"",shortTitle:"",active:!0}),poolOfQuestions:n.questions,logic:Object(Ie.a)({},n.logic),topic:n.topic}})}))},closeHndl:function(){i(!1)}}))},ct=a(476),it=function(e){var t,a,n;switch(e.size){case"small":t=40,a=40,n="h6";break;case"medium":t=60,a=60,n="h5";break;case"large":t=100,a=100,n="h4";break;default:t=60,a=60,n="h5"}return"page"===e.type?r.a.createElement(ct.a,{style:{transform:"translate(-50%, -50%)"},position:"absolute",top:"50%",left:"50%",textAlign:"center"},e.image&&r.a.createElement(ct.a,{clone:!0,mb:e.title||e.description?2:0,width:"".concat(t,"%"),height:"".concat(a,"%")},e.image),e.title&&r.a.createElement(ct.a,{mb:!e.description&&e.button?2:0},r.a.createElement(O.a,{variant:n},e.title)),e.description&&r.a.createElement(ct.a,{mb:e.button&&2},r.a.createElement(O.a,{variant:"body1"},e.description)),e.button&&e.button):"card"===e.type?r.a.createElement(ct.a,{padding:e.padding,textAlign:"center"},e.image&&r.a.createElement(ct.a,{clone:!0,mb:e.title||e.description?2:0,width:"".concat(t,"%"),height:"".concat(a,"%")},e.image),e.title&&r.a.createElement(ct.a,{mb:!e.description&&e.button?2:0},r.a.createElement(O.a,{variant:n},e.title)),e.description&&r.a.createElement(ct.a,{mb:e.button&&2},r.a.createElement(O.a,{variant:"body1"},e.description)),e.button&&e.button):null};it.defaultProps={image:r.a.createElement(_e.a,null),title:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430",description:"\u041f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435 \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430",type:"page",size:"medium",padding:2};var ot=it,ut=Object($.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}})),st=function(){var e=ut();return r.a.createElement(Ve.a,{className:e.backdrop,open:!0},r.a.createElement(_e.a,{color:"inherit"}))},dt=a(482),mt=a(479),pt=function(e){var t=function(e){return r.a.createElement(mt.a,Object.assign({elevation:6,variant:"filled"},e))};return r.a.createElement(dt.a,{open:e.open,autoHideDuration:e.duration,onClose:e.close},r.a.createElement(t,{severity:e.type,onClose:e.close},e.text))};pt.defaultProps={type:"error",duration:4e3};var bt=pt,ft=a(251),Et=a.n(ft),gt=a(438),vt=Object($.a)((function(e){return{popover:{pointerEvents:"none"},paper:{padding:e.spacing(1)}}})),Ot=function(e){var t,a,l,c=r.a.useState(null),i=Object(d.a)(c,2),o=i[0],u=i[1],s=vt(),m=function(e){u(e.currentTarget)},p=function(){u(null)},b=Boolean(o),f=function(e){var t=e.open;return r.a.createElement(gt.a,{id:"mouse-over-popover",className:s.popover,classes:{paper:s.paper},open:t,anchorEl:o,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},onClose:p,disableRestoreFocus:!0},r.a.createElement(O.a,null))};switch(e.size){case"small":t=40,a=40,l="h6";break;case"medium":t=60,a=60,l="h5";break;case"large":t=100,a=100,l="h4";break;default:t=60,a=60,l="h5"}return"page"===e.type?r.a.createElement(n.Fragment,null,r.a.createElement(f,{open:b}),r.a.createElement(ct.a,{style:{transform:"translate(-50%, -50%)"},position:"absolute",top:"50%",left:"50%",textAlign:"center"},e.image&&r.a.createElement(ct.a,{clone:!0,mb:e.title||e.description?2:0,width:"".concat(t,"%"),height:"".concat(a,"%")},e.image),e.title&&r.a.createElement(ct.a,{mb:!e.description&&e.button?2:0},r.a.createElement(O.a,{variant:l},e.title)),e.description&&r.a.createElement(ct.a,{mb:e.button&&2},r.a.createElement(O.a,{variant:"body1"},e.description)),r.a.createElement(Et.a,{onMouseEnter:m,onMouseLeave:p}),e.button&&e.button)):"card"===e.type?r.a.createElement(n.Fragment,null,r.a.createElement(f,{open:b}),r.a.createElement(ct.a,{padding:e.padding,textAlign:"center"},e.image&&r.a.createElement(ct.a,{clone:!0,mb:e.title||e.description?2:0,width:"".concat(t,"%"),height:"".concat(a,"%")},e.image),e.title&&r.a.createElement(ct.a,{mb:!e.description&&e.button?2:0},r.a.createElement(O.a,{variant:l},e.title)),e.description&&r.a.createElement(ct.a,{mb:e.button&&2},r.a.createElement(O.a,{variant:"body1"},e.description)),r.a.createElement(Et.a,{onMouseEnter:m,onMouseLeave:p}),e.button&&e.button)):null};Ot.defaultProps={title:"\u041e\u0448\u0438\u0431\u043a\u0430",description:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a",type:"page",size:"medium",padding:2};var jt=Ot,ht=(a(489),a(490),a(462),a(310)),yt=a.n(ht),xt=a(169),wt=a.n(xt),Ct=a(311),kt=a.n(Ct),St=a(312),Nt=a.n(St),qt=a(313),$t=a.n(qt);Object($.a)((function(e){return{root:{position:"fixed",bottom:"30px",right:"30px"},speedDial:{position:"absolute",bottom:e.spacing(2),right:e.spacing(2)}}})),yt.a,wt.a,kt.a,Nt.a,$t.a;var Ft=a(289);function At(){var e=Object(F.a)(["\n  query {\n    polls {\n      id\n      title\n      code\n      liter\n      color\n      startDate\n      endDate\n      sample\n      way\n      type\n      complete\n      questionsCount\n      answersCount\n      active\n      cities {\n        id\n        title\n      }\n    }\n  }\n"]);return At=function(){return e},e}var Tt=Object(D.a)(At());function It(){var e=Object(F.a)(["\n  mutation ($newPoll: PollWithConfig!, $poolOfQuestions: [QuestionInput], $logic: LogicInput, $topic: [TopicInput]) {\n    addPoll(poll: $newPoll, questions: $poolOfQuestions, logic: $logic, topic: $topic) {\n      id\n      title\n      code\n      liter\n      color\n      startDate\n      endDate\n      sample\n      way\n      type\n      complete\n      questionsCount\n      answersCount\n      active\n      cities {\n        id\n        title\n      }\n    }\n  }\n"]);return It=function(){return e},e}var Bt=Object(D.a)(It()),Dt=function(){var e=Object(n.useState)(!1),t=Object(d.a)(e,2),a=t[0],l=t[1],c=Object(Ft.a)(Tt),i=c.loading,o=c.error,u=c.data,s=Object(M.useMutation)(Bt,{onError:function(e){l({type:"error",text:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c. \u0421\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u043a\u043e\u043d\u0441\u043e\u043b\u044c."}),console.log(e)},update:function(e,t){var a=t.data,n=e.readQuery({query:Tt}).polls;e.writeQuery({query:Tt,data:{polls:[].concat(Object(ue.a)(n),[a.addPoll])}})}}),m=Object(d.a)(s,2),p=m[0],b=m[1].loading;if(i)return r.a.createElement(ot,null);if(o)return r.a.createElement(jt,{title:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a",description:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u043a\u0440\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0435. \u0421\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u043a\u043e\u043d\u0441\u043e\u043b\u044c"});var f=function(){return b?r.a.createElement(st,null):null};return r.a.createElement(n.Fragment,null,r.a.createElement(bt,{open:a,text:a?a.text:"",type:a?a.type:"",close:function(){return l(!1)}}),r.a.createElement(f,null),r.a.createElement(se.a,{maxWidth:"md"},r.a.createElement(Te,{data:u})),r.a.createElement(lt,{addPoll:p}))},Mt=function(){return r.a.createElement(n.Fragment,null,r.a.createElement(oe,{title:"\u041e\u043f\u0440\u043e\u0441\u044b"}),r.a.createElement(Dt,null))},Pt=a(314),zt=a.n(Pt),Rt=Object($.a)((function(e){return{grow:{flexGrow:1},menuButton:{marginRight:e.spacing(2),textDecoration:"none"},title:Object(b.a)({display:"none"},e.breakpoints.up("xs"),{display:"block"}),inputRoot:{color:"inherit"},sectionDesktop:{display:"flex"},sectionMobile:Object(b.a)({display:"flex"},e.breakpoints.up("sm"),{display:"none"}),arrow:{color:"white",textDecoration:"none"}}})),Wt=function(e){var t=e.title,a=Rt(),n=r.a.useState(null),l=Object(d.a)(n,2),c=l[0],i=l[1],o=Boolean(c),u=function(){i(null)},s=r.a.createElement(h.a,{anchorEl:c,anchorOrigin:{vertical:"top",horizontal:"right"},id:"primary-apps-menu",keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:o,onClose:u},r.a.createElement(j.a,{onClick:u},"\u041f\u0423\u0421\u0422\u041e_1"),r.a.createElement(j.a,{onClick:u},"\u041f\u0423\u0421\u0422\u041e_2"));return r.a.createElement("div",{className:a.grow},r.a.createElement(f.a,{position:"static"},r.a.createElement(E.a,null,r.a.createElement(m.b,{to:"/"},r.a.createElement(v.a,{edge:"start",className:a.menuButton,color:"inherit","aria-label":"open drawer"},r.a.createElement(zt.a,{className:a.arrow}))),r.a.createElement(O.a,{className:a.title,variant:"h6",noWrap:!0},t),r.a.createElement("div",{className:a.grow}),r.a.createElement("div",{className:a.sectionDesktop},r.a.createElement(v.a,{edge:"end","aria-label":"apps","aria-controls":"primary-apps-menu","aria-haspopup":"true",onClick:function(e){i(e.currentTarget)},color:"inherit"},r.a.createElement(C.a,null))))),s)},Lt=a(465),Ut=a(478),Ht=a(480),Qt=function(e){var t=e.answer,a=e.focusHandler,l=e.blurHandler,c=Object(n.useRef)(null);Object(n.useEffect)((function(){t.focus&&c.current.focus(),""!==t.freeAnswerText&&(c.current.value=t.freeAnswerText)}),[]);return t.showFreeAnswer?r.a.createElement("span",null,r.a.createElement("input",{className:"free-answer",type:"text",ref:c,"data-code":t.code,"data-keycode":t.keyCode,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0432\u043e\u0431\u043e\u0434\u043d\u044b\u0439 \u043e\u0442\u0432\u0435\u0442",onKeyUp:function(e){var t=e.keyCode;if(13===t){var a=c.current.value.replaceAll(/,/gi,";");return c.current.value=a,void e.currentTarget.blur()}if(27===t)return""!==c.current.value?void(c.current.value=""):void e.currentTarget.blur()},onFocus:a,onBlur:l})):null},Vt=a(76),_t=a.n(Vt),Jt=function(e){var t=e.answer,a=e.clickHandler,l=e.focusHandler,c=e.blurHandler,i=e.settings,o=Object(n.useRef)(null),u=["answer-wrap"],s=["answer-title"];t.selected&&u.push("selected"),t.disabled&&s.push("disabled");return r.a.createElement(n.Fragment,null,r.a.createElement("div",{onClick:function(e){a(o.current)},className:u.join(" "),ref:o,"data-code":t.keyCode},r.a.createElement("div",{className:"answer-title"},r.a.createElement("span",{className:"answer-key"},t.showIndex),r.a.createElement("span",null," "),i.codesShow&&r.a.createElement("span",{className:"answer-code"},t.code),r.a.createElement("span",null," - "),r.a.createElement("span",{className:s.join(" ")},t.title),r.a.createElement("span",{className:"free-answer-icon"},t.freeAnswer?r.a.createElement(_t.a,{fontSize:"small"}):null),r.a.createElement("span",{className:"answer-exclude-message"},t.excludeM)),r.a.createElement("div",null,t.showFreeAnswer&&r.a.createElement(Qt,{answer:t,focus:t.focus,focusHandler:l,blurHandler:c}))))},Gt=a(486),Kt=a(481),Zt=Object($.a)((function(e){return{root:{width:500,"& > * + *":{marginTop:e.spacing(3)}},errorText:{color:"red"}}}));function Xt(e){var t=e.data,a=e.limit,l=e.settings,c=e.multipleHandler,i=Zt(),o=Object(n.useState)([]),u=Object(d.a)(o,2),s=u[0],m=u[1],p=Object(n.useState)([]),b=Object(d.a)(p,2),f=b[0],E=b[1],g=Object(n.useState)({state:!1,text:""}),v=Object(d.a)(g,2),O=v[0],j=v[1];Object(n.useEffect)((function(){var e=t.filter((function(e){if(e.selected)return e})),a=t.map((function(e){return e.code}));E(a),m(e)}),[]);return r.a.createElement("div",{className:i.root},r.a.createElement(Kt.a,{multiple:a>1,id:"tags-standard",options:t,onChange:function(e,t,n){switch(n){case"select-option":if(t.length>a)return void j({state:!0,text:"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u043e\u0435 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043e\u0442\u0432\u0435\u0442\u043e\u0432"});m(t),j(Object(Ie.a)(Object(Ie.a)({},O),{},{state:!1}));break;case"remove-option":m(t),j(Object(Ie.a)(Object(Ie.a)({},O),{},{state:!1}));break;case"clear":m([]),j(Object(Ie.a)(Object(Ie.a)({},O),{},{state:!1}))}},value:s,getOptionLabel:function(e){return e.title},getOptionDisabled:function(e){return e.disabled},renderOption:function(e){return l.codesShow?r.a.createElement("span",null,r.a.createElement("span",{style:{fontSize:"10px"}},e.code)," - ",e.title):e.title},onBlur:function(e){j(Object(Ie.a)(Object(Ie.a)({},O),{},{state:!1})),c(s,f)},renderTags:function(e,t){return e.map((function(e,a){return r.a.createElement(Gt.a,Object.assign({},t({index:a}),{variant:"outlined",key:a,label:l.codesShow?r.a.createElement("span",null,r.a.createElement("span",{style:{fontSize:"10px"}},e.code)," - ",e.title):r.a.createElement("span",null,e.title)}))}))},renderInput:function(e){return r.a.createElement(We.a,Object.assign({},e,{error:O.state,variant:"standard",label:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043e\u0442\u0432\u0435\u0442\u044b",helperText:O.state?O.text:""}))}}))}var Yt=function(e){var t=e.count,a=e.question,l=e.clickHandler,c=e.focusHandler,i=e.blurHandler,o=e.multipleHandler,u=e.settings;return r.a.createElement(n.Fragment,null,r.a.createElement("span",{className:"drive-question-card"},r.a.createElement("h3",{className:"question-title-card"},r.a.createElement("span",{className:"question-number"},t+1),r.a.createElement("span",null," - "),a.title),r.a.createElement("div",null,a.mega?r.a.createElement(Xt,{data:a.answers,limit:a.limit,settings:u,multipleHandler:o}):a.answers.map((function(e,t){return r.a.createElement(Jt,{key:t,answer:e,clickHandler:l,focusHandler:c,blurHandler:i,settings:u})})))))},ea=a(464),ta=function(e){var t=e.open,a=e.handleClose,n=e.finishAll,l=e.confirm;return r.a.createElement("div",null,r.a.createElement(De.a,{open:t,onClose:a,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(ze.a,{id:"alert-dialog-title"},"\u0414\u0430\u043d\u043d\u0430\u044f \u0430\u043d\u043a\u0435\u0442\u0430 \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043d\u0430."),r.a.createElement(Pe.a,null,r.a.createElement(ea.a,{id:"alert-dialog-description"},"\u041a\u0430\u0436\u0435\u0442\u0441\u044f \u0434\u0430\u043d\u043d\u0430\u044f \u0430\u043d\u043a\u0435\u0442\u0430 \u0437\u0430\u043a\u043e\u043d\u0447\u0435\u043d\u0430. \u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043a \u0434\u0440\u0443\u0433\u043e\u0439 \u0430\u043d\u043a\u0435\u0442\u0435?")),r.a.createElement(Me.a,null,r.a.createElement(Re.a,{onClick:a,color:"primary"},"\u041e\u0442\u043c\u0435\u043d\u0430"),r.a.createElement(Re.a,{onClick:n,color:"primary"},"\u0417\u0430\u043a\u043e\u043d\u0447\u0438\u0442\u044c"),r.a.createElement(Re.a,{onClick:l,color:"primary",autoFocus:!0},"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0430\u044f"))))},aa=[8,9,16,17,18,19,20,32,33,34,35,36,38,40,91,106,107,109,110,112,113,114,115,116,117,118,119,120,121,122,123,144],na=[27],ra=[48,96,13],la={97:49,98:50,99:51,100:52,101:53,102:54,103:55,104:56,105:57},ca=[37,39,49,50,51,52,53,54,55,56,57,81,87,69,82,84,89,85,73,79,80,65,83,68,70,71,72,74,75,76,90,88,67,97,98,99,100,101,102,103,104,105],ia=[["1",49],["2",50],["3",51],["4",52],["5",53],["6",54],["7",55],["8",56],["9",57],["Q",81],["W",87],["E",69],["R",82],["T",84],["Y",89],["U",85],["I",73],["O",79],["P",80],["A",65],["S",83],["D",68],["F",70],["G",71],["H",72],["J",74],["K",75],["L",76],["Z",90],["X",88],["C",67],["V",86],["B",66],["N",78],["M",77]];function oa(e){return void 0!==la[e]?la[e]:e}var ua=function(e){return function(e){return ca.includes(e)}(e)?{do:1,trueCode:oa(e)}:function(e){return aa.includes(e)}(e)?{do:4}:function(e){return na.includes(e)}(e)?{do:2}:function(e){return ra.includes(e)}(e)?{do:3}:{do:4}},sa=function(e,t,a,n,r){var l=e.questions[t],c=[],i=[],o=n.invisible?l.answers.filter((function(e){return!n.invisible.includes(e.code)})):l.answers,u=!!n.criticalExclude&&n.criticalExclude,s=!1,d=!1,m=!1,p=o.map((function(e,t){var r={freeAnswer:!1,showFreeAnswer:!1,freeAnswerText:"",focus:!1,selected:!1,disabled:!1,exclude:[],excludeM:""};if(i.push(e.code),u){for(var p in u)p===e.code&&(r=Object(Ie.a)(Object(Ie.a)({},r),{},{exclude:[].concat(Object(ue.a)(r.exclude),Object(ue.a)(u[p]))})),u[p].includes(e.code)&&(r=Object(Ie.a)(Object(Ie.a)({},r),{},{exclude:[].concat(Object(ue.a)(r.exclude),[p])}));r.exclude.map((function(e){a.pool.includes(e)&&(r=Object(Ie.a)(Object(Ie.a)({},r),{},{disabled:!0,excludeM:"\u043f\u0440\u043e\u0442\u0438\u0432\u043e\u0440\u0435\u0447\u0438\u0442 \u043a\u043e\u0434\u0443 ".concat(e)}))}))}if(o.length>ia.length?c[t]=[t,t+1]:(c[t]=ia[t][1],r=Object(Ie.a)(Object(Ie.a)({},r),{},{showIndex:ia[t][0],keyCode:ia[t][1]})),a.pool.includes(e.code)&&(d=!0,r=Object(Ie.a)(Object(Ie.a)({},r),{},{selected:!0})),n.unique.includes(e.code)&&(s=!0,r=Object(Ie.a)(Object(Ie.a)({},r),{},{unique:!0})),n.unique.includes(e.code)&a.pool.includes(e.code)&&(m=!0),n.freeAnswers.includes(e.code)&&(r=Object(Ie.a)(Object(Ie.a)({},r),{},{freeAnswer:!0,focus:!0})),a[l.id])for(var b=a[l.id].data,f=0;f<b.length;f++)e.code===b[f].answerCode&&""!==b[f].freeAnswerText&&(r=Object(Ie.a)(Object(Ie.a)({},r),{},{freeAnswer:!0,showFreeAnswer:!0,freeAnswerText:b[f].freeAnswerText,focus:!1}));return Object(Ie.a)(Object(Ie.a)({},e),r)})),f={mega:!1,megaMltp:!1,multiple:!1};if(l.limit>1&&(f=Object(Ie.a)(Object(Ie.a)({},f),{},{multiple:!0})),f=o.length>ia.length?Object(Ie.a)(Object(Ie.a)({},f),{},{mega:!0,megaMltp:l.limit}):Object(Ie.a)(Object(Ie.a)({},f),{},{keyCodesPool:c}),p.reduce((function(e,t){return e+t.disabled}),0)===p.length)return r((function(e){return Object(Ie.a)(Object(Ie.a)({},e),{},Object(b.a)({},l.id,{data:[],codesPool:i,count:t}))})),{next:!0};void 0===a[l.id]&&r((function(e){return Object(Ie.a)(Object(Ie.a)({},e),{},Object(b.a)({},l.id,{data:[],codesPool:i,count:t}))}));var E=p.map((function(e,t){return d&&s?m?e.unique&e.selected?e:Object(Ie.a)(Object(Ie.a)({},e),{},{disabled:!0}):e.unique?Object(Ie.a)(Object(Ie.a)({},e),{},{disabled:!0}):e:e})).map((function(e){if(u)for(var t in u)if(a.pool.includes(t))return u[t].includes(e.code)?Object(Ie.a)(Object(Ie.a)({},e),{},{disabled:!0}):e;return e}));return{next:!1,data:Object(Ie.a)(Object(Ie.a)(Object(Ie.a)({},l),f),{},{answers:E})}},da=function(e){var t=new(window.AudioContext||window.webkitAudioContext);e=Object.assign({volume:.25,frequency:3020,duration:150,type:"sine"},e);var a=t.createOscillator(),n=t.createGain();a.connect(n),n.connect(t.destination),n.gain.value=e.volume,a.frequency.value=e.frequency,a.type=e.type,a.start(),setTimeout((function(){a.stop()}),e.duration)},ma=function(e){var t=e.poll,a=e.logics,l=e.setCurrentQuestion,c=e.saveAndGoBack,i=e.saveWorksheet,o=t.questions.length,u=Object(n.useState)(null),s=Object(d.a)(u,2),m=s[0],p=s[1],f=Object(n.useState)({codesShow:!0}),E=Object(d.a)(f,2),g=E[0],v=E[1],j=Object(n.useState)(1),h=Object(d.a)(j,2),y=h[0],x=h[1],w=Object(n.useState)(a),C=Object(d.a)(w,1)[0],k=Object(n.useState)(0),S=Object(d.a)(k,2),N=S[0],q=S[1],$=Object(n.useState)({pool:[]}),F=Object(d.a)($,2),A=F[0],T=F[1],I=Object(n.useState)(!1),B=Object(d.a)(I,2),D=B[0],M=B[1],P=Object(n.useState)(!1),z=Object(d.a)(P,2),R=z[0],W=z[1],L=Object(n.useState)(""),U=Object(d.a)(L,2),H=U[0],Q=U[1],V=function(e){var t=e.target,a=e.keyCode;if("BODY"===t.nodeName){var n=ua(a);switch(n.do){case 1:return void Y(n.trueCode);case 3:return void _();case 2:return void X();case 4:default:return}}},_=function(){if(D)Z();else{if(A[m.id].data.length)return void J();da()}},J=function(){x(1),q(N<o-1?N+1:0)},G=function(){x(0),q(0===N?o-1:N-1)};Object(n.useEffect)((function(){return document.addEventListener("keyup",V),function(){document.removeEventListener("keyup",V)}})),Object(n.useEffect)((function(){var e=sa(t,N,A,C,T);e&&(e.next?q(y?N+1:N-1):(p(e.data),l(e.data)))}),[N]);var K=function(e){var a=0;for(var n in e)"pool"!==n&&a++;if(a<t.questions.length)return!1;for(var r in e)if("pool"!==r){var l=e[r];if(!l.data.length){if(!C.criticalExclude)return Q("\u041f\u0440\u043e\u043f\u0443\u0449\u0435\u043d ".concat(l.count+1,"\u0439 \u0432\u043e\u043f\u0440\u043e\u0441")),M(!1),!1;var c=function(){var t=e.pool,a=l.codesPool,n=C.criticalExclude;if(a.filter((function(e,a){for(var r in n)if(t.includes(r)&&n[r].includes(e))return!1;return!0})).length)return Q("\u041f\u0440\u043e\u043f\u0443\u0449\u0435\u043d ".concat(l.count+1,"\u0439 \u0432\u043e\u043f\u0440\u043e\u0441")),M(!1),{v:!1}}();if("object"===typeof c)return c.v}}return Q(""),M(!0),!0},Z=function(){W(!0)},X=function(){var e=A[m.id].data.reduce((function(e,t){return[].concat(Object(ue.a)(e),[t.answerCode])}),[]),t={};for(var a in A)a===m.id?t[m.id]=Object(Ie.a)(Object(Ie.a)({},A[m.id]),{},{data:[]}):t="pool"!==a?Object(Ie.a)(Object(Ie.a)({},t),{},Object(b.a)({},a,A[a])):Object(Ie.a)(Object(Ie.a)({},t),{},{pool:A.pool.filter((function(t){return!e.includes(t)}))});T(t),K(t),p((function(e){return Object(Ie.a)(Object(Ie.a)({},e),{},{answers:e.answers.map((function(e){return Object(Ie.a)(Object(Ie.a)({},e),{},{selected:!1,showFreeAnswer:!1,disabled:!1})})).map((function(e){var a=[];for(var n in C.criticalExclude)n===e.code&&(a=[].concat(Object(ue.a)(a),Object(ue.a)(C.criticalExclude[n]))),C.criticalExclude[n].includes(e.code)&&(a=[].concat(Object(ue.a)(a),[n]));for(var r=0;r<a.length;r++)if(t.pool.includes(a[r]))return Object(Ie.a)(Object(Ie.a)({},e),{},{disabled:!0,excludeM:"\u043f\u0440\u043e\u0442\u0438\u0432\u043e\u0440\u0435\u0447\u0438\u0442 \u043a\u043e\u0434\u0443 ".concat(a[r])});return Object(Ie.a)(Object(Ie.a)({},e),{},{disabled:!1,excludeM:""})}))})})),M(!1)},Y=function(e){var t=+e,a=m.keyCodesPool,n=m.answers.filter((function(e){return e.keyCode===t}))[0];if(39!==t)if(37!==t)if(a.includes(t)){if(A.pool.includes(n.code)){var r={};for(var l in A)r=l===m.id?Object(Ie.a)(Object(Ie.a)({},r),{},Object(b.a)({},m.id,Object(Ie.a)(Object(Ie.a)({},A[m.id]),{},{data:A[m.id].data.filter((function(e){return e.answerCode!==n.code}))}))):"pool"!==l?Object(Ie.a)(Object(Ie.a)({},r),{},Object(b.a)({},l,A[l])):Object(Ie.a)(Object(Ie.a)({},r),{},{pool:A.pool.filter((function(e){return e!==n.code}))});return T(r),p((function(e){return Object(Ie.a)(Object(Ie.a)({},e),{},{answers:e.answers.map((function(e){return e.code===n.code?Object(Ie.a)(Object(Ie.a)({},e),{},{selected:!1,showFreeAnswer:!1}):e})).map((function(e){return r[m.id].data.length?e:Object(Ie.a)(Object(Ie.a)({},e),{},{disabled:!1})})).map((function(e){var t=[];for(var a in C.criticalExclude)a===e.code&&(t=[].concat(Object(ue.a)(t),Object(ue.a)(C.criticalExclude[a]))),C.criticalExclude[a].includes(e.code)&&(t=[].concat(Object(ue.a)(t),[a]));for(var n=0;n<t.length;n++)if(r.pool.includes(t[n]))return Object(Ie.a)(Object(Ie.a)({},e),{},{disabled:!0,excludeM:"\u043f\u0440\u043e\u0442\u0438\u0432\u043e\u0440\u0435\u0447\u0438\u0442 \u043a\u043e\u0434\u0443 ".concat(t[n])});return Object(Ie.a)(Object(Ie.a)({},e),{},{disabled:!1,excludeM:""})})).map((function(e){return r[m.id].data.length&&e.unique?Object(Ie.a)(Object(Ie.a)({},e),{},{disabled:!0}):e}))})})),void K(r)}if(C.unique.includes(n.code)&&A[m.id].data.length)return void da();if(n.disabled||A[m.id].data.length>=m.limit)return void da();if(n.freeAnswer)return void p((function(e){return Object(Ie.a)(Object(Ie.a)({},e),{},{answers:e.answers.map((function(e){return e.keyCode===n.keyCode?Object(Ie.a)(Object(Ie.a)({},e),{},{selected:!0,showFreeAnswer:!0}):e}))})}));var c={answerCode:n.code,answerId:n.id,freeAnswer:!1,freeAnswerText:""};for(var i in C.criticalExclude)if(A.pool.includes(i)&&C.criticalExclude[i].includes(n.code))return void da();for(var o in C.nonCriticalExclude)A.pool.includes(o)&&C.nonCriticalExclude[o].includes(n.code)&&console.log("\u041e\u0442\u0432\u0435\u0442 \u043d\u0435 \u0441\u043e\u0432\u0441\u0435\u043c \u043a\u043e\u0440\u0440\u0435\u043a\u0442\u0435\u043d");var u=Object.assign({},A);if(u[m.id].data.push(c),u.pool.push(n.code),T(u),p((function(e){return Object(Ie.a)(Object(Ie.a)({},e),{},{answers:e.answers.map((function(e){return e.keyCode===t?Object(Ie.a)(Object(Ie.a)({},e),{},{selected:!0}):e})).map((function(e){return C.unique.includes(e.code)&e.keyCode!==t?Object(Ie.a)(Object(Ie.a)({},e),{},{disabled:!0}):e})).map((function(e){return n.exclude.includes(e.code)?Object(Ie.a)(Object(Ie.a)({},e),{},{disabled:!0,excludeM:"\u043f\u0440\u043e\u0442\u0438\u0432\u043e\u0440\u0435\u0447\u0438\u0442 \u043a\u043e\u0434\u0443 ".concat(n.code)}):e}))})})),C.unique.includes(n.code)&&p((function(e){return Object(Ie.a)(Object(Ie.a)({},e),{},{answers:e.answers.map((function(e){return e.keyCode===t?e:Object(Ie.a)(Object(Ie.a)({},e),{},{disabled:!0})}))})})),K(u))return;if(A[m.id].data.length>=m.limit)return void setTimeout((function(){J()}),100)}else da();else setTimeout((function(){G()}),0);else setTimeout((function(){J()}),0)},ee=function(){return r.a.createElement(O.a,{variant:"overline",display:"block",gutterBottom:!0},H)};return r.a.createElement(n.Fragment,null,r.a.createElement(ta,{open:R,handleClose:function(){W(!1)},finishAll:function(){M(!1),W(!1),c(A)},confirm:function(){i(A),T({pool:[]}),q(0),M(!1),W(!1)}}),r.a.createElement(Oe.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement(Oe.a,{container:!0,xs:6,md:3,justify:"flex-start"},r.a.createElement(Lt.a,{value:"end",control:r.a.createElement(Ut.a,{color:"primary",onChange:function(e){v((function(e){return Object(Ie.a)(Object(Ie.a)({},e),{},{codesShow:!e.codesShow})}))},defaultChecked:g.codesShow}),label:"\u041a\u043e\u0434\u044b \u043e\u0442\u0432\u0435\u0442\u043e\u0432",labelPlacement:"end"})),r.a.createElement(Ht.a,{only:["sm","xs"]},r.a.createElement(Oe.a,{container:!0,md:6,justify:"center"},r.a.createElement(ee,null))),r.a.createElement(Oe.a,{container:!0,xs:6,md:3,justify:"flex-end"},r.a.createElement("p",null,"\u0412\u0441\u0435\u0433\u043e: ",r.a.createElement("span",null,r.a.createElement("strong",null,o)))),r.a.createElement(Ht.a,{mdUp:!0},r.a.createElement(Oe.a,{container:!0,xs:12,justify:"center"},r.a.createElement(ee,null)))),m&&r.a.createElement(Yt,{count:N,question:m,settings:g,clickHandler:function(e){var t=e.dataset.code,a=m.answers.filter((function(e){return e.keyCode===+t}))[0];a.freeAnswer&&a.selected||Y(t)},blurHandler:function(e){var t=e.currentTarget.value,a=e.currentTarget.dataset.code,n=e.currentTarget.dataset.keycode,r=m.answers.filter((function(e){return e.keyCode===+n}))[0];if(""===t){var l={};for(var c in A)l=c===m.id?Object(Ie.a)(Object(Ie.a)({},l),{},Object(b.a)({},m.id,Object(Ie.a)(Object(Ie.a)({},A[m.id]),{},{data:A[m.id].data.filter((function(e){return e.answerCode!==a}))}))):"pool"!==c?Object(Ie.a)(Object(Ie.a)({},l),{},Object(b.a)({},c,A[c])):Object(Ie.a)(Object(Ie.a)({},l),{},{pool:A.pool.filter((function(e){return e!==a}))});return T(l),p((function(e){return Object(Ie.a)(Object(Ie.a)({},e),{},{answers:e.answers.map((function(e){return e.code===a?Object(Ie.a)(Object(Ie.a)({},e),{},{selected:!1,showFreeAnswer:!1}):e})).map((function(e){return l[m.id].data.length?e:Object(Ie.a)(Object(Ie.a)({},e),{},{disabled:!1})})).map((function(e){var t=[];for(var a in C.criticalExclude)a===e.code&&(t=[].concat(Object(ue.a)(t),Object(ue.a)(C.criticalExclude[a]))),C.criticalExclude[a].includes(e.code)&&(t=[].concat(Object(ue.a)(t),[a]));for(var n=0;n<t.length;n++)if(l.pool.includes(t[n]))return Object(Ie.a)(Object(Ie.a)({},e),{},{disabled:!0,excludeM:"\u043f\u0440\u043e\u0442\u0438\u0432\u043e\u0440\u0435\u0447\u0438\u0442 \u043a\u043e\u0434\u0443 ".concat(t[n])});return Object(Ie.a)(Object(Ie.a)({},e),{},{disabled:!1,excludeM:""})})).map((function(e){return l[m.id].data.length&&e.unique?Object(Ie.a)(Object(Ie.a)({},e),{},{disabled:!0}):e}))})})),void K(l)}var i={answerCode:a,answerId:r.id,freeAnswer:!1,freeAnswerText:t},o={};A.pool.includes(a)?(o=Object.assign({},A))[m.id]=Object(Ie.a)(Object(Ie.a)({},o[m.id]),{},{data:A[m.id].data.map((function(e){return e.answerCode===a?Object(Ie.a)(Object(Ie.a)({},e),{},{freeAnswerText:t}):e}))}):((o=Object.assign({},A))[m.id].data.push(i),o.pool.push(a)),T(o),C.unique.includes(a)&&p((function(e){return Object(Ie.a)(Object(Ie.a)({},e),{},{answers:e.answers.map((function(e){return e.keyCode===+n?e:Object(Ie.a)(Object(Ie.a)({},e),{},{disabled:!0})}))})})),p((function(e){return Object(Ie.a)(Object(Ie.a)({},e),{},{answers:e.answers.map((function(e){return e.keyCode===a?Object(Ie.a)(Object(Ie.a)({},e),{},{selected:!0}):e})).map((function(e){return C.unique.includes(e.code)&e.keyCode!==a?Object(Ie.a)(Object(Ie.a)({},e),{},{disabled:!0}):e})).map((function(e){return r.exclude.includes(e.code)?Object(Ie.a)(Object(Ie.a)({},e),{},{disabled:!0,excludeM:"\u043f\u0440\u043e\u0442\u0438\u0432\u043e\u0440\u0435\u0447\u0438\u0442 \u043a\u043e\u0434\u0443 ".concat(r.code)}):e}))})})),K(o)||A[m.id].data.length>=m.limit-1&&setTimeout((function(){J()}),100)},multipleHandler:function(e,t){if(e.length){var a=e.map((function(e){return e.code})),n=e.map((function(e){return{answerCode:e.code,freeAnswer:!1,freeAnswerText:""}})),r=A.pool.filter((function(e){return!t.includes(e)}));return T((function(e){var t;return Object(Ie.a)(Object(Ie.a)({},e),{},(t={},Object(b.a)(t,m.id,Object(Ie.a)(Object(Ie.a)({},e[m.id]),{},{data:Object(ue.a)(n)})),Object(b.a)(t,"pool",[].concat(Object(ue.a)(r),Object(ue.a)(a))),t))})),void(e.length&&setTimeout((function(){J()}),100))}T((function(e){var a;return Object(Ie.a)(Object(Ie.a)({},e),{},(a={},Object(b.a)(a,m.id,Object(Ie.a)(Object(Ie.a)({},e[m.id]),{},{data:[]})),Object(b.a)(a,"pool",e.pool.filter((function(e){return!t.includes(e)}))),a))}))}}),r.a.createElement(Re.a,{onClick:G,variant:"contained",className:"control-button"},"\u041d\u0430\u0437\u0430\u0434"),r.a.createElement(Re.a,{onClick:J,variant:"contained",className:"control-button"},"\u0412\u043f\u0435\u0440\u0435\u0434"),D&&r.a.createElement(Re.a,{onClick:Z,variant:"contained",className:"control-button"},"\u0424\u0438\u043d\u0438\u0448"))},pa=a(395),ba=function(e){var t=e.open,a=e.handleClose,l=e.save,c=e.header,i=e.text,o=e.options,u=Object(n.useState)(""),s=Object(d.a)(u,2),m=s[0],p=s[1];return r.a.createElement("div",null,r.a.createElement(De.a,{open:t,"aria-labelledby":"form-dialog-title"},r.a.createElement(ze.a,{id:"form-dialog-title"},c),r.a.createElement(Pe.a,null,r.a.createElement(ea.a,null,i),r.a.createElement(pa.a,{fullWidth:!0,native:!0,value:m.id,onChange:function(e){return function(e){var t=e.target,a=t.options,n=t.selectedIndex,r=t.value,l=a[n].innerHTML;p({id:r,title:l})}(e)}},r.a.createElement("option",{"aria-label":"None",disabled:!0,selected:!0,value:""}),o.map((function(e,t){return r.a.createElement("option",{key:e.id,value:e.id},e.title)})))),r.a.createElement(Me.a,null,r.a.createElement(Re.a,{onClick:a,color:"primary"},"\u041e\u0442\u043c\u0435\u043d\u0430"),r.a.createElement(Re.a,{onClick:function(){l(m)},disabled:!Boolean(m),color:"primary"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"))))},fa=a(291);function Ea(){var e=Object(F.a)(["\n  query ($id: ID!) {\n    poll(id: $id) {\n      id\n      questions{\n        id\n        title\n        limit\n        order\n        answers {\n          id\n          code\n          title\n        }\n      }\n      cities {\n        id\n        title\n      }\n      logic {\n        path\n      }\n    }\n  }\n"]);return Ea=function(){return e},e}var ga=Object(D.a)(Ea());function va(){var e=Object(F.a)(["\nmutation ($poll: String!, $city: String!, $user: String!, $pool: [String], $data: [ResultData]) {\n  saveResult(\n    poll: $poll,\n    city: $city,\n    user: $user,\n    pool: $pool,\n    data: $data\n  )\n}\n"]);return va=function(){return e},e}var Oa=Object(D.a)(va()),ja=function(e){var t={section:/^\s*\[\s*([^\]]*)\s*\]\s*$/,param:/^\s*([^=]+?)\s*=\s*(.*?)\s*$/,comment:/^\s*#.*$/},a={},n=e.split(/[\r\n]+/),r=null;return n.forEach((function(e){if(!t.comment.test(e))if(t.param.test(e)){var n=e.match(t.param);r?a[r][n[1]]=ha(n[2]):a[n[1]]=ha(n[2])}else if(t.section.test(e)){var l=e.match(t.section);a[l[1]]={},r=l[1]}else 0==e.length&&r&&(r=null)})),function(e){var t=/([0-9]{1,})/gm,a={},n=null;for(var r in e)n=r.match(/[a-zA-Z]*/gm)[0],a[n]={};for(var l in e){n=l.match(/[a-zA-Z]*/gm)[0];var c=l.match(t);null!==c?a[n][c]=e[l]:a[n][1]=e[l]}return a}(a)};function ha(e){var t,a=e.replace(/\s*/g,""),n={srange:/([0-9]{1,3})|\[(.+?)\]/gm},r=[];do{if((t=n.srange.exec(a))&&(void 0!==t[1]&&r.push(t[1]),void 0!==t[2])){var l=t[2];r=r.concat(ya(l))}}while(t);return r}function ya(e){return e.replace(/(\d{1,3})\s*-\s*(\d{1,3})/gm,(function(){var e=[],t=arguments.length<=1?void 0:arguments[1],a=arguments.length<=2?void 0:arguments[2];t>a&&(t=arguments.length<=2?void 0:arguments[2],a=arguments.length<=1?void 0:arguments[1]);for(var n=a-t+1;n;)t+="",e.push(t.padStart(3,"0")),t++,n--;return e})).split(",")}var xa=function(e){var t={};for(var a in e)!function(){switch(a){case"difficult":t=Object(Ie.a)(Object(Ie.a)({},t),{},{difficult:e[a][1].answers});break;case"freeAnswers":t=Object(Ie.a)(Object(Ie.a)({},t),{},{freeAnswers:e[a][1].answers});break;case"exclude":var n=e[a],r={},l={},c=function(e){"1"===n[e].critical[0]&&n[e].answers.map((function(t){r[t]=n[e].exclude})),"0"===n[e].critical[0]&&n[e].answers.map((function(t){l[t]=n[e].exclude}))};for(var i in n)c(i);t=Object(Ie.a)(Object(Ie.a)({},t),{},{criticalExclude:r,nonCriticalExclude:l});break;case"unique":t=Object(Ie.a)(Object(Ie.a)({},t),{},{unique:e[a][1].answers});break;case"invisible":var o=e[a],u=[];for(var s in o)u=[].concat(Object(ue.a)(u),Object(ue.a)(o[s].answers));t=Object(Ie.a)(Object(Ie.a)({},t),{},{invisible:u})}}();return t};function wa(){var e=Object(F.a)(["\n    query CurrentUserQuery {\n      currentUser {\n        id\n        username\n      }\n    }\n    "]);return wa=function(){return e},e}var Ca=Object($.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}})),ka=function(e){var t=e.id,a=Object(n.useState)(!1),c=Object(d.a)(a,2),i=c[0],o=c[1],u=Object(B.a)(),s=Object(n.useState)({show:!1,type:"error",message:"",duration:6e3}),m=Object(d.a)(s,2),b=(m[0],m[1],u.readQuery({query:Object(D.a)(wa())}).currentUser),f=(Ca(),Object(p.f)()),E=Object(n.useState)(null),g=Object(d.a)(E,2),v=g[0],O=g[1],j=Object(n.useState)(!1),h=Object(d.a)(j,2),y=(h[0],h[1],Object(n.useState)(null)),x=Object(d.a)(y,2),w=x[0],C=x[1],k=Object(n.useState)(!0),S=Object(d.a)(k,2),N=S[0],q=S[1],$=Object(n.useState)(null),F=Object(d.a)($,2),A=F[0],T=F[1],I=Object(n.useState)(null),M=Object(d.a)(I,2),P=M[0],z=M[1],R=Object(n.useState)({multiple:!1}),W=Object(d.a)(R,2),L=W[0],U=W[1],H=Object(Ft.a)(ga,{variables:{id:t},onCompleted:function(e,t){_(V.poll.logic.path),C(V.poll.cities)}}),Q=(H.loading,H.error),V=H.data,_=function(e){fetch(l+e).then((function(e){return e.text()})).then((function(e){var t=ja(e),a=xa(t);T(a)}))},J=Object(fa.a)(Oa,{onError:function(e){console.log(e),o({type:"error",text:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c. \u0421\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u043a\u043e\u043d\u0441\u043e\u043b\u044c."})}}),G=Object(d.a)(J,2),K=G[0],Z=G[1].loading;Object(n.useEffect)((function(){if(A){var e=V.poll.questions.slice().sort((function(e,t){return e.order>t.order?1:-1}));if(A.invisible){var t=A.invisible,a=e.filter((function(e){for(var a=e.answers,n=a.length,r=0,l=0;l<n;l++)t.includes(a[l].code)&&r++;return r!==n}));O({id:V.poll.id,questions:a})}else O({id:V.poll.id,questions:e})}}),[A]);var X=function(){return Z?r.a.createElement(st,null):null};if(!v||!w||!A||!b)return r.a.createElement(ot,null);if(Q)return console.log(JSON.stringify(Q)),r.a.createElement(jt,{title:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a",description:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u043a\u0440\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0435. \u0421\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u043a\u043e\u043d\u0441\u043e\u043b\u044c"});var Y=function(e){var t=[];for(var a in e)"pool"!==a&&t.push({id:a,data:e[a].data.map((function(e){return{answer:e.answerId,code:e.answerCode,text:e.freeAnswerText}}))});return t};return r.a.createElement(n.Fragment,null,r.a.createElement(bt,{open:i,text:i?i.text:"",type:i?i.type:"",close:function(){return o(!1)}}),r.a.createElement(X,null),r.a.createElement("div",{style:{backgroundColor:L.multiple?"rgb(208 226 252)":"#fff"}},r.a.createElement(se.a,{maxWidth:"md"},r.a.createElement(ba,{open:N,options:w,header:"\u0413\u043e\u0440\u043e\u0434",text:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0433\u043e\u0440\u043e\u0434 \u0432 \u043a\u043e\u0442\u043e\u0440\u043e\u043c \u043f\u0440\u043e\u0432\u043e\u0434\u0438\u043b\u0441\u044f \u043e\u043f\u0440\u043e\u0441",save:function(e){z(e),q(!1)},handleClose:function(){q(!1),f.push("/")}}),r.a.createElement(ma,{poll:v,logics:A,setCurrentQuestion:U,saveAndGoBack:function(e){var t=Y(e);K({variables:{poll:v.id,city:P.id,user:b.id,pool:e.pool,data:t}}).then((function(e){f.push("/")}))},saveWorksheet:function(e){var t=Y(e);K({variables:{poll:v.id,city:P.id,user:b.id,pool:e.pool,data:t}})}}))))},Sa=function(){var e=Object(p.g)(),t=e.id,a=e.code;return r.a.createElement(n.Fragment,null,r.a.createElement(Wt,{title:"\u041e\u043f\u0440\u043e\u0441 "+a+" - \u0432\u0431\u0438\u0432\u0430\u043d\u0438\u0435"}),r.a.createElement(ka,{id:t}))},Na=a(477),qa=a(467);function $a(e){var t=e.children,a=e.value,n=e.index,l=e.p,c=Object(Be.a)(e,["children","value","index","p"]);return r.a.createElement("div",Object.assign({role:"tabpanel",className:"right-pannel",hidden:a!==n,id:"scrollable-auto-tabpanel-".concat(n),"aria-labelledby":"scrollable-auto-tab-".concat(n)},c),a===n&&r.a.createElement(ct.a,{p:l},t))}function Fa(e){return{id:"scrollable-auto-tab-".concat(e),"aria-controls":"scrollable-auto-tabpanel-".concat(e)}}var Aa=Object($.a)((function(e){return{tabs:{minWidth:"160px",borderRight:"1px solid ".concat(e.palette.divider),overflow:"visible"}}})),Ta=function(e){var t=e.data,a=e.value,n=e.handleChange,l=Aa();return r.a.createElement(Na.a,{orientation:"vertical",variant:"scrollable",value:a,onChange:n,"aria-label":"Vertical tabs",scrollButtons:"auto",className:l.tabs},t.map((function(e,t){return r.a.createElement(qa.a,Object.assign({label:e.label},Fa({index:t})))})))},Ia=function(e){var t=e.data,a=e.value,n=e.handleChange;return r.a.createElement(f.a,{position:"static",color:"default"},r.a.createElement(Na.a,{variant:"scrollable",value:a,onChange:n,scrollButtons:"auto","aria-label":"horizontal auto tabs"},t.map((function(e,t){return r.a.createElement(qa.a,Object.assign({label:e.label},Fa({index:t})))}))))},Ba=function(e){var t=e.data,a=r.a.useState(0),l=Object(d.a)(a,2),c=l[0],i=l[1],o=function(e,t){i(t)};return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"root-wrap"},r.a.createElement(Ht.a,{xsDown:!0},r.a.createElement(Ta,{data:t,value:c,handleChange:o})),r.a.createElement(Ht.a,{smUp:!0},r.a.createElement(Ia,{data:t,value:c,handleChange:o})),t.map((function(e,t){return r.a.createElement($a,{value:c,index:t,p:e.padding?e.padding:1},e.component)}))))};function Da(){var e=Object(F.a)(["\n  query pollQuery($id: ID!) {\n    poll(id: $id) {\n      id\n      title\n      code\n      liter\n      questionsCount\n      answersCount\n      cities {\n        id\n        title\n      }\n      questions {\n        id\n        title\n        limit\n        order\n        answers {\n          id\n          title\n          order\n          code\n        }\n      }\n      logic {\n        path\n      }\n    }\n  }\n"]);return Da=function(){return e},e}var Ma=Object(D.a)(Da()),Pa=function(e){var t=e.id,a=Object(n.useState)(null),l=Object(d.a)(a,2),c=l[0],i=l[1],o=Object(n.useState)(null),u=Object(d.a)(o,2),s=u[0],m=u[1],p=Object(n.useState)(null),b=Object(d.a)(p,2),f=b[0],E=b[1],g=Object(n.useState)(null),v=Object(d.a)(g,2),O=v[0],j=v[1],h=Object(Ft.a)(Ma,{variables:{id:t},onCompleted:function(){i({id:x.poll.id,title:x.poll.title,questionsCount:x.poll.questionsCount,answersCount:x.poll.answersCount}),w(x.poll.logic.path)}}),y=h.loading,x=h.data,w=function(e){fetch("http://localhost:4000".concat(e)).then((function(e){return e.text()})).then((function(e){var t=ja(e),a=xa(t);E(a)}))};if(Object(n.useEffect)((function(){if(f){var e=[];if(f.invisible){var t=f.invisible;e=x.poll.questions.filter((function(e){for(var a=e.answers,n=a.length,r=0,l=0;l<n;l++)t.includes(a[l].code)&&r++;if(r!==n)return!0}))}else e=x.poll.questions;var a=e.map((function(e,t){var a=e.answers.map((function(e,t){var a={};return f.invisible&&f.invisible.includes(e.code)&&(a=Object(Ie.a)(Object(Ie.a)({},a),{},{disabled:!0})),f.freeAnswers&&f.freeAnswers.includes(e.code)&&(a=Object(Ie.a)(Object(Ie.a)({},a),{},{freeAnswer:!0})),f.unique&&f.unique.includes(e.code)&&(a=Object(Ie.a)(Object(Ie.a)({},a),{},{unique:!0})),f.difficult&&f.difficult.includes(e.code)&&(a=Object(Ie.a)(Object(Ie.a)({},a),{},{difficult:!0})),Object(Ie.a)(Object(Ie.a)({},e),a)}));return Object(Ie.a)(Object(Ie.a)({},e),{},{answers:a})}));m(a)}}),[f]),y||!f||!s)return r.a.createElement(n.Fragment,null,r.a.createElement(_e.a,null),r.a.createElement("p",null,"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430. \u041f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435 \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430"));return r.a.createElement(n.Fragment,null,r.a.createElement(Oe.a,{container:!0},r.a.createElement(ct.a,null,r.a.createElement("h3",null,c.title)),r.a.createElement(Oe.a,{xs:12,item:!0,container:!0,justify:"flex-start"},r.a.createElement(ct.a,null,r.a.createElement(We.a,{id:"outlined-number",label:"Number",type:"number",value:O,onChange:function(e){var t=e.currentTarget.value;t<0||j(t)},InputLabelProps:{shrink:!0},variant:"outlined"})),r.a.createElement(ct.a,{p:1},r.a.createElement(Re.a,{variant:"contained",color:"primary",disabled:!O,onClick:function(){var e=O;console.log(s);for(var t=0;t<e;t++)s.map((function(e,t){}))}},"\u0413\u0435\u043d\u0435\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c")))))},za=a(124),Ra=a.n(za),Wa=a(318),La=a.n(Wa),Ua=a(317),Ha=a.n(Ua),Qa=function(e){var t=e.open,a=e.confirm,n=e.close,l=e.data;return r.a.createElement(De.a,{open:t,onClose:n,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(ze.a,{id:"alert-dialog-title"},l.title),r.a.createElement(Pe.a,null,r.a.createElement(ea.a,{id:"alert-dialog-description"},l.text)),r.a.createElement(Me.a,null,r.a.createElement(Re.a,{onClick:n,color:"primary"},"\u041e\u0442\u043c\u0435\u043d\u0430"),r.a.createElement(Re.a,{onClick:a,color:"primary",autoFocus:!0},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")))},Va=a(234),_a=a(315),Ja=a.n(_a),Ga=function(e){var t=e.result,a=e.index,l=e.show,c=e.edit,i=e.selected,o=e.select,u=e.count;return r.a.createElement(n.Fragment,null,r.a.createElement(Va.a,{className:"respondent-card"},r.a.createElement(Oe.a,{container:!0,item:!0,justify:"space-between"},r.a.createElement(O.a,{variant:"h6",gutterBottom:!0},a+1),t.processed?r.a.createElement("p",null,"dd"):"",r.a.createElement(Ut.a,{checked:i,onChange:function(e){return o({id:t.id,index:a,event:e})},inputProps:{"aria-label":"primary checkbox"}})),r.a.createElement(O.a,{variant:"subtitle2",gutterBottom:!0},"\u043d.\u043f.: ",t.city?t.city.title:"-"),r.a.createElement(O.a,{variant:"caption",display:"block",gutterBottom:!0},"\u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d: ",t.created),r.a.createElement(O.a,{variant:"caption",display:"block",gutterBottom:!0},"\u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d: ",t.lastModified),r.a.createElement(Oe.a,{container:!0,item:!0,justify:"space-between",className:"card-service-buttons"},r.a.createElement(v.a,{className:"card-button","aria-label":"delete",onClick:function(){return c(t.id)},disabled:u>1},r.a.createElement(_t.a,{fontSize:"small"})),r.a.createElement(v.a,{className:"card-button","aria-label":"delete",onClick:function(){return l(t)},disabled:u>1},r.a.createElement(Ja.a,{fontSize:"small"})))))},Ka=function(e){var t=e.data,a=e.selectPool,l=e.setSelectPool,c=Object(n.useState)(),i=Object(d.a)(c,2),o=i[0],u=i[1],s=function(e){var t=e.result.slice().sort((function(e,t){return e.code>t.code?1:-1})).map((function(e){return""!==e.text?e.code+" "+e.text:e.code}));console.log(t)},m=function(){},p=function(e){if(e.event.nativeEvent.shiftKey){var n=(e.index+1>o?t.slice(o,e.index+1):t.slice(e.index,o)).filter((function(e){return!a.includes(e.id)})).map((function(e){return e.id}));return l((function(e){return[].concat(Object(ue.a)(e),Object(ue.a)(n))})),void u(e.index)}if(u(e.index),e.event.nativeEvent.ctrlKey){if(a.includes(e.id)){var r=a.filter((function(t){return t!==e.id}));return void l(r)}l((function(t){return[].concat(Object(ue.a)(t),[e.id])}))}else if(a.includes(e.id)){if(a.length>1)return void l([e.id]);l([])}else l([e.id])};return r.a.createElement(n.Fragment,null,r.a.createElement(Oe.a,{container:!0,spacing:3,xs:12},t.map((function(e,t){return r.a.createElement(Oe.a,{item:!0,xs:12,sm:6,md:3,lg:2,key:t},r.a.createElement(Ga,{result:e,index:t,show:s,edit:m,selected:a.includes(e.id),select:p,count:a.length}))}))))},Za=a(468),Xa=a(316),Ya=a.n(Xa),en=a(224),tn=a.n(en),an=a(225),nn=a.n(an),rn=function(e){var t=e.filters,a=e.setActiveFilters,l=Object(n.useState)({age:t.age,cities:t.cities.map((function(e){return{value:e.id,title:e.title,category:e.category.label}})).sort((function(e,t){return e.category-t.category})),intervs:t.intervievers.map((function(e){return{value:e.id,title:e.username}})),sex:t.sex,status:t.status}),c=Object(d.a)(l,1)[0],i=Object(n.useState)(null),o=Object(d.a)(i,2),u=o[0],s=o[1],m=Object(n.useState)(!0),p=Object(d.a)(m,2),b=(p[0],p[1]),f=Object(n.useState)(!1),E=Object(d.a)(f,2),g=E[0],v=E[1];Object(n.useEffect)((function(){if(u){for(var e in u)if(u[e])return void b(!1);b(!0)}}),[u]);var O=r.a.createElement(tn.a,{fontSize:"small"}),j=r.a.createElement(nn.a,{fontSize:"small"});return c?r.a.createElement(n.Fragment,null,r.a.createElement(Oe.a,{container:!0,justify:"flex-start",alignItems:"center",spacing:2},r.a.createElement(Oe.a,{item:!0,xs:12,sm:6,md:3,lg:3},r.a.createElement(We.a,{style:{width:"100%"},id:"date",type:"date",variant:"outlined",value:u&&u.shownDate?u.shownDate:"",onChange:function(e){var t=/(\d{4})-(\d{2})-(\d{2})/,a=e.target.value;s((function(n){return Object(Ie.a)(Object(Ie.a)({},n),{},{date:e.target.value.replace(t,"$3.$2.$1"),shownDate:a})})),v(!0)},InputProps:{startAdornment:r.a.createElement(Za.a,{position:"start"},r.a.createElement(I.a,{title:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"},r.a.createElement(Ya.a,{style:{cursor:"pointer"},onClick:function(){s((function(e){return Object(Ie.a)(Object(Ie.a)({},e),{},{date:null,shownDate:null})})),v(!0)}})))}})),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6,md:3,lg:3},r.a.createElement(Kt.a,{multiple:!0,limitTags:1,options:c.age,disableCloseOnSelect:!0,clearOnEscape:!0,onChange:function(e,t){var a=t.map((function(e){return e.value}));s((function(e){return Object(Ie.a)(Object(Ie.a)({},e),{},{ages:a.length?a:null})})),v(!0)},noOptionsText:"\u041e\u043f\u0446\u0438\u0438 \u043d\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d\u044b",getOptionLabel:function(e){return e.title},renderOption:function(e,t){var a=t.selected;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ut.a,{icon:O,checkedIcon:j,style:{marginRight:8},checked:a}),e.title)},renderInput:function(e){return r.a.createElement(We.a,Object.assign({},e,{variant:"outlined",label:"\u0412\u043e\u0437\u0440\u0430\u0441\u0442"}))}})),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6,md:3,lg:3},r.a.createElement(Kt.a,{options:c.sex,onChange:function(e,t){s((function(e){return Object(Ie.a)(Object(Ie.a)({},e),{},{sex:t?t.value:null})})),v(!0)},noOptionsText:"\u041e\u043f\u0446\u0438\u0438 \u043d\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d\u044b",getOptionLabel:function(e){return e.title},renderInput:function(e){return r.a.createElement(We.a,Object.assign({},e,{variant:"outlined",label:"\u041f\u043e\u043b"}))}})),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6,md:3,lg:3},r.a.createElement(Kt.a,{multiple:!0,limitTags:1,options:c.cities,groupBy:function(e){return e.category},disableCloseOnSelect:!0,clearOnEscape:!0,onChange:function(e,t){var a=t.map((function(e){return e.value}));s((function(e){return Object(Ie.a)(Object(Ie.a)({},e),{},{cities:a.length?a:null})})),v(!0)},noOptionsText:"\u041e\u043f\u0446\u0438\u0438 \u043d\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d\u044b",getOptionLabel:function(e){return e.title},renderOption:function(e,t){var a=t.selected;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ut.a,{icon:O,checkedIcon:j,style:{marginRight:8},checked:a}),e.title)},renderInput:function(e){return r.a.createElement(We.a,Object.assign({},e,{variant:"outlined",label:"\u0413\u043e\u0440\u043e\u0434"}))}}))),r.a.createElement(Oe.a,{container:!0,justify:"flex-start",alignItems:"center",spacing:2},r.a.createElement(Oe.a,{item:!0,xs:12,sm:6,md:3,lg:3},r.a.createElement(Kt.a,{multiple:!0,limitTags:1,options:c.intervs,disableCloseOnSelect:!0,clearOnEscape:!0,onChange:function(e,t){var a=t.map((function(e){return e.value}));s((function(e){return Object(Ie.a)(Object(Ie.a)({},e),{},{intervs:a.length?a:null})})),v(!0)},noOptionsText:"\u041e\u043f\u0446\u0438\u0438 \u043d\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d\u044b",getOptionLabel:function(e){return e.title},renderOption:function(e,t){var a=t.selected;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ut.a,{icon:O,checkedIcon:j,style:{marginRight:8},checked:a}),e.title)},renderInput:function(e){return r.a.createElement(We.a,Object.assign({},e,{variant:"outlined",label:"\u0418\u043d\u0442\u0435\u0440\u0432\u044c\u044e\u0435\u0440"}))}})),r.a.createElement(Oe.a,{item:!0,xs:12,sm:6,md:3,lg:3},r.a.createElement(Kt.a,{options:c.status,onChange:function(e,t){s((function(e){return Object(Ie.a)(Object(Ie.a)({},e),{},{status:t?t.value:null})})),v(!0)},noOptionsText:"\u041e\u043f\u0446\u0438\u0438 \u043d\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0435\u043d\u044b",getOptionLabel:function(e){return e.title},renderInput:function(e){return r.a.createElement(We.a,Object.assign({},e,{variant:"outlined",label:"\u0421\u0442\u0430\u0442\u0443\u0441"}))}})),r.a.createElement(Oe.a,{item:!0,container:!0,xs:12,sm:6,md:3,lg:3,justify:"flex-start"},r.a.createElement(Re.a,{variant:"contained",color:"primary",onClick:function(){a(u),v(!1)},disabled:!g},"\u043f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c")))):r.a.createElement("p",null)},ln=a(466),cn=a(35),on=a(227),un=a.n(on),sn=a(226),dn=a.n(sn),mn=function(e){var t=e.answer,a=r.a.createElement(I.a,{title:"\u0421\u0432\u043e\u0431\u043e\u0434\u043d\u044b\u0439 \u043e\u0442\u0432\u0435\u0442"},r.a.createElement(_t.a,null)),n=r.a.createElement(I.a,{title:"\u0417\u0430\u0442\u0440\u0443\u0434\u043d\u044f\u044e\u0441\u044c \u043e\u0442\u0432\u0435\u0442\u0438\u0442\u044c"},r.a.createElement(dn.a,null)),l=r.a.createElement(I.a,{title:"\u0423\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u0439 \u043e\u0442\u0432\u0435\u0442"},r.a.createElement(un.a,null)),c=[];return t.difficult&&c.push(n),t.freeAnswer&&c.push(a),t.unique&&c.push(l),c},pn=function(e){var t=e.answer,a=e.index,n=e.pool,l=e.totalAnswers,c=function(){var e=null;if(t.results.length){for(var a=t.results.length,r=0;r<a;r++)n.includes(t.results[r].respondent.id)&&e++;return e?(e/l*100).toFixed(1):null}return null};return r.a.createElement("div",{className:t.disabled?"answer-card invisible":"answer-card"},r.a.createElement("span",{className:"answer-number"},a+1,"."),r.a.createElement("span",{className:"devider"}," "),r.a.createElement("span",{className:"answer-code"},t.code),r.a.createElement("span",{className:"devider"}," - "),r.a.createElement("span",{className:"answer-title"},t.title),r.a.createElement("span",{className:"answer-extend"},r.a.createElement(mn,{answer:t})),r.a.createElement("span",null,r.a.createElement(c,null)))},bn=function(e){var t=e.question,a=e.index,l=e.pool,c=Object(n.useState)(t.answers.reduce((function(e,t){if(t.results.length)for(var a=0;a<t.results.length;a++)return l.includes(t.results[a].respondent.id)?e+1:e;return e}),0)),i=Object(d.a)(c,2),o=i[0];i[1];return r.a.createElement(de.a,{className:"question-card"},r.a.createElement(pe.a,null,r.a.createElement("div",{className:"question-header"},r.a.createElement(I.a,{title:"\u041c\u0430\u043a\u0441. \u043a\u043e\u043b-\u0432\u043e \u043e\u0442\u0432\u0435\u0442\u043e\u0432"},r.a.createElement("span",{className:"question-limit"},t.limit)),r.a.createElement("span",{className:"question-number"},a+1,". "),r.a.createElement("span",{className:"question-title",color:"textSecondary",gutterBottom:!0},t.title)),t.answers.map((function(e,t){return r.a.createElement(pn,{key:t,answer:e,index:t,pool:l,totalAnswers:o})}))))},fn=function(e){var t=e.data,a=e.selectPool,n=r.a.useState(!1),l=Object(d.a)(n,2),c=l[0],i=l[1],o=Object(cn.a)(),u=Object(ln.a)(o.breakpoints.down("sm")),s=function(){i(!1)};return r.a.createElement("div",null,r.a.createElement(Re.a,{variant:"outlined",color:"primary",onClick:function(){i(!0)}},"Open responsive dialog"),r.a.createElement(De.a,{fullScreen:u,maxWidth:"md",open:c,onClose:s,"aria-labelledby":"responsive-dialog-title"},r.a.createElement(ze.a,{id:"responsive-dialog-title"},"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b"),r.a.createElement(Pe.a,null,r.a.createElement(ea.a,null,t.poll.questions.map((function(e,t){return r.a.createElement(bn,{index:t,key:e.id,question:e,pool:a})})))),r.a.createElement(Me.a,null,r.a.createElement(Re.a,{autoFocus:!0,onClick:s,color:"primary"},"\u041e\u0442\u043c\u0435\u043d\u0430"),r.a.createElement(Re.a,{onClick:s,color:"primary",autoFocus:!0},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"))))};function En(){var e=Object(F.a)(["\n  query ($id: String!) {\n    pollResults(id: $id) {\n      id\n      user {\n        id\n        username\n      }\n      city {\n        id\n        title\n        category {\n          title\n        }\n      }\n      created\n      lastModified\n      processed\n      result {\n        answer\n        code\n        text\n      }\n    }\n  }\n\n"]);return En=function(){return e},e}function gn(){var e=Object(F.a)(["\nquery ($id: ID!) {\n  poll(id: $id) {\n    id\n    title\n    results {\n      id\n      user {\n        id\n        username\n      }\n      city {\n        id\n        title\n        category {\n          title\n        }\n      }\n      created\n      lastModified\n      processed\n      result {\n        answer\n        code\n        text\n      }\n    }\n    questions {\n      id\n      title\n      order\n      limit\n      type\n      answers {\n        id\n        title\n        order\n        code\n        results {\n          id\n          code\n          text\n          respondent {\n            id\n          }\n        }\n      }\n    }\n  }\n}\n"]);return gn=function(){return e},e}function vn(){var e=Object(F.a)(["\n  query {\n    cities {\n      id\n      title\n      population\n      category {\n        title\n      }\n    }\n    intervievers {\n      id\n      username\n    }\n    status {\n      value\n      title\n    }\n    sex {\n      value\n      title\n    }\n    age {\n      value\n      title\n    }\n  }\n"]);return vn=function(){return e},e}var On=Object(D.a)(vn()),jn=Object(D.a)(gn());Object(D.a)(En());function hn(){var e=Object(F.a)(["\nmutation ($results: [String]!) {\n  deleteResults(results: $results) {\n    id\n  }\n}\n"]);return hn=function(){return e},e}function yn(){var e=Object(F.a)(["\nmutation saveCityEdit($id: String!, $title: String!, $population: Int!, $category: String!) {\n  cityEdit(id: $id, title: $title, population: $population, category: $category) {\n    id\n    title\n    category\n    population\n  }\n}\n"]);return yn=function(){return e},e}function xn(){var e=Object(F.a)(["\nmutation saveNewCity($title: String!, $population: Int!, $category: String!) {\n  newCity(title: $title, population: $population, category: $category) {\n    id\n    title\n    category\n    population\n  }\n}\n"]);return xn=function(){return e},e}Object(D.a)(xn()),Object(D.a)(yn());var wn=Object(D.a)(hn()),Cn=function(e){var t=e.id,a=Object(n.useState)(!1),l=Object(d.a)(a,2),c=l[0],i=l[1],o=Object(n.useState)(!1),u=Object(d.a)(o,2),s=u[0],m=u[1],p=Object(n.useState)(),b=Object(d.a)(p,2),f=b[0],E=b[1],g=Object(n.useState)(),O=Object(d.a)(g,2),j=O[0],h=O[1],y=Object(n.useState)([]),x=Object(d.a)(y,2),w=x[0],C=x[1],k=Object(Ft.a)(jn,{variables:{id:t},onCompleted:function(){E(S.poll.results)}}),S=k.data,N=k.loading,q=k.error,$=Object(Ft.a)(On),F=$.data,A=$.loading,T=$.error,B=Object(M.useMutation)(wn,{onError:function(e){i({type:"error",text:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c. \u0421\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u043a\u043e\u043d\u0441\u043e\u043b\u044c."}),console.log(e)},update:function(e,t){var a=t.data.deleteResults.map((function(e){return e.id}));E(f.filter((function(e){return!a.includes(e.id)}))),console.log(e.data.data),e.modify({fields:{pollResults:function(e,t){var n=t.readField;return console.log(e),e.filter((function(e){return!a.includes(n("id",e))}))}}})}}),D=Object(d.a)(B,2),P=D[0],z=D[1].loading;if(Object(n.useEffect)((function(){if(j){var e=S.poll.results;console.log(e);var t=e.filter((function(e){return!j.cities||(!e.city||j.cities.includes(e.city.id))})).filter((function(e){return!j.intervs||(!e.user||j.intervs.includes(e.user.id))})).filter((function(e){return!j.date||(!e.lastModified||j.date==e.lastModified)}));E(t)}}),[j]),N||!f||A)return r.a.createElement(ot,null);if(q||T)return console.log(JSON.stringify(q)),r.a.createElement(jt,{title:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a",description:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u043a\u0440\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0435. \u0421\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u043a\u043e\u043d\u0441\u043e\u043b\u044c"});var R=function(){return z?r.a.createElement(st,null):null},W=function(e){var t=document.createElement("a"),a=new Blob([e],{type:"text/plain"});t.href=URL.createObjectURL(a),t.download="myFile.txt",document.body.appendChild(t),t.click()};return r.a.createElement(n.Fragment,null,r.a.createElement(fn,{data:S,selectPool:w}),r.a.createElement(bt,{open:c,text:c?c.text:"",type:c?c.type:"",close:function(){return i(!1)}}),r.a.createElement(R,null),r.a.createElement(Qa,{open:s,confirm:function(){P({variables:{results:w}}),m(!1)},close:function(){return m(!1)},data:{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b?",text:"\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435! \u0412\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u0431\u0443\u0434\u0443\u0442 \u0443\u043d\u0438\u0447\u0442\u043e\u0436\u0435\u043d\u044b \u0431\u0435\u0437\u0432\u043e\u0437\u0432\u0440\u0430\u0442\u043d\u043e. \u0411\u0443\u0434\u044c\u0442\u0435 \u0432\u043d\u0438\u043c\u0430\u0442\u0435\u043b\u044c\u043d\u044b!"}}),r.a.createElement("div",{className:"result-service-zone"},r.a.createElement(Oe.a,{container:!0,justify:"space-between",className:"service-buttons"},r.a.createElement(ct.a,{className:"main-buttons"},r.a.createElement(I.a,{title:"\u0412\u044b\u0433\u0440\u0443\u0437\u0438\u0442\u044c"},r.a.createElement(v.a,{color:"primary",component:"span",onClick:function(){for(var e=f.filter((function(e){return w.includes(e.id)})).map((function(e){return e.result})),t=e.length,a="",n=0;n<t;n++){a+=e[n].slice().sort((function(e,t){return e.code>t.code?1:-1})).map((function(e){return""!==e.text?e.code+" "+e.text:e.code}))+",999\n"}W(a)},disabled:!w.length},r.a.createElement(Qe.a,null))),r.a.createElement(I.a,{title:"\u0413\u0440\u0430\u0444\u0438\u043a\u0438"},r.a.createElement(v.a,{color:"primary",component:"span",onClick:function(){},disabled:!w.length},r.a.createElement(Ha.a,null))),r.a.createElement(I.a,{title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c"},r.a.createElement(v.a,{color:"primary",component:"span",onClick:function(){},disabled:!w.length},r.a.createElement(La.a,null))),r.a.createElement(I.a,{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"},r.a.createElement(v.a,{color:"secondary",component:"span",onClick:function(){return m(!0)},disabled:!w.length},r.a.createElement(Ra.a,null)))),r.a.createElement(Oe.a,{item:!0,container:!0,xs:12,sm:6,md:3,lg:3,justify:"flex-end"},r.a.createElement(ct.a,{m:1},r.a.createElement("a",{href:""},"\u0415\u0441\u0442\u044c \u0434\u0443\u0431\u043b\u0438")),r.a.createElement(ct.a,{m:1},r.a.createElement("a",{href:""},"\u0415\u0441\u0442\u044c \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b")))),r.a.createElement(rn,{filters:F,setActiveFilters:h}),r.a.createElement(Ka,{data:f,selectPool:w,setSelectPool:C})))},kn=a(319),Sn=a.n(kn),Nn=function(e){var t=e.question,a=Object(n.useState)({labels:t.answers.map((function(e,t){return t+1+""})),set:[{label:"\u041a\u043e\u043b-\u0432\u043e",data:t.answers.map((function(e){return e.results.length}))}]}),l=Object(d.a)(a,2),c=l[0],i=(l[1],Object(n.useRef)());return Object(n.useEffect)((function(){var e=i.current.getContext("2d");new Sn.a(e,{type:"bar",data:{labels:c.labels,datasets:c.set},options:{showLines:!1,animation:{duration:0},hover:{animationDuration:0},responsiveAnimationDuration:0,legend:{display:!1,labels:{fontColor:"black",fontSize:16}},scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}})}),[]),r.a.createElement(n.Fragment,null,r.a.createElement("canvas",{ref:i}))},qn=function(e){var t=e.index,a=e.question,l=Object(n.useState)(a.answers.reduce((function(e,t){return e+t.results.length}),0)),c=Object(d.a)(l,2),i=c[0];c[1];return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"linear-table"},r.a.createElement("table",null,r.a.createElement("tr",null,r.a.createElement("th",null,"\xa0"),r.a.createElement("th",null,"\u041e\u0442\u0432\u0435\u0442\u043e\u0432"),r.a.createElement("th",null,"%")),r.a.createElement("tr",null,r.a.createElement("td",{className:"question-title",colspan:"3"},r.a.createElement("strong",null,t+1,". ",a.title))),a.answers.map((function(e,t){return r.a.createElement("tr",null,r.a.createElement("td",{className:"answer-title"},r.a.createElement("strong",null,t+1),". - ",r.a.createElement("strong",null,e.code)," ",e.title),r.a.createElement("td",null,e.results.length),r.a.createElement("td",null,i?(e.results.length/i*100).toFixed(1):"-"))})))))};function $n(){var e=Object(F.a)(["\n  query ($id: ID!) {\n    poll(id: $id) {\n      id\n      title\n      questions {\n        id\n        title\n        order\n        limit\n        type\n        answers {\n          id\n          title\n          order\n          code\n          results {\n            id\n            code\n            text\n          }\n        }\n      }\n    }\n  }\n\n"]);return $n=function(){return e},e}var Fn=Object(D.a)($n()),An=function(e){var t=e.id,a=Object(Ft.a)(Fn,{variables:{id:t}}),l=a.data,c=a.loading,i=a.error;return c?r.a.createElement(ot,{type:"card"}):i?(console.log(JSON.stringify(i)),r.a.createElement(jt,{title:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a",description:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u043a\u0440\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0435. \u0421\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u043a\u043e\u043d\u0441\u043e\u043b\u044c"})):r.a.createElement(n.Fragment,null,r.a.createElement("p",null," \u041b\u0438\u043d\u0435\u0439\u043d\u043e\u0435 \u0440\u0430\u0441\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u0438\u0435 \u043e\u0442\u0432\u0435\u0442\u043e\u0432"),r.a.createElement(Oe.a,{item:!0,container:!0},l.poll.questions.map((function(e,t){return r.a.createElement(n.Fragment,null,r.a.createElement(Oe.a,{xs:12,md:6},r.a.createElement(qn,{index:t,key:e.id,question:e})),r.a.createElement(Oe.a,{xs:12,md:6},r.a.createElement(Nn,{question:e})),r.a.createElement("p",null))}))))};function Tn(){var e=Object(F.a)(["\n  query($id: ID!) {\n    poll(id: $id) {\n      id\n      title\n      code\n      liter\n      questions {\n        id\n        title\n        limit\n        order\n        answers {\n          id\n          title\n          order\n          code\n          results {\n            id\n            code\n            text\n          }\n        }\n      }\n      logic {\n        path\n      }\n    }\n  }\n"]);return Tn=function(){return e},e}var In=Object(D.a)(Tn()),Bn=function(e){var t=e.id,a=Object(n.useState)(!1),c=Object(d.a)(a,2),i=c[0],o=c[1],u=Object(n.useState)(!1),s=Object(d.a)(u,2),m=(s[0],s[1]),p=Object(n.useState)(!1),b=Object(d.a)(p,2),f=b[0],E=b[1],g=Object(n.useState)(!1),v=Object(d.a)(g,2),O=v[0],j=v[1];Object(n.useEffect)((function(){if(i){var e=y?y.poll:null;if(e){var t=e.questions,a=i.length,n=t.map((function(e){var t=e.answers.map((function(e){for(var t=Object(ue.a)(e.results),n=0;n<a;n++)i[n].includes(e.code)&&t.push({code:e.code,text:""});return Object(Ie.a)(Object(Ie.a)({},e),{},{results:t})}));return Object(Ie.a)(Object(Ie.a)({},e),{},{answers:t})}));j(n),console.log(n)}}}),[i]);var h=Object(Ft.a)(In,{variables:{id:t},onCompleted:function(){C(y.poll.logic.path),console.log(y)}}),y=h.data,x=h.loading,w=h.error,C=function(e){fetch(l+e).then((function(e){return e.text()})).then((function(e){var t=ja(e),a=xa(t);m(a)}))};if(x)return r.a.createElement(ot,{type:"card"});if(w)return console.log(JSON.stringify(w)),r.a.createElement(jt,{title:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a",description:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u043a\u0440\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0435. \u0421\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u043a\u043e\u043d\u0441\u043e\u043b\u044c"});var k=function(){return f?r.a.createElement(st,null):null};return r.a.createElement(n.Fragment,null,r.a.createElement(k,null),r.a.createElement("p",null," \u041f\u0430\u043a\u0435\u0442\u043d\u044b\u0439 \u0432\u0432\u043e\u0434 \u0434\u0430\u043d\u043d\u044b\u0445"),r.a.createElement(Oe.a,{container:!0,spacing:3,xs:12},r.a.createElement(Oe.a,{item:!0,xs:12},r.a.createElement(ct.a,null,r.a.createElement("label",null,"\u041f\u043e\u0434\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0444\u0430\u0439\u043b \u0441 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430\u043c\u0438"),r.a.createElement("br",null),r.a.createElement("input",{type:"file",onInput:function(e){if(e.preventDefault(),e.target.files[0]){E(!0);var t=new FileReader,a=e.target.files[0];a&&(t.onloadend=function(){for(var e=t.result.replace(/\r?\n/g,"").split(",999").filter((function(e){return e.length})),a=e.length,n=[],r=0;r<a;r++){for(var l=e[r].split(","),c=l.length,i=[],u=0;u<c;u++){var s=l[u];i.push(s.trim())}n.push(i)}o(n),E(!1)}),t.readAsText(a),e.target.value=""}}}))),O&&O.map((function(e,t){return r.a.createElement(n.Fragment,null,r.a.createElement(Oe.a,{xs:12,md:6},r.a.createElement(qn,{index:t,key:e.id,question:e}),r.a.createElement("p",null)),r.a.createElement(Oe.a,{xs:12,md:6},r.a.createElement(Nn,{question:e}),r.a.createElement("p",null)))}))))},Dn=function(e){var t=e.id,a=[{label:"\u041e\u0431\u0449\u0438\u0435",component:r.a.createElement(Cn,{id:t})},{label:"\u041b\u0438\u043d\u0435\u0439\u043a\u0430",component:r.a.createElement(An,{id:t})},{label:"\u041f\u0430\u043a\u0435\u0442\u043d\u044b\u0439",component:r.a.createElement(Bn,{id:t})},{label:"\u0422\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435",component:r.a.createElement(Pa,{id:t})}];return r.a.createElement(Ba,{data:a})},Mn=function(){var e=Object(p.g)(),t=e.id,a=e.code;return r.a.createElement(n.Fragment,null,r.a.createElement(Wt,{title:"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b "+a}),r.a.createElement("div",null,r.a.createElement(se.a,{maxWidth:"xl",style:{padding:0}},r.a.createElement(Dn,{id:t}))))};var Pn=function(e){var t=function(e){var t=new DOMParser,a=t.parseFromString("INVALID","text/xml").getElementsByTagName("parsererror")[0].namespaceURI,n=t.parseFromString(e,"text/xml");return!(n.getElementsByTagNameNS(a,"parsererror").length>0)&&n}(e);if(t){for(var a=t.getElementsByTagName("a"),n=a.length,r=[],l=0;l<n;l++){for(var c={unit:a[l].getAttribute("usr_intrv"),date:a[l].getAttribute("date_intrv"),lan:a[l].getAttribute("start-lan"),lon:a[l].getAttribute("start-lon")},i=a[l].getElementsByTagName("v"),o=i.length,u=[],s=0;s<o;s++){for(var d=i[s].getElementsByTagName("o"),m=d.length,p=0;p<m;p++){var b=d[p].getAttribute("c").padStart(3,"0");u.push(b)}c.answers=u}r.push(c)}return r}return!1},zn=Object($.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}})),Rn=function(){var e=Object(n.useState)(null),t=Object(d.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(!1),i=Object(d.a)(c,2),o=i[0],u=i[1],s=zn(),m=function(e){var t=e.data;return console.log(t),""!==t.lan||""!==t.lon?t.answers.toString()+",999":t.answers.toString()+",999-"};return r.a.createElement(n.Fragment,null,r.a.createElement(Ve.a,{className:s.backdrop,open:o},r.a.createElement(_e.a,{color:"inherit"})),r.a.createElement("input",{type:"file",onInput:function(e){e.preventDefault(),u(!0);var t=new FileReader,a=e.target.files[0];a&&(t.onloadend=function(){var e=t.result,a=Pn(e);return a?(l(a),void u(!1)):(u(!1),void console.log("\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 XML"))},t.readAsText(a))}}),r.a.createElement("div",{className:"parcha-results"},a?a.map((function(e,t){return r.a.createElement("div",null,r.a.createElement(m,{data:e}))})):r.a.createElement("p",null,"\u041f\u043e\u0434\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0434\u0430\u043d\u043d\u044b\u0435")))},Wn=function(e){var t=e.data;return r.a.createElement(n.Fragment,null,r.a.createElement(Oe.a,{container:!0,spacing:3},t.map((function(e,t){var a=e.person,n=e.places.map((function(e){var t=e.title,a=e.workDays.map((function(e){return r.a.createElement("span",null,r.a.createElement("span",null,e),r.a.createElement("br",null))}));return r.a.createElement("span",null,r.a.createElement("span",{className:"work-title"},t),r.a.createElement("br",null),r.a.createElement("span",null,a))}));return r.a.createElement(Oe.a,{item:!0,xs:6,sm:6,md:4},r.a.createElement(Va.a,null,r.a.createElement("span",null,"\u2116 \u043f.\u043f. ",t+1),r.a.createElement("br",null),r.a.createElement("span",null,"\u2116 \u043f\u043e \u0441\u043f\u0438\u0441\u043a\u0443 ",a[0]),r.a.createElement("br",null),r.a.createElement("span",null,a[1]),r.a.createElement("span",{className:"person-name"},"".concat(a[2]," ").concat(a[3]," ").concat(a[4].slice(0,-1)," ")),r.a.createElement("br",null),r.a.createElement("span",null,"".concat(a[2]," ").concat(a[3].substring(0,1),".").concat(a[4].substring(0,1),". ")),r.a.createElement("br",null),r.a.createElement("span",null,"\u0414\u0430\u0442\u0430 \u0440\u043e\u0436\u0434\u0435\u043d\u0438\u044f: ",a[5]),r.a.createElement("br",null),r.a.createElement("span",null,"\u0414\u0430\u0442\u0430 \u0443\u0432\u043e\u043b\u044c\u043d\u0435\u043d\u0438\u044f:"),r.a.createElement("span",{className:"person-out"}," ",a[6]),r.a.createElement(_.a,null),r.a.createElement("span",{className:"work-header"},r.a.createElement("em",null,"\u041c\u0435\u0441\u0442\u0430 \u0440\u0430\u0431\u043e\u0442\u044b:")),r.a.createElement("br",null),r.a.createElement("span",null,n)))}))))},Ln=function(e,t){for(var a=function(e,t){for(var a=[],n=[],r=[].concat(Object(ue.a)(t.empty),Object(ue.a)(t.need)),l=0;l<e.length;l++){for(var c=e[l][2],i=e[l][3],o=(e[l][4],c.split(" ")[0].toLowerCase()),u=0,s=0;s<r.length;s++){o===r[s].person[0].toLowerCase()&i===r[s].person[3]&&u++}u?n.push(e[l]):a.push(e[l])}for(var d=Object(ue.a)(t.need),m=[],p=[],b=0;b<n.length;b++){for(var f=n[b][0],E=n[b][1],g=n[b][2],v=n[b][3],O=n[b][4],j=g.split(" ")[0].toLowerCase(),h=0,y=0;y<d.length;y++){if(j===d[y].person[0].toLowerCase()&v===d[y].person[3]){var x=[f,E].concat(Object(ue.a)(d[y].person),[O]);m.push({person:x,data:d[y].data}),h++}}if(!h){var w=[f,E,g,v,O];p.push(w)}}return m}(e,t),n=a.length,r=[],l=0;l<n;l++){var c=a[l],i=c.person,o=c.data.split("\n").slice(3);r.push({person:i,places:Object(ue.a)(Hn(o.slice(1)))})}return r},Un=function(e){var t=e.match(/([\u0430-\u044f\u0410-\u042f]+)\s(\d{4})/),a=t[1],n=t[2];switch(a){case"\u044f\u043d\u0432\u0430\u0440\u044c":return"01.01."+n;case"\u0444\u0435\u0432\u0440\u0430\u043b\u044c":return"01.02."+n;case"\u043c\u0430\u0440\u0442":return"01.03."+n;case"\u0430\u043f\u0440\u0435\u043b\u044c":return"01.04."+n;case"\u043c\u0430\u0439":return"01.05."+n;case"\u0438\u044e\u043d\u044c":return"01.06."+n;case"\u0438\u044e\u043b\u044c":return"01.07."+n;case"\u0430\u0432\u0433\u0443\u0441\u0442":return"01.08."+n;case"\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044c":return"01.09."+n;case"\u043e\u043a\u0442\u044f\u0431\u0440\u044c":return"01.10."+n;case"\u043d\u043e\u044f\u0431\u0440\u044c":return"01.11."+n;case"\u0434\u0435\u043a\u0430\u0431\u0440\u044c":return"01.12."+n}},Hn=function(e){for(var t=[],a=1,n="",r=[],l=/^(\S+) (\d{4})\s/,c=0;c<e.length;c++)l.test(e[c])?(r.push(e[c]),c===e.length-1&&(t=[].concat(Object(ue.a)(t),[{title:n,work:r}])),a=1):(a?(t=[].concat(Object(ue.a)(t),[{title:n,work:r}]),n=e[c],r=[]):n+=" "+e[c],a=0);return t.slice(1)},Qn=Object($.a)((function(e){return{backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"}}})),Vn=function(){var e=Object(n.useState)(null),t=Object(d.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(null),i=Object(d.a)(c,2),o=i[0],u=i[1],s=Object(n.useState)(!1),m=Object(d.a)(s,2),p=m[0],b=m[1],f=Object(n.useState)(null),E=Object(d.a)(f,2),g=E[0],v=E[1],O=Object(n.useState)(null),j=Object(d.a)(O,2),h=j[0],y=j[1],x=Object(n.useState)(null),w=Object(d.a)(x,2),C=w[0],k=w[1],S=Object(n.useState)(null),N=Object(d.a)(S,2),q=N[0],$=N[1],F=Qn();return r.a.createElement(n.Fragment,null,r.a.createElement(Ve.a,{className:F.backdrop,open:p},r.a.createElement(_e.a,{color:"inherit"})),r.a.createElement(Oe.a,{container:!0,spacing:3},r.a.createElement(Oe.a,{item:!0,xs:!0},r.a.createElement(ct.a,null,r.a.createElement("label",null,"\u0421\u043f\u0438\u0441\u043e\u043a \u0432\u043e\u0435\u043d\u043d\u044b\u0445"),r.a.createElement("br",null),r.a.createElement("input",{type:"file",onInput:function(e){e.preventDefault(),v(null),b(!0);var t=new FileReader,a=e.target.files[0];a&&(t.onloadend=function(){var e=function(e){for(var t=[],a=e.split("\n"),n=0;n<a.length;n++){var r=[],l=a[n].split(";");r.push(l[0],l[1],l[2],l[3],l[4]),t.push(r)}return t}(t.result);u(e),b(!1)}),t.readAsText(a)}}))),r.a.createElement(Oe.a,{item:!0,xs:!0},r.a.createElement(ct.a,null,r.a.createElement("label",null,"\u0421\u043f\u0438\u0441\u043e\u043a \u043f\u0435\u0441\u0438\u043e\u043d\u043d\u043e\u0433\u043e \u0444\u043e\u043d\u0434\u0430"),r.a.createElement("br",null),r.a.createElement("input",{type:"file",onInput:function(e){e.preventDefault(),v(null),b(!0);var t=new FileReader,a=e.target.files[0];a&&(t.onloadend=function(){var e=function(e){for(var t=[],a=[],n=e.split("\n\r"),r=/\u043d\u0435\u0442 \u0441\u0432\u0435\u0434\u0435\u043d.., \u0441\u043e\u0441\u0442\u0430\u0432\u043b\u044f\u044e\u0449.. \u043f\u0435\u043d\u0441\u0438\u043e\u043d\u043d.. \u043f\u0440\u0430\u0432.?/,l=0;l<n.length;l++)if(r.test(n[l])){var c=[],i=n[l].split(" ");c.push(i[7],i[8],i[9],i[10]),t.push({person:c,data:null})}else{var o=[],u=n[l].split(" ");o.push(u[7],u[8],u[9],u[10]);var s=n[l];a.push({person:o,data:s})}return{empty:t,need:a}}(t.result);l(e),b(!1)}),t.readAsText(a)}})))),r.a.createElement(Oe.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:3},r.a.createElement(Oe.a,{item:!0},r.a.createElement(Re.a,{variant:"contained",color:"primary",onClick:function(){if(a&&o){v(null);var e=Ln(o,a);k(e),y(!0)}else v("\u041d\u0435 \u0432\u0441\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u043f\u043e\u0434\u0433\u0440\u0443\u0436\u0435\u043d\u044b")}},"\u041e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c")),r.a.createElement(Oe.a,{item:!0},r.a.createElement(Re.a,{variant:"contained",color:"primary",onClick:function(){if(h){var e=C.map((function(e,t){for(var a=/^(\d{2}).(\d{2}).(\d{4})/,n=Date.parse(e.person[6].replace(a,"01.$2.$3")),r=e.person[6].match(a),l=Date.parse("01."+r[2]+"."+(parseInt(r[3],10)+2)),c=e.places,i=[],o=0;o<c.length;o++){for(var u=c[o].work,s=[],d=0;d<u.length;d++){var m=Date.parse(Un(u[d]));m>=n&m<=l&&s.push(u[d])}s.length&&i.push({title:c[o].title,workDays:s})}return!!i.length&&Object(Ie.a)(Object(Ie.a)({},e),{},{places:i})})).filter((function(e){return e}));console.log(e),$(e)}else v(a&&o?"\u0421\u043f\u0435\u0440\u0432\u0430 \u043d\u0443\u0436\u043d\u043e \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u0442\u044c":"\u041d\u0435 \u0432\u0441\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u043f\u043e\u0434\u0433\u0440\u0443\u0436\u0435\u043d\u044b")}},"\u0421\u0440\u0430\u0432\u043d\u0438\u0442\u044c \u0434\u0430\u0442\u044b"))),r.a.createElement("p",null),g?r.a.createElement(mt.a,{severity:"error"},g):r.a.createElement("p",null),r.a.createElement("div",{className:"parcha-results"},q?r.a.createElement(Wn,{data:q}):r.a.createElement("p",null)))};function _n(e){var t=e.children,a=e.value,n=e.index,l=Object(Be.a)(e,["children","value","index"]);return r.a.createElement("div",Object.assign({role:"tabpanel",className:"right-pannel",hidden:a!==n,id:"vertical-tabpanel-".concat(n),"aria-labelledby":"vertical-tab-".concat(n)},l),a===n&&r.a.createElement(ct.a,{p:3},r.a.createElement(O.a,null,t)))}function Jn(e){return{id:"vertical-tab-".concat(e),"aria-controls":"vertical-tabpanel-".concat(e)}}var Gn=Object($.a)((function(e){return{root:{flexGrow:1,backgroundColor:e.palette.background.paper,display:"flex"},tabs:{borderRight:"1px solid ".concat(e.palette.divider),overflow:"visible"}}})),Kn=function(e){e.id,e.code;var t=Gn(),a=r.a.useState(0),n=Object(d.a)(a,2),l=n[0],c=n[1];return r.a.createElement("div",{className:t.root},r.a.createElement(Na.a,{orientation:"vertical",variant:"scrollable",value:l,onChange:function(e,t){c(t)},className:t.tabs},r.a.createElement(qa.a,Object.assign({label:"\u041f\u0430\u0440\u0447\u0430"},Jn(0))),r.a.createElement(qa.a,Object.assign({label:"Word"},Jn(1)))),r.a.createElement(_n,{value:l,index:0},r.a.createElement(Rn,null)),r.a.createElement(_n,{value:l,index:1},r.a.createElement(Vn,null)))},Zn=function(){return r.a.createElement(n.Fragment,null,r.a.createElement(Wt,{title:"\u0410\u043d\u0430\u043b\u0438\u0437\u0430\u0442\u043e\u0440 \u0434\u0430\u043d\u043d\u044b\u0445"}),r.a.createElement("div",{style:{paddingTop:"10px"}},r.a.createElement(se.a,{maxWidth:"xl"},r.a.createElement(Kn,null))))},Xn=function(){return r.a.createElement(n.Fragment,null,r.a.createElement(Wt,{title:"\u0422\u0435\u0441\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0438\u043d\u0435\u0440\u0444\u0435\u0439\u0441\u0430"}),r.a.createElement(se.a,{maxWidth:"lg"}))},Yn=a(320),er=a.n(Yn);function tr(){var e=Object(F.a)(["\n  query ($id: ID!) {\n    poll(id: $id) {\n      id\n      title\n      code\n      liter\n      questionsCount\n      answersCount\n      questions {\n        id\n        title\n        limit\n        order\n        topic {\n          id\n          title\n        }\n        answers {\n          id\n          title\n          order\n          code\n        }\n      }\n      logic {\n        path\n      }\n    }\n  }\n"]);return tr=function(){return e},e}var ar=Object(D.a)(tr()),nr=Object($.a)((function(e){return{popover:{pointerEvents:"none"},paper:{padding:e.spacing(1)}}})),rr=function(e){var t=e.answer,a=r.a.createElement(I.a,{key:1,title:"\u0421\u0432\u043e\u0431\u043e\u0434\u043d\u044b\u0439 \u043e\u0442\u0432\u0435\u0442"},r.a.createElement(_t.a,null)),n=r.a.createElement(I.a,{key:2,title:"\u0417\u0430\u0442\u0440\u0443\u0434\u043d\u044f\u044e\u0441\u044c \u043e\u0442\u0432\u0435\u0442\u0438\u0442\u044c"},r.a.createElement(dn.a,null)),l=r.a.createElement(I.a,{key:3,title:"\u0423\u043d\u0438\u043a\u0430\u043b\u044c\u043d\u044b\u0439 \u043e\u0442\u0432\u0435\u0442"},r.a.createElement(un.a,null)),c=[];return t.difficult&&c.push(n),t.freeAnswer&&c.push(a),t.unique&&c.push(l),c},lr=function(e){var t=e.answer,a=e.index;return r.a.createElement("div",{className:t.disabled?"answer-card invisible":"answer-card"},r.a.createElement(Oe.a,{container:!0,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement(ct.a,{m:1},r.a.createElement("span",{className:"answer-number"},a+1,"."),r.a.createElement("span",{className:"devider"}," "),r.a.createElement("span",{className:"answer-code"},t.code),r.a.createElement("span",{className:"devider"}," - "),r.a.createElement("span",{className:"answer-title"},t.title)),r.a.createElement(ct.a,{m:1},r.a.createElement("span",null,r.a.createElement(rr,{answer:t})))))},cr=function(e){var t=e.topic,a=nr(),l=r.a.useState(null),c=Object(d.a)(l,2),i=c[0],o=c[1],u=function(){o(null)},s=Boolean(i);return r.a.createElement(n.Fragment,null,r.a.createElement(er.a,{onMouseEnter:function(e){o(e.currentTarget)},onMouseLeave:u,fontSize:"small"}),r.a.createElement(gt.a,{className:a.popover,classes:{paper:a.paper},open:s,anchorEl:i,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"left"},onClose:u,disableRestoreFocus:!0},r.a.createElement(O.a,{variant:"overline",display:"block",gutterBottom:!0},"\u0422\u0435\u043c\u0430: ",t.title)))},ir=function(e){var t=e.question,a=e.index;return r.a.createElement(de.a,{className:"question-card"},r.a.createElement(pe.a,null,r.a.createElement("div",{className:"question-header"},r.a.createElement(I.a,{title:"\u041c\u0430\u043a\u0441. \u043a\u043e\u043b-\u0432\u043e \u043e\u0442\u0432\u0435\u0442\u043e\u0432"},r.a.createElement("span",{className:"question-limit"},t.limit)),r.a.createElement("span",{className:"question-number"},a+1,"."),r.a.createElement("span",{className:"question-title",color:"textSecondary"},t.title,r.a.createElement(cr,{topic:t.topic}))),t.answers.map((function(e,t){return r.a.createElement(lr,{key:t,answer:e,index:t})}))))},or=function(e){var t=e.id,a=Object(n.useState)(!1),c=Object(d.a)(a,2),i=c[0],o=c[1],u=Object(n.useState)(),s=Object(d.a)(u,2),m=s[0],p=s[1],b=Object(Ft.a)(ar,{variables:{id:t},onCompleted:function(){v(g.poll)}}),f=b.loading,E=b.error,g=b.data,v=function(e){var t=e.logic.path;fetch(l+t).then((function(e){return e.text()})).then((function(e){var t=xa(ja(e)),a=j(t);p(a.sort((function(e,t){return e.order>t.order?1:-1}))),o(!0)}))},j=function(e){return g.poll.questions.map((function(t){var a=t.answers.map((function(t){var a={};return e.invisible&&e.invisible.includes(t.code)&&(a=Object(Ie.a)(Object(Ie.a)({},a),{},{disabled:!0})),e.freeAnswers&&e.freeAnswers.includes(t.code)&&(a=Object(Ie.a)(Object(Ie.a)({},a),{},{freeAnswer:!0})),e.unique&&e.unique.includes(t.code)&&(a=Object(Ie.a)(Object(Ie.a)({},a),{},{unique:!0})),e.difficult&&e.difficult.includes(t.code)&&(a=Object(Ie.a)(Object(Ie.a)({},a),{},{difficult:!0})),Object(Ie.a)(Object(Ie.a)({},t),a)}));return Object(Ie.a)(Object(Ie.a)({},t),{},{answers:a,ffffuck:!0})}))};return!f&&m&&i?E?(console.log(JSON.stringify(E)),r.a.createElement(jt,{title:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a",description:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u043a\u0440\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0435. \u0421\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u043a\u043e\u043d\u0441\u043e\u043b\u044c"})):r.a.createElement(n.Fragment,null,r.a.createElement(Oe.a,{container:!0,className:"common-settings"},r.a.createElement(O.a,{variant:"h6",gutterBottom:!0},r.a.createElement("strong",null,"\u0422\u0435\u043c\u0430: "),g.poll.title),r.a.createElement(Oe.a,{className:"poll-info",container:!0,direction:"row",justify:"space-between",alignItems:"center"},r.a.createElement(ct.a,{m:1},r.a.createElement("div",null," \u0412\u043e\u043f\u0440\u043e\u0441\u043e\u0432: ",g.poll.questionsCount)),r.a.createElement(ct.a,{m:1},r.a.createElement("div",null," \u041e\u0442\u0432\u0435\u0442\u043e\u0432: ",g.poll.answersCount))),m.map((function(e,t){return r.a.createElement(ir,{question:e,key:e.id,index:t})})))):r.a.createElement(ot,{type:"card"})};function ur(){var e=Object(F.a)(["\n  query logicQuery($id: ID!) {\n    pollLogic(id: $id) {\n      id\n      path\n    }\n  }\n"]);return ur=function(){return e},e}var sr=Object(D.a)(ur());function dr(){var e=Object(F.a)(["\nmutation saveConfigChanges($path: String!, $text: String!) {\n  saveConfig(path: $path, text: $text)\n}\n"]);return dr=function(){return e},e}var mr=Object(D.a)(dr()),pr=function(e){var t=e.id,a=Object(n.useState)(!1),c=Object(d.a)(a,2),i=c[0],o=c[1],u=Object(n.useState)(!1),s=Object(d.a)(u,2),m=s[0],p=s[1],b=Object(n.useState)(null),f=Object(d.a)(b,2),E=f[0],g=f[1],j=Object(n.useState)(null),h=Object(d.a)(j,2),y=h[0],x=h[1],w=Object(n.useRef)(),C=Object(Ft.a)(sr,{variables:{id:t},onCompleted:function(){T(N.pollLogic.path)}}),k=C.loading,S=C.error,N=C.data,q=Object(M.useMutation)(mr,{onError:function(e){console.log(e),o({type:"error",text:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c. \u0421\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u043a\u043e\u043d\u0441\u043e\u043b\u044c."})},onCompleted:function(){o({type:"success",text:"\u041a\u043e\u043d\u0444\u0438\u0433 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d \u0443\u0441\u043f\u0435\u0448\u043d\u043e!"})},refetchQueries:function(){return[{query:ar,variables:{id:t}}]}}),$=Object(d.a)(q,2),F=$[0],A=$[1].loading,T=function(e){x(e),fetch(l+e).then((function(e){return e.text()})).then((function(e){g(e)}))},B=function(){return A?r.a.createElement(st,null):null};return k||!E?r.a.createElement(ot,{type:"card"}):S?(console.log(JSON.stringify(S)),r.a.createElement(jt,{title:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a",description:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u043a\u0440\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0435. \u0421\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u043a\u043e\u043d\u0441\u043e\u043b\u044c"})):r.a.createElement(n.Fragment,null,r.a.createElement(bt,{open:i,text:i?i.text:"",type:i?i.type:"",close:function(){return o(!1)}}),r.a.createElement(B,null),r.a.createElement(Oe.a,{item:!0,container:!0},r.a.createElement(Oe.a,{item:!0,container:!0,justify:"space-between"},r.a.createElement(ct.a,{p:1},r.a.createElement(O.a,{variant:"subtitle1",gutterBottom:!0},"\u041e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0438 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430 \u043a\u043e\u043d\u0444\u0438\u0433\u0443\u0440\u0430\u0446\u0438\u043e\u043d\u043d\u043e\u0433\u043e \u0444\u0430\u0439\u043b\u0430")),r.a.createElement(ct.a,null,r.a.createElement(I.a,{title:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"},r.a.createElement(v.a,{onClick:function(e){F({variables:{path:y,text:w.current.value}})},disabled:!m},r.a.createElement(wt.a,null)))),r.a.createElement("textarea",{ref:w,defaultValue:E,onChange:function(e){E!==e.currentTarget.value?p(!0):p(!1)}}))))};function br(){var e=Object(F.a)(["\n  mutation deletePoll($id: ID!) {\n    deletePoll(id: $id) {\n      title\n    }\n  }\n"]);return br=function(){return e},e}var fr=Object(D.a)(br()),Er=function(e){var t=e.id,a=e.code,l=Object(p.f)(),c=Object(n.useState)(!1),i=Object(d.a)(c,2),o=i[0],u=i[1],s=Object(n.useState)(!0),m=Object(d.a)(s,2),b=m[0],f=m[1],E=Object(M.useMutation)(fr,{onCompleted:function(){l.push("/")}}),g=Object(d.a)(E,2),v=g[0],j=(g[1].poll,function(){u(!1)});return r.a.createElement(n.Fragment,null,r.a.createElement(De.a,{open:o,onClose:j,"aria-labelledby":"form-dialog-title"},r.a.createElement(ze.a,{id:"form-dialog-title"},"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435"),r.a.createElement(Pe.a,null,r.a.createElement(ea.a,null,r.a.createElement(O.a,{variant:"subtitle1",gutterBottom:!0},"\u042d\u0442\u043e \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043e\u0442\u043c\u0435\u043d\u0435\u043d\u043e. \u041e\u043d\u043e \u043f\u0440\u0438\u0432\u0435\u0434\u0435\u0442 \u043a \u0431\u0435\u0437\u0432\u043e\u0437\u0432\u0440\u0430\u0442\u043d\u043e\u043c\u0443 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044e \u0412\u0421\u0415\u0425 \u0434\u0430\u043d\u043d\u044b\u0445 \u043e\u043f\u0440\u043e\u0441\u0430."),r.a.createElement(O.a,{variant:"button",display:"block",gutterBottom:!0},"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u041a\u041e\u0414 \u043e\u043f\u0440\u043e\u0441\u0430.")),r.a.createElement(We.a,{margin:"dense",id:"name",label:"\u041a\u043e\u0434 \u043e\u043f\u0440\u043e\u0441\u0430",type:"text",fullWidth:!0,onChange:function(e){var t=e.currentTarget.value.toUpperCase();e.currentTarget.value=t,t.toUpperCase()===a?f(!1):f(!0)}})),r.a.createElement(Me.a,null,r.a.createElement(Re.a,{onClick:j,color:"primary"},"\u041e\u0442\u043c\u0435\u043d\u0430"),r.a.createElement(Re.a,{onClick:function(){!function(e){v({variables:{id:e},refetchQueries:[{query:Tt}]})}(t)},color:"primary",disabled:b},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"))),r.a.createElement(O.a,{variant:"button",display:"block",gutterBottom:!0},"\u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u043e\u043f\u0440\u043e\u0441\u0430"),r.a.createElement(O.a,{variant:"caption",display:"block",gutterBottom:!0},"\u041f\u043e\u0441\u043b\u0435 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044f \u041e\u041f\u0420\u041e\u0421\u0410 \u043f\u0443\u0442\u0438 \u043d\u0430\u0437\u0430\u0434 \u0443\u0436\u0435 \u043d\u0435 \u0431\u0443\u0434\u0435\u0442. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0431\u0443\u0434\u044c\u0442\u0435 \u0432\u043d\u0438\u043c\u0430\u0442\u0435\u043b\u044c\u043d\u044b."),r.a.createElement(Re.a,{variant:"contained",color:"secondary",onClick:function(){u(!0)}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043e\u043f\u0440\u043e\u0441"))};function gr(){var e=Object(F.a)(["\n  query ($id: ID!) {\n    poll(id: $id) {\n      id\n      cities {\n        id\n        title\n        population\n        category {\n          title\n        }\n      }\n    }\n    cities {\n      id\n      title\n      category {\n        title\n      }\n    }\n  }\n"]);return gr=function(){return e},e}var vr=Object(D.a)(gr());function Or(){var e=Object(F.a)(["\n  mutation ($id: ID!, $cities: [String]) {\n    setPollCity(id: $id, cities: $cities) {\n      id\n      cities {\n        id\n      }\n    }\n  }\n"]);return Or=function(){return e},e}function jr(){var e=Object(F.a)(["\n  mutation ($id: ID!, $cities: [String]) {\n    deleteCityFromActive(id: $id, cities: $cities) {\n      id\n      cities {\n        id\n      }\n    }\n  }\n"]);return jr=function(){return e},e}var hr=Object(D.a)(jr()),yr=Object(D.a)(Or()),xr=function(e){var t=e.id,a=Object(n.useState)(!1),l=Object(d.a)(a,2),c=l[0],i=l[1],o=Object(n.useState)(0),u=Object(d.a)(o,2),s=u[0],m=u[1],p=Object(n.useState)(!1),b=Object(d.a)(p,2),f=b[0],E=b[1],g=Object(n.useState)(),j=Object(d.a)(g,2),h=j[0],y=j[1],x=Object(n.useState)(),w=Object(d.a)(x,2),C=w[0],k=w[1],S=Object(n.useState)([]),N=Object(d.a)(S,2),q=N[0],$=N[1],F=Object(Ft.a)(vr,{variables:{id:t},onCompleted:function(){var e=A.poll.cities;y(A.cities),k(A.cities.filter((function(t){for(var a=0;a<e.length;a++)if(t.id===e[a].id)return!1;return!0})))}}),A=F.data,T=F.loading,I=F.error,B=Object(M.useMutation)(yr,{onError:function(e){console.log(e),i({type:"error",text:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c. \u0421\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u043a\u043e\u043d\u0441\u043e\u043b\u044c."})},update:function(e,t){var a=t.data.setPollCity.cities.map((function(e){return e.id}));k(C.filter((function(e){return!a.includes(e.id)})))}}),D=Object(d.a)(B,2),P=D[0],z=D[1].loading,R=Object(M.useMutation)(hr,{onError:function(e){console.log(e),i({type:"error",text:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c. \u0421\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u043a\u043e\u043d\u0441\u043e\u043b\u044c."})},update:function(e,t){var a=t.data.deleteCityFromActive.cities,n=h.filter((function(e){for(var t=0;t<a.length;t++)if(e.id===a[t].id)return!1;return!0}));k(n)}}),W=Object(d.a)(R,2),L=W[0],U=W[1].loading;if(T||!A||!C)return r.a.createElement(ot,{type:"card"});var H=function(){return z||U?r.a.createElement(st,null):null};if(I)return console.log(JSON.stringify(I)),r.a.createElement(jt,{title:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a",description:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u043a\u0440\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0435. \u0421\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u043a\u043e\u043d\u0441\u043e\u043b\u044c"});var Q=function(e){E(e)},V=r.a.createElement(tn.a,{fontSize:"small"}),_=r.a.createElement(nn.a,{fontSize:"small"}),J=function(e){L({variables:{id:t,cities:e}})},G=function(e){var t=e.city,a=e.deleteCity;return r.a.createElement(Oe.a,{item:!0,xs:12,sm:6,md:4,lg:3,xl:2},r.a.createElement(Va.a,{className:"city-card"},r.a.createElement(O.a,{variant:"h6",gutterBottom:!0},t.title),r.a.createElement(O.a,{variant:"subtitle2",gutterBottom:!0},t.category.title),r.a.createElement(O.a,{variant:"overline",display:"block",gutterBottom:!0},"\u041d\u0430\u0441\u0435\u043b\u0435\u043d\u0438\u0435: ",t.population),r.a.createElement(Oe.a,{container:!0,item:!0,justify:"space-between",className:"card-service-buttons"},r.a.createElement(v.a,{className:"card-button","aria-label":"delete",onClick:function(){a(t.id)}},r.a.createElement(Ra.a,{fontSize:"small"})))))};return r.a.createElement(n.Fragment,null,r.a.createElement(bt,{open:c,text:c?c.text:"",type:c?c.type:"",close:function(){return i(!1)}}),r.a.createElement(H,null),r.a.createElement(Qa,{open:f,confirm:function(){J([f]),E(!1)},close:function(){return E(!1)},data:{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043d\u0430\u0441\u0435\u043b\u0435\u043d\u043d\u044b\u0439 \u043f\u0443\u043d\u043a\u0442?",text:"\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435! \u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u043e\u043f\u0440\u043e\u0441\u043e\u0432 \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u044e\u0442 \u043d.\u043f. \u0432 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u043e\u043d\u0438 \u043f\u0440\u043e\u0432\u043e\u0434\u0438\u043b\u0438\u0441\u044c, \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u043f\u0440\u0438\u0432\u0435\u0434\u0435\u0442 \u043a \u043f\u043e\u0442\u0435\u0440\u0435 \u0447\u0430\u0441\u0442\u0438 \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0438 \u0438 \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e\u0441\u0442\u0438 \u0435\u0435 \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f."}}),r.a.createElement("div",{className:"cities-service-zone"},r.a.createElement(O.a,{className:"header"},"\u0413\u043e\u0440\u043e\u0434\u0430 \u0432 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u043f\u0440\u043e\u0432\u043e\u0434\u0438\u0442\u0441\u044f \u043e\u043f\u0440\u043e\u0441"),r.a.createElement(Oe.a,{container:!0,justify:"flex-start",alignItems:"center",spacing:2},r.a.createElement(Oe.a,{item:!0,xs:12,sm:8,md:6,lg:5},r.a.createElement(Kt.a,{multiple:!0,key:s,limitTags:3,options:C,disableCloseOnSelect:!0,clearOnEscape:!0,onChange:function(e,t){$(t)},getOptionLabel:function(e){return e.title},renderOption:function(e,t){var a=t.selected;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ut.a,{icon:V,checkedIcon:_,style:{marginRight:8},checked:a}),e.title)},renderInput:function(e){return r.a.createElement(We.a,Object.assign({},e,{variant:"outlined",label:"\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0433\u043e\u0440\u043e\u0434"}))}})),r.a.createElement(Oe.a,{item:!0,xs:12,sm:4,md:6,lg:5},r.a.createElement(Re.a,{variant:"contained",color:"primary",size:"small",onClick:function(){var e=q.map((function(e){return e.id}));P({variables:{id:t,cities:e}}),m(s+1)},disabled:!q.length},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c")))),r.a.createElement(Oe.a,{container:!0,spacing:3,xs:12},A.poll.cities.map((function(e,t){return r.a.createElement(G,{key:t,city:e,deleteCity:Q})}))))},wr=a(252),Cr=a(321),kr=a.n(Cr),Sr=function(e){var t=e.question,a=e.handleLimitInput,l=Object(n.useState)(t.limit),c=Object(d.a)(l,2),i=c[0],o=c[1];return r.a.createElement(Oe.a,{item:!0,xs:12,sm:6,md:4,lg:3,xl:2},r.a.createElement(Va.a,{className:"question-item",elevation:2},r.a.createElement(Oe.a,{item:!0,xs:12,sm:!0,container:!0},r.a.createElement(Oe.a,{item:!0,xs:!0,container:!0,direction:"column",spacing:2,alignItems:"flex-start"},r.a.createElement(Oe.a,{item:!0,xs:!0},r.a.createElement(I.a,{title:"\u041e\u0447\u0435\u0440\u0435\u0434\u043d\u043e\u0441\u0442\u044c \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f","aria-label":"add"},r.a.createElement(O.a,{variant:"body2",color:"primary"},t.order)))),r.a.createElement(Oe.a,{item:!0,xs:!0,container:!0,direction:"column",spacing:3,alignItems:"flex-end"},r.a.createElement(Oe.a,{item:!0,xs:!0,alignItems:"center",style:{cursor:"pointer"}},r.a.createElement(I.a,{title:"\u041c\u0435\u043d\u044e. \u0412 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0435","aria-label":"add"},r.a.createElement(q.a,null)))),r.a.createElement(Oe.a,{item:!0},r.a.createElement(I.a,{title:"\u041b\u0438\u043c\u0438\u0442 \u043e\u0442\u0432\u0435\u0442\u043e\u0432","aria-label":"add"},r.a.createElement("input",{type:"number",className:"question-limit-input",onChange:function(e){var t=e.currentTarget.value;console.log(e),o(t<1?1:t>99?99:t)},onBlur:function(e){a({id:t.id,limit:i})},onKeyUp:function(e){13===e.keyCode&&e.currentTarget.blur()},value:i})))),r.a.createElement(O.a,{className:"question-title"},t.title.length>160?t.title.substring(0,100)+" ... "+t.title.substring(t.title.length-45):t.title)))};function Nr(){var e=Object(F.a)(["\n  query pollQuery($id: ID!) {\n    poll(id: $id) {\n      id\n      title\n      code\n      liter\n      questions {\n        id\n        title\n        limit\n        order\n        answers {\n          id\n          title\n          order\n        }\n      }\n    }\n  }\n"]);return Nr=function(){return e},e}var qr=Object(D.a)(Nr());function $r(){var e=Object(F.a)(["\nmutation ($questions: [ReorderedArray]) {\n  newOrder(neworder: $questions) {\n    id\n    order\n  }\n}\n"]);return $r=function(){return e},e}function Fr(){var e=Object(F.a)(["\nmutation ($id: ID!, $limit: Int!) {\n  newLimit(id: $id, limit: $limit) {\n    id\n    limit\n  }\n}\n"]);return Fr=function(){return e},e}var Ar=Object(D.a)(Fr()),Tr=Object(D.a)($r()),Ir=function(e){var t=e.id,a=Object(n.useState)(!1),l=Object(d.a)(a,2),c=l[0],i=l[1],o=Object(n.useState)(null),u=Object(d.a)(o,2),s=u[0],m=u[1],p=Object(n.useState)(null),b=Object(d.a)(p,2),f=(b[0],b[1]),E=Object(Ft.a)(qr,{variables:{id:t},onCompleted:function(){var e=O.poll.questions;console.log(e),m(e.slice().sort((function(e,t){return e.order>t.order?1:-1})))}}),g=E.loading,v=E.error,O=E.data,j=Object(M.useMutation)(Ar,{onError:function(e){console.log(e),i({type:"error",text:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043b\u0438\u043c\u0438\u0442 \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c. \u0421\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u043a\u043e\u043d\u0441\u043e\u043b\u044c."})}}),h=Object(d.a)(j,2),y=h[0],x=h[1].loading,w=Object(M.useMutation)(Tr,{onError:function(e){console.log(e),i({type:"error",text:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043f\u043e\u0440\u044f\u0434\u043e\u043a \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c. \u0421\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u043a\u043e\u043d\u0441\u043e\u043b\u044c."})},update:function(e,t){for(var a=t.data.newOrder,n=0;n<a.length;n++){var r=a[n].id,l=e.data.data;for(var c in l)l[c].id===r&&console.log(l[c])}}}),C=Object(d.a)(w,2),k=C[0],S=C[1].loading;if(g||!s)return r.a.createElement(ot,{type:"card"});if(v)return console.log(JSON.stringify(v)),r.a.createElement(jt,{title:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a",description:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u043a\u0440\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0435. \u0421\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u043a\u043e\u043d\u0441\u043e\u043b\u044c"});var N=function(){return x||S?r.a.createElement(st,null):null},q=function(e){var t=e.id,a=+e.limit;m(s.map((function(e){return e.id===t?Object(Ie.a)(Object(Ie.a)({},e),{},{limit:a}):e}))),y({variables:{id:t,limit:a}})},$=Object(wr.b)((function(e){var t=e.question;return r.a.createElement(Sr,{question:t,handleLimitInput:q})})),F=Object(wr.a)((function(e){var t=e.questions;return r.a.createElement(Oe.a,{container:!0,item:!0,xs:12,spacing:2},t.map((function(e,t){return r.a.createElement($,{key:"item-".concat(e.id),index:t,question:e})})))}));return r.a.createElement(n.Fragment,null,r.a.createElement(bt,{open:c,text:c?c.text:"",type:c?c.type:"",close:function(){return i(!1)}}),r.a.createElement(N,null),r.a.createElement(F,{questions:s,onSortEnd:function(e){var t=e.oldIndex,a=e.newIndex;if(f(Object(Ie.a)({},s)),console.log(t,a),t!==a){var n=kr()(s,t,a),r=[],l=n.reduce((function(e,t,a){return t.order===a+1?e.push(t):(r.push({id:t.id,order:a+1}),e.push(Object(Ie.a)(Object(Ie.a)({},t),{},{order:a+1}))),e}),[]);m(l),k({variables:{questions:r}})}},axis:"xy"}))},Br=function(e){var t=e.id,a=e.code,l=[{label:"\u041e\u0431\u0449\u0438\u0435",component:r.a.createElement(or,{id:t})},{label:"\u041f\u043e\u0440\u044f\u0434\u043e\u043a \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f",component:r.a.createElement(Ir,{id:t})},{label:"\u041a\u043e\u043d\u0444\u0438\u0433",component:r.a.createElement(pr,{id:t})},{label:"\u0413\u043e\u0440\u043e\u0434\u0430",component:r.a.createElement(xr,{id:t})},{label:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435",component:r.a.createElement(Er,{id:t,code:a})}];return r.a.createElement(n.Fragment,null,r.a.createElement(Ba,{data:l}))},Dr=function(){var e=Object(p.g)(),t=e.id,a=e.code;return r.a.createElement(n.Fragment,null,r.a.createElement(Wt,{title:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u043e\u043f\u0440\u043e\u0441\u0430 "+a}),r.a.createElement("div",null,r.a.createElement(se.a,{maxWidth:"xl",style:{padding:0}},r.a.createElement(Br,{id:t,code:a}))))};function Mr(e){var t=e.children,a=e.value,n=e.index,l=Object(Be.a)(e,["children","value","index"]);return r.a.createElement("div",Object.assign({role:"tabpanel",hidden:a!==n,id:"vertical-tabpanel-".concat(n),"aria-labelledby":"vertical-tab-".concat(n)},l),a===n&&r.a.createElement(ct.a,{p:3},r.a.createElement(O.a,null,t)))}var Pr=Object($.a)((function(e){return{root:{flexGrow:1,backgroundColor:e.palette.background.paper,display:"flex"},tabs:{borderRight:"1px solid ".concat(e.palette.divider)}}})),zr=function(e){var t,a=e.id,n=Pr(),l=r.a.useState(0),c=Object(d.a)(l,2),i=c[0],o=c[1];return r.a.createElement("div",{className:n.root},r.a.createElement(Na.a,{orientation:"vertical",variant:"scrollable",value:i,onChange:function(e,t){o(t)},className:n.tabs},r.a.createElement(qa.a,Object.assign({label:"\u0424\u0430\u0439\u043b\u044b"},{id:"vertical-tab-".concat(t=0),"aria-controls":"vertical-tabpanel-".concat(t)}))),r.a.createElement(Mr,{value:i,index:0},"\u0424\u0430\u0439\u043b\u044b \u043e\u043f\u0440\u043e\u0441\u0430 - ",a,r.a.createElement("p",null,"\u0412 \u0420\u0410\u0417\u0420\u0410\u0411\u041e\u0422\u041a\u0415")))},Rr=function(){var e=Object(p.g)(),t=e.id,a=e.code;return r.a.createElement(n.Fragment,null,r.a.createElement(Wt,{title:"\u0424\u0430\u0439\u043b\u044b "+a}),r.a.createElement("div",{style:{paddingTop:"10px"}},r.a.createElement(se.a,{maxWidth:"xl"},r.a.createElement(zr,{id:t}))))},Wr=function(){return r.a.createElement(n.Fragment,null,r.a.createElement(Oe.a,{container:!0,item:!0},"WIKI"))},Lr=function(){var e=Object(p.g)(),t=(e.id,e.code);return r.a.createElement(n.Fragment,null,r.a.createElement(Wt,{title:"Wiki "+t}),r.a.createElement(se.a,{maxWidth:"lg"},r.a.createElement(Wr,null)))},Ur=a(144),Hr=a.n(Ur),Qr=a(233),Vr=a(322),_r=a.n(Vr);function Jr(){var e=Object(F.a)(["\nquery {\n  cities{\n    id\n    title\n    population\n    category {\n      id\n      title\n    }\n  }\n  cityCategories{\n    id\n    title\n  }\n}\n"]);return Jr=function(){return e},e}var Gr=Object(D.a)(Jr());function Kr(){var e=Object(F.a)(["\nmutation ($id: String!) {\n  deleteCity(id: $id) {\n    id\n    title\n    category {\n      id\n      title\n    }\n    population\n  }\n}\n"]);return Kr=function(){return e},e}function Zr(){var e=Object(F.a)(["\nmutation ($id: String!, $title: String!, $population: Int!, $category: String!) {\n  cityEdit(id: $id, title: $title, population: $population, category: $category) {\n    id\n    title\n    category {\n      id\n      title\n    }\n    population\n  }\n}\n"]);return Zr=function(){return e},e}function Xr(){var e=Object(F.a)(["\nmutation ($title: String!, $population: Int!, $category: String!) {\n  newCity(title: $title, population: $population, category: $category) {\n    id\n    title\n    category {\n      id\n      title\n    }\n    population\n  }\n}\n"]);return Xr=function(){return e},e}var Yr=Object(D.a)(Xr()),el=Object(D.a)(Zr()),tl=Object(D.a)(Kr()),al=function(){var e=Object(n.useState)(!1),t=Object(d.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(!1),i=Object(d.a)(c,2),o=i[0],u=i[1],s=Object(n.useState)(!1),m=Object(d.a)(s,2),p=m[0],b=m[1],f=Object(Ft.a)(Gr),E=f.data,g=f.loading,j=f.error,h=Object(M.useMutation)(Yr,{onError:function(e){l({type:"error",text:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043d\u043e\u0432\u044b\u0439 \u0433\u043e\u0440\u043e\u0434 \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c. \u0421\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u043a\u043e\u043d\u0441\u043e\u043b\u044c."}),console.log(e)},update:function(e,t){var a=t.data.newCity;return e.writeQuery({query:Gr,data:{cities:[].concat(Object(ue.a)(E.cities),[a])}})}}),y=Object(d.a)(h,2),x=y[0],w=y[1].loading,C=Object(M.useMutation)(el,{onError:function(e){l({type:"error",text:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c. \u0421\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u043a\u043e\u043d\u0441\u043e\u043b\u044c."}),console.log(e)},update:function(e,t){var a=t.data.cityEdit;return e.writeQuery({query:Gr,data:{cities:E.cities.map((function(e){return e.id===a.id?a:e}))}})}}),k=Object(d.a)(C,2),S=k[0],N=k[1].loading,q=Object(M.useMutation)(tl,{onError:function(e){l({type:"error",text:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0433\u043e\u0440\u043e\u0434 \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c. \u0421\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u043a\u043e\u043d\u0441\u043e\u043b\u044c."}),console.log(e)},update:function(e,t){var a=t.data.deleteCity;return e.writeQuery({query:Gr,data:{cities:E.cities.filter((function(e){return e.id!==a.id}))}})}}),$=Object(d.a)(q,2),F=$[0],A=$[1].loading,T=function(e){var t=e.city,a=e.save,l=e.deleteCity,c=Object(n.useState)(!1),i=Object(d.a)(c,2),o=i[0],u=i[1];return r.a.createElement(n.Fragment,null,o?r.a.createElement(I,{city:t,save:function(e){a(Object(Ie.a)(Object(Ie.a)({},e),{},{id:t.id}))},close:function(){u(!1)}}):r.a.createElement(Oe.a,{item:!0,xs:12,sm:6,md:4,lg:3,xl:2},r.a.createElement(Va.a,{className:"city-card"},r.a.createElement(O.a,{variant:"h6",gutterBottom:!0},t.title),r.a.createElement(O.a,{variant:"subtitle2",gutterBottom:!0},t.category.title),r.a.createElement(O.a,{variant:"overline",display:"block",gutterBottom:!0},"\u041d\u0430\u0441\u0435\u043b\u0435\u043d\u0438\u0435: ",t.population),r.a.createElement(Oe.a,{container:!0,item:!0,justify:"space-between",className:"card-service-buttons"},r.a.createElement(v.a,{className:"card-button","aria-label":"delete",onClick:function(){l(t.id)}},r.a.createElement(Ra.a,{fontSize:"small"})),r.a.createElement(v.a,{className:"card-button","aria-label":"delete",onClick:function(){u(!0)}},r.a.createElement(_t.a,{fontSize:"small"}))))))},I=function(e){var t=e.save,a=e.close,l=e.city,c=Object(n.useState)(!1),i=Object(d.a)(c,2),o=i[0],u=i[1],s=Object(n.useState)(l?l.title:""),m=Object(d.a)(s,2),p=m[0],b=m[1],f=Object(n.useState)(l?l.population:""),g=Object(d.a)(f,2),O=g[0],j=g[1],h=Object(n.useState)(l?l.category.id:""),y=Object(d.a)(h,2),x=y[0],w=y[1];return r.a.createElement(Oe.a,{item:!0,xs:12,sm:6,md:4,lg:3,xl:2},r.a.createElement(Va.a,{className:"add-city-card"},r.a.createElement(v.a,{className:"add-dialog-close","aria-label":"delete",size:"small",onClick:a},r.a.createElement(_r.a,{fontSize:"inherit"})),r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var a={title:p,population:+O,category:x};console.log(a),t(a)}},r.a.createElement(We.a,{className:"add-city-title",required:!0,defaultValue:l?l.title:"",helperText:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043d.\u043f.",onChange:function(e){u(!0),b(e.currentTarget.value)}}),r.a.createElement(We.a,{className:"add-city-population",type:"number",required:!0,defaultValue:l?l.population:"",onChange:function(e){u(!0),j(e.currentTarget.value)},InputLabelProps:{shrink:!0},helperText:"\u0427\u0438\u0441\u043b\u0435\u043d\u043d\u043e\u0441\u0442\u044c, \u0447\u0435\u043b."}),r.a.createElement(We.a,{select:!0,required:!0,onChange:function(e){u(!0),w(e.currentTarget.value)},defaultValue:l?l.category.id:"",SelectProps:{native:!0},helperText:"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f \u043d.\u043f."},r.a.createElement("option",{key:0,disabled:!0,selected:!0,value:""}),E.cityCategories.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.title)}))),r.a.createElement(Re.a,{className:"city-dialog-save",variant:"contained",color:"primary",size:"small",startIcon:r.a.createElement(wt.a,null),type:"submit",disabled:!o},"Save"))))};function B(){return(B=Object(Qr.a)(Hr.a.mark((function e(t){return Hr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x({variables:Object(Ie.a)({},t)});case 2:b(!1);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e){return P.apply(this,arguments)}function P(){return(P=Object(Qr.a)(Hr.a.mark((function e(t){return Hr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S({variables:Object(Ie.a)({},t)});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(){return(z=Object(Qr.a)(Hr.a.mark((function e(t){return Hr.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F({variables:{id:t}});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var R=function(e){u(e)};if(g)return r.a.createElement(ot,null);if(j)return console.log(JSON.stringify(j)),r.a.createElement(jt,{title:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a",description:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u043a\u0440\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0435. \u0421\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u043a\u043e\u043d\u0441\u043e\u043b\u044c"});var W=function(){return w||N||A?r.a.createElement(st,null):null};return r.a.createElement(n.Fragment,null,r.a.createElement(bt,{open:a,text:a?a.text:"",type:a?a.type:"",close:function(){return l(!1)}}),r.a.createElement(W,null),r.a.createElement("div",{className:"cities-service-zone"},r.a.createElement(O.a,{className:"header"},"\u0413\u043e\u0440\u043e\u0434\u0430 \u043f\u0440\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u044f \u043e\u043f\u0440\u043e\u0441\u043e\u0432"),r.a.createElement(Re.a,{variant:"contained",color:"primary",size:"small",onClick:function(){b(!0)}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c")),r.a.createElement(Qa,{open:o,confirm:function(){!function(e){z.apply(this,arguments)}(o),u(!1)},close:function(){u(!1)},data:{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043d\u0430\u0441\u0435\u043b\u0435\u043d\u043d\u044b\u0439 \u043f\u0443\u043d\u043a\u0442?",text:"\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435! \u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u043e\u043f\u0440\u043e\u0441\u043e\u0432 \u0443\u0447\u0438\u0442\u044b\u0432\u0430\u044e\u0442 \u043d.\u043f. \u0432 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u043e\u043d\u0438 \u043f\u0440\u043e\u0432\u043e\u0434\u0438\u043b\u0438\u0441\u044c, \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0435 \u043f\u0440\u0438\u0432\u0435\u0434\u0435\u0442 \u043a \u043f\u043e\u0442\u0435\u0440\u0435 \u0447\u0430\u0441\u0442\u0438 \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0438 \u0438 \u043d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e\u0441\u0442\u0438 \u0435\u0435 \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f."}}),r.a.createElement(Oe.a,{container:!0,spacing:3,xs:12},p&&r.a.createElement(I,{save:function(e){return B.apply(this,arguments)},close:function(){b(!1)}}),E.cities.map((function(e,t){return r.a.createElement(T,{city:e,save:D,deleteCity:R})}))),r.a.createElement("p",null),r.a.createElement("span",null,"\u0421\u0442\u0430\u0442\u0443\u0441"),r.a.createElement(_.a,null))},nl=function(){return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"sample-service-zone"},r.a.createElement(O.a,{className:"header"},"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440 \u0432\u044b\u0431\u043e\u0440\u043a\u0438")))},rl=function(){var e=[{label:"\u0413\u043e\u0440\u043e\u0434\u0430",component:r.a.createElement(al,null)},{label:"\u0412\u044b\u0431\u043e\u0440\u043a\u0430",component:r.a.createElement(nl,null)},{label:"\u041f\u043e\u043b",component:"\u041f\u041e\u041b"},{label:"\u0412\u043e\u0437\u0440\u0430\u0441\u0442",component:"\u0412\u043e\u0437\u0440\u0430\u0441\u0442"},{label:"\u0421\u0442\u0430\u0442\u0443\u0441",component:"\u0421\u0442\u0430\u0442\u0443\u0441"},{label:"\u0422\u041d\u041f",component:"\u0422\u041d\u041f"}];return r.a.createElement(Ba,{data:e})},ll=function(){return r.a.createElement(n.Fragment,null,r.a.createElement(Wt,{title:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u043f\u043e\u0434\u0441\u0438\u0441\u0442\u0435\u043c\u044b"}),r.a.createElement("div",null,r.a.createElement(se.a,{maxWidth:"xl",style:{padding:0}},r.a.createElement(rl,null))))},cl=a(17),il=a(473),ol=a(474),ul=a(471),sl=a(472),dl=a(469),ml=a(488),pl=a(470),bl=a(487),fl=a(323),El=a.n(fl),gl=a(391),vl=a(392),Ol=a(397),jl=function(e){var t=e.open,a=e.close,l=e.saveNewUser,c=e.selects,i=Object(n.useState)(),o=Object(d.a)(i,2),u=o[0],s=o[1];return r.a.createElement(n.Fragment,null,r.a.createElement(De.a,{open:t,onClose:a,"aria-labelledby":"form-dialog-title"},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),l(u)}},r.a.createElement(ze.a,null,"\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"),r.a.createElement(Pe.a,null,r.a.createElement(Oe.a,{container:!0,spacing:2},r.a.createElement(Oe.a,{item:!0,xs:12,md:6},r.a.createElement(We.a,{required:!0,fullWidth:"true",label:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c",variant:"outlined",onChange:function(e){return s(Object(Ie.a)(Object(Ie.a)({},u),{},{username:e.currentTarget.value}))},helperText:"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u0444\u043e\u0440\u043c\u0430\u0442: \u0418\u0432\u0430\u043d\u043e\u0432 \u0418.\u0418."})),r.a.createElement(Oe.a,{item:!0,xs:12,md:6},r.a.createElement(We.a,{required:!0,fullWidth:"true",label:"\u041b\u043e\u0433\u0438\u043d",variant:"outlined",onChange:function(e){return s(Object(Ie.a)(Object(Ie.a)({},u),{},{login:e.currentTarget.value}))},helperText:"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u0444\u043e\u0440\u043c\u0430\u0442: IvanovII"})),r.a.createElement(Oe.a,{item:!0,xs:12,md:6},r.a.createElement(We.a,{required:!0,fullWidth:"true",label:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",variant:"outlined",onChange:function(e){return s(Object(Ie.a)(Object(Ie.a)({},u),{},{password:e.currentTarget.value}))},helperText:"\u041d\u0435 \u043c\u0435\u043d\u0435\u0435 \u0432\u043e\u0441\u044c\u043c\u0438 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"})),r.a.createElement(Oe.a,{item:!0,xs:12,md:6},r.a.createElement(We.a,{required:!0,fullWidth:"true",label:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",variant:"outlined",helperText:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"})),r.a.createElement(Oe.a,{item:!0,xs:12,md:6},r.a.createElement(gl.a,{required:!0,variant:"outlined",fullWidth:"true"},r.a.createElement(Ol.a,{htmlFor:"outlined-age-native-simple"},"\u0421\u0442\u0430\u0442\u0443\u0441"),r.a.createElement(pa.a,{required:!0,native:!0,label:"\u0421\u0442\u0430\u0442\u0443\u0441",onChange:function(e){return s(Object(Ie.a)(Object(Ie.a)({},u),{},{status:e.currentTarget.value}))},inputProps:{name:"age",id:"outlined-age-native-simple"}},r.a.createElement("option",{"aria-label":"None",selected:!0,disabled:"true",value:""}),c.userStatus.map((function(e){return r.a.createElement("option",{value:e.id},e.title)}))),r.a.createElement(vl.a,null,"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0441\u043e\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0439 \u0441\u0442\u0430\u0442\u0443\u0441"))),r.a.createElement(Oe.a,{item:!0,xs:12,md:6},r.a.createElement(gl.a,{required:!0,variant:"outlined",fullWidth:"true"},r.a.createElement(Ol.a,{htmlFor:"outlined-age-native-simple"},"\u041f\u0440\u0430\u0432\u0430"),r.a.createElement(pa.a,{native:!0,label:"\u041f\u0440\u0430\u0432\u0430",onChange:function(e){return s(Object(Ie.a)(Object(Ie.a)({},u),{},{rights:e.currentTarget.value}))},inputProps:{name:"age",id:"outlined-age-native-simple"}},r.a.createElement("option",{"aria-label":"None",selected:!0,disabled:"true",value:""}),c.userRights.map((function(e){return r.a.createElement("option",{value:e.id},e.title)}))),r.a.createElement(vl.a,null,"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043f\u0440\u0430\u0432\u0430 \u043f\u043e\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"))))),r.a.createElement("p",null),r.a.createElement(Me.a,null,r.a.createElement(Re.a,{variant:"contained",onClick:a},"\u041e\u0442\u043c\u0435\u043d\u0430"),r.a.createElement(Re.a,{variant:"contained",type:"submit",color:"primary"},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c")))))},hl=function(e){var t=e.data,a=e.selects,l=e.open,c=e.close,i=e.updateUser,o=Object(n.useState)(!1),u=Object(d.a)(o,2),s=u[0],m=u[1];return r.a.createElement(n.Fragment,null,r.a.createElement(De.a,{open:l,onClose:c,"aria-labelledby":"form-dialog-title"},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),i({id:t.id,data:s}),m(!1),c()}},r.a.createElement(ze.a,null,"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435"),r.a.createElement(Pe.a,null,r.a.createElement(Oe.a,{container:!0,spacing:2},r.a.createElement(Oe.a,{item:!0,xs:12,md:6},r.a.createElement(We.a,{required:!0,fullWidth:"true",label:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c",variant:"outlined",defaultValue:t.username,onChange:function(e){return m(Object(Ie.a)(Object(Ie.a)({},s),{},{username:e.currentTarget.value}))},helperText:"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u0444\u043e\u0440\u043c\u0430\u0442: \u0418\u0432\u0430\u043d\u043e\u0432 \u0418.\u0418."})),r.a.createElement(Oe.a,{item:!0,xs:12,md:6},r.a.createElement(We.a,{required:!0,fullWidth:"true",label:"\u041b\u043e\u0433\u0438\u043d",variant:"outlined",defaultValue:t.login,onChange:function(e){return m(Object(Ie.a)(Object(Ie.a)({},s),{},{login:e.currentTarget.value}))},helperText:"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u0444\u043e\u0440\u043c\u0430\u0442: IvanovII"})),r.a.createElement(Oe.a,{item:!0,xs:12,md:6},r.a.createElement(gl.a,{required:!0,variant:"outlined",fullWidth:"true"},r.a.createElement(Ol.a,{htmlFor:"outlined-age-native-simple"},"\u0421\u0442\u0430\u0442\u0443\u0441"),r.a.createElement(pa.a,{required:!0,native:!0,defaultValue:t.status?t.status.id:"",label:"\u0421\u0442\u0430\u0442\u0443\u0441",onChange:function(e){return m(Object(Ie.a)(Object(Ie.a)({},s),{},{status:e.currentTarget.value}))},inputProps:{name:"age",id:"outlined-age-native-simple"}},r.a.createElement("option",{"aria-label":"None",selected:!0,disabled:"true",value:""}),a.userStatus.map((function(e){return r.a.createElement("option",{value:e.id},e.title)}))),r.a.createElement(vl.a,null,"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0441\u043e\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0439 \u0441\u0442\u0430\u0442\u0443\u0441"))),r.a.createElement(Oe.a,{item:!0,xs:12,md:6},r.a.createElement(gl.a,{required:!0,variant:"outlined",fullWidth:"true"},r.a.createElement(Ol.a,{htmlFor:"outlined-age-native-simple"},"\u041f\u0440\u0430\u0432\u0430"),r.a.createElement(pa.a,{native:!0,defaultValue:t.rights?t.rights.id:"",label:"\u041f\u0440\u0430\u0432\u0430",onChange:function(e){return m(Object(Ie.a)(Object(Ie.a)({},s),{},{rights:e.currentTarget.value}))},inputProps:{name:"age",id:"outlined-age-native-simple"}},r.a.createElement("option",{"aria-label":"None",selected:!0,disabled:"true",value:""}),a.userRights.map((function(e){return r.a.createElement("option",{value:e.id},e.title)}))),r.a.createElement(vl.a,null,"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043f\u0440\u0430\u0432\u0430 \u043f\u043e\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"))))),r.a.createElement("p",null),r.a.createElement(Me.a,null,r.a.createElement(Re.a,{variant:"contained",onClick:c},"\u041e\u0442\u043c\u0435\u043d\u0430"),r.a.createElement(Re.a,{variant:"contained",type:"submit",color:"primary"},"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c")))))},yl=function(e){var t=e.data,a=e.open,l=e.close,c=e.passReset,i=Object(n.useState)(!1),o=Object(d.a)(i,2),u=o[0],s=o[1];return r.a.createElement(n.Fragment,null,r.a.createElement(De.a,{open:a,onClose:l,"aria-labelledby":"form-dialog-title"},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),c({id:t.id,password:u.password}),s(!1),l()}},r.a.createElement(ze.a,null,"\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u043a\u0430 \u043f\u0430\u0440\u043e\u043b\u044f"),r.a.createElement(Pe.a,null,r.a.createElement(ea.a,{id:"alert-dialog-description"},"\u0423\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f - ",t.username),r.a.createElement(Oe.a,{container:!0,spacing:2},r.a.createElement(Oe.a,{item:!0,xs:12},r.a.createElement(We.a,{required:!0,fullWidth:"true",label:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",variant:"outlined",onChange:function(e){return s(Object(Ie.a)(Object(Ie.a)({},u),{},{password:e.currentTarget.value}))},helperText:"\u041d\u0435 \u043c\u0435\u043d\u0435\u0435 \u0432\u043e\u0441\u044c\u043c\u0438 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"})),r.a.createElement(Oe.a,{item:!0,xs:12},r.a.createElement(We.a,{required:!0,fullWidth:"true",label:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",variant:"outlined",helperText:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"})))),r.a.createElement("p",null),r.a.createElement(Me.a,null,r.a.createElement(Re.a,{variant:"contained",onClick:l},"\u041e\u0442\u043c\u0435\u043d\u0430"),r.a.createElement(Re.a,{variant:"contained",type:"submit",color:"primary"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")))))};function xl(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}var wl=[{id:"username",numeric:!1,disablePadding:!0,label:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c",sort:!0},{id:"login",numeric:!1,disablePadding:!1,label:"\u041b\u043e\u0433\u0438\u043d",sort:!0},{id:"status",numeric:!1,disablePadding:!1,label:"\u0421\u0442\u0430\u0442\u0443\u0441",sort:!0},{id:"rights",numeric:!1,disablePadding:!1,label:"\u041f\u0440\u0430\u0432\u0430",sort:!0},{id:"",numeric:!0,disablePadding:!0,label:"Action",sort:!1}];function Cl(e){var t=e.classes,a=e.onSelectAllClick,n=e.order,l=e.orderBy,c=e.numSelected,i=e.rowCount,o=e.onRequestSort;return r.a.createElement(dl.a,null,r.a.createElement(pl.a,null,r.a.createElement(ul.a,{padding:"checkbox"},r.a.createElement(Ut.a,{indeterminate:c>0&&c<i,checked:i>0&&c===i,onChange:a,inputProps:{"aria-label":"select all desserts"}})),wl.map((function(e){return r.a.createElement(ul.a,{key:e.id,align:"center",padding:e.disablePadding?"none":"default"},e.sort?r.a.createElement(bl.a,{active:l===e.id,direction:l===e.id?n:"asc",onClick:(a=e.id,function(e){o(e,a)}),hideSortIcon:!e.sort},e.label,l===e.id?r.a.createElement("span",{className:t.visuallyHidden},"desc"===n?"sorted descending":"sorted ascending"):null):r.a.createElement("span",null,e.label));var a}))))}var kl=Object($.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(cl.e)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},title:{flex:"1 1 100%"}}})),Sl=function(e){var t=kl(),a=e.numSelected,n=e.deleteDelete,l=e.setUserAddOpen;return r.a.createElement(E.a,{className:Object(H.a)(t.root,Object(b.a)({},t.highlight,a>0))},a>0?r.a.createElement(O.a,{className:t.title,color:"inherit",variant:"subtitle1",component:"div"},a," \u0432\u044b\u0431\u0440\u0430\u043d\u043e"):r.a.createElement(O.a,{className:t.title,variant:"h6",id:"tableTitle",component:"div"},"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438"),a>0?r.a.createElement(I.a,{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"},r.a.createElement(v.a,{"aria-label":"delete",onClick:n},r.a.createElement(Ra.a,null))):r.a.createElement(I.a,{title:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"},r.a.createElement(Re.a,{variant:"contained",color:"primary",onClick:function(){return l(!0)}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c")))},Nl=Object($.a)((function(e){return{paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}})),ql=function(e){var t=e.users,a=e.addNewUser,l=e.deleteUsers,c=e.updateUser,i=e.resetPassword,o=e.selects,u=Nl(),s=Object(n.useState)(!1),m=Object(d.a)(s,2),p=m[0],b=m[1],f=Object(n.useState)(!1),E=Object(d.a)(f,2),g=E[0],O=E[1],j=Object(n.useState)(!1),h=Object(d.a)(j,2),y=h[0],x=h[1],w=Object(n.useState)(!1),C=Object(d.a)(w,2),k=C[0],S=C[1],N=Object(n.useState)("asc"),q=Object(d.a)(N,2),$=q[0],F=q[1],A=Object(n.useState)("calories"),T=Object(d.a)(A,2),B=T[0],D=T[1],M=Object(n.useState)([]),P=Object(d.a)(M,2),z=P[0],R=P[1],W=Object(n.useState)(0),L=Object(d.a)(W,2),U=L[0],H=L[1],Q=Object(n.useState)(5),V=Object(d.a)(Q,2),_=V[0],J=V[1];return r.a.createElement(n.Fragment,null,r.a.createElement(jl,{open:g,selects:o,close:function(){return O(!1)},saveNewUser:function(e){a(e),O(!1)}}),r.a.createElement(hl,{data:y,selects:o,open:y,close:function(){return x(!1)},updateUser:function(e){var t=e.id,a=e.data;c({id:t,data:a})}}),r.a.createElement(yl,{data:k,open:k,close:function(){return S(!1)},passReset:function(e){var t=e.id,a=e.password;i({id:t,password:a})}}),r.a.createElement(Qa,{open:p,confirm:function(){l(z),b(!1),R([])},close:function(){return b(!1)},data:{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439(\u044f)?",text:"\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435! \u042d\u0442\u043e \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u044f \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043e\u0442\u043c\u0435\u043d\u0435\u043d\u0430. \u0427\u0430\u0441\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f \u043f\u0440\u0438\u0432\u044f\u0437\u0430\u043d\u044b \u043a \u0443\u0447\u0435\u0442\u043d\u043e\u0439 \u0437\u0430\u043f\u0438\u0441\u0438, \u0431\u0443\u0434\u044c\u0442\u0435 \u0432\u043d\u0438\u043c\u0430\u0442\u0435\u043b\u044c\u043d\u044b."}}),r.a.createElement(Va.a,{className:u.paper},r.a.createElement(Sl,{numSelected:z.length,deleteDelete:b,setUserAddOpen:O}),r.a.createElement(sl.a,null,r.a.createElement(il.a,{className:u.table,"aria-labelledby":"tableTitle",size:"medium","aria-label":"enhanced table"},r.a.createElement(Cl,{classes:u,numSelected:z.length,order:$,orderBy:B,onSelectAllClick:function(e){if(e.target.checked){var a=t.map((function(e){return e.id}));R(a)}else R([])},onRequestSort:function(e,t){F(B===t&&"asc"===$?"desc":"asc"),D(t)},rowCount:t.length}),r.a.createElement(ol.a,null,function(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((function(e){return e[0]}))}(t,function(e,t){return"desc"===e?function(e,a){return xl(e,a,t)}:function(e,a){return-xl(e,a,t)}}($,B)).slice(U*_,U*_+_).map((function(e,t){var a,n=(a=e.id,-1!==z.indexOf(a)),l="enhanced-table-checkbox-".concat(t);return r.a.createElement(pl.a,{hover:!0,role:"checkbox","aria-checked":n,tabIndex:-1,key:e.id,selected:n},r.a.createElement(ul.a,{padding:"checkbox"},r.a.createElement(Ut.a,{checked:n,onClick:function(t){return function(e,t){var a=z.indexOf(t),n=[];-1===a?n=n.concat(z,t):0===a?n=n.concat(z.slice(1)):a===z.length-1?n=n.concat(z.slice(0,-1)):a>0&&(n=n.concat(z.slice(0,a),z.slice(a+1))),R(n)}(0,e.id)},inputProps:{"aria-labelledby":l}})),r.a.createElement(ul.a,{align:"center",component:"th",id:l,scope:"row",padding:"none"},e.username),r.a.createElement(ul.a,{align:"center"},e.login),r.a.createElement(ul.a,{align:"center"},e.status?e.status.title:"-"),r.a.createElement(ul.a,{align:"center"},e.rights?e.rights.title:"-"),r.a.createElement(ul.a,{align:"center",padding:"none"},r.a.createElement(I.a,{title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c"},r.a.createElement(v.a,{onClick:function(t){return function(e,t){x(t)}(0,e)}},r.a.createElement(_t.a,null))),r.a.createElement(I.a,{title:"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"},r.a.createElement(v.a,{onClick:function(t){return function(e,t){S(t)}(0,e)}},r.a.createElement(El.a,null)))))}))))),r.a.createElement(ml.a,{rowsPerPageOptions:[5,10,25],component:"div",count:t.length,rowsPerPage:_,page:U,labelRowsPerPage:"\u0421\u0442\u0440\u043e\u043a:",onChangePage:function(e,t){H(t)},onChangeRowsPerPage:function(e){J(parseInt(e.target.value,10)),H(0)}})))};function $l(){var e=Object(F.a)(["\n  query {\n    userRights {\n      id\n      title\n    }\n    userStatus {\n      id\n      title\n    }\n  }\n"]);return $l=function(){return e},e}function Fl(){var e=Object(F.a)(["\n  query {\n    users {\n      id\n      username\n      login\n      status {\n        id\n        title\n      }\n      rights {\n        id\n        title\n      }\n    }\n  }\n"]);return Fl=function(){return e},e}var Al=Object(D.a)(Fl()),Tl=Object(D.a)($l());function Il(){var e=Object(F.a)(["\n  mutation($id: String, $password: String) {\n    resetPassword(id: $id, password: $password)\n  }\n"]);return Il=function(){return e},e}function Bl(){var e=Object(F.a)(["\n  mutation($users: [String]) {\n    deleteUsers(users: $users) {\n      id\n    }\n  }\n"]);return Bl=function(){return e},e}function Dl(){var e=Object(F.a)(["\n  mutation($id: String, $data: UserDataUpdate) {\n    updateUser(id: $id, data: $data) {\n      id\n      username\n      login\n      status {\n        id\n        title\n      }\n      rights {\n        id\n        title\n      }\n    }\n  }\n"]);return Dl=function(){return e},e}function Ml(){var e=Object(F.a)(["\n  mutation($user: UserDataCreate!) {\n    addNewUser(user: $user) {\n      id\n      username\n      login\n      status {\n        id\n        title\n      }\n      rights {\n        id\n        title\n      }\n    }\n  }\n"]);return Ml=function(){return e},e}var Pl=Object(D.a)(Ml()),zl=Object(D.a)(Dl()),Rl=Object(D.a)(Bl()),Wl=Object(D.a)(Il()),Ll=function(){var e=Object(n.useState)(!1),t=Object(d.a)(e,2),a=t[0],l=t[1],c=Object(Ft.a)(Al),i=c.loading,o=c.error,u=c.data,s=Object(Ft.a)(Tl),m=s.loading,p=s.error,b=s.data,f=Object(M.useMutation)(Rl,{onError:function(e){l({type:"error",text:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c. \u0421\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u043a\u043e\u043d\u0441\u043e\u043b\u044c."}),console.log(e)},update:function(e,t){var a=t.data.deleteUsers;return e.writeQuery({query:Al,data:{users:u.users.filter((function(e){for(var t=0;t<a.length;t++)if(a[t].id===e.id)return!1;return!0}))}})}}),E=Object(d.a)(f,2),g=E[0],v=E[1].loading,O=Object(M.useMutation)(Pl,{onError:function(e){l({type:"error",text:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c. \u0421\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u043a\u043e\u043d\u0441\u043e\u043b\u044c."}),console.log(e)},update:function(e,t){var a=t.data.addNewUser;return e.writeQuery({query:Al,data:{users:[].concat(Object(ue.a)(u.users),[a])}})}}),j=Object(d.a)(O,2),h=j[0],y=j[1].loading,x=Object(M.useMutation)(zl,{onError:function(e){l({type:"error",text:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u043d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c. \u0421\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u043a\u043e\u043d\u0441\u043e\u043b\u044c."}),console.log(e)},update:function(e,t){var a=t.data.updateUser;return e.writeQuery({query:Al,data:{users:u.users.map((function(e){return e.id===a.id?a:e}))}})}}),w=Object(d.a)(x,2),C=w[0],k=w[1].loading,S=Object(M.useMutation)(Wl),N=Object(d.a)(S,1)[0];if(i||m)return r.a.createElement(ot,null);if(o||p)return r.a.createElement(jt,{title:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a",description:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u043a\u0440\u0438\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0435. \u0421\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u043a\u043e\u043d\u0441\u043e\u043b\u044c"});var q=function(){return v||y||k?r.a.createElement(st,null):null};return r.a.createElement(n.Fragment,null,r.a.createElement(bt,{open:a,text:a?a.text:"",type:a?a.type:"",close:function(){return l(!1)}}),r.a.createElement(q,null),r.a.createElement(ql,{users:u.users,selects:b,addNewUser:function(e){h({variables:{user:e}})},deleteUsers:function(e){g({variables:{users:e}})},updateUser:function(e){var t=e.id,a=e.data;C({variables:{id:t,data:a}})},resetPassword:function(e){var t=e.id,a=e.password;N({variables:{id:t,password:a}})}}))},Ul=function(){return r.a.createElement(n.Fragment,null,r.a.createElement(Wt,{title:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438 \u0441\u0438\u0441\u0442\u0435\u043c\u044b"}),r.a.createElement("div",{style:{paddingTop:"10px"}},r.a.createElement(se.a,{maxWidth:"lg"},r.a.createElement(Ll,null))))},Hl=function(){return r.a.createElement(n.Fragment,null,r.a.createElement(jt,{title:"404 \u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430",description:"\u0412\u044b \u0437\u0430\u0431\u043b\u0443\u0434\u0438\u043b\u0438\u0441\u044c. \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0430\u0434\u0440\u0435\u0441"}))},Ql=function(){return r.a.createElement(m.a,null,r.a.createElement(p.c,null,r.a.createElement(p.a,{path:"/",exact:!0,component:Mt}),r.a.createElement(p.a,{path:"/settings/users",exact:!0,component:Ul}),r.a.createElement(p.a,{path:"/results/:id/:code",component:Mn}),r.a.createElement(p.a,{path:"/poll-settings/:id/:code",component:Dr}),r.a.createElement(p.a,{path:"/drive/:id/:code",component:Sa}),r.a.createElement(p.a,{path:"/analyze",component:Zn}),r.a.createElement(p.a,{path:"/attachment/:id/:code",component:Rr}),r.a.createElement(p.a,{path:"/poll-wiki/:id/:code",component:Lr}),r.a.createElement(p.a,{path:"/poll-app-settings",component:ll}),r.a.createElement(p.a,{path:"/tester",component:Xn}),r.a.createElement(p.a,{component:Hl})))},Vl=a(475),_l=a(324),Jl=a.n(_l);function Gl(){return r.a.createElement(O.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ","\u0420\u0418\u0410\u0426i51 ",(new Date).getFullYear())}var Kl=Object($.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},forget:{cursor:"pointer"}}})),Zl=function(e){var t=e.onLogin,a=e.userError,l=e.passwordError,c=Object(n.useState)(""),i=Object(d.a)(c,2),o=i[0],u=i[1],s=Object(n.useState)(""),m=Object(d.a)(s,2),p=m[0],b=m[1],f=Kl();return r.a.createElement(se.a,{component:"main",maxWidth:"xs"},r.a.createElement(Vl.a,null),r.a.createElement("div",{className:f.paper},r.a.createElement(we.a,{className:f.avatar},r.a.createElement(Jl.a,null)),r.a.createElement(O.a,{component:"h1",variant:"h5"},"\u0412\u043e\u0439\u0434\u0438\u0442\u0435 \u0432 \u0441\u0438\u0441\u0442\u0435\u043c\u0443"),r.a.createElement("form",{className:f.form,noValidate:!0},r.a.createElement(We.a,{error:!!a,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"login",label:"\u041b\u043e\u0433\u0438\u043d",name:"login",autoComplete:"login",autoFocus:!0,onChange:function(e){u(e.target.value)},helperText:a}),r.a.createElement(We.a,{error:l,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",id:"password",autoComplete:"current-password",onChange:function(e){b(e.target.value)}}),r.a.createElement(Lt.a,{control:r.a.createElement(Ut.a,{value:"remember",color:"primary"}),label:"\u0417\u0430\u043f\u043e\u043c\u043d\u0438\u0442\u044c \u043c\u0435\u043d\u044f"}),r.a.createElement(Re.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:f.submit,onClick:function(e){e.preventDefault(),(o||p)&&t({login:o,password:p})}},"\u0412\u043e\u0439\u0442\u0438"))),r.a.createElement(ct.a,null,r.a.createElement(Gl,null)))};function Xl(){var e=Object(F.a)(["\n  mutation signup(\n    $login: String!,\n    $password: String!\n  ) {\n    signup(\n      login: $login,\n      password: $password\n    ) {\n      user {\n        id\n        login\n      }\n    }\n  }\n\n"]);return Xl=function(){return e},e}function Yl(){var e=Object(F.a)(["\n  mutation signin(\n    $login: String!,\n    $password: String!\n  ) {\n    signin(\n      login: $login,\n      password: $password\n    ) {\n      user {\n        id\n        login\n      }\n    }\n  }\n"]);return Yl=function(){return e},e}var ec=Object(D.a)(Yl()),tc=(Object(D.a)(Xl()),function(){var e=Object(M.useQuery)(W),t=e.loading,a=e.error,l=e.data,c=Object(n.useState)(null),i=Object(d.a)(c,2),o=i[0],u=i[1],s=Object(n.useState)(null),m=Object(d.a)(s,2),p=m[0],b=m[1],f=Object(M.useMutation)(ec,{onError:function(e){b("\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c"),u(!0)},update:function(e,t){var a=t.data.signin;return e.writeQuery({query:W,data:{currentUser:a.user}})}}),E=Object(d.a)(f,2),g=E[0],v=E[1].loading;if(t)return r.a.createElement(ot,null);if(a)return console.log(JSON.stringify(a)),r.a.createElement(jt,{title:"\u0427\u0442\u043e-\u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a",description:"\u041f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043d\u0435 \u0445\u043e\u0447\u0435\u0442 \u0441\u0442\u0430\u0440\u0442\u043e\u0432\u0430\u0442\u044c, \u0441\u043c\u043e\u0442\u0440\u0438\u0442\u0435 \u043a\u043e\u043d\u0441\u043e\u043b\u044c!"});var O=function(){return v?r.a.createElement(st,null):null};return l.currentUser?r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"App"},r.a.createElement(O,null),r.a.createElement(Ql,null))):r.a.createElement("div",null,r.a.createElement(O,null),r.a.createElement(Zl,{onLogin:function(e){g({variables:e})},userError:p,passwordError:o}))}),ac=new o.a({uri:l+"/graphql",cache:s,credentials:"include",connectToDevTools:!0});i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(u.a,{client:ac},r.a.createElement(tc,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[355,1,2]]]);
//# sourceMappingURL=main.9ac5221a.chunk.js.map